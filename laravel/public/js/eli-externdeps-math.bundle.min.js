require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){},{}],2:[function(require,module,exports){(function(global){"use strict";function typedArraySupport(){try{var arr=new Uint8Array(1);return arr.foo=function(){return 42},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(arg){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof arg?fromNumber(this,arg):"string"==typeof arg?fromString(this,arg,arguments.length>1?arguments[1]:"utf8"):fromObject(this,arg)):arguments.length>1?new Buffer(arg,arguments[1]):new Buffer(arg)}function fromNumber(that,length){if(that=allocate(that,0>length?0:0|checked(length)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;length>i;i++)that[i]=0;return that}function fromString(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");var length=0|byteLength(string,encoding);return that=allocate(that,length),that.write(string,encoding),that}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(null==object)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(object.buffer instanceof ArrayBuffer)return fromTypedArray(that,object);if(object instanceof ArrayBuffer)return fromArrayBuffer(that,object)}return object.length?fromArrayLike(that,object):fromJsonObject(that,object)}function fromBuffer(that,buffer){var length=0|checked(buffer.length);return that=allocate(that,length),buffer.copy(that,0,0,length),that}function fromArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromTypedArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromArrayBuffer(that,array){return array.byteLength,Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(array),that.__proto__=Buffer.prototype):that=fromTypedArray(that,new Uint8Array(array)),that}function fromArrayLike(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function fromJsonObject(that,object){var array,length=0;"Buffer"===object.type&&isArray(object.data)&&(array=object.data,length=0|checked(array.length)),that=allocate(that,length);for(var i=0;length>i;i+=1)that[i]=255&array[i];return that}function allocate(that,length){Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length),that.__proto__=Buffer.prototype):that.length=length;var fromPool=0!==length&&length<=Buffer.poolSize>>>1;return fromPool&&(that.parent=rootParent),that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);return delete buf.parent,buf}function byteLength(string,encoding){"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if(start=0|start,end=void 0===end||end===1/0?this.length:0|end,encoding||(encoding="utf8"),0>start&&(start=0),end>this.length&&(end=this.length),start>=end)return"";for(;;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;length>i;i++){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;end>i;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(end>=i+bytesPerSequence){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:128>firstByte&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],128===(192&secondByte)&&(tempCodePoint=(31&firstByte)<<6|63&secondByte,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128===(192&secondByte)&&128===(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte,tempCodePoint>2047&&(55296>tempCodePoint||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128===(192&secondByte)&&128===(192&thirdByte)&&128===(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte,tempCodePoint>65535&&1114112>tempCodePoint&&(codePoint=tempCodePoint))}}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(MAX_ARGUMENTS_LENGTH>=len)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;len>i;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(127&buf[i]);return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||0>start)&&(start=0),(!end||0>end||end>len)&&(end=len);for(var out="",i=start;end>i;i++)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!==0||0>offset)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||min>value)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){0>value&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);j>i;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){0>value&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);j>i;i++)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("index out of range");if(0>offset)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){if(str=stringtrim(str).replace(INVALID_BASE64_RE,""),str.length<2)return"";for(;str.length%4!==0;)str+="=";return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function toHex(n){return 16>n?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;length>i;i++){if(codePoint=string.charCodeAt(i),codePoint>55295&&57344>codePoint){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(56320>codePoint){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,128>codePoint){if((units-=1)<0)break;bytes.push(codePoint)}else if(2048>codePoint){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(65536>codePoint){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(1114112>codePoint))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);i++)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;length>i&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);len>i;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return y>x?-1:x>y?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(0===list.length)return new Buffer(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;i++)length+=list[i].length;var buf=new Buffer(length),pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos),pos+=item.length}return buf},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return Buffer.compare(this,b)},Buffer.prototype.indexOf=function(val,byteOffset){function arrayIndexOf(arr,val,byteOffset){for(var foundIndex=-1,i=0;byteOffset+i<arr.length;i++)if(arr[byteOffset+i]===val[-1===foundIndex?0:i-foundIndex]){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===val.length)return byteOffset+foundIndex}else foundIndex=-1;return-1}if(byteOffset>2147483647?byteOffset=2147483647:-2147483648>byteOffset&&(byteOffset=-2147483648),byteOffset>>=0,0===this.length)return-1;if(byteOffset>=this.length)return-1;if(0>byteOffset&&(byteOffset=Math.max(this.length+byteOffset,0)),"string"==typeof val)return 0===val.length?-1:String.prototype.indexOf.call(this,val,byteOffset);if(Buffer.isBuffer(val))return arrayIndexOf(this,val,byteOffset);if("number"==typeof val)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,val,byteOffset):arrayIndexOf(this,[val],byteOffset);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else if(isFinite(offset))offset=0|offset,isFinite(length)?(length=0|length,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0);else{var swap=encoding;encoding=offset,offset=0|length,length=swap}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(0>length||0>offset)||offset>this.length)throw new RangeError("attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start,end=void 0===end?len:~~end,0>start?(start+=len,0>start&&(start=0)):start>len&&(start=len),0>end?(end+=len,0>end&&(end=0)):end>len&&(end=len),start>end&&(end=start);var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT)newBuf=this.subarray(start,end),newBuf.__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;sliceLen>i;i++)newBuf[i]=this[i+start]}return newBuf.length&&(newBuf.parent=this.parent||this),newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){value=+value,offset=0|offset,byteLength=0|byteLength,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){value=+value,offset=0|offset,byteLength=0|byteLength,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0>value?1:0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0>value?1:0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),0>value&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),0>value&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&start>end&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(0>targetStart)throw new RangeError("targetStart out of bounds");if(0>start||start>=this.length)throw new RangeError("sourceStart out of bounds");if(0>end)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&targetStart>start&&end>targetStart)for(i=len-1;i>=0;i--)target[i+targetStart]=this[i+start];else if(1e3>len||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;len>i;i++)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(value,start,end){if(value||(value=0),start||(start=0),end||(end=this.length),start>end)throw new RangeError("end < start");if(end!==start&&0!==this.length){if(0>start||start>=this.length)throw new RangeError("start out of bounds");if(0>end||end>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof value)for(i=start;end>i;i++)this[i]=value;else{var bytes=utf8ToBytes(value.toString()),len=bytes.length;for(i=start;end>i;i++)this[i]=bytes[i%len]}return this}};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":3,ieee754:4,isarray:5}],3:[function(require,module,exports){"use strict";function init(){for(var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;len>i;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(b64){var i,j,l,tmp,placeHolders,arr,len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");placeHolders="="===b64[len-2]?2:"="===b64[len-1]?1:0,arr=new Arr(3*len/4-placeHolders),l=placeHolders>0?len-4:len;var L=0;for(i=0,j=0;l>i;i+=4,j+=3)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[L++]=tmp>>16&255,arr[L++]=tmp>>8&255,arr[L++]=255&tmp;return 2===placeHolders?(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[L++]=255&tmp):1===placeHolders&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[L++]=tmp>>8&255,arr[L++]=255&tmp),arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i=start;end>i;i+=3)tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output.push(tripletToBase64(tmp));return output.join("")}function fromByteArray(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,output="",parts=[],maxChunkLength=16383,i=0,len2=len-extraBytes;len2>i;i+=maxChunkLength)parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));return 1===extraBytes?(tmp=uint8[len-1],output+=lookup[tmp>>2],output+=lookup[tmp<<4&63],output+="=="):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],output+=lookup[tmp>>10],output+=lookup[tmp>>4&63],output+=lookup[tmp<<2&63],output+="="),parts.push(output),parts.join("")}exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array;init()},{}],4:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*(1/0);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=0>value||0===value&&0>1/value?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],5:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},{}],6:[function(require,module,exports){"use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=require("randombytes"),exports.createHash=exports.Hash=require("create-hash"),exports.createHmac=exports.Hmac=require("create-hmac");var hashes=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(require("browserify-sign/algos")));exports.getHashes=function(){return hashes};var p=require("pbkdf2");exports.pbkdf2=p.pbkdf2,exports.pbkdf2Sync=p.pbkdf2Sync;var aes=require("browserify-cipher");["Cipher","createCipher","Cipheriv","createCipheriv","Decipher","createDecipher","Decipheriv","createDecipheriv","getCiphers","listCiphers"].forEach(function(key){exports[key]=aes[key]});var dh=require("diffie-hellman");["DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman"].forEach(function(key){exports[key]=dh[key]});var sign=require("browserify-sign");["createSign","Sign","createVerify","Verify"].forEach(function(key){exports[key]=sign[key]}),exports.createECDH=require("create-ecdh");var publicEncrypt=require("public-encrypt");["publicEncrypt","privateEncrypt","publicDecrypt","privateDecrypt"].forEach(function(key){exports[key]=publicEncrypt[key]}),["createCredentials"].forEach(function(name){exports[name]=function(){throw new Error(["sorry, "+name+" is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))}})},{"browserify-cipher":7,"browserify-sign":37,"browserify-sign/algos":36,"create-ecdh":104,"create-hash":130,"create-hmac":143,"diffie-hellman":144,pbkdf2:151,"public-encrypt":152,randombytes:197}],7:[function(require,module,exports){function createCipher(suite,password){var keyLen,ivLen;if(suite=suite.toLowerCase(),aesModes[suite])keyLen=aesModes[suite].key,ivLen=aesModes[suite].iv;else{if(!desModes[suite])throw new TypeError("invalid suite type");keyLen=8*desModes[suite].key,
ivLen=desModes[suite].iv}var keys=ebtk(password,!1,keyLen,ivLen);return createCipheriv(suite,keys.key,keys.iv)}function createDecipher(suite,password){var keyLen,ivLen;if(suite=suite.toLowerCase(),aesModes[suite])keyLen=aesModes[suite].key,ivLen=aesModes[suite].iv;else{if(!desModes[suite])throw new TypeError("invalid suite type");keyLen=8*desModes[suite].key,ivLen=desModes[suite].iv}var keys=ebtk(password,!1,keyLen,ivLen);return createDecipheriv(suite,keys.key,keys.iv)}function createCipheriv(suite,key,iv){if(suite=suite.toLowerCase(),aesModes[suite])return aes.createCipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite});throw new TypeError("invalid suite type")}function createDecipheriv(suite,key,iv){if(suite=suite.toLowerCase(),aesModes[suite])return aes.createDecipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}var ebtk=require("evp_bytestokey"),aes=require("browserify-aes/browser"),DES=require("browserify-des"),desModes=require("browserify-des/modes"),aesModes=require("browserify-aes/modes");exports.createCipher=exports.Cipher=createCipher,exports.createCipheriv=exports.Cipheriv=createCipheriv,exports.createDecipher=exports.Decipher=createDecipher,exports.createDecipheriv=exports.Decipheriv=createDecipheriv,exports.listCiphers=exports.getCiphers=getCiphers},{"browserify-aes/browser":10,"browserify-aes/modes":14,"browserify-des":25,"browserify-des/modes":26,evp_bytestokey:35}],8:[function(require,module,exports){(function(Buffer){function fixup_uint32(x){var ret,x_pos;return ret=x>uint_max||0>x?(x_pos=Math.abs(x)%uint_max,0>x?uint_max-x_pos:x_pos):x}function scrub_vec(v){for(var i=0;i<v.length;v++)v[i]=0;return!1}function Global(){this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=[[],[],[],[]],this.INV_SUB_MIX=[[],[],[],[]],this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function bufferToArray(buf){for(var len=buf.length/4,out=new Array(len),i=-1;++i<len;)out[i]=buf.readUInt32BE(4*i);return out}function AES(key){this._key=bufferToArray(key),this._doReset()}var uint_max=Math.pow(2,32);Global.prototype.init=function(){var d,i,sx,t,x,x2,x4,x8,xi,_i;for(d=function(){var _i,_results;for(_results=[],i=_i=0;256>_i;i=++_i)128>i?_results.push(i<<1):_results.push(i<<1^283);return _results}(),x=0,xi=0,i=_i=0;256>_i;i=++_i)sx=xi^xi<<1^xi<<2^xi<<3^xi<<4,sx=sx>>>8^255&sx^99,this.SBOX[x]=sx,this.INV_SBOX[sx]=x,x2=d[x],x4=d[x2],x8=d[x4],t=257*d[sx]^16843008*sx,this.SUB_MIX[0][x]=t<<24|t>>>8,this.SUB_MIX[1][x]=t<<16|t>>>16,this.SUB_MIX[2][x]=t<<8|t>>>24,this.SUB_MIX[3][x]=t,t=16843009*x8^65537*x4^257*x2^16843008*x,this.INV_SUB_MIX[0][sx]=t<<24|t>>>8,this.INV_SUB_MIX[1][sx]=t<<16|t>>>16,this.INV_SUB_MIX[2][sx]=t<<8|t>>>24,this.INV_SUB_MIX[3][sx]=t,0===x?x=xi=1:(x=x2^d[d[d[x8^x2]]],xi^=d[d[xi]]);return!0};var G=new Global;AES.blockSize=16,AES.prototype.blockSize=AES.blockSize,AES.keySize=32,AES.prototype.keySize=AES.keySize,AES.prototype._doReset=function(){var invKsRow,keySize,keyWords,ksRow,ksRows,t;for(keyWords=this._key,keySize=keyWords.length,this._nRounds=keySize+6,ksRows=4*(this._nRounds+1),this._keySchedule=[],ksRow=0;ksRows>ksRow;ksRow++)this._keySchedule[ksRow]=keySize>ksRow?keyWords[ksRow]:(t=this._keySchedule[ksRow-1],ksRow%keySize===0?(t=t<<8|t>>>24,t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[255&t],t^=G.RCON[ksRow/keySize|0]<<24):keySize>6&&ksRow%keySize===4?t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[255&t]:void 0,this._keySchedule[ksRow-keySize]^t);for(this._invKeySchedule=[],invKsRow=0;ksRows>invKsRow;invKsRow++)ksRow=ksRows-invKsRow,t=this._keySchedule[ksRow-(invKsRow%4?0:4)],this._invKeySchedule[invKsRow]=4>invKsRow||4>=ksRow?t:G.INV_SUB_MIX[0][G.SBOX[t>>>24]]^G.INV_SUB_MIX[1][G.SBOX[t>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[t>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[255&t]];return!0},AES.prototype.encryptBlock=function(M){M=bufferToArray(new Buffer(M));var out=this._doCryptBlock(M,this._keySchedule,G.SUB_MIX,G.SBOX),buf=new Buffer(16);return buf.writeUInt32BE(out[0],0),buf.writeUInt32BE(out[1],4),buf.writeUInt32BE(out[2],8),buf.writeUInt32BE(out[3],12),buf},AES.prototype.decryptBlock=function(M){M=bufferToArray(new Buffer(M));var temp=[M[3],M[1]];M[1]=temp[0],M[3]=temp[1];var out=this._doCryptBlock(M,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX),buf=new Buffer(16);return buf.writeUInt32BE(out[0],0),buf.writeUInt32BE(out[3],4),buf.writeUInt32BE(out[2],8),buf.writeUInt32BE(out[1],12),buf},AES.prototype.scrub=function(){scrub_vec(this._keySchedule),scrub_vec(this._invKeySchedule),scrub_vec(this._key)},AES.prototype._doCryptBlock=function(M,keySchedule,SUB_MIX,SBOX){var ksRow,s0,s1,s2,s3,t0,t1,t2,t3;s0=M[0]^keySchedule[0],s1=M[1]^keySchedule[1],s2=M[2]^keySchedule[2],s3=M[3]^keySchedule[3],ksRow=4;for(var round=1;round<this._nRounds;round++)t0=SUB_MIX[0][s0>>>24]^SUB_MIX[1][s1>>>16&255]^SUB_MIX[2][s2>>>8&255]^SUB_MIX[3][255&s3]^keySchedule[ksRow++],t1=SUB_MIX[0][s1>>>24]^SUB_MIX[1][s2>>>16&255]^SUB_MIX[2][s3>>>8&255]^SUB_MIX[3][255&s0]^keySchedule[ksRow++],t2=SUB_MIX[0][s2>>>24]^SUB_MIX[1][s3>>>16&255]^SUB_MIX[2][s0>>>8&255]^SUB_MIX[3][255&s1]^keySchedule[ksRow++],t3=SUB_MIX[0][s3>>>24]^SUB_MIX[1][s0>>>16&255]^SUB_MIX[2][s1>>>8&255]^SUB_MIX[3][255&s2]^keySchedule[ksRow++],s0=t0,s1=t1,s2=t2,s3=t3;return t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&255]<<16|SBOX[s2>>>8&255]<<8|SBOX[255&s3])^keySchedule[ksRow++],t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&255]<<16|SBOX[s3>>>8&255]<<8|SBOX[255&s0])^keySchedule[ksRow++],t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&255]<<16|SBOX[s0>>>8&255]<<8|SBOX[255&s1])^keySchedule[ksRow++],t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&255]<<16|SBOX[s1>>>8&255]<<8|SBOX[255&s2])^keySchedule[ksRow++],[fixup_uint32(t0),fixup_uint32(t1),fixup_uint32(t2),fixup_uint32(t3)]},exports.AES=AES}).call(this,require("buffer").Buffer)},{buffer:2}],9:[function(require,module,exports){(function(Buffer){function StreamCipher(mode,key,iv,decrypt){if(!(this instanceof StreamCipher))return new StreamCipher(mode,key,iv);Transform.call(this),this._finID=Buffer.concat([iv,new Buffer([0,0,0,1])]),iv=Buffer.concat([iv,new Buffer([0,0,0,2])]),this._cipher=new aes.AES(key),this._prev=new Buffer(iv.length),this._cache=new Buffer(""),this._secCache=new Buffer(""),this._decrypt=decrypt,this._alen=0,this._len=0,iv.copy(this._prev),this._mode=mode;var h=new Buffer(4);h.fill(0),this._ghash=new GHASH(this._cipher.encryptBlock(h)),this._authTag=null,this._called=!1}function xorTest(a,b){var out=0;a.length!==b.length&&out++;for(var len=Math.min(a.length,b.length),i=-1;++i<len;)out+=a[i]^b[i];return out}var aes=require("./aes"),Transform=require("cipher-base"),inherits=require("inherits"),GHASH=require("./ghash"),xor=require("buffer-xor");inherits(StreamCipher,Transform),module.exports=StreamCipher,StreamCipher.prototype._update=function(chunk){if(!this._called&&this._alen){var rump=16-this._alen%16;16>rump&&(rump=new Buffer(rump),rump.fill(0),this._ghash.update(rump))}this._called=!0;var out=this._mode.encrypt(this,chunk);return this._decrypt?this._ghash.update(chunk):this._ghash.update(out),this._len+=chunk.length,out},StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var tag=xor(this._ghash["final"](8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(xorTest(tag,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=tag;this._cipher.scrub()},StreamCipher.prototype.getAuthTag=function(){if(!this._decrypt&&Buffer.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},StreamCipher.prototype.setAuthTag=function(tag){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=tag},StreamCipher.prototype.setAAD=function(buf){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(buf),this._alen+=buf.length}}).call(this,require("buffer").Buffer)},{"./aes":8,"./ghash":13,buffer:2,"buffer-xor":22,"cipher-base":23,inherits:199}],10:[function(require,module,exports){function getCiphers(){return Object.keys(modes)}var ciphers=require("./encrypter");exports.createCipher=exports.Cipher=ciphers.createCipher,exports.createCipheriv=exports.Cipheriv=ciphers.createCipheriv;var deciphers=require("./decrypter");exports.createDecipher=exports.Decipher=deciphers.createDecipher,exports.createDecipheriv=exports.Decipheriv=deciphers.createDecipheriv;var modes=require("./modes");exports.listCiphers=exports.getCiphers=getCiphers},{"./decrypter":11,"./encrypter":12,"./modes":14}],11:[function(require,module,exports){(function(Buffer){function Decipher(mode,key,iv){return this instanceof Decipher?(Transform.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes.AES(key),this._prev=new Buffer(iv.length),iv.copy(this._prev),this._mode=mode,void(this._autopadding=!0)):new Decipher(mode,key,iv)}function Splitter(){return this instanceof Splitter?void(this.cache=new Buffer("")):new Splitter}function unpad(last){for(var padded=last[15],i=-1;++i<padded;)if(last[i+(16-padded)]!==padded)throw new Error("unable to decrypt data");return 16!==padded?last.slice(0,16-padded):void 0}function createDecipheriv(suite,password,iv){var config=modes[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");if("string"==typeof iv&&(iv=new Buffer(iv)),"string"==typeof password&&(password=new Buffer(password)),password.length!==config.key/8)throw new TypeError("invalid key length "+password.length);if(iv.length!==config.iv)throw new TypeError("invalid iv length "+iv.length);return"stream"===config.type?new StreamCipher(modelist[config.mode],password,iv,!0):"auth"===config.type?new AuthCipher(modelist[config.mode],password,iv,!0):new Decipher(modelist[config.mode],password,iv)}function createDecipher(suite,password){var config=modes[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");var keys=ebtk(password,!1,config.key,config.iv);return createDecipheriv(suite,keys.key,keys.iv)}var aes=require("./aes"),Transform=require("cipher-base"),inherits=require("inherits"),modes=require("./modes"),StreamCipher=require("./streamCipher"),AuthCipher=require("./authCipher"),ebtk=require("evp_bytestokey");inherits(Decipher,Transform),Decipher.prototype._update=function(data){this._cache.add(data);for(var chunk,thing,out=[];chunk=this._cache.get(this._autopadding);)thing=this._mode.decrypt(this,chunk),out.push(thing);return Buffer.concat(out)},Decipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,chunk));if(chunk)throw new Error("data not multiple of block length")},Decipher.prototype.setAutoPadding=function(setTo){return this._autopadding=!!setTo,this},Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])},Splitter.prototype.get=function(autoPadding){var out;if(autoPadding){if(this.cache.length>16)return out=this.cache.slice(0,16),this.cache=this.cache.slice(16),out}else if(this.cache.length>=16)return out=this.cache.slice(0,16),this.cache=this.cache.slice(16),out;return null},Splitter.prototype.flush=function(){return this.cache.length?this.cache:void 0};var modelist={ECB:require("./modes/ecb"),CBC:require("./modes/cbc"),CFB:require("./modes/cfb"),CFB8:require("./modes/cfb8"),CFB1:require("./modes/cfb1"),OFB:require("./modes/ofb"),CTR:require("./modes/ctr"),GCM:require("./modes/ctr")};exports.createDecipher=createDecipher,exports.createDecipheriv=createDecipheriv}).call(this,require("buffer").Buffer)},{"./aes":8,"./authCipher":9,"./modes":14,"./modes/cbc":15,"./modes/cfb":16,"./modes/cfb1":17,"./modes/cfb8":18,"./modes/ctr":19,"./modes/ecb":20,"./modes/ofb":21,"./streamCipher":24,buffer:2,"cipher-base":23,evp_bytestokey:35,inherits:199}],12:[function(require,module,exports){(function(Buffer){function Cipher(mode,key,iv){return this instanceof Cipher?(Transform.call(this),this._cache=new Splitter,this._cipher=new aes.AES(key),this._prev=new Buffer(iv.length),iv.copy(this._prev),this._mode=mode,void(this._autopadding=!0)):new Cipher(mode,key,iv)}function Splitter(){return this instanceof Splitter?void(this.cache=new Buffer("")):new Splitter}function createCipheriv(suite,password,iv){var config=modes[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");if("string"==typeof iv&&(iv=new Buffer(iv)),"string"==typeof password&&(password=new Buffer(password)),password.length!==config.key/8)throw new TypeError("invalid key length "+password.length);if(iv.length!==config.iv)throw new TypeError("invalid iv length "+iv.length);return"stream"===config.type?new StreamCipher(modelist[config.mode],password,iv):"auth"===config.type?new AuthCipher(modelist[config.mode],password,iv):new Cipher(modelist[config.mode],password,iv)}function createCipher(suite,password){var config=modes[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");var keys=ebtk(password,!1,config.key,config.iv);return createCipheriv(suite,keys.key,keys.iv)}var aes=require("./aes"),Transform=require("cipher-base"),inherits=require("inherits"),modes=require("./modes"),ebtk=require("evp_bytestokey"),StreamCipher=require("./streamCipher"),AuthCipher=require("./authCipher");inherits(Cipher,Transform),Cipher.prototype._update=function(data){this._cache.add(data);for(var chunk,thing,out=[];chunk=this._cache.get();)thing=this._mode.encrypt(this,chunk),out.push(thing);return Buffer.concat(out)},Cipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding)return chunk=this._mode.encrypt(this,chunk),this._cipher.scrub(),chunk;if("10101010101010101010101010101010"!==chunk.toString("hex"))throw this._cipher.scrub(),new Error("data not multiple of block length")},Cipher.prototype.setAutoPadding=function(setTo){return this._autopadding=!!setTo,this},Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])},Splitter.prototype.get=function(){if(this.cache.length>15){var out=this.cache.slice(0,16);return this.cache=this.cache.slice(16),out}return null},Splitter.prototype.flush=function(){for(var len=16-this.cache.length,padBuff=new Buffer(len),i=-1;++i<len;)padBuff.writeUInt8(len,i);var out=Buffer.concat([this.cache,padBuff]);return out};var modelist={ECB:require("./modes/ecb"),CBC:require("./modes/cbc"),CFB:require("./modes/cfb"),CFB8:require("./modes/cfb8"),CFB1:require("./modes/cfb1"),OFB:require("./modes/ofb"),CTR:require("./modes/ctr"),GCM:require("./modes/ctr")};exports.createCipheriv=createCipheriv,exports.createCipher=createCipher}).call(this,require("buffer").Buffer)},{"./aes":8,"./authCipher":9,"./modes":14,"./modes/cbc":15,"./modes/cfb":16,"./modes/cfb1":17,"./modes/cfb8":18,"./modes/ctr":19,"./modes/ecb":20,"./modes/ofb":21,"./streamCipher":24,buffer:2,"cipher-base":23,evp_bytestokey:35,inherits:199}],13:[function(require,module,exports){(function(Buffer){function GHASH(key){this.h=key,this.state=new Buffer(16),this.state.fill(0),this.cache=new Buffer("")}function toArray(buf){return[buf.readUInt32BE(0),buf.readUInt32BE(4),buf.readUInt32BE(8),buf.readUInt32BE(12)]}function fromArray(out){out=out.map(fixup_uint32);var buf=new Buffer(16);return buf.writeUInt32BE(out[0],0),buf.writeUInt32BE(out[1],4),buf.writeUInt32BE(out[2],8),buf.writeUInt32BE(out[3],12),buf}function fixup_uint32(x){var ret,x_pos;return ret=x>uint_max||0>x?(x_pos=Math.abs(x)%uint_max,0>x?uint_max-x_pos:x_pos):x}function xor(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}var zeros=new Buffer(16);zeros.fill(0),module.exports=GHASH,GHASH.prototype.ghash=function(block){for(var i=-1;++i<block.length;)this.state[i]^=block[i];this._multiply()},GHASH.prototype._multiply=function(){for(var j,xi,lsb_Vi,Vi=toArray(this.h),Zi=[0,0,0,0],i=-1;++i<128;){for(xi=0!==(this.state[~~(i/8)]&1<<7-i%8),xi&&(Zi=xor(Zi,Vi)),lsb_Vi=0!==(1&Vi[3]),j=3;j>0;j--)Vi[j]=Vi[j]>>>1|(1&Vi[j-1])<<31;Vi[0]=Vi[0]>>>1,lsb_Vi&&(Vi[0]=Vi[0]^225<<24)}this.state=fromArray(Zi)},GHASH.prototype.update=function(buf){this.cache=Buffer.concat([this.cache,buf]);for(var chunk;this.cache.length>=16;)chunk=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(chunk)},GHASH.prototype["final"]=function(abl,bl){return this.cache.length&&this.ghash(Buffer.concat([this.cache,zeros],16)),this.ghash(fromArray([0,abl,0,bl])),this.state};var uint_max=Math.pow(2,32)}).call(this,require("buffer").Buffer)},{buffer:2}],14:[function(require,module,exports){exports["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},exports["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},exports["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},exports["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},exports["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},exports["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},exports.aes128=exports["aes-128-cbc"],exports.aes192=exports["aes-192-cbc"],exports.aes256=exports["aes-256-cbc"],exports["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},exports["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},exports["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},exports["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},exports["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},exports["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},exports["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},exports["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},exports["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},exports["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},exports["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},exports["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},exports["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},exports["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},exports["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},exports["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},exports["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},exports["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],15:[function(require,module,exports){var xor=require("buffer-xor");exports.encrypt=function(self,block){var data=xor(block,self._prev);return self._prev=self._cipher.encryptBlock(data),self._prev},exports.decrypt=function(self,block){var pad=self._prev;self._prev=block;var out=self._cipher.decryptBlock(block);return xor(out,pad)}},{"buffer-xor":22}],16:[function(require,module,exports){(function(Buffer){function encryptStart(self,data,decrypt){var len=data.length,out=xor(data,self._cache);return self._cache=self._cache.slice(len),self._prev=Buffer.concat([self._prev,decrypt?data:out]),out}var xor=require("buffer-xor");exports.encrypt=function(self,data,decrypt){for(var len,out=new Buffer("");data.length;){if(0===self._cache.length&&(self._cache=self._cipher.encryptBlock(self._prev),self._prev=new Buffer("")),!(self._cache.length<=data.length)){out=Buffer.concat([out,encryptStart(self,data,decrypt)]);break}len=self._cache.length,out=Buffer.concat([out,encryptStart(self,data.slice(0,len),decrypt)]),data=data.slice(len)}return out}}).call(this,require("buffer").Buffer)},{buffer:2,"buffer-xor":22}],17:[function(require,module,exports){(function(Buffer){function encryptByte(self,byteParam,decrypt){for(var pad,bit,value,i=-1,len=8,out=0;++i<len;)pad=self._cipher.encryptBlock(self._prev),bit=byteParam&1<<7-i?128:0,value=pad[0]^bit,out+=(128&value)>>i%8,self._prev=shiftIn(self._prev,decrypt?bit:value);return out}function shiftIn(buffer,value){var len=buffer.length,i=-1,out=new Buffer(buffer.length);for(buffer=Buffer.concat([buffer,new Buffer([value])]);++i<len;)out[i]=buffer[i]<<1|buffer[i+1]>>7;return out}exports.encrypt=function(self,chunk,decrypt){for(var len=chunk.length,out=new Buffer(len),i=-1;++i<len;)out[i]=encryptByte(self,chunk[i],decrypt);return out}}).call(this,require("buffer").Buffer)},{buffer:2}],18:[function(require,module,exports){(function(Buffer){function encryptByte(self,byteParam,decrypt){var pad=self._cipher.encryptBlock(self._prev),out=pad[0]^byteParam;return self._prev=Buffer.concat([self._prev.slice(1),new Buffer([decrypt?byteParam:out])]),out}exports.encrypt=function(self,chunk,decrypt){for(var len=chunk.length,out=new Buffer(len),i=-1;++i<len;)out[i]=encryptByte(self,chunk[i],decrypt);return out}}).call(this,require("buffer").Buffer)},{buffer:2}],19:[function(require,module,exports){(function(Buffer){function incr32(iv){for(var item,len=iv.length;len--;){if(item=iv.readUInt8(len),255!==item){item++,iv.writeUInt8(item,len);break}iv.writeUInt8(0,len)}}function getBlock(self){var out=self._cipher.encryptBlock(self._prev);return incr32(self._prev),out}var xor=require("buffer-xor");exports.encrypt=function(self,chunk){for(;self._cache.length<chunk.length;)self._cache=Buffer.concat([self._cache,getBlock(self)]);var pad=self._cache.slice(0,chunk.length);return self._cache=self._cache.slice(chunk.length),xor(chunk,pad)}}).call(this,require("buffer").Buffer)},{buffer:2,"buffer-xor":22}],20:[function(require,module,exports){exports.encrypt=function(self,block){return self._cipher.encryptBlock(block)},exports.decrypt=function(self,block){return self._cipher.decryptBlock(block)}},{}],21:[function(require,module,exports){(function(Buffer){function getBlock(self){return self._prev=self._cipher.encryptBlock(self._prev),self._prev}var xor=require("buffer-xor");exports.encrypt=function(self,chunk){for(;self._cache.length<chunk.length;)self._cache=Buffer.concat([self._cache,getBlock(self)]);var pad=self._cache.slice(0,chunk.length);return self._cache=self._cache.slice(chunk.length),xor(chunk,pad)}}).call(this,require("buffer").Buffer)},{buffer:2,"buffer-xor":22}],22:[function(require,module,exports){(function(Buffer){module.exports=function(a,b){for(var length=Math.min(a.length,b.length),buffer=new Buffer(length),i=0;length>i;++i)buffer[i]=a[i]^b[i];return buffer}}).call(this,require("buffer").Buffer)},{buffer:2}],23:[function(require,module,exports){(function(Buffer){function CipherBase(hashMode){Transform.call(this),this.hashMode="string"==typeof hashMode,this.hashMode?this[hashMode]=this._finalOrDigest:this["final"]=this._finalOrDigest,this._decoder=null,this._encoding=null}var Transform=require("stream").Transform,inherits=require("inherits"),StringDecoder=require("string_decoder").StringDecoder;module.exports=CipherBase,inherits(CipherBase,Transform),CipherBase.prototype.update=function(data,inputEnc,outputEnc){"string"==typeof data&&(data=new Buffer(data,inputEnc));var outData=this._update(data);return this.hashMode?this:(outputEnc&&(outData=this._toString(outData,outputEnc)),outData)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase.prototype._transform=function(data,_,next){var err;try{this.hashMode?this._update(data):this.push(this._update(data))}catch(e){err=e}finally{next(err)}},CipherBase.prototype._flush=function(done){var err;try{this.push(this._final())}catch(e){err=e}finally{done(err)}},CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this._final()||new Buffer("");return outputEnc&&(outData=this._toString(outData,outputEnc,!0)),outData},CipherBase.prototype._toString=function(value,enc,final){if(this._decoder||(this._decoder=new StringDecoder(enc),this._encoding=enc),this._encoding!==enc)throw new Error("can't switch encodings");var out=this._decoder.write(value);return final&&(out+=this._decoder.end()),out}}).call(this,require("buffer").Buffer)},{buffer:2,inherits:199,stream:216,string_decoder:217}],24:[function(require,module,exports){(function(Buffer){function StreamCipher(mode,key,iv,decrypt){return this instanceof StreamCipher?(Transform.call(this),this._cipher=new aes.AES(key),this._prev=new Buffer(iv.length),this._cache=new Buffer(""),this._secCache=new Buffer(""),this._decrypt=decrypt,iv.copy(this._prev),void(this._mode=mode)):new StreamCipher(mode,key,iv)}var aes=require("./aes"),Transform=require("cipher-base"),inherits=require("inherits");inherits(StreamCipher,Transform),module.exports=StreamCipher,StreamCipher.prototype._update=function(chunk){return this._mode.encrypt(this,chunk,this._decrypt)},StreamCipher.prototype._final=function(){this._cipher.scrub()}}).call(this,require("buffer").Buffer)},{"./aes":8,buffer:2,"cipher-base":23,inherits:199}],25:[function(require,module,exports){(function(Buffer){function DES(opts){CipherBase.call(this);var type,modeName=opts.mode.toLowerCase(),mode=modes[modeName];type=opts.decrypt?"decrypt":"encrypt";var key=opts.key;"des-ede"!==modeName&&"des-ede-cbc"!==modeName||(key=Buffer.concat([key,key.slice(0,8)]));var iv=opts.iv;this._des=mode.create({key:key,iv:iv,type:type})}var CipherBase=require("cipher-base"),des=require("des.js"),inherits=require("inherits"),modes={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes.des=modes["des-cbc"],modes.des3=modes["des-ede3-cbc"],module.exports=DES,inherits(DES,CipherBase),DES.prototype._update=function(data){return new Buffer(this._des.update(data))},DES.prototype._final=function(){return new Buffer(this._des["final"]())}}).call(this,require("buffer").Buffer)},{buffer:2,"cipher-base":27,"des.js":28,inherits:199}],26:[function(require,module,exports){exports["des-ecb"]={key:8,iv:0},exports["des-cbc"]=exports.des={key:8,iv:8},exports["des-ede3-cbc"]=exports.des3={key:24,iv:8},exports["des-ede3"]={key:24,iv:0},exports["des-ede-cbc"]={key:16,iv:8},exports["des-ede"]={key:16,iv:0}},{}],27:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{buffer:2,dup:23,inherits:199,stream:216,string_decoder:217}],28:[function(require,module,exports){"use strict";exports.utils=require("./des/utils"),exports.Cipher=require("./des/cipher"),exports.DES=require("./des/des"),exports.CBC=require("./des/cbc"),exports.EDE=require("./des/ede")},{"./des/cbc":29,"./des/cipher":30,"./des/des":31,"./des/ede":32,"./des/utils":33}],29:[function(require,module,exports){"use strict";function CBCState(iv){assert.equal(iv.length,8,"Invalid IV length"),this.iv=new Array(8);for(var i=0;i<this.iv.length;i++)this.iv[i]=iv[i]}function instantiate(Base){function CBC(options){Base.call(this,options),this._cbcInit()}inherits(CBC,Base);for(var keys=Object.keys(proto),i=0;i<keys.length;i++){var key=keys[i];CBC.prototype[key]=proto[key]}return CBC.create=function(options){return new CBC(options)},CBC}var assert=require("minimalistic-assert"),inherits=require("inherits"),proto={};exports.instantiate=instantiate,proto._cbcInit=function(){var state=new CBCState(this.options.iv);this._cbcState=state},proto._update=function(inp,inOff,out,outOff){var state=this._cbcState,superProto=this.constructor.super_.prototype,iv=state.iv;if("encrypt"===this.type){for(var i=0;i<this.blockSize;i++)iv[i]^=inp[inOff+i];superProto._update.call(this,iv,0,out,outOff);for(var i=0;i<this.blockSize;i++)iv[i]=out[outOff+i]}else{superProto._update.call(this,inp,inOff,out,outOff);for(var i=0;i<this.blockSize;i++)out[outOff+i]^=iv[i];for(var i=0;i<this.blockSize;i++)iv[i]=inp[inOff+i]}}},{inherits:199,"minimalistic-assert":34}],30:[function(require,module,exports){"use strict";function Cipher(options){this.options=options,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var assert=require("minimalistic-assert");module.exports=Cipher,Cipher.prototype._init=function(){},Cipher.prototype.update=function(data){return 0===data.length?[]:"decrypt"===this.type?this._updateDecrypt(data):this._updateEncrypt(data)},Cipher.prototype._buffer=function(data,off){for(var min=Math.min(this.buffer.length-this.bufferOff,data.length-off),i=0;min>i;i++)this.buffer[this.bufferOff+i]=data[off+i];return this.bufferOff+=min,min},Cipher.prototype._flushBuffer=function(out,off){return this._update(this.buffer,0,out,off),this.bufferOff=0,this.blockSize},Cipher.prototype._updateEncrypt=function(data){var inputOff=0,outputOff=0,count=(this.bufferOff+data.length)/this.blockSize|0,out=new Array(count*this.blockSize);0!==this.bufferOff&&(inputOff+=this._buffer(data,inputOff),this.bufferOff===this.buffer.length&&(outputOff+=this._flushBuffer(out,outputOff)));for(var max=data.length-(data.length-inputOff)%this.blockSize;max>inputOff;inputOff+=this.blockSize)this._update(data,inputOff,out,outputOff),outputOff+=this.blockSize;for(;inputOff<data.length;inputOff++,this.bufferOff++)this.buffer[this.bufferOff]=data[inputOff];return out},Cipher.prototype._updateDecrypt=function(data){for(var inputOff=0,outputOff=0,count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1,out=new Array(count*this.blockSize);count>0;count--)inputOff+=this._buffer(data,inputOff),outputOff+=this._flushBuffer(out,outputOff);return inputOff+=this._buffer(data,inputOff),out},Cipher.prototype["final"]=function(buffer){var first;buffer&&(first=this.update(buffer));var last;return last="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),first?first.concat(last):last},Cipher.prototype._pad=function(buffer,off){if(0===off)return!1;for(;off<buffer.length;)buffer[off++]=0;return!0},Cipher.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var out=new Array(this.blockSize);return this._update(this.buffer,0,out,0),out},Cipher.prototype._unpad=function(buffer){return buffer},Cipher.prototype._finalDecrypt=function(){assert.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var out=new Array(this.blockSize);return this._flushBuffer(out,0),this._unpad(out)}},{"minimalistic-assert":34}],31:[function(require,module,exports){"use strict";function DESState(){this.tmp=new Array(2),this.keys=null}function DES(options){Cipher.call(this,options);var state=new DESState;this._desState=state,this.deriveKeys(state,options.key)}var assert=require("minimalistic-assert"),inherits=require("inherits"),des=require("../des"),utils=des.utils,Cipher=des.Cipher;inherits(DES,Cipher),module.exports=DES,DES.create=function(options){return new DES(options)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function(state,key){state.keys=new Array(32),assert.equal(key.length,this.blockSize,"Invalid key length");var kL=utils.readUInt32BE(key,0),kR=utils.readUInt32BE(key,4);utils.pc1(kL,kR,state.tmp,0),kL=state.tmp[0],kR=state.tmp[1];for(var i=0;i<state.keys.length;i+=2){var shift=shiftTable[i>>>1];kL=utils.r28shl(kL,shift),kR=utils.r28shl(kR,shift),utils.pc2(kL,kR,state.keys,i)}},DES.prototype._update=function(inp,inOff,out,outOff){var state=this._desState,l=utils.readUInt32BE(inp,inOff),r=utils.readUInt32BE(inp,inOff+4);utils.ip(l,r,state.tmp,0),l=state.tmp[0],r=state.tmp[1],"encrypt"===this.type?this._encrypt(state,l,r,state.tmp,0):this._decrypt(state,l,r,state.tmp,0),l=state.tmp[0],r=state.tmp[1],utils.writeUInt32BE(out,l,outOff),utils.writeUInt32BE(out,r,outOff+4)},DES.prototype._pad=function(buffer,off){for(var value=buffer.length-off,i=off;i<buffer.length;i++)buffer[i]=value;return!0},DES.prototype._unpad=function(buffer){
for(var pad=buffer[buffer.length-1],i=buffer.length-pad;i<buffer.length;i++)assert.equal(buffer[i],pad);return buffer.slice(0,buffer.length-pad)},DES.prototype._encrypt=function(state,lStart,rStart,out,off){for(var l=lStart,r=rStart,i=0;i<state.keys.length;i+=2){var keyL=state.keys[i],keyR=state.keys[i+1];utils.expand(r,state.tmp,0),keyL^=state.tmp[0],keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR),f=utils.permute(s),t=r;r=(l^f)>>>0,l=t}utils.rip(r,l,out,off)},DES.prototype._decrypt=function(state,lStart,rStart,out,off){for(var l=rStart,r=lStart,i=state.keys.length-2;i>=0;i-=2){var keyL=state.keys[i],keyR=state.keys[i+1];utils.expand(l,state.tmp,0),keyL^=state.tmp[0],keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR),f=utils.permute(s),t=l;l=(r^f)>>>0,r=t}utils.rip(l,r,out,off)}},{"../des":28,inherits:199,"minimalistic-assert":34}],32:[function(require,module,exports){"use strict";function EDEState(type,key){assert.equal(key.length,24,"Invalid key length");var k1=key.slice(0,8),k2=key.slice(8,16),k3=key.slice(16,24);"encrypt"===type?this.ciphers=[DES.create({type:"encrypt",key:k1}),DES.create({type:"decrypt",key:k2}),DES.create({type:"encrypt",key:k3})]:this.ciphers=[DES.create({type:"decrypt",key:k3}),DES.create({type:"encrypt",key:k2}),DES.create({type:"decrypt",key:k1})]}function EDE(options){Cipher.call(this,options);var state=new EDEState(this.type,this.options.key);this._edeState=state}var assert=require("minimalistic-assert"),inherits=require("inherits"),des=require("../des"),Cipher=des.Cipher,DES=des.DES;inherits(EDE,Cipher),module.exports=EDE,EDE.create=function(options){return new EDE(options)},EDE.prototype._update=function(inp,inOff,out,outOff){var state=this._edeState;state.ciphers[0]._update(inp,inOff,out,outOff),state.ciphers[1]._update(out,outOff,out,outOff),state.ciphers[2]._update(out,outOff,out,outOff)},EDE.prototype._pad=DES.prototype._pad,EDE.prototype._unpad=DES.prototype._unpad},{"../des":28,inherits:199,"minimalistic-assert":34}],33:[function(require,module,exports){"use strict";exports.readUInt32BE=function(bytes,off){var res=bytes[0+off]<<24|bytes[1+off]<<16|bytes[2+off]<<8|bytes[3+off];return res>>>0},exports.writeUInt32BE=function(bytes,value,off){bytes[0+off]=value>>>24,bytes[1+off]=value>>>16&255,bytes[2+off]=value>>>8&255,bytes[3+off]=255&value},exports.ip=function(inL,inR,out,off){for(var outL=0,outR=0,i=6;i>=0;i-=2){for(var j=0;24>=j;j+=8)outL<<=1,outL|=inR>>>j+i&1;for(var j=0;24>=j;j+=8)outL<<=1,outL|=inL>>>j+i&1}for(var i=6;i>=0;i-=2){for(var j=1;25>=j;j+=8)outR<<=1,outR|=inR>>>j+i&1;for(var j=1;25>=j;j+=8)outR<<=1,outR|=inL>>>j+i&1}out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.rip=function(inL,inR,out,off){for(var outL=0,outR=0,i=0;4>i;i++)for(var j=24;j>=0;j-=8)outL<<=1,outL|=inR>>>j+i&1,outL<<=1,outL|=inL>>>j+i&1;for(var i=4;8>i;i++)for(var j=24;j>=0;j-=8)outR<<=1,outR|=inR>>>j+i&1,outR<<=1,outR|=inL>>>j+i&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.pc1=function(inL,inR,out,off){for(var outL=0,outR=0,i=7;i>=5;i--){for(var j=0;24>=j;j+=8)outL<<=1,outL|=inR>>j+i&1;for(var j=0;24>=j;j+=8)outL<<=1,outL|=inL>>j+i&1}for(var j=0;24>=j;j+=8)outL<<=1,outL|=inR>>j+i&1;for(var i=1;3>=i;i++){for(var j=0;24>=j;j+=8)outR<<=1,outR|=inR>>j+i&1;for(var j=0;24>=j;j+=8)outR<<=1,outR|=inL>>j+i&1}for(var j=0;24>=j;j+=8)outR<<=1,outR|=inL>>j+i&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.r28shl=function(num,shift){return num<<shift&268435455|num>>>28-shift};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function(inL,inR,out,off){for(var outL=0,outR=0,len=pc2table.length>>>1,i=0;len>i;i++)outL<<=1,outL|=inL>>>pc2table[i]&1;for(var i=len;i<pc2table.length;i++)outR<<=1,outR|=inR>>>pc2table[i]&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.expand=function(r,out,off){var outL=0,outR=0;outL=(1&r)<<5|r>>>27;for(var i=23;i>=15;i-=4)outL<<=6,outL|=r>>>i&63;for(var i=11;i>=3;i-=4)outR|=r>>>i&63,outR<<=6;outR|=(31&r)<<1|r>>>31,out[off+0]=outL>>>0,out[off+1]=outR>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function(inL,inR){for(var out=0,i=0;4>i;i++){var b=inL>>>18-6*i&63,sb=sTable[64*i+b];out<<=4,out|=sb}for(var i=0;4>i;i++){var b=inR>>>18-6*i&63,sb=sTable[256+64*i+b];out<<=4,out|=sb}return out>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function(num){for(var out=0,i=0;i<permuteTable.length;i++)out<<=1,out|=num>>>permuteTable[i]&1;return out>>>0},exports.padSplit=function(num,size,group){for(var str=num.toString(2);str.length<size;)str="0"+str;for(var out=[],i=0;size>i;i+=group)out.push(str.slice(i,i+group));return out.join(" ")}},{}],34:[function(require,module,exports){function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}module.exports=assert,assert.equal=function(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)}},{}],35:[function(require,module,exports){(function(Buffer){function EVP_BytesToKey(password,salt,keyLen,ivLen){Buffer.isBuffer(password)||(password=new Buffer(password,"binary")),salt&&!Buffer.isBuffer(salt)&&(salt=new Buffer(salt,"binary")),keyLen/=8,ivLen=ivLen||0;for(var md_buf,i,ki=0,ii=0,key=new Buffer(keyLen),iv=new Buffer(ivLen),addmd=0,bufs=[];;){if(addmd++>0&&bufs.push(md_buf),bufs.push(password),salt&&bufs.push(salt),md_buf=md5(Buffer.concat(bufs)),bufs=[],i=0,keyLen>0)for(;;){if(0===keyLen)break;if(i===md_buf.length)break;key[ki++]=md_buf[i],keyLen--,i++}if(ivLen>0&&i!==md_buf.length)for(;;){if(0===ivLen)break;if(i===md_buf.length)break;iv[ii++]=md_buf[i],ivLen--,i++}if(0===keyLen&&0===ivLen)break}for(i=0;i<md_buf.length;i++)md_buf[i]=0;return{key:key,iv:iv}}var md5=require("create-hash/md5");module.exports=EVP_BytesToKey}).call(this,require("buffer").Buffer)},{buffer:2,"create-hash/md5":132}],36:[function(require,module,exports){(function(Buffer){"use strict";exports["RSA-SHA224"]=exports.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new Buffer("302d300d06096086480165030402040500041c","hex")},exports["RSA-SHA256"]=exports.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new Buffer("3031300d060960864801650304020105000420","hex")},exports["RSA-SHA384"]=exports.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new Buffer("3041300d060960864801650304020205000430","hex")},exports["RSA-SHA512"]=exports.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new Buffer("3051300d060960864801650304020305000440","hex")},exports["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new Buffer("3021300906052b0e03021a05000414","hex")},exports["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new Buffer("","hex")},exports.DSA=exports["DSA-SHA1"]=exports["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new Buffer("","hex")},exports["DSA-SHA224"]=exports["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new Buffer("","hex")},exports["DSA-SHA256"]=exports["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new Buffer("","hex")},exports["DSA-SHA384"]=exports["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new Buffer("","hex")},exports["DSA-SHA512"]=exports["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new Buffer("","hex")},exports["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new Buffer("","hex")},exports["RSA-RIPEMD160"]=exports.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new Buffer("3021300906052b2403020105000414","hex")},exports["RSA-MD5"]=exports.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new Buffer("3020300c06082a864886f70d020505000410","hex")}}).call(this,require("buffer").Buffer)},{buffer:2}],37:[function(require,module,exports){(function(Buffer){function Sign(algorithm){stream.Writable.call(this);var data=algos[algorithm];if(!data)throw new Error("Unknown message digest");this._hashType=data.hash,this._hash=createHash(data.hash),this._tag=data.id,this._signType=data.sign}function Verify(algorithm){stream.Writable.call(this);var data=algos[algorithm];if(!data)throw new Error("Unknown message digest");this._hash=createHash(data.hash),this._tag=data.id,this._signType=data.sign}function createSign(algorithm){return new Sign(algorithm)}function createVerify(algorithm){return new Verify(algorithm)}var _algos=require("./algos"),createHash=require("create-hash"),inherits=require("inherits"),sign=require("./sign"),stream=require("stream"),verify=require("./verify"),algos={};Object.keys(_algos).forEach(function(key){algos[key]=algos[key.toLowerCase()]=_algos[key]}),inherits(Sign,stream.Writable),Sign.prototype._write=function(data,_,done){this._hash.update(data),done()},Sign.prototype.update=function(data,enc){return"string"==typeof data&&(data=new Buffer(data,enc)),this._hash.update(data),this},Sign.prototype.sign=function(key,enc){this.end();var hash=this._hash.digest(),sig=sign(Buffer.concat([this._tag,hash]),key,this._hashType,this._signType);return enc?sig.toString(enc):sig},inherits(Verify,stream.Writable),Verify.prototype._write=function(data,_,done){this._hash.update(data),done()},Verify.prototype.update=function(data,enc){return"string"==typeof data&&(data=new Buffer(data,enc)),this._hash.update(data),this},Verify.prototype.verify=function(key,sig,enc){"string"==typeof sig&&(sig=new Buffer(sig,enc)),this.end();var hash=this._hash.digest();return verify(sig,Buffer.concat([this._tag,hash]),key,this._signType)},module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify}}).call(this,require("buffer").Buffer)},{"./algos":36,"./sign":102,"./verify":103,buffer:2,"create-hash":130,inherits:199,stream:216}],38:[function(require,module,exports){"use strict";exports["1.3.132.0.10"]="secp256k1",exports["1.3.132.0.33"]="p224",exports["1.2.840.10045.3.1.1"]="p192",exports["1.2.840.10045.3.1.7"]="p256",exports["1.3.132.0.34"]="p384",exports["1.3.132.0.35"]="p521"},{}],39:[function(require,module,exports){!function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}function BN(number,base,endian){return BN.isBN(number)?number:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==number&&("le"!==base&&"be"!==base||(endian=base,base=10),this._init(number||0,base||10,endian||"be"))))}function parseHex(str,start,end){for(var r=0,len=Math.min(str.length,end),i=start;len>i;i++){var c=str.charCodeAt(i)-48;r<<=4,r|=c>=49&&54>=c?c-49+10:c>=17&&22>=c?c-17+10:15&c}return r}function parseBase(str,start,end,mul){for(var r=0,len=Math.min(str.length,end),i=start;len>i;i++){var c=str.charCodeAt(i)-48;r*=mul,r+=c>=49?c-49+10:c>=17?c-17+10:c}return r}function toBitArray(num){for(var w=new Array(num.bitLength()),bit=0;bit<w.length;bit++){var off=bit/26|0,wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len,len=len-1|0;var a=0|self.words[0],b=0|num.words[0],r=a*b,lo=67108863&r,carry=r/67108864|0;out.words[0]=lo;for(var k=1;len>k;k++){for(var ncarry=carry>>>26,rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);maxJ>=j;j++){var i=k-j|0;a=0|self.words[i],b=0|num.words[j],r=a*b+rword,ncarry+=r/67108864|0,rword=67108863&r}out.words[k]=0|rword,carry=0|ncarry}return 0!==carry?out.words[k]=0|carry:out.length--,out.strip()}function bigMulTo(self,num,out){out.negative=num.negative^self.negative,out.length=self.length+num.length;for(var carry=0,hncarry=0,k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;for(var rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);maxJ>=j;j++){var i=k-j,a=0|self.words[i],b=0|num.words[j],r=a*b,lo=67108863&r;ncarry=ncarry+(r/67108864|0)|0,lo=lo+rword|0,rword=67108863&lo,ncarry=ncarry+(lo>>>26)|0,hncarry+=ncarry>>>26,ncarry&=67108863}out.words[k]=rword,carry=ncarry,ncarry=hncarry}return 0!==carry?out.words[k]=carry:out.length--,out.strip()}function jumboMulTo(self,num,out){var fftm=new FFTM;return fftm.mulp(self,num,out)}function FFTM(x,y){this.x=x,this.y=y}function MPrime(name,p){this.name=name,this.p=new BN(p,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(m){if("string"==typeof m){var prime=BN._prime(m);this.m=prime.p,this.prime=prime}else assert(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}function Mont(m){Red.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof module?module.exports=BN:exports.BN=BN,BN.BN=BN,BN.wordSize=26;var Buffer;try{Buffer=require("buffer").Buffer}catch(e){}BN.isBN=function(num){return null!==num&&"object"==typeof num&&"BN"===num.constructor.name&&Array.isArray(num.words)},BN.max=function(left,right){return left.cmp(right)>0?left:right},BN.min=function(left,right){return left.cmp(right)<0?left:right},BN.prototype._init=function(number,base,endian){if("number"==typeof number)return this._initNumber(number,base,endian);if("object"==typeof number)return this._initArray(number,base,endian);"hex"===base&&(base=16),assert(base===(0|base)&&base>=2&&36>=base),number=number.toString().replace(/\s+/g,"");var start=0;"-"===number[0]&&start++,16===base?this._parseHex(number,start):this._parseBase(number,base,start),"-"===number[0]&&(this.negative=1),this.strip(),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initNumber=function(number,base,endian){0>number&&(this.negative=1,number=-number),67108864>number?(this.words=[67108863&number],this.length=1):4503599627370496>number?(this.words=[67108863&number,number/67108864&67108863],this.length=2):(assert(9007199254740992>number),this.words=[67108863&number,number/67108864&67108863,1],this.length=3),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initArray=function(number,base,endian){if(assert("number"==typeof number.length),number.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(number.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;if("be"===endian)for(i=number.length-1,j=0;i>=0;i-=3)w=number[i]|number[i-1]<<8|number[i-2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,off+=24,off>=26&&(off-=26,j++);else if("le"===endian)for(i=0,j=0;i<number.length;i+=3)w=number[i]|number[i+1]<<8|number[i+2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,off+=24,off>=26&&(off-=26,j++);return this.strip()},BN.prototype._parseHex=function(number,start){this.length=Math.ceil((number.length-start)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;for(i=number.length-6,j=0;i>=start;i-=6)w=parseHex(number,i,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303,off+=24,off>=26&&(off-=26,j++);i+6!==start&&(w=parseHex(number,start,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303),this.strip()},BN.prototype._parseBase=function(number,base,start){this.words=[0],this.length=1;for(var limbLen=0,limbPow=1;67108863>=limbPow;limbPow*=base)limbLen++;limbLen--,limbPow=limbPow/base|0;for(var total=number.length-start,mod=total%limbLen,end=Math.min(total,total-mod)+start,word=0,i=start;end>i;i+=limbLen)word=parseBase(number,i,i+limbLen,base),this.imuln(limbPow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word);if(0!==mod){var pow=1;for(word=parseBase(number,i,number.length,base),i=0;mod>i;i++)pow*=base;this.imuln(pow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word)}},BN.prototype.copy=function(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++)dest.words[i]=this.words[i];dest.length=this.length,dest.negative=this.negative,dest.red=this.red},BN.prototype.clone=function(){var r=new BN(null);return this.copy(r),r},BN.prototype._expand=function(size){for(;this.length<size;)this.words[this.length++]=0;return this},BN.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function(base,padding){base=base||10,padding=0|padding||1;var out;if(16===base||"hex"===base){out="";for(var off=0,carry=0,i=0;i<this.length;i++){var w=this.words[i],word=(16777215&(w<<off|carry)).toString(16);carry=w>>>24-off&16777215,out=0!==carry||i!==this.length-1?zeros[6-word.length]+word+out:word+out,off+=2,off>=26&&(off-=26,i--)}for(0!==carry&&(out=carry.toString(16)+out);out.length%padding!==0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}if(base===(0|base)&&base>=2&&36>=base){var groupSize=groupSizes[base],groupBase=groupBases[base];out="";var c=this.clone();for(c.negative=0;!c.isZero();){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase),out=c.isZero()?r+out:zeros[groupSize-r.length]+r+out}for(this.isZero()&&(out="0"+out);out.length%padding!==0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function(){var ret=this.words[0];return 2===this.length?ret+=67108864*this.words[1]:3===this.length&&1===this.words[2]?ret+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-ret:ret},BN.prototype.toJSON=function(){return this.toString(16)},BN.prototype.toBuffer=function(endian,length){return assert("undefined"!=typeof Buffer),this.toArrayLike(Buffer,endian,length)},BN.prototype.toArray=function(endian,length){return this.toArrayLike(Array,endian,length)},BN.prototype.toArrayLike=function(ArrayType,endian,length){var byteLength=this.byteLength(),reqLength=length||Math.max(1,byteLength);assert(reqLength>=byteLength,"byte array longer than desired length"),assert(reqLength>0,"Requested array length <= 0"),this.strip();var b,i,littleEndian="le"===endian,res=new ArrayType(reqLength),q=this.clone();if(littleEndian){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[i]=b;for(;reqLength>i;i++)res[i]=0}else{for(i=0;reqLength-byteLength>i;i++)res[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[reqLength-i-1]=b}return res},Math.clz32?BN.prototype._countBits=function(w){return 32-Math.clz32(w)}:BN.prototype._countBits=function(w){var t=w,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},BN.prototype._zeroBits=function(w){if(0===w)return 26;var t=w,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},BN.prototype.bitLength=function(){var w=this.words[this.length-1],hi=this._countBits(w);return 26*(this.length-1)+hi},BN.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(r+=b,26!==b)break}return r},BN.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function(width){return 0!==this.negative?this.abs().inotn(width).iaddn(1):this.clone()},BN.prototype.fromTwos=function(width){return this.testn(width-1)?this.notn(width).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function(){return 0!==this.negative},BN.prototype.neg=function(){return this.clone().ineg()},BN.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function(num){for(;this.length<num.length;)this.words[this.length++]=0;for(var i=0;i<num.length;i++)this.words[i]=this.words[i]|num.words[i];return this.strip()},BN.prototype.ior=function(num){return assert(0===(this.negative|num.negative)),this.iuor(num)},BN.prototype.or=function(num){return this.length>num.length?this.clone().ior(num):num.clone().ior(this)},BN.prototype.uor=function(num){return this.length>num.length?this.clone().iuor(num):num.clone().iuor(this)},BN.prototype.iuand=function(num){var b;b=this.length>num.length?num:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&num.words[i];return this.length=b.length,this.strip()},BN.prototype.iand=function(num){return assert(0===(this.negative|num.negative)),this.iuand(num)},BN.prototype.and=function(num){return this.length>num.length?this.clone().iand(num):num.clone().iand(this)},BN.prototype.uand=function(num){return this.length>num.length?this.clone().iuand(num):num.clone().iuand(this)},BN.prototype.iuxor=function(num){var a,b;this.length>num.length?(a=this,b=num):(a=num,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},BN.prototype.ixor=function(num){return assert(0===(this.negative|num.negative)),this.iuxor(num)},BN.prototype.xor=function(num){return this.length>num.length?this.clone().ixor(num):num.clone().ixor(this)},BN.prototype.uxor=function(num){return this.length>num.length?this.clone().iuxor(num):num.clone().iuxor(this)},BN.prototype.inotn=function(width){assert("number"==typeof width&&width>=0);var bytesNeeded=0|Math.ceil(width/26),bitsLeft=width%26;this._expand(bytesNeeded),bitsLeft>0&&bytesNeeded--;for(var i=0;bytesNeeded>i;i++)this.words[i]=67108863&~this.words[i];return bitsLeft>0&&(this.words[i]=~this.words[i]&67108863>>26-bitsLeft),this.strip()},BN.prototype.notn=function(width){return this.clone().inotn(width)},BN.prototype.setn=function(bit,val){assert("number"==typeof bit&&bit>=0);var off=bit/26|0,wbit=bit%26;return this._expand(off+1),val?this.words[off]=this.words[off]|1<<wbit:this.words[off]=this.words[off]&~(1<<wbit),this.strip()},BN.prototype.iadd=function(num){var r;if(0!==this.negative&&0===num.negative)return this.negative=0,r=this.isub(num),this.negative^=1,this._normSign();if(0===this.negative&&0!==num.negative)return num.negative=0,r=this.isub(num),num.negative=1,r._normSign();var a,b;this.length>num.length?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)r=(0|a.words[i])+(0|b.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;for(;0!==carry&&i<a.length;i++)r=(0|a.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;if(this.length=a.length,0!==carry)this.words[this.length]=carry,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},BN.prototype.add=function(num){var res;return 0!==num.negative&&0===this.negative?(num.negative=0,res=this.sub(num),num.negative^=1,res):0===num.negative&&0!==this.negative?(this.negative=0,res=num.sub(this),this.negative=1,res):this.length>num.length?this.clone().iadd(num):num.clone().iadd(this)},BN.prototype.isub=function(num){if(0!==num.negative){num.negative=0;var r=this.iadd(num);return num.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(num),this.negative=1,this._normSign();var cmp=this.cmp(num);if(0===cmp)return this.negative=0,this.length=1,this.words[0]=0,this;var a,b;cmp>0?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)r=(0|a.words[i])-(0|b.words[i])+carry,carry=r>>26,this.words[i]=67108863&r;for(;0!==carry&&i<a.length;i++)r=(0|a.words[i])+carry,carry=r>>26,this.words[i]=67108863&r;if(0===carry&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function(num){return this.clone().isub(num)};var comb10MulTo=function(self,num,out){var lo,mid,hi,a=self.words,b=num.words,o=out.words,c=0,a0=0|a[0],al0=8191&a0,ah0=a0>>>13,a1=0|a[1],al1=8191&a1,ah1=a1>>>13,a2=0|a[2],al2=8191&a2,ah2=a2>>>13,a3=0|a[3],al3=8191&a3,ah3=a3>>>13,a4=0|a[4],al4=8191&a4,ah4=a4>>>13,a5=0|a[5],al5=8191&a5,ah5=a5>>>13,a6=0|a[6],al6=8191&a6,ah6=a6>>>13,a7=0|a[7],al7=8191&a7,ah7=a7>>>13,a8=0|a[8],al8=8191&a8,ah8=a8>>>13,a9=0|a[9],al9=8191&a9,ah9=a9>>>13,b0=0|b[0],bl0=8191&b0,bh0=b0>>>13,b1=0|b[1],bl1=8191&b1,bh1=b1>>>13,b2=0|b[2],bl2=8191&b2,bh2=b2>>>13,b3=0|b[3],bl3=8191&b3,bh3=b3>>>13,b4=0|b[4],bl4=8191&b4,bh4=b4>>>13,b5=0|b[5],bl5=8191&b5,bh5=b5>>>13,b6=0|b[6],bl6=8191&b6,bh6=b6>>>13,b7=0|b[7],bl7=8191&b7,bh7=b7>>>13,b8=0|b[8],bl8=8191&b8,bh8=b8>>>13,b9=0|b[9],bl9=8191&b9,bh9=b9>>>13;out.negative=self.negative^num.negative,out.length=19,lo=Math.imul(al0,bl0),mid=Math.imul(al0,bh0),mid+=Math.imul(ah0,bl0),hi=Math.imul(ah0,bh0);var w0=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w0>>>26),w0&=67108863,lo=Math.imul(al1,bl0),mid=Math.imul(al1,bh0),mid+=Math.imul(ah1,bl0),hi=Math.imul(ah1,bh0),lo+=Math.imul(al0,bl1),mid+=Math.imul(al0,bh1),mid+=Math.imul(ah0,bl1),hi+=Math.imul(ah0,bh1);var w1=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w1>>>26),w1&=67108863,lo=Math.imul(al2,bl0),mid=Math.imul(al2,bh0),mid+=Math.imul(ah2,bl0),hi=Math.imul(ah2,bh0),lo+=Math.imul(al1,bl1),mid+=Math.imul(al1,bh1),mid+=Math.imul(ah1,bl1),hi+=Math.imul(ah1,bh1),lo+=Math.imul(al0,bl2),mid+=Math.imul(al0,bh2),mid+=Math.imul(ah0,bl2),hi+=Math.imul(ah0,bh2);var w2=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w2>>>26),w2&=67108863,lo=Math.imul(al3,bl0),mid=Math.imul(al3,bh0),mid+=Math.imul(ah3,bl0),hi=Math.imul(ah3,bh0),lo+=Math.imul(al2,bl1),mid+=Math.imul(al2,bh1),mid+=Math.imul(ah2,bl1),hi+=Math.imul(ah2,bh1),lo+=Math.imul(al1,bl2),mid+=Math.imul(al1,bh2),mid+=Math.imul(ah1,bl2),hi+=Math.imul(ah1,bh2),lo+=Math.imul(al0,bl3),mid+=Math.imul(al0,bh3),mid+=Math.imul(ah0,bl3),hi+=Math.imul(ah0,bh3);var w3=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w3>>>26),w3&=67108863,lo=Math.imul(al4,bl0),mid=Math.imul(al4,bh0),mid+=Math.imul(ah4,bl0),hi=Math.imul(ah4,bh0),lo+=Math.imul(al3,bl1),mid+=Math.imul(al3,bh1),mid+=Math.imul(ah3,bl1),hi+=Math.imul(ah3,bh1),lo+=Math.imul(al2,bl2),mid+=Math.imul(al2,bh2),mid+=Math.imul(ah2,bl2),hi+=Math.imul(ah2,bh2),lo+=Math.imul(al1,bl3),mid+=Math.imul(al1,bh3),mid+=Math.imul(ah1,bl3),hi+=Math.imul(ah1,bh3),lo+=Math.imul(al0,bl4),mid+=Math.imul(al0,bh4),mid+=Math.imul(ah0,bl4),hi+=Math.imul(ah0,bh4);var w4=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w4>>>26),w4&=67108863,lo=Math.imul(al5,bl0),mid=Math.imul(al5,bh0),mid+=Math.imul(ah5,bl0),hi=Math.imul(ah5,bh0),lo+=Math.imul(al4,bl1),mid+=Math.imul(al4,bh1),mid+=Math.imul(ah4,bl1),hi+=Math.imul(ah4,bh1),lo+=Math.imul(al3,bl2),mid+=Math.imul(al3,bh2),mid+=Math.imul(ah3,bl2),hi+=Math.imul(ah3,bh2),lo+=Math.imul(al2,bl3),mid+=Math.imul(al2,bh3),mid+=Math.imul(ah2,bl3),hi+=Math.imul(ah2,bh3),lo+=Math.imul(al1,bl4),mid+=Math.imul(al1,bh4),mid+=Math.imul(ah1,bl4),hi+=Math.imul(ah1,bh4),lo+=Math.imul(al0,bl5),mid+=Math.imul(al0,bh5),mid+=Math.imul(ah0,bl5),hi+=Math.imul(ah0,bh5);var w5=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w5>>>26),w5&=67108863,lo=Math.imul(al6,bl0),mid=Math.imul(al6,bh0),mid+=Math.imul(ah6,bl0),hi=Math.imul(ah6,bh0),lo+=Math.imul(al5,bl1),mid+=Math.imul(al5,bh1),mid+=Math.imul(ah5,bl1),hi+=Math.imul(ah5,bh1),lo+=Math.imul(al4,bl2),mid+=Math.imul(al4,bh2),mid+=Math.imul(ah4,bl2),hi+=Math.imul(ah4,bh2),lo+=Math.imul(al3,bl3),mid+=Math.imul(al3,bh3),mid+=Math.imul(ah3,bl3),hi+=Math.imul(ah3,bh3),lo+=Math.imul(al2,bl4),mid+=Math.imul(al2,bh4),mid+=Math.imul(ah2,bl4),hi+=Math.imul(ah2,bh4),lo+=Math.imul(al1,bl5),mid+=Math.imul(al1,bh5),mid+=Math.imul(ah1,bl5),hi+=Math.imul(ah1,bh5),lo+=Math.imul(al0,bl6),mid+=Math.imul(al0,bh6),mid+=Math.imul(ah0,bl6),hi+=Math.imul(ah0,bh6);var w6=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w6>>>26),w6&=67108863,lo=Math.imul(al7,bl0),mid=Math.imul(al7,bh0),mid+=Math.imul(ah7,bl0),hi=Math.imul(ah7,bh0),lo+=Math.imul(al6,bl1),mid+=Math.imul(al6,bh1),mid+=Math.imul(ah6,bl1),hi+=Math.imul(ah6,bh1),lo+=Math.imul(al5,bl2),mid+=Math.imul(al5,bh2),mid+=Math.imul(ah5,bl2),hi+=Math.imul(ah5,bh2),lo+=Math.imul(al4,bl3),mid+=Math.imul(al4,bh3),mid+=Math.imul(ah4,bl3),hi+=Math.imul(ah4,bh3),lo+=Math.imul(al3,bl4),mid+=Math.imul(al3,bh4),mid+=Math.imul(ah3,bl4),hi+=Math.imul(ah3,bh4),lo+=Math.imul(al2,bl5),mid+=Math.imul(al2,bh5),mid+=Math.imul(ah2,bl5),hi+=Math.imul(ah2,bh5),lo+=Math.imul(al1,bl6),mid+=Math.imul(al1,bh6),mid+=Math.imul(ah1,bl6),hi+=Math.imul(ah1,bh6),lo+=Math.imul(al0,bl7),mid+=Math.imul(al0,bh7),mid+=Math.imul(ah0,bl7),hi+=Math.imul(ah0,bh7);var w7=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w7>>>26),w7&=67108863,lo=Math.imul(al8,bl0),mid=Math.imul(al8,bh0),mid+=Math.imul(ah8,bl0),hi=Math.imul(ah8,bh0),lo+=Math.imul(al7,bl1),mid+=Math.imul(al7,bh1),mid+=Math.imul(ah7,bl1),hi+=Math.imul(ah7,bh1),lo+=Math.imul(al6,bl2),mid+=Math.imul(al6,bh2),mid+=Math.imul(ah6,bl2),hi+=Math.imul(ah6,bh2),lo+=Math.imul(al5,bl3),mid+=Math.imul(al5,bh3),mid+=Math.imul(ah5,bl3),hi+=Math.imul(ah5,bh3),lo+=Math.imul(al4,bl4),mid+=Math.imul(al4,bh4),mid+=Math.imul(ah4,bl4),hi+=Math.imul(ah4,bh4),lo+=Math.imul(al3,bl5),mid+=Math.imul(al3,bh5),mid+=Math.imul(ah3,bl5),hi+=Math.imul(ah3,bh5),lo+=Math.imul(al2,bl6),mid+=Math.imul(al2,bh6),mid+=Math.imul(ah2,bl6),hi+=Math.imul(ah2,bh6),lo+=Math.imul(al1,bl7),mid+=Math.imul(al1,bh7),mid+=Math.imul(ah1,bl7),hi+=Math.imul(ah1,bh7),lo+=Math.imul(al0,bl8),mid+=Math.imul(al0,bh8),mid+=Math.imul(ah0,bl8),hi+=Math.imul(ah0,bh8);var w8=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w8>>>26),w8&=67108863,lo=Math.imul(al9,bl0),mid=Math.imul(al9,bh0),mid+=Math.imul(ah9,bl0),hi=Math.imul(ah9,bh0),
lo+=Math.imul(al8,bl1),mid+=Math.imul(al8,bh1),mid+=Math.imul(ah8,bl1),hi+=Math.imul(ah8,bh1),lo+=Math.imul(al7,bl2),mid+=Math.imul(al7,bh2),mid+=Math.imul(ah7,bl2),hi+=Math.imul(ah7,bh2),lo+=Math.imul(al6,bl3),mid+=Math.imul(al6,bh3),mid+=Math.imul(ah6,bl3),hi+=Math.imul(ah6,bh3),lo+=Math.imul(al5,bl4),mid+=Math.imul(al5,bh4),mid+=Math.imul(ah5,bl4),hi+=Math.imul(ah5,bh4),lo+=Math.imul(al4,bl5),mid+=Math.imul(al4,bh5),mid+=Math.imul(ah4,bl5),hi+=Math.imul(ah4,bh5),lo+=Math.imul(al3,bl6),mid+=Math.imul(al3,bh6),mid+=Math.imul(ah3,bl6),hi+=Math.imul(ah3,bh6),lo+=Math.imul(al2,bl7),mid+=Math.imul(al2,bh7),mid+=Math.imul(ah2,bl7),hi+=Math.imul(ah2,bh7),lo+=Math.imul(al1,bl8),mid+=Math.imul(al1,bh8),mid+=Math.imul(ah1,bl8),hi+=Math.imul(ah1,bh8),lo+=Math.imul(al0,bl9),mid+=Math.imul(al0,bh9),mid+=Math.imul(ah0,bl9),hi+=Math.imul(ah0,bh9);var w9=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w9>>>26),w9&=67108863,lo=Math.imul(al9,bl1),mid=Math.imul(al9,bh1),mid+=Math.imul(ah9,bl1),hi=Math.imul(ah9,bh1),lo+=Math.imul(al8,bl2),mid+=Math.imul(al8,bh2),mid+=Math.imul(ah8,bl2),hi+=Math.imul(ah8,bh2),lo+=Math.imul(al7,bl3),mid+=Math.imul(al7,bh3),mid+=Math.imul(ah7,bl3),hi+=Math.imul(ah7,bh3),lo+=Math.imul(al6,bl4),mid+=Math.imul(al6,bh4),mid+=Math.imul(ah6,bl4),hi+=Math.imul(ah6,bh4),lo+=Math.imul(al5,bl5),mid+=Math.imul(al5,bh5),mid+=Math.imul(ah5,bl5),hi+=Math.imul(ah5,bh5),lo+=Math.imul(al4,bl6),mid+=Math.imul(al4,bh6),mid+=Math.imul(ah4,bl6),hi+=Math.imul(ah4,bh6),lo+=Math.imul(al3,bl7),mid+=Math.imul(al3,bh7),mid+=Math.imul(ah3,bl7),hi+=Math.imul(ah3,bh7),lo+=Math.imul(al2,bl8),mid+=Math.imul(al2,bh8),mid+=Math.imul(ah2,bl8),hi+=Math.imul(ah2,bh8),lo+=Math.imul(al1,bl9),mid+=Math.imul(al1,bh9),mid+=Math.imul(ah1,bl9),hi+=Math.imul(ah1,bh9);var w10=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w10>>>26),w10&=67108863,lo=Math.imul(al9,bl2),mid=Math.imul(al9,bh2),mid+=Math.imul(ah9,bl2),hi=Math.imul(ah9,bh2),lo+=Math.imul(al8,bl3),mid+=Math.imul(al8,bh3),mid+=Math.imul(ah8,bl3),hi+=Math.imul(ah8,bh3),lo+=Math.imul(al7,bl4),mid+=Math.imul(al7,bh4),mid+=Math.imul(ah7,bl4),hi+=Math.imul(ah7,bh4),lo+=Math.imul(al6,bl5),mid+=Math.imul(al6,bh5),mid+=Math.imul(ah6,bl5),hi+=Math.imul(ah6,bh5),lo+=Math.imul(al5,bl6),mid+=Math.imul(al5,bh6),mid+=Math.imul(ah5,bl6),hi+=Math.imul(ah5,bh6),lo+=Math.imul(al4,bl7),mid+=Math.imul(al4,bh7),mid+=Math.imul(ah4,bl7),hi+=Math.imul(ah4,bh7),lo+=Math.imul(al3,bl8),mid+=Math.imul(al3,bh8),mid+=Math.imul(ah3,bl8),hi+=Math.imul(ah3,bh8),lo+=Math.imul(al2,bl9),mid+=Math.imul(al2,bh9),mid+=Math.imul(ah2,bl9),hi+=Math.imul(ah2,bh9);var w11=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w11>>>26),w11&=67108863,lo=Math.imul(al9,bl3),mid=Math.imul(al9,bh3),mid+=Math.imul(ah9,bl3),hi=Math.imul(ah9,bh3),lo+=Math.imul(al8,bl4),mid+=Math.imul(al8,bh4),mid+=Math.imul(ah8,bl4),hi+=Math.imul(ah8,bh4),lo+=Math.imul(al7,bl5),mid+=Math.imul(al7,bh5),mid+=Math.imul(ah7,bl5),hi+=Math.imul(ah7,bh5),lo+=Math.imul(al6,bl6),mid+=Math.imul(al6,bh6),mid+=Math.imul(ah6,bl6),hi+=Math.imul(ah6,bh6),lo+=Math.imul(al5,bl7),mid+=Math.imul(al5,bh7),mid+=Math.imul(ah5,bl7),hi+=Math.imul(ah5,bh7),lo+=Math.imul(al4,bl8),mid+=Math.imul(al4,bh8),mid+=Math.imul(ah4,bl8),hi+=Math.imul(ah4,bh8),lo+=Math.imul(al3,bl9),mid+=Math.imul(al3,bh9),mid+=Math.imul(ah3,bl9),hi+=Math.imul(ah3,bh9);var w12=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w12>>>26),w12&=67108863,lo=Math.imul(al9,bl4),mid=Math.imul(al9,bh4),mid+=Math.imul(ah9,bl4),hi=Math.imul(ah9,bh4),lo+=Math.imul(al8,bl5),mid+=Math.imul(al8,bh5),mid+=Math.imul(ah8,bl5),hi+=Math.imul(ah8,bh5),lo+=Math.imul(al7,bl6),mid+=Math.imul(al7,bh6),mid+=Math.imul(ah7,bl6),hi+=Math.imul(ah7,bh6),lo+=Math.imul(al6,bl7),mid+=Math.imul(al6,bh7),mid+=Math.imul(ah6,bl7),hi+=Math.imul(ah6,bh7),lo+=Math.imul(al5,bl8),mid+=Math.imul(al5,bh8),mid+=Math.imul(ah5,bl8),hi+=Math.imul(ah5,bh8),lo+=Math.imul(al4,bl9),mid+=Math.imul(al4,bh9),mid+=Math.imul(ah4,bl9),hi+=Math.imul(ah4,bh9);var w13=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w13>>>26),w13&=67108863,lo=Math.imul(al9,bl5),mid=Math.imul(al9,bh5),mid+=Math.imul(ah9,bl5),hi=Math.imul(ah9,bh5),lo+=Math.imul(al8,bl6),mid+=Math.imul(al8,bh6),mid+=Math.imul(ah8,bl6),hi+=Math.imul(ah8,bh6),lo+=Math.imul(al7,bl7),mid+=Math.imul(al7,bh7),mid+=Math.imul(ah7,bl7),hi+=Math.imul(ah7,bh7),lo+=Math.imul(al6,bl8),mid+=Math.imul(al6,bh8),mid+=Math.imul(ah6,bl8),hi+=Math.imul(ah6,bh8),lo+=Math.imul(al5,bl9),mid+=Math.imul(al5,bh9),mid+=Math.imul(ah5,bl9),hi+=Math.imul(ah5,bh9);var w14=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w14>>>26),w14&=67108863,lo=Math.imul(al9,bl6),mid=Math.imul(al9,bh6),mid+=Math.imul(ah9,bl6),hi=Math.imul(ah9,bh6),lo+=Math.imul(al8,bl7),mid+=Math.imul(al8,bh7),mid+=Math.imul(ah8,bl7),hi+=Math.imul(ah8,bh7),lo+=Math.imul(al7,bl8),mid+=Math.imul(al7,bh8),mid+=Math.imul(ah7,bl8),hi+=Math.imul(ah7,bh8),lo+=Math.imul(al6,bl9),mid+=Math.imul(al6,bh9),mid+=Math.imul(ah6,bl9),hi+=Math.imul(ah6,bh9);var w15=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w15>>>26),w15&=67108863,lo=Math.imul(al9,bl7),mid=Math.imul(al9,bh7),mid+=Math.imul(ah9,bl7),hi=Math.imul(ah9,bh7),lo+=Math.imul(al8,bl8),mid+=Math.imul(al8,bh8),mid+=Math.imul(ah8,bl8),hi+=Math.imul(ah8,bh8),lo+=Math.imul(al7,bl9),mid+=Math.imul(al7,bh9),mid+=Math.imul(ah7,bl9),hi+=Math.imul(ah7,bh9);var w16=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w16>>>26),w16&=67108863,lo=Math.imul(al9,bl8),mid=Math.imul(al9,bh8),mid+=Math.imul(ah9,bl8),hi=Math.imul(ah9,bh8),lo+=Math.imul(al8,bl9),mid+=Math.imul(al8,bh9),mid+=Math.imul(ah8,bl9),hi+=Math.imul(ah8,bh9);var w17=c+lo+((8191&mid)<<13);c=hi+(mid>>>13)+(w17>>>26),w17&=67108863,lo=Math.imul(al9,bl9),mid=Math.imul(al9,bh9),mid+=Math.imul(ah9,bl9),hi=Math.imul(ah9,bh9);var w18=c+lo+((8191&mid)<<13);return c=hi+(mid>>>13)+(w18>>>26),w18&=67108863,o[0]=w0,o[1]=w1,o[2]=w2,o[3]=w3,o[4]=w4,o[5]=w5,o[6]=w6,o[7]=w7,o[8]=w8,o[9]=w9,o[10]=w10,o[11]=w11,o[12]=w12,o[13]=w13,o[14]=w14,o[15]=w15,o[16]=w16,o[17]=w17,o[18]=w18,0!==c&&(o[19]=c,out.length++),out};Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function(num,out){var res,len=this.length+num.length;return res=10===this.length&&10===num.length?comb10MulTo(this,num,out):63>len?smallMulTo(this,num,out):1024>len?bigMulTo(this,num,out):jumboMulTo(this,num,out)},FFTM.prototype.makeRBT=function(N){for(var t=new Array(N),l=BN.prototype._countBits(N)-1,i=0;N>i;i++)t[i]=this.revBin(i,l,N);return t},FFTM.prototype.revBin=function(x,l,N){if(0===x||x===N-1)return x;for(var rb=0,i=0;l>i;i++)rb|=(1&x)<<l-i-1,x>>=1;return rb},FFTM.prototype.permute=function(rbt,rws,iws,rtws,itws,N){for(var i=0;N>i;i++)rtws[i]=rws[rbt[i]],itws[i]=iws[rbt[i]]},FFTM.prototype.transform=function(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;N>s;s<<=1)for(var l=s<<1,rtwdf=Math.cos(2*Math.PI/l),itwdf=Math.sin(2*Math.PI/l),p=0;N>p;p+=l)for(var rtwdf_=rtwdf,itwdf_=itwdf,j=0;s>j;j++){var re=rtws[p+j],ie=itws[p+j],ro=rtws[p+j+s],io=itws[p+j+s],rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro,ro=rx,rtws[p+j]=re+ro,itws[p+j]=ie+io,rtws[p+j+s]=re-ro,itws[p+j+s]=ie-io,j!==l&&(rx=rtwdf*rtwdf_-itwdf*itwdf_,itwdf_=rtwdf*itwdf_+itwdf*rtwdf_,rtwdf_=rx)}},FFTM.prototype.guessLen13b=function(n,m){var N=1|Math.max(m,n),odd=1&N,i=0;for(N=N/2|0;N;N>>>=1)i++;return 1<<i+1+odd},FFTM.prototype.conjugate=function(rws,iws,N){if(!(1>=N))for(var i=0;N/2>i;i++){var t=rws[i];rws[i]=rws[N-i-1],rws[N-i-1]=t,t=iws[i],iws[i]=-iws[N-i-1],iws[N-i-1]=-t}},FFTM.prototype.normalize13b=function(ws,N){for(var carry=0,i=0;N/2>i;i++){var w=8192*Math.round(ws[2*i+1]/N)+Math.round(ws[2*i]/N)+carry;ws[i]=67108863&w,carry=67108864>w?0:w/67108864|0}return ws},FFTM.prototype.convert13b=function(ws,len,rws,N){for(var carry=0,i=0;len>i;i++)carry+=0|ws[i],rws[2*i]=8191&carry,carry>>>=13,rws[2*i+1]=8191&carry,carry>>>=13;for(i=2*len;N>i;++i)rws[i]=0;assert(0===carry),assert(0===(-8192&carry))},FFTM.prototype.stub=function(N){for(var ph=new Array(N),i=0;N>i;i++)ph[i]=0;return ph},FFTM.prototype.mulp=function(x,y,out){var N=2*this.guessLen13b(x.length,y.length),rbt=this.makeRBT(N),_=this.stub(N),rws=new Array(N),rwst=new Array(N),iwst=new Array(N),nrws=new Array(N),nrwst=new Array(N),niwst=new Array(N),rmws=out.words;rmws.length=N,this.convert13b(x.words,x.length,rws,N),this.convert13b(y.words,y.length,nrws,N),this.transform(rws,_,rwst,iwst,N,rbt),this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;N>i;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i],rwst[i]=rx}return this.conjugate(rwst,iwst,N),this.transform(rwst,iwst,rmws,_,N,rbt),this.conjugate(rmws,_,N),this.normalize13b(rmws,N),out.negative=x.negative^y.negative,out.length=x.length+y.length,out.strip()},BN.prototype.mul=function(num){var out=new BN(null);return out.words=new Array(this.length+num.length),this.mulTo(num,out)},BN.prototype.mulf=function(num){var out=new BN(null);return out.words=new Array(this.length+num.length),jumboMulTo(this,num,out)},BN.prototype.imul=function(num){return this.clone().mulTo(num,this)},BN.prototype.imuln=function(num){assert("number"==typeof num),assert(67108864>num);for(var carry=0,i=0;i<this.length;i++){var w=(0|this.words[i])*num,lo=(67108863&w)+(67108863&carry);carry>>=26,carry+=w/67108864|0,carry+=lo>>>26,this.words[i]=67108863&lo}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.muln=function(num){return this.clone().imuln(num)},BN.prototype.sqr=function(){return this.mul(this)},BN.prototype.isqr=function(){return this.imul(this.clone())},BN.prototype.pow=function(num){var w=toBitArray(num);if(0===w.length)return new BN(1);for(var res=this,i=0;i<w.length&&0===w[i];i++,res=res.sqr());if(++i<w.length)for(var q=res.sqr();i<w.length;i++,q=q.sqr())0!==w[i]&&(res=res.mul(q));return res},BN.prototype.iushln=function(bits){assert("number"==typeof bits&&bits>=0);var i,r=bits%26,s=(bits-r)/26,carryMask=67108863>>>26-r<<26-r;if(0!==r){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask,c=(0|this.words[i])-newCarry<<r;this.words[i]=c|carry,carry=newCarry>>>26-r}carry&&(this.words[i]=carry,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;s>i;i++)this.words[i]=0;this.length+=s}return this.strip()},BN.prototype.ishln=function(bits){return assert(0===this.negative),this.iushln(bits)},BN.prototype.iushrn=function(bits,hint,extended){assert("number"==typeof bits&&bits>=0);var h;h=hint?(hint-hint%26)/26:0;var r=bits%26,s=Math.min((bits-r)/26,this.length),mask=67108863^67108863>>>r<<r,maskedWords=extended;if(h-=s,h=Math.max(0,h),maskedWords){for(var i=0;s>i;i++)maskedWords.words[i]=this.words[i];maskedWords.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var carry=0;for(i=this.length-1;i>=0&&(0!==carry||i>=h);i--){var word=0|this.words[i];this.words[i]=carry<<26-r|word>>>r,carry=word&mask}return maskedWords&&0!==carry&&(maskedWords.words[maskedWords.length++]=carry),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function(bits,hint,extended){return assert(0===this.negative),this.iushrn(bits,hint,extended)},BN.prototype.shln=function(bits){return this.clone().ishln(bits)},BN.prototype.ushln=function(bits){return this.clone().iushln(bits)},BN.prototype.shrn=function(bits){return this.clone().ishrn(bits)},BN.prototype.ushrn=function(bits){return this.clone().iushrn(bits)},BN.prototype.testn=function(bit){assert("number"==typeof bit&&bit>=0);var r=bit%26,s=(bit-r)/26,q=1<<r;if(this.length<=s)return!1;var w=this.words[s];return!!(w&q)},BN.prototype.imaskn=function(bits){assert("number"==typeof bits&&bits>=0);var r=bits%26,s=(bits-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),0!==r&&s++,this.length=Math.min(s,this.length),0!==r){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()},BN.prototype.maskn=function(bits){return this.clone().imaskn(bits)},BN.prototype.iaddn=function(num){return assert("number"==typeof num),assert(67108864>num),0>num?this.isubn(-num):0!==this.negative?1===this.length&&(0|this.words[0])<num?(this.words[0]=num-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(num),this.negative=1,this):this._iaddn(num)},BN.prototype._iaddn=function(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},BN.prototype.isubn=function(num){if(assert("number"==typeof num),assert(67108864>num),0>num)return this.iaddn(-num);if(0!==this.negative)return this.negative=0,this.iaddn(num),this.negative=1,this;if(this.words[0]-=num,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},BN.prototype.addn=function(num){return this.clone().iaddn(num)},BN.prototype.subn=function(num){return this.clone().isubn(num)},BN.prototype.iabs=function(){return this.negative=0,this},BN.prototype.abs=function(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function(num,mul,shift){var i,len=num.length+shift;this._expand(len);var w,carry=0;for(i=0;i<num.length;i++){w=(0|this.words[i+shift])+carry;var right=(0|num.words[i])*mul;w-=67108863&right,carry=(w>>26)-(right/67108864|0),this.words[i+shift]=67108863&w}for(;i<this.length-shift;i++)w=(0|this.words[i+shift])+carry,carry=w>>26,this.words[i+shift]=67108863&w;if(0===carry)return this.strip();for(assert(-1===carry),carry=0,i=0;i<this.length;i++)w=-(0|this.words[i])+carry,carry=w>>26,this.words[i]=67108863&w;return this.negative=1,this.strip()},BN.prototype._wordDiv=function(num,mode){var shift=this.length-num.length,a=this.clone(),b=num,bhi=0|b.words[b.length-1],bhiBits=this._countBits(bhi);shift=26-bhiBits,0!==shift&&(b=b.ushln(shift),a.iushln(shift),bhi=0|b.words[b.length-1]);var q,m=a.length-b.length;if("mod"!==mode){q=new BN(null),q.length=m+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var diff=a.clone()._ishlnsubmul(b,1,m);0===diff.negative&&(a=diff,q&&(q.words[m]=1));for(var j=m-1;j>=0;j--){var qj=67108864*(0|a.words[b.length+j])+(0|a.words[b.length+j-1]);for(qj=Math.min(qj/bhi|0,67108863),a._ishlnsubmul(b,qj,j);0!==a.negative;)qj--,a.negative=0,a._ishlnsubmul(b,1,j),a.isZero()||(a.negative^=1);q&&(q.words[j]=qj)}return q&&q.strip(),a.strip(),"div"!==mode&&0!==shift&&a.iushrn(shift),{div:q||null,mod:a}},BN.prototype.divmod=function(num,mode,positive){if(assert(!num.isZero()),this.isZero())return{div:new BN(0),mod:new BN(0)};var div,mod,res;return 0!==this.negative&&0===num.negative?(res=this.neg().divmod(num,mode),"mod"!==mode&&(div=res.div.neg()),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.iadd(num)),{div:div,mod:mod}):0===this.negative&&0!==num.negative?(res=this.divmod(num.neg(),mode),"mod"!==mode&&(div=res.div.neg()),{div:div,mod:res.mod}):0!==(this.negative&num.negative)?(res=this.neg().divmod(num.neg(),mode),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.isub(num)),{div:res.div,mod:mod}):num.length>this.length||this.cmp(num)<0?{div:new BN(0),mod:this}:1===num.length?"div"===mode?{div:this.divn(num.words[0]),mod:null}:"mod"===mode?{div:null,mod:new BN(this.modn(num.words[0]))}:{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}:this._wordDiv(num,mode)},BN.prototype.div=function(num){return this.divmod(num,"div",!1).div},BN.prototype.mod=function(num){return this.divmod(num,"mod",!1).mod},BN.prototype.umod=function(num){return this.divmod(num,"mod",!0).mod},BN.prototype.divRound=function(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=0!==dm.div.negative?dm.mod.isub(num):dm.mod,half=num.ushrn(1),r2=num.andln(1),cmp=mod.cmp(half);return 0>cmp||1===r2&&0===cmp?dm.div:0!==dm.div.negative?dm.div.isubn(1):dm.div.iaddn(1)},BN.prototype.modn=function(num){assert(67108863>=num);for(var p=(1<<26)%num,acc=0,i=this.length-1;i>=0;i--)acc=(p*acc+(0|this.words[i]))%num;return acc},BN.prototype.idivn=function(num){assert(67108863>=num);for(var carry=0,i=this.length-1;i>=0;i--){var w=(0|this.words[i])+67108864*carry;this.words[i]=w/num|0,carry=w%num}return this.strip()},BN.prototype.divn=function(num){return this.clone().idivn(num)},BN.prototype.egcd=function(p){assert(0===p.negative),assert(!p.isZero());var x=this,y=p.clone();x=0!==x.negative?x.umod(p):x.clone();for(var A=new BN(1),B=new BN(0),C=new BN(0),D=new BN(1),g=0;x.isEven()&&y.isEven();)x.iushrn(1),y.iushrn(1),++g;for(var yp=y.clone(),xp=x.clone();!x.isZero();){for(var i=0,im=1;0===(x.words[0]&im)&&26>i;++i,im<<=1);if(i>0)for(x.iushrn(i);i-- >0;)(A.isOdd()||B.isOdd())&&(A.iadd(yp),B.isub(xp)),A.iushrn(1),B.iushrn(1);for(var j=0,jm=1;0===(y.words[0]&jm)&&26>j;++j,jm<<=1);if(j>0)for(y.iushrn(j);j-- >0;)(C.isOdd()||D.isOdd())&&(C.iadd(yp),D.isub(xp)),C.iushrn(1),D.iushrn(1);x.cmp(y)>=0?(x.isub(y),A.isub(C),B.isub(D)):(y.isub(x),C.isub(A),D.isub(B))}return{a:C,b:D,gcd:y.iushln(g)}},BN.prototype._invmp=function(p){assert(0===p.negative),assert(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var x1=new BN(1),x2=new BN(0),delta=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,im=1;0===(a.words[0]&im)&&26>i;++i,im<<=1);if(i>0)for(a.iushrn(i);i-- >0;)x1.isOdd()&&x1.iadd(delta),x1.iushrn(1);for(var j=0,jm=1;0===(b.words[0]&jm)&&26>j;++j,jm<<=1);if(j>0)for(b.iushrn(j);j-- >0;)x2.isOdd()&&x2.iadd(delta),x2.iushrn(1);a.cmp(b)>=0?(a.isub(b),x1.isub(x2)):(b.isub(a),x2.isub(x1))}var res;return res=0===a.cmpn(1)?x1:x2,res.cmpn(0)<0&&res.iadd(p),res},BN.prototype.gcd=function(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone(),b=num.clone();a.negative=0,b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(0>r){var t=a;a=b,b=t}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(shift)},BN.prototype.invm=function(num){return this.egcd(num).a.umod(num)},BN.prototype.isEven=function(){return 0===(1&this.words[0])},BN.prototype.isOdd=function(){return 1===(1&this.words[0])},BN.prototype.andln=function(num){return this.words[0]&num},BN.prototype.bincn=function(bit){assert("number"==typeof bit);var r=bit%26,s=(bit-r)/26,q=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var carry=q,i=s;0!==carry&&i<this.length;i++){var w=0|this.words[i];w+=carry,carry=w>>>26,w&=67108863,this.words[i]=w}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function(num){var negative=0>num;if(0!==this.negative&&!negative)return-1;if(0===this.negative&&negative)return 1;this.strip();var res;if(this.length>1)res=1;else{negative&&(num=-num),assert(67108863>=num,"Number is too big");var w=0|this.words[0];res=w===num?0:num>w?-1:1}return 0!==this.negative?0|-res:res},BN.prototype.cmp=function(num){if(0!==this.negative&&0===num.negative)return-1;if(0===this.negative&&0!==num.negative)return 1;var res=this.ucmp(num);return 0!==this.negative?0|-res:res},BN.prototype.ucmp=function(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;for(var res=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|num.words[i];if(a!==b){b>a?res=-1:a>b&&(res=1);break}}return res},BN.prototype.gtn=function(num){return 1===this.cmpn(num)},BN.prototype.gt=function(num){return 1===this.cmp(num)},BN.prototype.gten=function(num){return this.cmpn(num)>=0},BN.prototype.gte=function(num){return this.cmp(num)>=0},BN.prototype.ltn=function(num){return-1===this.cmpn(num)},BN.prototype.lt=function(num){return-1===this.cmp(num)},BN.prototype.lten=function(num){return this.cmpn(num)<=0},BN.prototype.lte=function(num){return this.cmp(num)<=0},BN.prototype.eqn=function(num){return 0===this.cmpn(num)},BN.prototype.eq=function(num){return 0===this.cmp(num)},BN.red=function(num){return new Red(num)},BN.prototype.toRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),ctx.convertTo(this)._forceRed(ctx)},BN.prototype.fromRed=function(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function(ctx){return this.red=ctx,this},BN.prototype.forceRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),this._forceRed(ctx)},BN.prototype.redAdd=function(num){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,num)},BN.prototype.redIAdd=function(num){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,num)},BN.prototype.redSub=function(num){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,num)},BN.prototype.redISub=function(num){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,num)},BN.prototype.redShl=function(num){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,num)},BN.prototype.redMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.mul(this,num)},BN.prototype.redIMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.imul(this,num)},BN.prototype.redSqr=function(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function(num){return assert(this.red&&!num.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};MPrime.prototype._tmp=function(){var tmp=new BN(null);return tmp.words=new Array(Math.ceil(this.n/13)),tmp},MPrime.prototype.ireduce=function(num){var rlen,r=num;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),rlen=r.bitLength();while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);return 0===cmp?(r.words[0]=0,r.length=1):cmp>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function(input,out){input.iushrn(this.n,0,out)},MPrime.prototype.imulK=function(num){return num.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function(input,output){for(var mask=4194303,outLen=Math.min(input.length,9),i=0;outLen>i;i++)output.words[i]=input.words[i];if(output.length=outLen,input.length<=9)return input.words[0]=0,void(input.length=1);var prev=input.words[9];for(output.words[output.length++]=prev&mask,i=10;i<input.length;i++){var next=0|input.words[i];input.words[i-10]=(next&mask)<<4|prev>>>22,prev=next}prev>>>=22,input.words[i-10]=prev,0===prev&&input.length>10?input.length-=10:input.length-=9},K256.prototype.imulK=function(num){num.words[num.length]=0,num.words[num.length+1]=0,num.length+=2;for(var lo=0,i=0;i<num.length;i++){var w=0|num.words[i];lo+=977*w,num.words[i]=67108863&lo,lo=64*w+(lo/67108864|0)}return 0===num.words[num.length-1]&&(num.length--,0===num.words[num.length-1]&&num.length--),num},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function(num){for(var carry=0,i=0;i<num.length;i++){var hi=19*(0|num.words[i])+carry,lo=67108863&hi;hi>>>=26,num.words[i]=lo,carry=hi}return 0!==carry&&(num.words[num.length++]=carry),num},BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if("k256"===name)prime=new K256;else if("p224"===name)prime=new P224;else if("p192"===name)prime=new P192;else{if("p25519"!==name)throw new Error("Unknown prime "+name);prime=new P25519}return primes[name]=prime,prime},Red.prototype._verify1=function(a){assert(0===a.negative,"red works only with positives"),assert(a.red,"red works only with red numbers")},Red.prototype._verify2=function(a,b){assert(0===(a.negative|b.negative),"red works only with positives"),assert(a.red&&a.red===b.red,"red works only with red numbers")},Red.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},Red.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Red.prototype.add=function(a,b){this._verify2(a,b);var res=a.add(b);return res.cmp(this.m)>=0&&res.isub(this.m),res._forceRed(this)},Red.prototype.iadd=function(a,b){this._verify2(a,b);var res=a.iadd(b);return res.cmp(this.m)>=0&&res.isub(this.m),res},Red.prototype.sub=function(a,b){this._verify2(a,b);var res=a.sub(b);return res.cmpn(0)<0&&res.iadd(this.m),res._forceRed(this)},Red.prototype.isub=function(a,b){this._verify2(a,b);var res=a.isub(b);return res.cmpn(0)<0&&res.iadd(this.m),res},Red.prototype.shl=function(a,num){return this._verify1(a),this.imod(a.ushln(num))},Red.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},Red.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},Red.prototype.isqr=function(a){return this.imul(a,a.clone())},Red.prototype.sqr=function(a){return this.mul(a,a)},Red.prototype.sqrt=function(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);if(assert(mod3%2===1),3===mod3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);assert(!q.isZero());var one=new BN(1).toRed(this),nOne=one.redNeg(),lpow=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new BN(2*z*z).toRed(this);0!==this.pow(z,lpow).cmp(nOne);)z.redIAdd(nOne);for(var c=this.pow(z,q),r=this.pow(a,q.addn(1).iushrn(1)),t=this.pow(a,q),m=s;0!==t.cmp(one);){for(var tmp=t,i=0;0!==tmp.cmp(one);i++)tmp=tmp.redSqr();assert(m>i);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b),c=b.redSqr(),t=t.redMul(c),m=i}return r},Red.prototype.invm=function(a){var inv=a._invmp(this.m);return 0!==inv.negative?(inv.negative=0,this.imod(inv).redNeg()):this.imod(inv)},Red.prototype.pow=function(a,num){if(num.isZero())return new BN(1);if(0===num.cmpn(1))return a.clone();var windowSize=4,wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this),wnd[1]=a;for(var i=2;i<wnd.length;i++)wnd[i]=this.mul(wnd[i-1],a);var res=wnd[0],current=0,currentLen=0,start=num.bitLength()%26;for(0===start&&(start=26),i=num.length-1;i>=0;i--){for(var word=num.words[i],j=start-1;j>=0;j--){var bit=word>>j&1;res!==wnd[0]&&(res=this.sqr(res)),0!==bit||0!==current?(current<<=1,current|=bit,currentLen++,(currentLen===windowSize||0===i&&0===j)&&(res=this.mul(res,wnd[current]),currentLen=0,current=0)):currentLen=0}start=26}return res},Red.prototype.convertTo=function(num){var r=num.umod(this.m);return r===num?r.clone():r},Red.prototype.convertFrom=function(num){var res=num.clone();return res.red=null,res},BN.mont=function(num){return new Mont(num)},inherits(Mont,Red),Mont.prototype.convertTo=function(num){return this.imod(num.ushln(this.shift))},Mont.prototype.convertFrom=function(num){var r=this.imod(num.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.invm=function(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this)}}("undefined"==typeof module||module,this)},{}],40:[function(require,module,exports){(function(Buffer){function blind(priv){var r=getr(priv),blinder=r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)}}function crt(msg,priv){var blinds=blind(priv),len=priv.modulus.byteLength(),blinded=(bn.mont(priv.modulus),new bn(msg).mul(blinds.blinder).umod(priv.modulus)),c1=blinded.toRed(bn.mont(priv.prime1)),c2=blinded.toRed(bn.mont(priv.prime2)),qinv=priv.coefficient,p=priv.prime1,q=priv.prime2,m1=c1.redPow(priv.exponent1),m2=c2.redPow(priv.exponent2);m1=m1.fromRed(),m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);return h.imul(q),m2.iadd(h),new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(!1,len))}function getr(priv){for(var len=priv.modulus.byteLength(),r=new bn(randomBytes(len));r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2);)r=new bn(randomBytes(len));return r}var bn=require("bn.js"),randomBytes=require("randombytes");module.exports=crt,crt.getr=getr}).call(this,require("buffer").Buffer)},{"bn.js":39,buffer:2,randombytes:197}],41:[function(require,module,exports){"use strict";var elliptic=exports;elliptic.version=require("../package.json").version,elliptic.utils=require("./elliptic/utils"),elliptic.rand=require("brorand"),elliptic.hmacDRBG=require("./elliptic/hmac-drbg"),elliptic.curve=require("./elliptic/curve"),elliptic.curves=require("./elliptic/curves"),elliptic.ec=require("./elliptic/ec"),elliptic.eddsa=require("./elliptic/eddsa")},{"../package.json":64,"./elliptic/curve":44,"./elliptic/curves":47,"./elliptic/ec":48,"./elliptic/eddsa":51,"./elliptic/hmac-drbg":54,"./elliptic/utils":56,brorand:57}],42:[function(require,module,exports){"use strict";function BaseCurve(type,conf){this.type=type,this.p=new BN(conf.p,16),this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=conf.n&&new BN(conf.n,16),this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function BasePoint(curve,type){this.curve=curve,this.type=type,this.precomputed=null}var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,getNAF=utils.getNAF,getJSF=utils.getJSF,assert=utils.assert;module.exports=BaseCurve,BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(p,k){assert(p.precomputed);var doubles=p._getDoubles(),naf=getNAF(k,1),I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;for(var repr=[],j=0;j<naf.length;j+=doubles.step){for(var nafW=0,k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW)}for(var a=this.jpoint(null,null,null),b=this.jpoint(null,null,null),i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];nafW===i?b=b.mixedAdd(doubles.points[j]):nafW===-i&&(b=b.mixedAdd(doubles.points[j].neg()))}a=a.add(b)}return a.toP()},BaseCurve.prototype._wnafMul=function(p,k){var w=4,nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;for(var wnd=nafPoints.points,naf=getNAF(k,w),acc=this.jpoint(null,null,null),i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&0===naf[i];i--)k++;if(i>=0&&k++,acc=acc.dblp(k),0>i)break;var z=naf[i];assert(0!==z),acc="affine"===p.type?z>0?acc.mixedAdd(wnd[z-1>>1]):acc.mixedAdd(wnd[-z-1>>1].neg()):z>0?acc.add(wnd[z-1>>1]):acc.add(wnd[-z-1>>1].neg())}return"affine"===p.type?acc.toP():acc},BaseCurve.prototype._wnafMulAdd=function(defW,points,coeffs,len){
for(var wndWidth=this._wnafT1,wnd=this._wnafT2,naf=this._wnafT3,max=0,i=0;len>i;i++){var p=points[i],nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd,wnd[i]=nafPoints.points}for(var i=len-1;i>=1;i-=2){var a=i-1,b=i;if(1===wndWidth[a]&&1===wndWidth[b]){var comb=[points[a],null,null,points[b]];0===points[a].y.cmp(points[b].y)?(comb[1]=points[a].add(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg())):0===points[a].y.cmp(points[b].y.redNeg())?(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].add(points[b].neg())):(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg()));var index=[-3,-1,-5,-7,0,7,5,1,3],jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max),naf[a]=new Array(max),naf[b]=new Array(max);for(var j=0;max>j;j++){var ja=0|jsf[0][j],jb=0|jsf[1][j];naf[a][j]=index[3*(ja+1)+(jb+1)],naf[b][j]=0,wnd[a]=comb}}else naf[a]=getNAF(coeffs[a],wndWidth[a]),naf[b]=getNAF(coeffs[b],wndWidth[b]),max=Math.max(naf[a].length,max),max=Math.max(naf[b].length,max)}for(var acc=this.jpoint(null,null,null),tmp=this._wnafT4,i=max;i>=0;i--){for(var k=0;i>=0;){for(var zero=!0,j=0;len>j;j++)tmp[j]=0|naf[j][i],0!==tmp[j]&&(zero=!1);if(!zero)break;k++,i--}if(i>=0&&k++,acc=acc.dblp(k),0>i)break;for(var j=0;len>j;j++){var p,z=tmp[j];0!==z&&(z>0?p=wnd[j][z-1>>1]:0>z&&(p=wnd[j][-z-1>>1].neg()),acc="affine"===p.type?acc.mixedAdd(p):acc.add(p))}}for(var i=0;len>i;i++)wnd[i]=null;return acc.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if(4===bytes[0]&&bytes.length-1===2*len)return this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));if((2===bytes[0]||3===bytes[0])&&bytes.length-1===len)return this.pointFromX(bytes.slice(1,1+len),3===bytes[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(enc){return this.encode(enc,!0)},BasePoint.prototype._encode=function(compact){var len=this.curve.p.byteLength(),x=this.getX().toArray("be",len);return compact?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray("be",len))},BasePoint.prototype.encode=function(enc,compact){return utils.encode(this._encode(compact),enc)},BasePoint.prototype.precompute=function(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};return precomputed.naf=this._getNAFPoints(8),precomputed.doubles=this._getDoubles(4,power),precomputed.beta=this._getBeta(),this.precomputed=precomputed,this},BasePoint.prototype._hasDoubles=function(k){if(!this.precomputed)return!1;var doubles=this.precomputed.doubles;return doubles?doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step):!1},BasePoint.prototype._getDoubles=function(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var doubles=[this],acc=this,i=0;power>i;i+=step){for(var j=0;step>j;j++)acc=acc.dbl();doubles.push(acc)}return{step:step,points:doubles}},BasePoint.prototype._getNAFPoints=function(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var res=[this],max=(1<<wnd)-1,dbl=1===max?null:this.dbl(),i=1;max>i;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(k){for(var r=this,i=0;k>i;i++)r=r.dbl();return r}},{"../../elliptic":41,"bn.js":39}],43:[function(require,module,exports){"use strict";function EdwardsCurve(conf){this.twisted=1!==(0|conf.a),this.mOneA=this.twisted&&-1===(0|conf.a),this.extended=this.mOneA,Base.call(this,"edwards",conf),this.a=new BN(conf.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN(conf.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN(conf.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|conf.c)}function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,"projective"),null===x&&null===y&&null===z?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=z?new BN(z,16):this.curve.one,this.t=t&&new BN(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var curve=require("../curve"),elliptic=require("../../elliptic"),BN=require("bn.js"),inherits=require("inherits"),Base=curve.base,assert=elliptic.utils.assert;inherits(EdwardsCurve,Base),module.exports=EdwardsCurve,EdwardsCurve.prototype._mulA=function(num){return this.mOneA?num.redNeg():this.a.redMul(num)},EdwardsCurve.prototype._mulC=function(num){return this.oneC?num:this.c.redMul(num)},EdwardsCurve.prototype.jpoint=function(x,y,z,t){return this.point(x,y,z,t)},EdwardsCurve.prototype.pointFromX=function(x,odd){x=new BN(x,16),x.red||(x=x.toRed(this.red));var x2=x.redSqr(),rhs=this.c2.redSub(this.a.redMul(x2)),lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2)),y2=rhs.redMul(lhs.redInvm()),y=y2.redSqrt();if(0!==y.redSqr().redSub(y2).cmp(this.zero))throw new Error("invalid point");var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},EdwardsCurve.prototype.pointFromY=function(y,odd){y=new BN(y,16),y.red||(y=y.toRed(this.red));var y2=y.redSqr(),lhs=y2.redSub(this.one),rhs=y2.redMul(this.d).redAdd(this.one),x2=lhs.redMul(rhs.redInvm());if(0===x2.cmp(this.zero)){if(odd)throw new Error("invalid point");return this.point(this.zero,y)}var x=x2.redSqrt();if(0!==x.redSqr().redSub(x2).cmp(this.zero))throw new Error("invalid point");return x.isOdd()!==odd&&(x=x.redNeg()),this.point(x,y)},EdwardsCurve.prototype.validate=function(point){if(point.isInfinity())return!0;point.normalize();var x2=point.x.redSqr(),y2=point.y.redSqr(),lhs=x2.redMul(this.a).redAdd(y2),rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return 0===lhs.cmp(rhs)},inherits(Point,Base.BasePoint),EdwardsCurve.prototype.pointFromJSON=function(obj){return Point.fromJSON(this,obj)},EdwardsCurve.prototype.point=function(x,y,z,t){return new Point(this,x,y,z,t)},Point.fromJSON=function(curve,obj){return new Point(curve,obj[0],obj[1],obj[2])},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},Point.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),g=d.redAdd(b),f=g.redSub(c),h=d.redSub(b),nx=e.redMul(f),ny=g.redMul(h),nt=e.redMul(h),nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projDbl=function(){var nx,ny,nz,b=this.x.redAdd(this.y).redSqr(),c=this.x.redSqr(),d=this.y.redSqr();if(this.curve.twisted){var e=this.curve._mulA(c),f=e.redAdd(d);if(this.zOne)nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two)),ny=f.redMul(e.redSub(d)),nz=f.redSqr().redSub(f).redSub(f);else{var h=this.z.redSqr(),j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j),ny=f.redMul(e.redSub(d)),nz=f.redMul(j)}}else{var e=c.redAdd(d),h=this.curve._mulC(this.c.redMul(this.z)).redSqr(),j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j),ny=this.curve._mulC(e).redMul(c.redISub(d)),nz=e.redMul(j)}return this.curve.point(nx,ny,nz)},Point.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x)),b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x)),c=this.t.redMul(this.curve.dd).redMul(p.t),d=this.z.redMul(p.z.redAdd(p.z)),e=b.redSub(a),f=d.redSub(c),g=d.redAdd(c),h=b.redAdd(a),nx=e.redMul(f),ny=g.redMul(h),nt=e.redMul(h),nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projAdd=function(p){var ny,nz,a=this.z.redMul(p.z),b=a.redSqr(),c=this.x.redMul(p.x),d=this.y.redMul(p.y),e=this.curve.d.redMul(c).redMul(d),f=b.redSub(e),g=b.redAdd(e),tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d),nx=a.redMul(f).redMul(tmp);return this.curve.twisted?(ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c))),nz=f.redMul(g)):(ny=a.redMul(g).redMul(d.redSub(c)),nz=this.curve._mulC(f).redMul(g)),this.curve.point(nx,ny,nz)},Point.prototype.add=function(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},Point.prototype.mul=function(k){return this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2)},Point.prototype.normalize=function(){if(this.zOne)return this;var zi=this.z.redInvm();return this.x=this.x.redMul(zi),this.y=this.y.redMul(zi),this.t&&(this.t=this.t.redMul(zi)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function(other){return this===other||0===this.getX().cmp(other.getX())&&0===this.getY().cmp(other.getY())},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add},{"../../elliptic":41,"../curve":44,"bn.js":39,inherits:199}],44:[function(require,module,exports){"use strict";var curve=exports;curve.base=require("./base"),curve["short"]=require("./short"),curve.mont=require("./mont"),curve.edwards=require("./edwards")},{"./base":42,"./edwards":43,"./mont":45,"./short":46}],45:[function(require,module,exports){"use strict";function MontCurve(conf){Base.call(this,"mont",conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.i4=new BN(4).toRed(this.red).redInvm(),this.two=new BN(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Point(curve,x,z){Base.BasePoint.call(this,curve,"projective"),null===x&&null===z?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN(x,16),this.z=new BN(z,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var curve=require("../curve"),BN=require("bn.js"),inherits=require("inherits"),Base=curve.base,elliptic=require("../../elliptic"),utils=elliptic.utils;inherits(MontCurve,Base),module.exports=MontCurve,MontCurve.prototype.validate=function(point){var x=point.normalize().x,x2=x.redSqr(),rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x),y=rhs.redSqrt();return 0===y.redSqr().cmp(rhs)},inherits(Point,Base.BasePoint),MontCurve.prototype.decodePoint=function(bytes,enc){return this.point(utils.toArray(bytes,enc),1)},MontCurve.prototype.point=function(x,z){return new Point(this,x,z)},MontCurve.prototype.pointFromJSON=function(obj){return Point.fromJSON(this,obj)},Point.prototype.precompute=function(){},Point.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point.fromJSON=function(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one)},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Point.prototype.dbl=function(){var a=this.x.redAdd(this.z),aa=a.redSqr(),b=this.x.redSub(this.z),bb=b.redSqr(),c=aa.redSub(bb),nx=aa.redMul(bb),nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz)},Point.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.diffAdd=function(p,diff){var a=this.x.redAdd(this.z),b=this.x.redSub(this.z),c=p.x.redAdd(p.z),d=p.x.redSub(p.z),da=d.redMul(a),cb=c.redMul(b),nx=diff.z.redMul(da.redAdd(cb).redSqr()),nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz)},Point.prototype.mul=function(k){for(var t=k.clone(),a=this,b=this.curve.point(null,null),c=this,bits=[];0!==t.cmpn(0);t.iushrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--)0===bits[i]?(a=a.diffAdd(b,c),b=b.dbl()):(b=a.diffAdd(b,c),a=a.dbl());return b},Point.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.eq=function(other){return 0===this.getX().cmp(other.getX())},Point.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":41,"../curve":44,"bn.js":39,inherits:199}],46:[function(require,module,exports){"use strict";function ShortCurve(conf){Base.call(this,"short",conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(conf),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,"affine"),null===x&&null===y?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(x,16),this.y=new BN(y,16),isRed&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,"jacobian"),null===x&&null===y&&null===z?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=new BN(z,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var curve=require("../curve"),elliptic=require("../../elliptic"),BN=require("bn.js"),inherits=require("inherits"),Base=curve.base,assert=elliptic.utils.assert;inherits(ShortCurve,Base),module.exports=ShortCurve,ShortCurve.prototype._getEndomorphism=function(conf){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var beta,lambda;if(conf.beta)beta=new BN(conf.beta,16).toRed(this.red);else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1],beta=beta.toRed(this.red)}if(conf.lambda)lambda=new BN(conf.lambda,16);else{var lambdas=this._getEndoRoots(this.n);0===this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))?lambda=lambdas[0]:(lambda=lambdas[1],assert(0===this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))))}var basis;return basis=conf.basis?conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)}}):this._getEndoBasis(lambda),{beta:beta,lambda:lambda,basis:basis}}},ShortCurve.prototype._getEndoRoots=function(num){var red=num===this.p?this.red:BN.mont(num),tinv=new BN(2).toRed(red).redInvm(),ntinv=tinv.redNeg(),s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv),l1=ntinv.redAdd(s).fromRed(),l2=ntinv.redSub(s).fromRed();return[l1,l2]},ShortCurve.prototype._getEndoBasis=function(lambda){for(var a0,b0,a1,b1,a2,b2,prevR,r,x,aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=lambda,v=this.n.clone(),x1=new BN(1),y1=new BN(0),x2=new BN(0),y2=new BN(1),i=0;0!==u.cmpn(0);){var q=v.div(u);r=v.sub(q.mul(u)),x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0)a0=prevR.neg(),b0=x1,a1=r.neg(),b1=x;else if(a1&&2===++i)break;prevR=r,v=u,u=r,x2=x1,x1=x,y2=y1,y1=y}a2=r.neg(),b2=x;var len1=a1.sqr().add(b1.sqr()),len2=a2.sqr().add(b2.sqr());return len2.cmp(len1)>=0&&(a2=a0,b2=b0),a1.negative&&(a1=a1.neg(),b1=b1.neg()),a2.negative&&(a2=a2.neg(),b2=b2.neg()),[{a:a1,b:b1},{a:a2,b:b2}]},ShortCurve.prototype._endoSplit=function(k){var basis=this.endo.basis,v1=basis[0],v2=basis[1],c1=v2.b.mul(k).divRound(this.n),c2=v1.b.neg().mul(k).divRound(this.n),p1=c1.mul(v1.a),p2=c2.mul(v2.a),q1=c1.mul(v1.b),q2=c2.mul(v2.b),k1=k.sub(p1).sub(p2),k2=q1.add(q2).neg();return{k1:k1,k2:k2}},ShortCurve.prototype.pointFromX=function(x,odd){x=new BN(x,16),x.red||(x=x.toRed(this.red));var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b),y=y2.redSqrt();if(0!==y.redSqr().redSub(y2).cmp(this.zero))throw new Error("invalid point");var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},ShortCurve.prototype.validate=function(point){if(point.inf)return!0;var x=point.x,y=point.y,ax=this.a.redMul(x),rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return 0===y.redSqr().redISub(rhs).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function(points,coeffs){for(var npoints=this._endoWnafT1,ncoeffs=this._endoWnafT2,i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]),p=points[i],beta=p._getBeta();split.k1.negative&&(split.k1.ineg(),p=p.neg(!0)),split.k2.negative&&(split.k2.ineg(),beta=beta.neg(!0)),npoints[2*i]=p,npoints[2*i+1]=beta,ncoeffs[2*i]=split.k1,ncoeffs[2*i+1]=split.k2}for(var res=this._wnafMulAdd(1,npoints,ncoeffs,2*i),j=0;2*i>j;j++)npoints[j]=null,ncoeffs[j]=null;return res},inherits(Point,Base.BasePoint),ShortCurve.prototype.point=function(x,y,isRed){return new Point(this,x,y,isRed)},ShortCurve.prototype.pointFromJSON=function(obj,red){return Point.fromJSON(this,obj,red)},Point.prototype._getBeta=function(){if(this.curve.endo){var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve,endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta,beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta}},Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function(curve,obj,red){function obj2point(obj){return curve.point(obj[0],obj[1],red)}"string"==typeof obj&&(obj=JSON.parse(obj));var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;var pre=obj[2];return res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}},res},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.inf},Point.prototype.add=function(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(0===this.x.cmp(p.x))return this.curve.point(null,null);var c=this.y.redSub(p.y);0!==c.cmpn(0)&&(c=c.redMul(this.x.redSub(p.x).redInvm()));var nx=c.redSqr().redISub(this.x).redISub(p.x),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.dbl=function(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(0===ys1.cmpn(0))return this.curve.point(null,null);var a=this.curve.a,x2=this.x.redSqr(),dyinv=ys1.redInvm(),c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv),nx=c.redSqr().redISub(this.x.redAdd(this.x)),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.getX=function(){return this.x.fromRed()},Point.prototype.getY=function(){return this.y.fromRed()},Point.prototype.mul=function(k){return k=new BN(k,16),this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve.endo?this.curve._endoWnafMulAdd([this],[k]):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function(k1,p2,k2){var points=[this,p2],coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs):this.curve._wnafMulAdd(1,points,coeffs,2)},Point.prototype.eq=function(p){return this===p||this.inf===p.inf&&(this.inf||0===this.x.cmp(p.x)&&0===this.y.cmp(p.y))},Point.prototype.neg=function(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed,negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res},Point.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res},inherits(JPoint,Base.BasePoint),ShortCurve.prototype.jpoint=function(x,y,z){return new JPoint(this,x,y,z)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm(),zinv2=zinv.redSqr(),ax=this.x.redMul(zinv2),ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr(),z2=this.z.redSqr(),u1=this.x.redMul(pz2),u2=p.x.redMul(z2),s1=this.y.redMul(pz2.redMul(p.z)),s2=p.y.redMul(z2.redMul(this.z)),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mixedAdd=function(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr(),u1=this.x,u2=p.x.redMul(z2),s1=this.y,s2=p.y.redMul(z2).redMul(this.z),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.dblp=function(pow){if(0===pow)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var r=this,i=0;pow>i;i++)r=r.dbl();return r}for(var a=this.curve.a,tinv=this.curve.tinv,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jyd=jy.redAdd(jy),i=0;pow>i;i++){var jx2=jx.redSqr(),jyd2=jyd.redSqr(),jyd4=jyd2.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),t1=jx.redMul(jyd2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);pow>i+1&&(jz4=jz4.redMul(jyd4)),jx=nx,jz=nz,jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx),t=m.redSqr().redISub(s).redISub(s),yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8),yyyy8=yyyy8.redIAdd(yyyy8),nx=t,ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a),f=e.redSqr(),c8=c.redIAdd(c);c8=c8.redIAdd(c8),c8=c8.redIAdd(c8),nx=f.redISub(d).redISub(d),ny=e.redMul(d.redISub(nx)).redISub(c8),nz=this.y.redMul(this.z),nz=nz.redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._threeDbl=function(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a),t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8),yyyy8=yyyy8.redIAdd(yyyy8),ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr(),gamma=this.y.redSqr(),beta=this.x.redMul(gamma),alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8),nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8),ggamma8=ggamma8.redIAdd(ggamma8),ggamma8=ggamma8.redIAdd(ggamma8),ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._dbl=function(){var a=this.curve.a,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jx2=jx.redSqr(),jy2=jy.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8),jyd8=jyd8.redIAdd(jyd8),jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8),nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr(),yy=this.y.redSqr(),zz=this.z.redSqr(),yyyy=yy.redSqr(),m=xx.redAdd(xx).redIAdd(xx),mm=m.redSqr(),e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e),e=e.redAdd(e).redIAdd(e),e=e.redISub(mm);var ee=e.redSqr(),t=yyyy.redIAdd(yyyy);t=t.redIAdd(t),t=t.redIAdd(t),t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t),yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4),yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx),nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny),ny=ny.redIAdd(ny),ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mul=function(k,kbase){return k=new BN(k,kbase),this.curve._wnafMul(this,k)},JPoint.prototype.eq=function(p){if("affine"===p.type)return this.eq(p.toJ());if(this===p)return!0;var z2=this.z.redSqr(),pz2=p.z.redSqr();if(0!==this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0))return!1;var z3=z2.redMul(this.z),pz3=pz2.redMul(p.z);return 0===this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":41,"../curve":44,"bn.js":39,inherits:199}],47:[function(require,module,exports){"use strict";function PresetCurve(options){"short"===options.type?this.curve=new elliptic.curve["short"](options):"edwards"===options.type?this.curve=new elliptic.curve.edwards(options):this.curve=new elliptic.curve.mont(options),this.g=this.curve.g,this.n=this.curve.n,this.hash=options.hash,assert(this.g.validate(),"Invalid curve"),assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,get:function(){var curve=new PresetCurve(options);return Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,value:curve}),curve}})}var curves=exports,hash=require("hash.js"),elliptic=require("../elliptic"),assert=elliptic.utils.assert;curves.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]
});var pre;try{pre=require("./precomputed/secp256k1")}catch(e){pre=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]})},{"../elliptic":41,"./precomputed/secp256k1":55,"hash.js":58}],48:[function(require,module,exports){"use strict";function EC(options){return this instanceof EC?("string"==typeof options&&(assert(elliptic.curves.hasOwnProperty(options),"Unknown curve "+options),options=elliptic.curves[options]),options instanceof elliptic.curves.PresetCurve&&(options={curve:options}),this.curve=options.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=options.curve.g,this.g.precompute(options.curve.n.bitLength()+1),void(this.hash=options.hash||options.curve.hash)):new EC(options)}var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,KeyPair=require("./key"),Signature=require("./signature");module.exports=EC,EC.prototype.keyPair=function(options){return new KeyPair(this,options)},EC.prototype.keyFromPrivate=function(priv,enc){return KeyPair.fromPrivate(this,priv,enc)},EC.prototype.keyFromPublic=function(pub,enc){return KeyPair.fromPublic(this,pub,enc)},EC.prototype.genKeyPair=function(options){options||(options={});for(var drbg=new elliptic.hmacDRBG({hash:this.hash,pers:options.pers,entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),bytes=this.n.byteLength(),ns2=this.n.sub(new BN(2));;){var priv=new BN(drbg.generate(bytes));if(!(priv.cmp(ns2)>0))return priv.iaddn(1),this.keyFromPrivate(priv)}},EC.prototype._truncateToN=function(msg,truncOnly){var delta=8*msg.byteLength()-this.n.bitLength();return delta>0&&(msg=msg.ushrn(delta)),!truncOnly&&msg.cmp(this.n)>=0?msg.sub(this.n):msg},EC.prototype.sign=function(msg,key,enc,options){"object"==typeof enc&&(options=enc,enc=null),options||(options={}),key=this.keyFromPrivate(key,enc),msg=this._truncateToN(new BN(msg,16));for(var bytes=this.n.byteLength(),bkey=key.getPrivate().toArray("be",bytes),nonce=msg.toArray("be",bytes),drbg=new elliptic.hmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc}),ns1=this.n.sub(new BN(1)),iter=0;!0;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));if(k=this._truncateToN(k,!0),!(k.cmpn(1)<=0||k.cmp(ns1)>=0)){var kp=this.g.mul(k);if(!kp.isInfinity()){var kpX=kp.getX(),r=kpX.umod(this.n);if(0!==r.cmpn(0)){var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));if(s=s.umod(this.n),0!==s.cmpn(0)){var recoveryParam=(kp.getY().isOdd()?1:0)|(0!==kpX.cmp(r)?2:0);return options.canonical&&s.cmp(this.nh)>0&&(s=this.n.sub(s),recoveryParam^=1),new Signature({r:r,s:s,recoveryParam:recoveryParam})}}}}}},EC.prototype.verify=function(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16)),key=this.keyFromPublic(key,enc),signature=new Signature(signature,"hex");var r=signature.r,s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var sinv=s.invm(this.n),u1=sinv.mul(msg).umod(this.n),u2=sinv.mul(r).umod(this.n),p=this.g.mulAdd(u1,key.getPublic(),u2);return p.isInfinity()?!1:0===p.getX().umod(this.n).cmp(r)},EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,"The recovery param is more than two bits"),signature=new Signature(signature,enc);var n=this.n,e=new BN(msg),r=signature.r,s=signature.s,isYOdd=1&j,isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error("Unable to find sencond key candinate");r=isSecondKey?this.curve.pointFromX(r.add(this.curve.n),isYOdd):this.curve.pointFromX(r,isYOdd);var eNeg=n.sub(e),rInv=signature.r.invm(n);return this.g.mulAdd(eNeg,r,s).mul(rInv)},EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){if(signature=new Signature(signature,enc),null!==signature.recoveryParam)return signature.recoveryParam;for(var i=0;4>i;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error("Unable to find valid recovery factor")}},{"../../elliptic":41,"./key":49,"./signature":50,"bn.js":39}],49:[function(require,module,exports){"use strict";function KeyPair(ec,options){this.ec=ec,this.priv=null,this.pub=null,options.priv&&this._importPrivate(options.priv,options.privEnc),options.pub&&this._importPublic(options.pub,options.pubEnc)}var BN=require("bn.js");module.exports=KeyPair,KeyPair.fromPublic=function(ec,pub,enc){return pub instanceof KeyPair?pub:new KeyPair(ec,{pub:pub,pubEnc:enc})},KeyPair.fromPrivate=function(ec,priv,enc){return priv instanceof KeyPair?priv:new KeyPair(ec,{priv:priv,privEnc:enc})},KeyPair.prototype.validate=function(){var pub=this.getPublic();return pub.isInfinity()?{result:!1,reason:"Invalid public key"}:pub.validate()?pub.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function(compact,enc){return"string"==typeof compact&&(enc=compact,compact=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),enc?this.pub.encode(enc,compact):this.pub},KeyPair.prototype.getPrivate=function(enc){return"hex"===enc?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function(key,enc){this.priv=new BN(key,enc||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function(key,enc){return key.x||key.y?void(this.pub=this.ec.curve.point(key.x,key.y)):void(this.pub=this.ec.curve.decodePoint(key,enc))},KeyPair.prototype.derive=function(pub){return pub.mul(this.priv).getX()},KeyPair.prototype.sign=function(msg,enc,options){return this.ec.sign(msg,this,enc,options)},KeyPair.prototype.verify=function(msg,signature){return this.ec.verify(msg,signature,this)},KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"bn.js":39}],50:[function(require,module,exports){"use strict";function Signature(options,enc){return options instanceof Signature?options:void(this._importDER(options,enc)||(assert(options.r&&options.s,"Signature without r or s"),this.r=new BN(options.r,16),this.s=new BN(options.s,16),void 0===options.recoveryParam?this.recoveryParam=null:this.recoveryParam=options.recoveryParam))}function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(128&initial))return initial;for(var octetLen=15&initial,val=0,i=0,off=p.place;octetLen>i;i++,off++)val<<=8,val|=buf[off];return p.place=off,val}function rmPadding(buf){for(var i=0,len=buf.length-1;!buf[i]&&!(128&buf[i+1])&&len>i;)i++;return 0===i?buf:buf.slice(i)}function constructLength(arr,len){if(128>len)return void arr.push(len);var octets=1+(Math.log(len)/Math.LN2>>>3);for(arr.push(128|octets);--octets;)arr.push(len>>>(octets<<3)&255);arr.push(len)}var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert;module.exports=Signature,Signature.prototype._importDER=function(data,enc){data=utils.toArray(data,enc);var p=new Position;if(48!==data[p.place++])return!1;var len=getLength(data,p);if(len+p.place!==data.length)return!1;if(2!==data[p.place++])return!1;var rlen=getLength(data,p),r=data.slice(p.place,rlen+p.place);if(p.place+=rlen,2!==data[p.place++])return!1;var slen=getLength(data,p);if(data.length!==slen+p.place)return!1;var s=data.slice(p.place,slen+p.place);return 0===r[0]&&128&r[1]&&(r=r.slice(1)),0===s[0]&&128&s[1]&&(s=s.slice(1)),this.r=new BN(r),this.s=new BN(s),this.recoveryParam=null,!0},Signature.prototype.toDER=function(enc){var r=this.r.toArray(),s=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&s[0]&&(s=[0].concat(s)),r=rmPadding(r),s=rmPadding(s);!(s[0]||128&s[1]);)s=s.slice(1);var arr=[2];constructLength(arr,r.length),arr=arr.concat(r),arr.push(2),constructLength(arr,s.length);var backHalf=arr.concat(s),res=[48];return constructLength(res,backHalf.length),res=res.concat(backHalf),utils.encode(res,enc)}},{"../../elliptic":41,"bn.js":39}],51:[function(require,module,exports){"use strict";function EDDSA(curve){if(assert("ed25519"===curve,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(curve);var curve=elliptic.curves[curve].curve;this.curve=curve,this.g=curve.g,this.g.precompute(curve.n.bitLength()+1),this.pointClass=curve.point().constructor,this.encodingLength=Math.ceil(curve.n.bitLength()/8),this.hash=hash.sha512}var hash=require("hash.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,parseBytes=utils.parseBytes,KeyPair=require("./key"),Signature=require("./signature");module.exports=EDDSA,EDDSA.prototype.sign=function(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret),r=this.hashInt(key.messagePrefix(),message),R=this.g.mul(r),Rencoded=this.encodePoint(R),s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv()),S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded})},EDDSA.prototype.verify=function(message,sig,pub){message=parseBytes(message),sig=this.makeSignature(sig);var key=this.keyFromPublic(pub),h=this.hashInt(sig.Rencoded(),key.pubBytes(),message),SG=this.g.mul(sig.S()),RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG)},EDDSA.prototype.hashInt=function(){for(var hash=this.hash(),i=0;i<arguments.length;i++)hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function(pub){return KeyPair.fromPublic(this,pub)},EDDSA.prototype.keyFromSecret=function(secret){return KeyPair.fromSecret(this,secret)},EDDSA.prototype.makeSignature=function(sig){return sig instanceof Signature?sig:new Signature(this,sig)},EDDSA.prototype.encodePoint=function(point){var enc=point.getY().toArray("le",this.encodingLength);return enc[this.encodingLength-1]|=point.getX().isOdd()?128:0,enc},EDDSA.prototype.decodePoint=function(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1,normed=bytes.slice(0,lastIx).concat(-129&bytes[lastIx]),xIsOdd=0!==(128&bytes[lastIx]),y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd)},EDDSA.prototype.encodeInt=function(num){return num.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function(bytes){return utils.intFromLE(bytes)},EDDSA.prototype.isPoint=function(val){return val instanceof this.pointClass}},{"../../elliptic":41,"./key":52,"./signature":53,"hash.js":58}],52:[function(require,module,exports){"use strict";function KeyPair(eddsa,params){this.eddsa=eddsa,this._secret=parseBytes(params.secret),eddsa.isPoint(params.pub)?this._pub=params.pub:this._pubBytes=parseBytes(params.pub)}var elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,parseBytes=utils.parseBytes,cachedProperty=utils.cachedProperty;KeyPair.fromPublic=function(eddsa,pub){return pub instanceof KeyPair?pub:new KeyPair(eddsa,{pub:pub})},KeyPair.fromSecret=function(eddsa,secret){return secret instanceof KeyPair?secret:new KeyPair(eddsa,{secret:secret})},KeyPair.prototype.secret=function(){return this._secret},cachedProperty(KeyPair,function(){return this.eddsa.encodePoint(this.pub())}),cachedProperty(KeyPair,function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty(KeyPair,function(){var eddsa=this.eddsa,hash=this.hash(),lastIx=eddsa.encodingLength-1,a=hash.slice(0,eddsa.encodingLength);return a[0]&=248,a[lastIx]&=127,a[lastIx]|=64,a}),cachedProperty(KeyPair,function(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty(KeyPair,function(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty(KeyPair,function(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair.prototype.sign=function(message){return assert(this._secret,"KeyPair can only verify"),this.eddsa.sign(message,this)},KeyPair.prototype.verify=function(message,sig){return this.eddsa.verify(message,sig,this)},KeyPair.prototype.getSecret=function(enc){return assert(this._secret,"KeyPair is public only"),utils.encode(this.secret(),enc)},KeyPair.prototype.getPublic=function(enc){return utils.encode(this.pubBytes(),enc)},module.exports=KeyPair},{"../../elliptic":41}],53:[function(require,module,exports){"use strict";function Signature(eddsa,sig){this.eddsa=eddsa,"object"!=typeof sig&&(sig=parseBytes(sig)),Array.isArray(sig)&&(sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)}),assert(sig.R&&sig.S,"Signature without R or S"),eddsa.isPoint(sig.R)&&(this._R=sig.R),sig.S instanceof BN&&(this._S=sig.S),this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded,this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded}var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,cachedProperty=utils.cachedProperty,parseBytes=utils.parseBytes;cachedProperty(Signature,function(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty(Signature,function(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty(Signature,function(){return this.eddsa.encodePoint(this.R())}),cachedProperty(Signature,function(){return this.eddsa.encodeInt(this.S())}),Signature.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature.prototype.toHex=function(){return utils.encode(this.toBytes(),"hex").toUpperCase()},module.exports=Signature},{"../../elliptic":41,"bn.js":39}],54:[function(require,module,exports){"use strict";function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash,this.predResist=!!options.predResist,this.outLen=this.hash.outSize,this.minEntropy=options.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc),nonce=utils.toArray(options.nonce,options.nonceEnc),pers=utils.toArray(options.pers,options.persEnc);assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(entropy,nonce,pers)}var hash=require("hash.js"),elliptic=require("../elliptic"),utils=elliptic.utils,assert=utils.assert;module.exports=HmacDRBG,HmacDRBG.prototype._init=function(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(seed),this.reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function(){return new hash.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function(seed){var kmac=this._hmac().update(this.V).update([0]);seed&&(kmac=kmac.update(seed)),this.K=kmac.digest(),this.V=this._hmac().update(this.V).digest(),seed&&(this.K=this._hmac().update(this.V).update([1]).update(seed).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function(entropy,entropyEnc,add,addEnc){"string"!=typeof entropyEnc&&(addEnc=add,add=entropyEnc,entropyEnc=null),entropy=utils.toBuffer(entropy,entropyEnc),add=utils.toBuffer(add,addEnc),assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(entropy.concat(add||[])),this.reseed=1},HmacDRBG.prototype.generate=function(len,enc,add,addEnc){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof enc&&(addEnc=add,add=enc,enc=null),add&&(add=utils.toArray(add,addEnc),this._update(add));for(var temp=[];temp.length<len;)this.V=this._hmac().update(this.V).digest(),temp=temp.concat(this.V);var res=temp.slice(0,len);return this._update(add),this.reseed++,utils.encode(res,enc)}},{"../elliptic":41,"hash.js":58}],55:[function(require,module,exports){module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]
}}},{}],56:[function(require,module,exports){"use strict";function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"!=typeof msg){for(var i=0;i<msg.length;i++)res[i]=0|msg[i];return res}if(enc){if("hex"===enc){msg=msg.replace(/[^a-z0-9]+/gi,""),msg.length%2!==0&&(msg="0"+msg);for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}}else for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i),hi=c>>8,lo=255&c;hi?res.push(hi,lo):res.push(lo)}return res}function zero2(word){return 1===word.length?"0"+word:word}function toHex(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}function getNAF(num,w){for(var naf=[],ws=1<<w+1,k=num.clone();k.cmpn(1)>=0;){var z;if(k.isOdd()){var mod=k.andln(ws-1);z=mod>(ws>>1)-1?(ws>>1)-mod:mod,k.isubn(z)}else z=0;naf.push(z);for(var shift=0!==k.cmpn(0)&&0===k.andln(ws-1)?w+1:1,i=1;shift>i;i++)naf.push(0);k.iushrn(shift)}return naf}function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone(),k2=k2.clone();for(var d1=0,d2=0;k1.cmpn(-d1)>0||k2.cmpn(-d2)>0;){var m14=k1.andln(3)+d1&3,m24=k2.andln(3)+d2&3;3===m14&&(m14=-1),3===m24&&(m24=-1);var u1;if(0===(1&m14))u1=0;else{var m8=k1.andln(7)+d1&7;u1=3!==m8&&5!==m8||2!==m24?m14:-m14}jsf[0].push(u1);var u2;if(0===(1&m24))u2=0;else{var m8=k2.andln(7)+d2&7;u2=3!==m8&&5!==m8||2!==m14?m24:-m24}jsf[1].push(u2),2*d1===u1+1&&(d1=1-d1),2*d2===u2+1&&(d2=1-d2),k1.iushrn(1),k2.iushrn(1)}return jsf}function cachedProperty(obj,computer){var name=computer.name,key="_"+name;obj.prototype[name]=function(){return void 0!==this[key]?this[key]:this[key]=computer.call(this)}}function parseBytes(bytes){return"string"==typeof bytes?utils.toArray(bytes,"hex"):bytes}function intFromLE(bytes){return new BN(bytes,"hex","le")}var utils=exports,BN=require("bn.js");utils.assert=function(val,msg){if(!val)throw new Error(msg||"Assertion failed")},utils.toArray=toArray,utils.zero2=zero2,utils.toHex=toHex,utils.encode=function(arr,enc){return"hex"===enc?toHex(arr):arr},utils.getNAF=getNAF,utils.getJSF=getJSF,utils.cachedProperty=cachedProperty,utils.parseBytes=parseBytes,utils.intFromLE=intFromLE},{"bn.js":39}],57:[function(require,module,exports){function Rand(rand){this.rand=rand}var r;if(module.exports=function(len){return r||(r=new Rand(null)),r.generate(len)},module.exports.Rand=Rand,Rand.prototype.generate=function(len){return this._rand(len)},"object"==typeof window)window.crypto&&window.crypto.getRandomValues?Rand.prototype._rand=function(n){var arr=new Uint8Array(n);return window.crypto.getRandomValues(arr),arr}:window.msCrypto&&window.msCrypto.getRandomValues?Rand.prototype._rand=function(n){var arr=new Uint8Array(n);return window.msCrypto.getRandomValues(arr),arr}:Rand.prototype._rand=function(){throw new Error("Not implemented yet")};else try{var crypto=require("crypto");Rand.prototype._rand=function(n){return crypto.randomBytes(n)}}catch(e){Rand.prototype._rand=function(n){for(var res=new Uint8Array(n),i=0;i<res.length;i++)res[i]=this.rand.getByte();return res}}},{}],58:[function(require,module,exports){var hash=exports;hash.utils=require("./hash/utils"),hash.common=require("./hash/common"),hash.sha=require("./hash/sha"),hash.ripemd=require("./hash/ripemd"),hash.hmac=require("./hash/hmac"),hash.sha1=hash.sha.sha1,hash.sha256=hash.sha.sha256,hash.sha224=hash.sha.sha224,hash.sha384=hash.sha.sha384,hash.sha512=hash.sha.sha512,hash.ripemd160=hash.ripemd.ripemd160},{"./hash/common":59,"./hash/hmac":60,"./hash/ripemd":61,"./hash/sha":62,"./hash/utils":63}],59:[function(require,module,exports){function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var hash=require("../hash"),utils=hash.utils,assert=utils.assert;exports.BlockHash=BlockHash,BlockHash.prototype.update=function(msg,enc){if(msg=utils.toArray(msg,enc),this.pending?this.pending=this.pending.concat(msg):this.pending=msg,this.pendingTotal+=msg.length,this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length),0===this.pending.length&&(this.pending=null),msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this},BlockHash.prototype.digest=function(enc){return this.update(this._pad()),assert(null===this.pending),this._digest(enc)},BlockHash.prototype._pad=function(){var len=this.pendingTotal,bytes=this._delta8,k=bytes-(len+this.padLength)%bytes,res=new Array(k+this.padLength);res[0]=128;for(var i=1;k>i;i++)res[i]=0;if(len<<=3,"big"===this.endian){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=len>>>24&255,res[i++]=len>>>16&255,res[i++]=len>>>8&255,res[i++]=255&len}else{res[i++]=255&len,res[i++]=len>>>8&255,res[i++]=len>>>16&255,res[i++]=len>>>24&255,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0;for(var t=8;t<this.padLength;t++)res[i++]=0}return res}},{"../hash":58}],60:[function(require,module,exports){function Hmac(hash,key,enc){return this instanceof Hmac?(this.Hash=hash,this.blockSize=hash.blockSize/8,this.outSize=hash.outSize/8,this.inner=null,this.outer=null,void this._init(utils.toArray(key,enc))):new Hmac(hash,key,enc)}var hash=require("../hash"),utils=hash.utils,assert=utils.assert;module.exports=Hmac,Hmac.prototype._init=function(key){key.length>this.blockSize&&(key=(new this.Hash).update(key).digest()),assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(var i=0;i<key.length;i++)key[i]^=54;this.inner=(new this.Hash).update(key);for(var i=0;i<key.length;i++)key[i]^=106;this.outer=(new this.Hash).update(key)},Hmac.prototype.update=function(msg,enc){return this.inner.update(msg,enc),this},Hmac.prototype.digest=function(enc){return this.outer.update(this.inner.digest()),this.outer.digest(enc)}},{"../hash":58}],61:[function(require,module,exports){function RIPEMD160(){return this instanceof RIPEMD160?(BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new RIPEMD160}function f(j,x,y,z){return 15>=j?x^y^z:31>=j?x&y|~x&z:47>=j?(x|~y)^z:63>=j?x&z|y&~z:x^(y|~z)}function K(j){return 15>=j?0:31>=j?1518500249:47>=j?1859775393:63>=j?2400959708:2840853838}function Kh(j){return 15>=j?1352829926:31>=j?1548603684:47>=j?1836072691:63>=j?2053994217:0}var hash=require("../hash"),utils=hash.utils,rotl32=utils.rotl32,sum32=utils.sum32,sum32_3=utils.sum32_3,sum32_4=utils.sum32_4,BlockHash=hash.common.BlockHash;utils.inherits(RIPEMD160,BlockHash),exports.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function(msg,start){for(var A=this.h[0],B=this.h[1],C=this.h[2],D=this.h[3],E=this.h[4],Ah=A,Bh=B,Ch=C,Dh=D,Eh=E,j=0;80>j;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E,E=D,D=rotl32(C,10),C=B,B=T,T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh),Ah=Eh,Eh=Dh,Dh=rotl32(Ch,10),Ch=Bh,Bh=T}T=sum32_3(this.h[1],C,Dh),this.h[1]=sum32_3(this.h[2],D,Eh),this.h[2]=sum32_3(this.h[3],E,Ah),this.h[3]=sum32_3(this.h[4],A,Bh),this.h[4]=sum32_3(this.h[0],B,Ch),this.h[0]=T},RIPEMD160.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"little"):utils.split32(this.h,"little")};var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":58}],62:[function(require,module,exports){function SHA256(){return this instanceof SHA256?(BlockHash.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,void(this.W=new Array(64))):new SHA256}function SHA224(){return this instanceof SHA224?(SHA256.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new SHA224}function SHA512(){return this instanceof SHA512?(BlockHash.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,void(this.W=new Array(160))):new SHA512}function SHA384(){return this instanceof SHA384?(SHA512.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new SHA384}function SHA1(){return this instanceof SHA1?(BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new SHA1}function ch32(x,y,z){return x&y^~x&z}function maj32(x,y,z){return x&y^x&z^y&z}function p32(x,y,z){return x^y^z}function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)}function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)}function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3}function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10}function ft_1(s,x,y,z){return 0===s?ch32(x,y,z):1===s||3===s?p32(x,y,z):2===s?maj32(x,y,z):void 0}function ch64_hi(xh,xl,yh,yl,zh,zl){var r=xh&yh^~xh&zh;return 0>r&&(r+=4294967296),r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;return 0>r&&(r+=4294967296),r}function maj64_hi(xh,xl,yh,yl,zh,zl){var r=xh&yh^xh&zh^yh&zh;return 0>r&&(r+=4294967296),r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;return 0>r&&(r+=4294967296),r}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28),c1_hi=rotr64_hi(xl,xh,2),c2_hi=rotr64_hi(xl,xh,7),r=c0_hi^c1_hi^c2_hi;return 0>r&&(r+=4294967296),r}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28),c1_lo=rotr64_lo(xl,xh,2),c2_lo=rotr64_lo(xl,xh,7),r=c0_lo^c1_lo^c2_lo;return 0>r&&(r+=4294967296),r}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14),c1_hi=rotr64_hi(xh,xl,18),c2_hi=rotr64_hi(xl,xh,9),r=c0_hi^c1_hi^c2_hi;return 0>r&&(r+=4294967296),r}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14),c1_lo=rotr64_lo(xh,xl,18),c2_lo=rotr64_lo(xl,xh,9),r=c0_lo^c1_lo^c2_lo;return 0>r&&(r+=4294967296),r}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1),c1_hi=rotr64_hi(xh,xl,8),c2_hi=shr64_hi(xh,xl,7),r=c0_hi^c1_hi^c2_hi;return 0>r&&(r+=4294967296),r}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1),c1_lo=rotr64_lo(xh,xl,8),c2_lo=shr64_lo(xh,xl,7),r=c0_lo^c1_lo^c2_lo;return 0>r&&(r+=4294967296),r}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19),c1_hi=rotr64_hi(xl,xh,29),c2_hi=shr64_hi(xh,xl,6),r=c0_hi^c1_hi^c2_hi;return 0>r&&(r+=4294967296),r}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19),c1_lo=rotr64_lo(xl,xh,29),c2_lo=shr64_lo(xh,xl,6),r=c0_lo^c1_lo^c2_lo;return 0>r&&(r+=4294967296),r}var hash=require("../hash"),utils=hash.utils,assert=utils.assert,rotr32=utils.rotr32,rotl32=utils.rotl32,sum32=utils.sum32,sum32_4=utils.sum32_4,sum32_5=utils.sum32_5,rotr64_hi=utils.rotr64_hi,rotr64_lo=utils.rotr64_lo,shr64_hi=utils.shr64_hi,shr64_lo=utils.shr64_lo,sum64=utils.sum64,sum64_hi=utils.sum64_hi,sum64_lo=utils.sum64_lo,sum64_4_hi=utils.sum64_4_hi,sum64_4_lo=utils.sum64_4_lo,sum64_5_hi=utils.sum64_5_hi,sum64_5_lo=utils.sum64_5_lo,BlockHash=hash.common.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],sha1_K=[1518500249,1859775393,2400959708,3395469782];utils.inherits(SHA256,BlockHash),exports.sha256=SHA256,SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function(msg,start){for(var W=this.W,i=0;16>i;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4],f=this.h[5],g=this.h[6],h=this.h[7];assert(this.k.length===W.length);for(var i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]),T2=sum32(s0_256(a),maj32(a,b,c));h=g,g=f,f=e,e=sum32(d,T1),d=c,c=b,b=a,a=sum32(T1,T2)}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e),this.h[5]=sum32(this.h[5],f),this.h[6]=sum32(this.h[6],g),this.h[7]=sum32(this.h[7],h)},SHA256.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")},utils.inherits(SHA224,SHA256),exports.sha224=SHA224,SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h.slice(0,7),"big"):utils.split32(this.h.slice(0,7),"big")},utils.inherits(SHA512,BlockHash),exports.sha512=SHA512,SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function(msg,start){for(var W=this.W,i=0;32>i;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]),c0_lo=g1_512_lo(W[i-4],W[i-3]),c1_hi=W[i-14],c1_lo=W[i-13],c2_hi=g0_512_hi(W[i-30],W[i-29]),c2_lo=g0_512_lo(W[i-30],W[i-29]),c3_hi=W[i-32],c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo),W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}},SHA512.prototype._update=function(msg,start){this._prepareBlock(msg,start);var W=this.W,ah=this.h[0],al=this.h[1],bh=this.h[2],bl=this.h[3],ch=this.h[4],cl=this.h[5],dh=this.h[6],dl=this.h[7],eh=this.h[8],el=this.h[9],fh=this.h[10],fl=this.h[11],gh=this.h[12],gl=this.h[13],hh=this.h[14],hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh,c0_lo=hl,c1_hi=s1_512_hi(eh,el),c1_lo=s1_512_lo(eh,el),c2_hi=ch64_hi(eh,el,fh,fl,gh,gl),c2_lo=ch64_lo(eh,el,fh,fl,gh,gl),c3_hi=this.k[i],c3_lo=this.k[i+1],c4_hi=W[i],c4_lo=W[i+1],T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo),T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo),c0_hi=s0_512_hi(ah,al),c0_lo=s0_512_lo(ah,al),c1_hi=maj64_hi(ah,al,bh,bl,ch,cl),c1_lo=maj64_lo(ah,al,bh,bl,ch,cl),T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo),T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,eh=sum64_hi(dh,dl,T1_hi,T1_lo),el=sum64_lo(dl,dl,T1_hi,T1_lo),dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo),al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al),sum64(this.h,2,bh,bl),sum64(this.h,4,ch,cl),sum64(this.h,6,dh,dl),sum64(this.h,8,eh,el),sum64(this.h,10,fh,fl),sum64(this.h,12,gh,gl),sum64(this.h,14,hh,hl)},SHA512.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")},utils.inherits(SHA384,SHA512),exports.sha384=SHA384,SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h.slice(0,12),"big"):utils.split32(this.h.slice(0,12),"big")},utils.inherits(SHA1,BlockHash),exports.sha1=SHA1,SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(msg,start){for(var W=this.W,i=0;16>i;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);for(var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4],i=0;i<W.length;i++){var s=~~(i/20),t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d,d=c,c=rotl32(b,30),b=a,a=t}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e)},SHA1.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")}},{"../hash":58}],63:[function(require,module,exports){function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"==typeof msg)if(enc){if("hex"===enc){msg=msg.replace(/[^a-z0-9]+/gi,""),msg.length%2!==0&&(msg="0"+msg);for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}}else for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i),hi=c>>8,lo=255&c;hi?res.push(hi,lo):res.push(lo)}else for(var i=0;i<msg.length;i++)res[i]=0|msg[i];return res}function toHex(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}function htonl(w){var res=w>>>24|w>>>8&65280|w<<8&16711680|(255&w)<<24;return res>>>0}function toHex32(msg,endian){for(var res="",i=0;i<msg.length;i++){var w=msg[i];"little"===endian&&(w=htonl(w)),res+=zero8(w.toString(16))}return res}function zero2(word){return 1===word.length?"0"+word:word}function zero8(word){return 7===word.length?"0"+word:6===word.length?"00"+word:5===word.length?"000"+word:4===word.length?"0000"+word:3===word.length?"00000"+word:2===word.length?"000000"+word:1===word.length?"0000000"+word:word}function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);for(var res=new Array(len/4),i=0,k=start;i<res.length;i++,k+=4){var w;w="big"===endian?msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3]:msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k],res[i]=w>>>0}return res}function split32(msg,endian){for(var res=new Array(4*msg.length),i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];"big"===endian?(res[k]=m>>>24,res[k+1]=m>>>16&255,res[k+2]=m>>>8&255,res[k+3]=255&m):(res[k+3]=m>>>24,res[k+2]=m>>>16&255,res[k+1]=m>>>8&255,res[k]=255&m)}return res}function rotr32(w,b){return w>>>b|w<<32-b}function rotl32(w,b){return w<<b|w>>>32-b}function sum32(a,b){return a+b>>>0}function sum32_3(a,b,c){return a+b+c>>>0}function sum32_4(a,b,c,d){return a+b+c+d>>>0}function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0}function assert(cond,msg){if(!cond)throw new Error(msg||"Assertion failed")}function sum64(buf,pos,ah,al){var bh=buf[pos],bl=buf[pos+1],lo=al+bl>>>0,hi=(al>lo?1:0)+ah+bh;buf[pos]=hi>>>0,buf[pos+1]=lo}function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0,hi=(al>lo?1:0)+ah+bh;return hi>>>0}function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0}function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0,lo=al;lo=lo+bl>>>0,carry+=al>lo?1:0,lo=lo+cl>>>0,carry+=cl>lo?1:0,lo=lo+dl>>>0,carry+=dl>lo?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0}function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0}function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0,lo=al;lo=lo+bl>>>0,carry+=al>lo?1:0,lo=lo+cl>>>0,carry+=cl>lo?1:0,lo=lo+dl>>>0,carry+=dl>lo?1:0,lo=lo+el>>>0,carry+=el>lo?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0}function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0}function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0}function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}function shr64_hi(ah,al,num){return ah>>>num}function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}var utils=exports,inherits=require("inherits");utils.toArray=toArray,utils.toHex=toHex,utils.htonl=htonl,utils.toHex32=toHex32,utils.zero2=zero2,utils.zero8=zero8,utils.join32=join32,utils.split32=split32,utils.rotr32=rotr32,utils.rotl32=rotl32,utils.sum32=sum32,utils.sum32_3=sum32_3,utils.sum32_4=sum32_4,utils.sum32_5=sum32_5,utils.assert=assert,utils.inherits=inherits,exports.sum64=sum64,exports.sum64_hi=sum64_hi,exports.sum64_lo=sum64_lo,exports.sum64_4_hi=sum64_4_hi,exports.sum64_4_lo=sum64_4_lo,exports.sum64_5_hi=sum64_5_hi,exports.sum64_5_lo=sum64_5_lo,exports.rotr64_hi=rotr64_hi,exports.rotr64_lo=rotr64_lo,exports.shr64_hi=shr64_hi,exports.shr64_lo=shr64_lo},{inherits:199}],64:[function(require,module,exports){module.exports={name:"elliptic",version:"6.2.3",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{coverage:"npm run unit --coverage",coveralls:"npm run coverage && cat ./coverage/lcov.info | coveralls",jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/*.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/*.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{coveralls:"^2.11.3",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},dependencies:{"bn.js":"^4.0.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},gitHead:"c32f20b22b420eb6af3c6dda28963deb7facf823",_id:"elliptic@6.2.3",_shasum:"18e46d7306b0951275a2d42063270a14b74ebe99",_from:"elliptic@>=6.0.0 <7.0.0",_npmVersion:"3.3.12",_nodeVersion:"5.4.1",_npmUser:{name:"indutny",email:"fedor@indutny.com"},dist:{shasum:"18e46d7306b0951275a2d42063270a14b74ebe99",tarball:"http://registry.npmjs.org/elliptic/-/elliptic-6.2.3.tgz"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],directories:{},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.2.3.tgz",readme:"ERROR: No README data found!"}},{}],65:[function(require,module,exports){module.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],66:[function(require,module,exports){var asn1=require("asn1.js"),RSAPrivateKey=asn1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("modulus")["int"](),this.key("publicExponent")["int"](),this.key("privateExponent")["int"](),this.key("prime1")["int"](),this.key("prime2")["int"](),this.key("exponent1")["int"](),this.key("exponent2")["int"](),this.key("coefficient")["int"]())});exports.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus")["int"](),this.key("publicExponent")["int"]())});exports.RSAPublicKey=RSAPublicKey;var PublicKey=asn1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});exports.PublicKey=PublicKey;var AlgorithmIdentifier=asn1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]()).optional())}),PrivateKeyInfo=asn1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});exports.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters")["int"]())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"](),this.key("pub_key")["int"](),this.key("priv_key")["int"]())});exports.DSAPrivateKey=DSAPrivateKey,exports.DSAparam=asn1.define("DSAparam",function(){this["int"]()});var ECPrivateKey=asn1.define("ECPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});exports.ECPrivateKey=ECPrivateKey;var ECParameters=asn1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});exports.signature=asn1.define("signature",function(){this.seq().obj(this.key("r")["int"](),this.key("s")["int"]())})},{"asn1.js":69}],67:[function(require,module,exports){(function(Buffer){var findProc=/Proc-Type: 4,ENCRYPTED\r?\nDEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\r?\n\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n/m,startRegex=/^-----BEGIN (.*) KEY-----\r?\n/m,fullRegex=/^-----BEGIN (.*) KEY-----\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n-----END \1 KEY-----$/m,evp=require("evp_bytestokey"),ciphers=require("browserify-aes");module.exports=function(okey,password){var decrypted,key=okey.toString(),match=key.match(findProc);if(match){var suite="aes"+match[1],iv=new Buffer(match[2],"hex"),cipherText=new Buffer(match[3].replace(/\r?\n/g,""),"base64"),cipherKey=evp(password,iv.slice(0,8),parseInt(match[1],10)).key,out=[],cipher=ciphers.createDecipheriv(suite,cipherKey,iv);out.push(cipher.update(cipherText)),out.push(cipher["final"]()),decrypted=Buffer.concat(out)}else{var match2=key.match(fullRegex);decrypted=new Buffer(match2[2].replace(/\r?\n/g,""),"base64")}var tag=key.match(startRegex)[1]+" KEY";return{tag:tag,data:decrypted}}}).call(this,require("buffer").Buffer)},{"browserify-aes":86,buffer:2,evp_bytestokey:101}],68:[function(require,module,exports){(function(Buffer){function parseKeys(buffer){var password;"object"!=typeof buffer||Buffer.isBuffer(buffer)||(password=buffer.passphrase,buffer=buffer.key),"string"==typeof buffer&&(buffer=new Buffer(buffer));var subtype,ndata,stripped=fixProc(buffer,password),type=stripped.tag,data=stripped.data;switch(type){case"PUBLIC KEY":switch(ndata=asn1.PublicKey.decode(data,"der"),subtype=ndata.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return ndata.subjectPrivateKey=ndata.subjectPublicKey,{type:"ec",data:ndata};case"1.2.840.10040.4.1":return ndata.algorithm.params.pub_key=asn1.DSAparam.decode(ndata.subjectPublicKey.data,"der"),{type:"dsa",data:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}throw new Error("unknown key type "+type);case"ENCRYPTED PRIVATE KEY":data=asn1.EncryptedPrivateKey.decode(data,"der"),data=decrypt(data,password);case"PRIVATE KEY":switch(ndata=asn1.PrivateKey.decode(data,"der"),subtype=ndata.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:ndata.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(ndata.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return ndata.algorithm.params.priv_key=asn1.DSAparam.decode(ndata.subjectPrivateKey,"der"),{type:"dsa",params:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}throw new Error("unknown key type "+type);case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(data,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(data,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(data,"der")};case"EC PRIVATE KEY":return data=asn1.ECPrivateKey.decode(data,"der"),{curve:data.parameters.value,privateKey:data.privateKey};default:throw new Error("unknown key type "+type)}}function decrypt(data,password){var salt=data.algorithm.decrypt.kde.kdeparams.salt,iters=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10),algo=aesid[data.algorithm.decrypt.cipher.algo.join(".")],iv=data.algorithm.decrypt.cipher.iv,cipherText=data.subjectPrivateKey,keylen=parseInt(algo.split("-")[1],10)/8,key=compat.pbkdf2Sync(password,salt,iters,keylen),cipher=ciphers.createDecipheriv(algo,key,iv),out=[];return out.push(cipher.update(cipherText)),out.push(cipher["final"]()),Buffer.concat(out)}var asn1=require("./asn1"),aesid=require("./aesid.json"),fixProc=require("./fixProc"),ciphers=require("browserify-aes"),compat=require("pbkdf2");module.exports=parseKeys,parseKeys.signature=asn1.signature}).call(this,require("buffer").Buffer)},{"./aesid.json":65,"./asn1":66,"./fixProc":67,"browserify-aes":86,buffer:2,pbkdf2:151}],69:[function(require,module,exports){var asn1=exports;asn1.bignum=require("bn.js"),asn1.define=require("./asn1/api").define,asn1.base=require("./asn1/base"),asn1.constants=require("./asn1/constants"),asn1.decoders=require("./asn1/decoders"),asn1.encoders=require("./asn1/encoders")},{"./asn1/api":70,"./asn1/base":72,"./asn1/constants":76,"./asn1/decoders":78,"./asn1/encoders":81,"bn.js":39}],70:[function(require,module,exports){function Entity(name,body){this.name=name,this.body=body,this.decoders={},this.encoders={}}var asn1=require("../asn1"),inherits=require("inherits"),api=exports;api.define=function(name,body){return new Entity(name,body);
},Entity.prototype._createNamed=function(base){var named;try{named=require("vm").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){named=function(entity){this._initNamed(entity)}}return inherits(named,base),named.prototype._initNamed=function(entity){base.call(this,entity)},new named(this)},Entity.prototype._getDecoder=function(enc){return this.decoders.hasOwnProperty(enc)||(this.decoders[enc]=this._createNamed(asn1.decoders[enc])),this.decoders[enc]},Entity.prototype.decode=function(data,enc,options){return this._getDecoder(enc).decode(data,options)},Entity.prototype._getEncoder=function(enc){return this.encoders.hasOwnProperty(enc)||(this.encoders[enc]=this._createNamed(asn1.encoders[enc])),this.encoders[enc]},Entity.prototype.encode=function(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter)}},{"../asn1":69,inherits:199,vm:218}],71:[function(require,module,exports){function DecoderBuffer(base,options){return Reporter.call(this,options),Buffer.isBuffer(base)?(this.base=base,this.offset=0,void(this.length=base.length)):void this.error("Input not Buffer")}function EncoderBuffer(value,reporter){if(Array.isArray(value))this.length=0,this.value=value.map(function(item){return item instanceof EncoderBuffer||(item=new EncoderBuffer(item,reporter)),this.length+=item.length,item},this);else if("number"==typeof value){if(!(value>=0&&255>=value))return reporter.error("non-byte EncoderBuffer value");this.value=value,this.length=1}else if("string"==typeof value)this.value=value,this.length=Buffer.byteLength(value);else{if(!Buffer.isBuffer(value))return reporter.error("Unsupported type: "+typeof value);this.value=value,this.length=value.length}}var inherits=require("inherits"),Reporter=require("../base").Reporter,Buffer=require("buffer").Buffer;inherits(DecoderBuffer,Reporter),exports.DecoderBuffer=DecoderBuffer,DecoderBuffer.prototype.save=function(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)}},DecoderBuffer.prototype.restore=function(save){var res=new DecoderBuffer(this.base);return res.offset=save.offset,res.length=this.offset,this.offset=save.offset,Reporter.prototype.restore.call(this,save.reporter),res},DecoderBuffer.prototype.isEmpty=function(){return this.offset===this.length},DecoderBuffer.prototype.readUInt8=function(fail){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(fail||"DecoderBuffer overrun")},DecoderBuffer.prototype.skip=function(bytes,fail){if(!(this.offset+bytes<=this.length))return this.error(fail||"DecoderBuffer overrun");var res=new DecoderBuffer(this.base);return res._reporterState=this._reporterState,res.offset=this.offset,res.length=this.offset+bytes,this.offset+=bytes,res},DecoderBuffer.prototype.raw=function(save){return this.base.slice(save?save.offset:this.offset,this.length)},exports.EncoderBuffer=EncoderBuffer,EncoderBuffer.prototype.join=function(out,offset){return out||(out=new Buffer(this.length)),offset||(offset=0),0===this.length?out:(Array.isArray(this.value)?this.value.forEach(function(item){item.join(out,offset),offset+=item.length}):("number"==typeof this.value?out[offset]=this.value:"string"==typeof this.value?out.write(this.value,offset):Buffer.isBuffer(this.value)&&this.value.copy(out,offset),offset+=this.length),out)}},{"../base":72,buffer:2,inherits:199}],72:[function(require,module,exports){var base=exports;base.Reporter=require("./reporter").Reporter,base.DecoderBuffer=require("./buffer").DecoderBuffer,base.EncoderBuffer=require("./buffer").EncoderBuffer,base.Node=require("./node")},{"./buffer":71,"./node":73,"./reporter":74}],73:[function(require,module,exports){function Node(enc,parent){var state={};this._baseState=state,state.enc=enc,state.parent=parent||null,state.children=null,state.tag=null,state.args=null,state.reverseArgs=null,state.choice=null,state.optional=!1,state.any=!1,state.obj=!1,state.use=null,state.useDecoder=null,state.key=null,state["default"]=null,state.explicit=null,state.implicit=null,state.contains=null,state.parent||(state.children=[],this._wrap())}var Reporter=require("../base").Reporter,EncoderBuffer=require("../base").EncoderBuffer,DecoderBuffer=require("../base").DecoderBuffer,assert=require("minimalistic-assert"),tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];module.exports=Node;var stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];Node.prototype.clone=function(){var state=this._baseState,cstate={};stateProps.forEach(function(prop){cstate[prop]=state[prop]});var res=new this.constructor(cstate.parent);return res._baseState=cstate,res},Node.prototype._wrap=function(){var state=this._baseState;methods.forEach(function(method){this[method]=function(){var clone=new this.constructor(this);return state.children.push(clone),clone[method].apply(clone,arguments)}},this)},Node.prototype._init=function(body){var state=this._baseState;assert(null===state.parent),body.call(this),state.children=state.children.filter(function(child){return child._baseState.parent===this},this),assert.equal(state.children.length,1,"Root node can have only one child")},Node.prototype._useArgs=function(args){var state=this._baseState,children=args.filter(function(arg){return arg instanceof this.constructor},this);args=args.filter(function(arg){return!(arg instanceof this.constructor)},this),0!==children.length&&(assert(null===state.children),state.children=children,children.forEach(function(child){child._baseState.parent=this},this)),0!==args.length&&(assert(null===state.args),state.args=args,state.reverseArgs=args.map(function(arg){if("object"!=typeof arg||arg.constructor!==Object)return arg;var res={};return Object.keys(arg).forEach(function(key){key==(0|key)&&(key|=0);var value=arg[key];res[value]=key}),res}))},overrided.forEach(function(method){Node.prototype[method]=function(){var state=this._baseState;throw new Error(method+" not implemented for encoding: "+state.enc)}}),tags.forEach(function(tag){Node.prototype[tag]=function(){var state=this._baseState,args=Array.prototype.slice.call(arguments);return assert(null===state.tag),state.tag=tag,this._useArgs(args),this}}),Node.prototype.use=function(item){var state=this._baseState;return assert(null===state.use),state.use=item,this},Node.prototype.optional=function(){var state=this._baseState;return state.optional=!0,this},Node.prototype.def=function(val){var state=this._baseState;return assert(null===state["default"]),state["default"]=val,state.optional=!0,this},Node.prototype.explicit=function(num){var state=this._baseState;return assert(null===state.explicit&&null===state.implicit),state.explicit=num,this},Node.prototype.implicit=function(num){var state=this._baseState;return assert(null===state.explicit&&null===state.implicit),state.implicit=num,this},Node.prototype.obj=function(){var state=this._baseState,args=Array.prototype.slice.call(arguments);return state.obj=!0,0!==args.length&&this._useArgs(args),this},Node.prototype.key=function(newKey){var state=this._baseState;return assert(null===state.key),state.key=newKey,this},Node.prototype.any=function(){var state=this._baseState;return state.any=!0,this},Node.prototype.choice=function(obj){var state=this._baseState;return assert(null===state.choice),state.choice=obj,this._useArgs(Object.keys(obj).map(function(key){return obj[key]})),this},Node.prototype.contains=function(item){var state=this._baseState;return assert(null===state.use),state.contains=item,this},Node.prototype._decode=function(input){var state=this._baseState;if(null===state.parent)return input.wrapResult(state.children[0]._decode(input));var prevKey,result=state["default"],present=!0;if(null!==state.key&&(prevKey=input.enterKey(state.key)),state.optional){var tag=null;if(null!==state.explicit?tag=state.explicit:null!==state.implicit?tag=state.implicit:null!==state.tag&&(tag=state.tag),null!==tag||state.any){if(present=this._peekTag(input,tag,state.any),input.isError(present))return present}else{var save=input.save();try{null===state.choice?this._decodeGeneric(state.tag,input):this._decodeChoice(input),present=!0}catch(e){present=!1}input.restore(save)}}var prevObj;if(state.obj&&present&&(prevObj=input.enterObject()),present){if(null!==state.explicit){var explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))return explicit;input=explicit}if(null===state.use&&null===state.choice){if(state.any)var save=input.save();var body=this._decodeTag(input,null!==state.implicit?state.implicit:state.tag,state.any);if(input.isError(body))return body;state.any?result=input.raw(save):input=body}if(result=state.any?result:null===state.choice?this._decodeGeneric(state.tag,input):this._decodeChoice(input),input.isError(result))return result;if(state.any||null!==state.choice||null===state.children||state.children.forEach(function(child){child._decode(input)}),state.contains&&("octstr"===state.tag||"bitstr"===state.tag)){var data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data)}}return state.obj&&present&&(result=input.leaveObject(prevObj)),null===state.key||null===result&&present!==!0||input.leaveKey(prevKey,state.key,result),result},Node.prototype._decodeGeneric=function(tag,input){var state=this._baseState;return"seq"===tag||"set"===tag?null:"seqof"===tag||"setof"===tag?this._decodeList(input,tag,state.args[0]):/str$/.test(tag)?this._decodeStr(input,tag):"objid"===tag&&state.args?this._decodeObjid(input,state.args[0],state.args[1]):"objid"===tag?this._decodeObjid(input,null,null):"gentime"===tag||"utctime"===tag?this._decodeTime(input,tag):"null_"===tag?this._decodeNull(input):"bool"===tag?this._decodeBool(input):"int"===tag||"enum"===tag?this._decodeInt(input,state.args&&state.args[0]):null!==state.use?this._getUse(state.use,input._reporterState.obj)._decode(input):input.error("unknown tag: "+tag)},Node.prototype._getUse=function(entity,obj){var state=this._baseState;return state.useDecoder=this._use(entity,obj),assert(null===state.useDecoder._baseState.parent),state.useDecoder=state.useDecoder._baseState.children[0],state.implicit!==state.useDecoder._baseState.implicit&&(state.useDecoder=state.useDecoder.clone(),state.useDecoder._baseState.implicit=state.implicit),state.useDecoder},Node.prototype._decodeChoice=function(input){var state=this._baseState,result=null,match=!1;return Object.keys(state.choice).some(function(key){var save=input.save(),node=state.choice[key];try{var value=node._decode(input);if(input.isError(value))return!1;result={type:key,value:value},match=!0}catch(e){return input.restore(save),!1}return!0},this),match?result:input.error("Choice not matched")},Node.prototype._createEncoderBuffer=function(data){return new EncoderBuffer(data,this.reporter)},Node.prototype._encode=function(data,reporter,parent){var state=this._baseState;if(null===state["default"]||state["default"]!==data){var result=this._encodeValue(data,reporter,parent);if(void 0!==result&&!this._skipDefault(result,reporter,parent))return result}},Node.prototype._encodeValue=function(data,reporter,parent){var state=this._baseState;if(null===state.parent)return state.children[0]._encode(data,reporter||new Reporter);var result=null;if(this.reporter=reporter,state.optional&&void 0===data){if(null===state["default"])return;data=state["default"]}var content=null,primitive=!1;if(state.any)result=this._createEncoderBuffer(data);else if(state.choice)result=this._encodeChoice(data,reporter);else if(state.contains)content=this._getUse(state.contains,parent)._encode(data,reporter),primitive=!0;else if(state.children)content=state.children.map(function(child){if("null_"===child._baseState.tag)return child._encode(null,reporter,data);if(null===child._baseState.key)return reporter.error("Child should have a key");var prevKey=reporter.enterKey(child._baseState.key);if("object"!=typeof data)return reporter.error("Child expected, but input is not object");var res=child._encode(data[child._baseState.key],reporter,data);return reporter.leaveKey(prevKey),res},this).filter(function(child){return child}),content=this._createEncoderBuffer(content);else if("seqof"===state.tag||"setof"===state.tag){if(!state.args||1!==state.args.length)return reporter.error("Too many args for : "+state.tag);if(!Array.isArray(data))return reporter.error("seqof/setof, but data is not Array");var child=this.clone();child._baseState.implicit=null,content=this._createEncoderBuffer(data.map(function(item){var state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter)},child))}else null!==state.use?result=this._getUse(state.use,parent)._encode(data,reporter):(content=this._encodePrimitive(state.tag,data),primitive=!0);var result;if(!state.any&&null===state.choice){var tag=null!==state.implicit?state.implicit:state.tag,cls=null===state.implicit?"universal":"context";null===tag?null===state.use&&reporter.error("Tag could be ommited only for .use()"):null===state.use&&(result=this._encodeComposite(tag,primitive,cls,content))}return null!==state.explicit&&(result=this._encodeComposite(state.explicit,!1,"context",result)),result},Node.prototype._encodeChoice=function(data,reporter){var state=this._baseState,node=state.choice[data.type];return node||assert(!1,data.type+" not found in "+JSON.stringify(Object.keys(state.choice))),node._encode(data.value,reporter)},Node.prototype._encodePrimitive=function(tag,data){var state=this._baseState;if(/str$/.test(tag))return this._encodeStr(data,tag);if("objid"===tag&&state.args)return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);if("objid"===tag)return this._encodeObjid(data,null,null);if("gentime"===tag||"utctime"===tag)return this._encodeTime(data,tag);if("null_"===tag)return this._encodeNull();if("int"===tag||"enum"===tag)return this._encodeInt(data,state.args&&state.reverseArgs[0]);if("bool"===tag)return this._encodeBool(data);throw new Error("Unsupported tag: "+tag)},Node.prototype._isNumstr=function(str){return/^[0-9 ]*$/.test(str)},Node.prototype._isPrintstr=function(str){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(str)}},{"../base":72,"minimalistic-assert":83}],74:[function(require,module,exports){function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]}}function ReporterError(path,msg){this.path=path,this.rethrow(msg)}var inherits=require("inherits");exports.Reporter=Reporter,Reporter.prototype.isError=function(obj){return obj instanceof ReporterError},Reporter.prototype.save=function(){var state=this._reporterState;return{obj:state.obj,pathLen:state.path.length}},Reporter.prototype.restore=function(data){var state=this._reporterState;state.obj=data.obj,state.path=state.path.slice(0,data.pathLen)},Reporter.prototype.enterKey=function(key){return this._reporterState.path.push(key)},Reporter.prototype.leaveKey=function(index,key,value){var state=this._reporterState;state.path=state.path.slice(0,index-1),null!==state.obj&&(state.obj[key]=value)},Reporter.prototype.enterObject=function(){var state=this._reporterState,prev=state.obj;return state.obj={},prev},Reporter.prototype.leaveObject=function(prev){var state=this._reporterState,now=state.obj;return state.obj=prev,now},Reporter.prototype.error=function(msg){var err,state=this._reporterState,inherited=msg instanceof ReporterError;if(err=inherited?msg:new ReporterError(state.path.map(function(elem){return"["+JSON.stringify(elem)+"]"}).join(""),msg.message||msg,msg.stack),!state.options.partial)throw err;return inherited||state.errors.push(err),err},Reporter.prototype.wrapResult=function(result){var state=this._reporterState;return state.options.partial?{result:this.isError(result)?null:result,errors:state.errors}:result},inherits(ReporterError,Error),ReporterError.prototype.rethrow=function(msg){return this.message=msg+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,ReporterError),this}},{inherits:199}],75:[function(require,module,exports){var constants=require("../constants");exports.tagClass={0:"universal",1:"application",2:"context",3:"private"},exports.tagClassByName=constants._reverse(exports.tagClass),exports.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},exports.tagByName=constants._reverse(exports.tag)},{"../constants":76}],76:[function(require,module,exports){var constants=exports;constants._reverse=function(map){var res={};return Object.keys(map).forEach(function(key){(0|key)==key&&(key=0|key);var value=map[key];res[value]=key}),res},constants.der=require("./der")},{"./der":75}],77:[function(require,module,exports){function DERDecoder(entity){this.enc="der",this.name=entity.name,this.entity=entity,this.tree=new DERNode,this.tree._init(entity.body)}function DERNode(parent){base.Node.call(this,"der",parent)}function derDecodeTag(buf,fail){var tag=buf.readUInt8(fail);if(buf.isError(tag))return tag;var cls=der.tagClass[tag>>6],primitive=0===(32&tag);if(31===(31&tag)){var oct=tag;for(tag=0;128===(128&oct);){if(oct=buf.readUInt8(fail),buf.isError(oct))return oct;tag<<=7,tag|=127&oct}}else tag&=31;var tagStr=der.tag[tag];return{cls:cls,primitive:primitive,tag:tag,tagStr:tagStr}}function derDecodeLen(buf,primitive,fail){var len=buf.readUInt8(fail);if(buf.isError(len))return len;if(!primitive&&128===len)return null;if(0===(128&len))return len;var num=127&len;if(num>=4)return buf.error("length octect is too long");len=0;for(var i=0;num>i;i++){len<<=8;var j=buf.readUInt8(fail);if(buf.isError(j))return j;len|=j}return len}var inherits=require("inherits"),asn1=require("../../asn1"),base=asn1.base,bignum=asn1.bignum,der=asn1.constants.der;module.exports=DERDecoder,DERDecoder.prototype.decode=function(data,options){return data instanceof base.DecoderBuffer||(data=new base.DecoderBuffer(data,options)),this.tree._decode(data,options)},inherits(DERNode,base.Node),DERNode.prototype._peekTag=function(buffer,tag,any){if(buffer.isEmpty())return!1;var state=buffer.save(),decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');return buffer.isError(decodedTag)?decodedTag:(buffer.restore(state),decodedTag.tag===tag||decodedTag.tagStr===tag||decodedTag.tagStr+"of"===tag||any)},DERNode.prototype._decodeTag=function(buffer,tag,any){var decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;var len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+"of"!==tag)return buffer.error('Failed to match tag: "'+tag+'"');if(decodedTag.primitive||null!==len)return buffer.skip(len,'Failed to match body of: "'+tag+'"');var state=buffer.save(),res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');return buffer.isError(res)?res:(len=buffer.offset-state.offset,buffer.restore(state),buffer.skip(len,'Failed to match body of: "'+tag+'"'))},DERNode.prototype._skipUntilEnd=function(buffer,fail){for(;;){var tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))return tag;var len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))return len;var res;if(res=tag.primitive||null!==len?buffer.skip(len):this._skipUntilEnd(buffer,fail),buffer.isError(res))return res;if("end"===tag.tagStr)break}},DERNode.prototype._decodeList=function(buffer,tag,decoder){for(var result=[];!buffer.isEmpty();){var possibleEnd=this._peekTag(buffer,"end");if(buffer.isError(possibleEnd))return possibleEnd;var res=decoder.decode(buffer,"der");if(buffer.isError(res)&&possibleEnd)break;result.push(res)}return result},DERNode.prototype._decodeStr=function(buffer,tag){if("bitstr"===tag){var unused=buffer.readUInt8();return buffer.isError(unused)?unused:{unused:unused,data:buffer.raw()}}if("bmpstr"===tag){var raw=buffer.raw();if(raw.length%2===1)return buffer.error("Decoding of string type: bmpstr length mismatch");for(var str="",i=0;i<raw.length/2;i++)str+=String.fromCharCode(raw.readUInt16BE(2*i));return str}if("numstr"===tag){var numstr=buffer.raw().toString("ascii");return this._isNumstr(numstr)?numstr:buffer.error("Decoding of string type: numstr unsupported characters")}if("octstr"===tag)return buffer.raw();if("printstr"===tag){var printstr=buffer.raw().toString("ascii");return this._isPrintstr(printstr)?printstr:buffer.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(tag)?buffer.raw().toString():buffer.error("Decoding of string type: "+tag+" unsupported")},DERNode.prototype._decodeObjid=function(buffer,values,relative){for(var result,identifiers=[],ident=0;!buffer.isEmpty();){var subident=buffer.readUInt8();ident<<=7,ident|=127&subident,0===(128&subident)&&(identifiers.push(ident),ident=0)}128&subident&&identifiers.push(ident);var first=identifiers[0]/40|0,second=identifiers[0]%40;if(result=relative?identifiers:[first,second].concat(identifiers.slice(1)),values){var tmp=values[result.join(" ")];void 0===tmp&&(tmp=values[result.join(".")]),void 0!==tmp&&(result=tmp)}return result},DERNode.prototype._decodeTime=function(buffer,tag){var str=buffer.raw().toString();if("gentime"===tag)var year=0|str.slice(0,4),mon=0|str.slice(4,6),day=0|str.slice(6,8),hour=0|str.slice(8,10),min=0|str.slice(10,12),sec=0|str.slice(12,14);else{if("utctime"!==tag)return buffer.error("Decoding "+tag+" time is not supported yet");var year=0|str.slice(0,2),mon=0|str.slice(2,4),day=0|str.slice(4,6),hour=0|str.slice(6,8),min=0|str.slice(8,10),sec=0|str.slice(10,12);year=70>year?2e3+year:1900+year}return Date.UTC(year,mon-1,day,hour,min,sec,0)},DERNode.prototype._decodeNull=function(buffer){return null},DERNode.prototype._decodeBool=function(buffer){var res=buffer.readUInt8();return buffer.isError(res)?res:0!==res},DERNode.prototype._decodeInt=function(buffer,values){var raw=buffer.raw(),res=new bignum(raw);return values&&(res=values[res.toString(10)]||res),res},DERNode.prototype._use=function(entity,obj){return"function"==typeof entity&&(entity=entity(obj)),entity._getDecoder("der").tree}},{"../../asn1":69,inherits:199}],78:[function(require,module,exports){var decoders=exports;decoders.der=require("./der"),decoders.pem=require("./pem")},{"./der":77,"./pem":79}],79:[function(require,module,exports){function PEMDecoder(entity){DERDecoder.call(this,entity),this.enc="pem"}var inherits=require("inherits"),Buffer=require("buffer").Buffer,DERDecoder=(require("../../asn1"),require("./der"));inherits(PEMDecoder,DERDecoder),module.exports=PEMDecoder,PEMDecoder.prototype.decode=function(data,options){for(var lines=data.toString().split(/[\r\n]+/g),label=options.label.toUpperCase(),re=/^-----(BEGIN|END) ([^-]+)-----$/,start=-1,end=-1,i=0;i<lines.length;i++){var match=lines[i].match(re);if(null!==match&&match[2]===label){if(-1!==start){if("END"!==match[1])break;end=i;break}if("BEGIN"!==match[1])break;start=i}}if(-1===start||-1===end)throw new Error("PEM section not found for: "+label);var base64=lines.slice(start+1,end).join("");base64.replace(/[^a-z0-9\+\/=]+/gi,"");var input=new Buffer(base64,"base64");return DERDecoder.prototype.decode.call(this,input,options)}},{"../../asn1":69,"./der":77,buffer:2,inherits:199}],80:[function(require,module,exports){function DEREncoder(entity){this.enc="der",this.name=entity.name,this.entity=entity,this.tree=new DERNode,this.tree._init(entity.body)}function DERNode(parent){base.Node.call(this,"der",parent)}function two(num){return 10>num?"0"+num:num}function encodeTag(tag,primitive,cls,reporter){var res;if("seqof"===tag?tag="seq":"setof"===tag&&(tag="set"),der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else{if("number"!=typeof tag||(0|tag)!==tag)return reporter.error("Unknown tag: "+tag);res=tag}return res>=31?reporter.error("Multi-octet tag encoding unsupported"):(primitive||(res|=32),res|=der.tagClassByName[cls||"universal"]<<6)}var inherits=require("inherits"),Buffer=require("buffer").Buffer,asn1=require("../../asn1"),base=asn1.base,der=(asn1.bignum,asn1.constants.der);module.exports=DEREncoder,DEREncoder.prototype.encode=function(data,reporter){return this.tree._encode(data,reporter).join()},inherits(DERNode,base.Node),DERNode.prototype._encodeComposite=function(tag,primitive,cls,content){var encodedTag=encodeTag(tag,primitive,cls,this.reporter);if(content.length<128){var header=new Buffer(2);return header[0]=encodedTag,header[1]=content.length,this._createEncoderBuffer([header,content])}for(var lenOctets=1,i=content.length;i>=256;i>>=8)lenOctets++;var header=new Buffer(2+lenOctets);header[0]=encodedTag,header[1]=128|lenOctets;for(var i=1+lenOctets,j=content.length;j>0;i--,j>>=8)header[i]=255&j;return this._createEncoderBuffer([header,content])},DERNode.prototype._encodeStr=function(str,tag){if("bitstr"===tag)return this._createEncoderBuffer([0|str.unused,str.data]);if("bmpstr"===tag){for(var buf=new Buffer(2*str.length),i=0;i<str.length;i++)buf.writeUInt16BE(str.charCodeAt(i),2*i);return this._createEncoderBuffer(buf)}return"numstr"===tag?this._isNumstr(str)?this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===tag?this._isPrintstr(str)?this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(tag)?this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: "+tag+" unsupported")},DERNode.prototype._encodeObjid=function(id,values,relative){if("string"==typeof id){if(!values)return this.reporter.error("string objid given, but no values map found");if(!values.hasOwnProperty(id))return this.reporter.error("objid not found in values map");id=values[id].split(/[\s\.]+/g);for(var i=0;i<id.length;i++)id[i]|=0}else if(Array.isArray(id)){id=id.slice();for(var i=0;i<id.length;i++)id[i]|=0}if(!Array.isArray(id))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(id));if(!relative){if(id[1]>=40)return this.reporter.error("Second objid identifier OOB");id.splice(0,2,40*id[0]+id[1])}for(var size=0,i=0;i<id.length;i++){var ident=id[i];for(size++;ident>=128;ident>>=7)size++}for(var objid=new Buffer(size),offset=objid.length-1,i=id.length-1;i>=0;i--){var ident=id[i];for(objid[offset--]=127&ident;(ident>>=7)>0;)objid[offset--]=128|127&ident}return this._createEncoderBuffer(objid)},DERNode.prototype._encodeTime=function(time,tag){var str,date=new Date(time);return"gentime"===tag?str=[two(date.getFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join(""):"utctime"===tag?str=[two(date.getFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+tag+" time is not supported yet"),this._encodeStr(str,"octstr")},DERNode.prototype._encodeNull=function(){return this._createEncoderBuffer("")},DERNode.prototype._encodeInt=function(num,values){if("string"==typeof num){if(!values)return this.reporter.error("String int or enum given, but no values map");if(!values.hasOwnProperty(num))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(num));num=values[num]}if("number"!=typeof num&&!Buffer.isBuffer(num)){var numArray=num.toArray();!num.sign&&128&numArray[0]&&numArray.unshift(0),num=new Buffer(numArray)}if(Buffer.isBuffer(num)){var size=num.length;0===num.length&&size++;var out=new Buffer(size);return num.copy(out),0===num.length&&(out[0]=0),this._createEncoderBuffer(out)}if(128>num)return this._createEncoderBuffer(num);if(256>num)return this._createEncoderBuffer([0,num]);for(var size=1,i=num;i>=256;i>>=8)size++;for(var out=new Array(size),i=out.length-1;i>=0;i--)out[i]=255&num,num>>=8;return 128&out[0]&&out.unshift(0),this._createEncoderBuffer(new Buffer(out))},DERNode.prototype._encodeBool=function(value){return this._createEncoderBuffer(value?255:0)},DERNode.prototype._use=function(entity,obj){return"function"==typeof entity&&(entity=entity(obj)),entity._getEncoder("der").tree},DERNode.prototype._skipDefault=function(dataBuffer,reporter,parent){var i,state=this._baseState;if(null===state["default"])return!1;var data=dataBuffer.join();if(void 0===state.defaultBuffer&&(state.defaultBuffer=this._encodeValue(state["default"],reporter,parent).join()),data.length!==state.defaultBuffer.length)return!1;for(i=0;i<data.length;i++)if(data[i]!==state.defaultBuffer[i])return!1;return!0}},{"../../asn1":69,buffer:2,inherits:199}],81:[function(require,module,exports){var encoders=exports;encoders.der=require("./der"),encoders.pem=require("./pem")},{"./der":80,"./pem":82}],82:[function(require,module,exports){function PEMEncoder(entity){DEREncoder.call(this,entity),this.enc="pem"}var inherits=require("inherits"),DEREncoder=(require("buffer").Buffer,require("../../asn1"),require("./der"));inherits(PEMEncoder,DEREncoder),module.exports=PEMEncoder,PEMEncoder.prototype.encode=function(data,options){for(var buf=DEREncoder.prototype.encode.call(this,data),p=buf.toString("base64"),out=["-----BEGIN "+options.label+"-----"],i=0;i<p.length;i+=64)out.push(p.slice(i,i+64));return out.push("-----END "+options.label+"-----"),out.join("\n")}},{"../../asn1":69,"./der":80,buffer:2,inherits:199}],83:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],84:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{buffer:2,dup:8}],85:[function(require,module,exports){arguments[4][9][0].apply(exports,arguments)},{"./aes":84,"./ghash":89,buffer:2,"buffer-xor":98,"cipher-base":99,dup:9,inherits:199}],86:[function(require,module,exports){arguments[4][10][0].apply(exports,arguments)},{"./decrypter":87,"./encrypter":88,"./modes":90,dup:10}],87:[function(require,module,exports){arguments[4][11][0].apply(exports,arguments)},{"./aes":84,"./authCipher":85,"./modes":90,"./modes/cbc":91,"./modes/cfb":92,"./modes/cfb1":93,"./modes/cfb8":94,"./modes/ctr":95,"./modes/ecb":96,"./modes/ofb":97,"./streamCipher":100,buffer:2,"cipher-base":99,dup:11,evp_bytestokey:101,inherits:199}],88:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{"./aes":84,"./authCipher":85,"./modes":90,"./modes/cbc":91,"./modes/cfb":92,"./modes/cfb1":93,"./modes/cfb8":94,"./modes/ctr":95,"./modes/ecb":96,"./modes/ofb":97,"./streamCipher":100,buffer:2,"cipher-base":99,dup:12,evp_bytestokey:101,inherits:199}],89:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{buffer:2,dup:13}],90:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],91:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"buffer-xor":98,dup:15}],92:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{buffer:2,"buffer-xor":98,dup:16}],93:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments);
},{buffer:2,dup:17}],94:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{buffer:2,dup:18}],95:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{buffer:2,"buffer-xor":98,dup:19}],96:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{dup:20}],97:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{buffer:2,"buffer-xor":98,dup:21}],98:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{buffer:2,dup:22}],99:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{buffer:2,dup:23,inherits:199,stream:216,string_decoder:217}],100:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"./aes":84,buffer:2,"cipher-base":99,dup:24,inherits:199}],101:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{buffer:2,"create-hash/md5":132,dup:35}],102:[function(require,module,exports){(function(Buffer){function sign(hash,key,hashType,signType){var priv=parseKeys(key);if(priv.curve){if("ecdsa"!==signType)throw new Error("wrong private key type");return ecSign(hash,priv)}if("dsa"===priv.type){if("dsa"!==signType)throw new Error("wrong private key type");return dsaSign(hash,priv,hashType)}if("rsa"!==signType)throw new Error("wrong private key type");for(var len=priv.modulus.byteLength(),pad=[0,1];hash.length+pad.length+1<len;)pad.push(255);pad.push(0);for(var i=-1;++i<hash.length;)pad.push(hash[i]);var out=crt(pad,priv);return out}function ecSign(hash,priv){var curveId=curves[priv.curve.join(".")];if(!curveId)throw new Error("unknown curve "+priv.curve.join("."));var curve=new EC(curveId),key=curve.genKeyPair();key._importPrivate(priv.privateKey);var out=key.sign(hash);return new Buffer(out.toDER())}function dsaSign(hash,priv,algo){for(var k,x=priv.params.priv_key,p=priv.params.p,q=priv.params.q,g=priv.params.g,r=new BN(0),H=bits2int(hash,q).mod(q),s=!1,kv=getKey(x,q,hash,algo);s===!1;)k=makeKey(q,kv,algo),r=makeR(g,k,p,q),s=k.invm(q).imul(H.add(x.mul(r))).mod(q),s.cmpn(0)||(s=!1,r=new BN(0));return toDER(r,s)}function toDER(r,s){r=r.toArray(),s=s.toArray(),128&r[0]&&(r=[0].concat(r)),128&s[0]&&(s=[0].concat(s));var total=r.length+s.length+4,res=[48,total,2,r.length];return res=res.concat(r,[2,s.length],s),new Buffer(res)}function getKey(x,q,hash,algo){if(x=new Buffer(x.toArray()),x.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length);zeros.fill(0),x=Buffer.concat([zeros,x])}var hlen=hash.length,hbits=bits2octets(hash,q),v=new Buffer(hlen);v.fill(1);var k=new Buffer(hlen);return k.fill(0),k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest(),v=createHmac(algo,k).update(v).digest(),k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest(),v=createHmac(algo,k).update(v).digest(),{k:k,v:v}}function bits2int(obits,q){var bits=new BN(obits),shift=(obits.length<<3)-q.bitLength();return shift>0&&bits.ishrn(shift),bits}function bits2octets(bits,q){bits=bits2int(bits,q),bits=bits.mod(q);var out=new Buffer(bits.toArray());if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length);zeros.fill(0),out=Buffer.concat([zeros,out])}return out}function makeKey(q,kv,algo){var t,k;do{for(t=new Buffer("");8*t.length<q.bitLength();)kv.v=createHmac(algo,kv.k).update(kv.v).digest(),t=Buffer.concat([t,kv.v]);k=bits2int(t,q),kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest(),kv.v=createHmac(algo,kv.k).update(kv.v).digest()}while(-1!==k.cmp(q));return k}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)}var createHmac=require("create-hmac"),crt=require("browserify-rsa"),curves=require("./curves"),elliptic=require("elliptic"),parseKeys=require("parse-asn1"),BN=require("bn.js"),EC=elliptic.ec;module.exports=sign,module.exports.getKey=getKey,module.exports.makeKey=makeKey}).call(this,require("buffer").Buffer)},{"./curves":38,"bn.js":39,"browserify-rsa":40,buffer:2,"create-hmac":143,elliptic:41,"parse-asn1":68}],103:[function(require,module,exports){(function(Buffer){function verify(sig,hash,key,signType){var pub=parseKeys(key);if("ec"===pub.type){if("ecdsa"!==signType)throw new Error("wrong public key type");return ecVerify(sig,hash,pub)}if("dsa"===pub.type){if("dsa"!==signType)throw new Error("wrong public key type");return dsaVerify(sig,hash,pub)}if("rsa"!==signType)throw new Error("wrong public key type");for(var len=pub.modulus.byteLength(),pad=[1],padNum=0;hash.length+pad.length+2<len;)pad.push(255),padNum++;pad.push(0);for(var i=-1;++i<hash.length;)pad.push(hash[i]);pad=new Buffer(pad);var red=BN.mont(pub.modulus);sig=new BN(sig).toRed(red),sig=sig.redPow(new BN(pub.publicExponent)),sig=new Buffer(sig.fromRed().toArray());var out=0;for(8>padNum&&(out=1),len=Math.min(sig.length,pad.length),sig.length!==pad.length&&(out=1),i=-1;++i<len;)out|=sig[i]^pad[i];return 0===out}function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join(".")];if(!curveId)throw new Error("unknown curve "+pub.data.algorithm.curve.join("."));var curve=new EC(curveId),pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey)}function dsaVerify(sig,hash,pub){var p=pub.data.p,q=pub.data.q,g=pub.data.g,y=pub.data.pub_key,unpacked=parseKeys.signature.decode(sig,"der"),s=unpacked.s,r=unpacked.r;checkValue(s,q),checkValue(r,q);var montp=BN.mont(p),w=s.invm(q),v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q);return!v.cmp(r)}function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error("invalid sig");if(b.cmp(q)>=q)throw new Error("invalid sig")}var curves=require("./curves"),elliptic=require("elliptic"),parseKeys=require("parse-asn1"),BN=require("bn.js"),EC=elliptic.ec;module.exports=verify}).call(this,require("buffer").Buffer)},{"./curves":38,"bn.js":39,buffer:2,elliptic:41,"parse-asn1":68}],104:[function(require,module,exports){(function(Buffer){function ECDH(curve){this.curveType=aliases[curve],this.curveType||(this.curveType={name:curve}),this.curve=new elliptic.ec(this.curveType.name),this.keys=void 0}function formatReturnValue(bn,enc,len){Array.isArray(bn)||(bn=bn.toArray());var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0),buf=Buffer.concat([zeros,buf])}return enc?buf.toString(enc):buf}var elliptic=require("elliptic"),BN=require("bn.js");module.exports=function(curve){return new ECDH(curve)};var aliases={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};aliases.p224=aliases.secp224r1,aliases.p256=aliases.secp256r1=aliases.prime256v1,aliases.p192=aliases.secp192r1=aliases.prime192v1,aliases.p384=aliases.secp384r1,aliases.p521=aliases.secp521r1,ECDH.prototype.generateKeys=function(enc,format){return this.keys=this.curve.genKeyPair(),this.getPublicKey(enc,format)},ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||"utf8",Buffer.isBuffer(other)||(other=new Buffer(other,inenc));var otherPub=this.curve.keyFromPublic(other).getPublic(),out=otherPub.mul(this.keys.getPrivate()).getX();return formatReturnValue(out,enc,this.curveType.byteLength)},ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic("compressed"===format,!0);return"hybrid"===format&&(key[key.length-1]%2?key[0]=7:key[0]=6),formatReturnValue(key,enc)},ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc)},ECDH.prototype.setPublicKey=function(pub,enc){return enc=enc||"utf8",Buffer.isBuffer(pub)||(pub=new Buffer(pub,enc)),this.keys._importPublic(pub),this},ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||"utf8",Buffer.isBuffer(priv)||(priv=new Buffer(priv,enc));var _priv=new BN(priv);return _priv=_priv.toString(16),this.keys._importPrivate(_priv),this}}).call(this,require("buffer").Buffer)},{"bn.js":105,buffer:2,elliptic:106}],105:[function(require,module,exports){arguments[4][39][0].apply(exports,arguments)},{dup:39}],106:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"../package.json":129,"./elliptic/curve":109,"./elliptic/curves":112,"./elliptic/ec":113,"./elliptic/eddsa":116,"./elliptic/hmac-drbg":119,"./elliptic/utils":121,brorand:122,dup:41}],107:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"../../elliptic":106,"bn.js":105,dup:42}],108:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"../../elliptic":106,"../curve":109,"bn.js":105,dup:43,inherits:199}],109:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{"./base":107,"./edwards":108,"./mont":110,"./short":111,dup:44}],110:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{"../../elliptic":106,"../curve":109,"bn.js":105,dup:45,inherits:199}],111:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{"../../elliptic":106,"../curve":109,"bn.js":105,dup:46,inherits:199}],112:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{"../elliptic":106,"./precomputed/secp256k1":120,dup:47,"hash.js":123}],113:[function(require,module,exports){arguments[4][48][0].apply(exports,arguments)},{"../../elliptic":106,"./key":114,"./signature":115,"bn.js":105,dup:48}],114:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"bn.js":105,dup:49}],115:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"../../elliptic":106,"bn.js":105,dup:50}],116:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"../../elliptic":106,"./key":117,"./signature":118,dup:51,"hash.js":123}],117:[function(require,module,exports){arguments[4][52][0].apply(exports,arguments)},{"../../elliptic":106,dup:52}],118:[function(require,module,exports){arguments[4][53][0].apply(exports,arguments)},{"../../elliptic":106,"bn.js":105,dup:53}],119:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{"../elliptic":106,dup:54,"hash.js":123}],120:[function(require,module,exports){arguments[4][55][0].apply(exports,arguments)},{dup:55}],121:[function(require,module,exports){arguments[4][56][0].apply(exports,arguments)},{"bn.js":105,dup:56}],122:[function(require,module,exports){arguments[4][57][0].apply(exports,arguments)},{dup:57}],123:[function(require,module,exports){arguments[4][58][0].apply(exports,arguments)},{"./hash/common":124,"./hash/hmac":125,"./hash/ripemd":126,"./hash/sha":127,"./hash/utils":128,dup:58}],124:[function(require,module,exports){arguments[4][59][0].apply(exports,arguments)},{"../hash":123,dup:59}],125:[function(require,module,exports){arguments[4][60][0].apply(exports,arguments)},{"../hash":123,dup:60}],126:[function(require,module,exports){arguments[4][61][0].apply(exports,arguments)},{"../hash":123,dup:61}],127:[function(require,module,exports){arguments[4][62][0].apply(exports,arguments)},{"../hash":123,dup:62}],128:[function(require,module,exports){arguments[4][63][0].apply(exports,arguments)},{dup:63,inherits:199}],129:[function(require,module,exports){arguments[4][64][0].apply(exports,arguments)},{dup:64}],130:[function(require,module,exports){(function(Buffer){"use strict";function HashNoConstructor(hash){Base.call(this,"digest"),this._hash=hash,this.buffers=[]}function Hash(hash){Base.call(this,"digest"),this._hash=hash}var inherits=require("inherits"),md5=require("./md5"),rmd160=require("ripemd160"),sha=require("sha.js"),Base=require("cipher-base");inherits(HashNoConstructor,Base),HashNoConstructor.prototype._update=function(data){this.buffers.push(data)},HashNoConstructor.prototype._final=function(){var buf=Buffer.concat(this.buffers),r=this._hash(buf);return this.buffers=null,r},inherits(Hash,Base),Hash.prototype._update=function(data){this._hash.update(data)},Hash.prototype._final=function(){return this._hash.digest()},module.exports=function(alg){return alg=alg.toLowerCase(),"md5"===alg?new HashNoConstructor(md5):"rmd160"===alg||"ripemd160"===alg?new HashNoConstructor(rmd160):new Hash(sha(alg))}}).call(this,require("buffer").Buffer)},{"./md5":132,buffer:2,"cipher-base":133,inherits:199,ripemd160:134,"sha.js":136}],131:[function(require,module,exports){(function(Buffer){"use strict";function toArray(buf,bigEndian){if(buf.length%intSize!==0){var len=buf.length+(intSize-buf.length%intSize);buf=Buffer.concat([buf,zeroBuffer],len)}for(var arr=[],fn=bigEndian?buf.readInt32BE:buf.readInt32LE,i=0;i<buf.length;i+=intSize)arr.push(fn.call(buf,i));return arr}function toBuffer(arr,size,bigEndian){for(var buf=new Buffer(size),fn=bigEndian?buf.writeInt32BE:buf.writeInt32LE,i=0;i<arr.length;i++)fn.call(buf,arr[i],4*i,!0);return buf}function hash(buf,fn,hashSize,bigEndian){Buffer.isBuffer(buf)||(buf=new Buffer(buf));var arr=fn(toArray(buf,bigEndian),buf.length*chrsz);return toBuffer(arr,hashSize,bigEndian)}var intSize=4,zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;exports.hash=hash}).call(this,require("buffer").Buffer)},{buffer:2}],132:[function(require,module,exports){"use strict";function core_md5(x,len){x[len>>5]|=128<<len%32,x[(len+64>>>9<<4)+14]=len;for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936),d=md5_ff(d,a,b,c,x[i+1],12,-389564586),c=md5_ff(c,d,a,b,x[i+2],17,606105819),b=md5_ff(b,c,d,a,x[i+3],22,-1044525330),a=md5_ff(a,b,c,d,x[i+4],7,-176418897),d=md5_ff(d,a,b,c,x[i+5],12,1200080426),c=md5_ff(c,d,a,b,x[i+6],17,-1473231341),b=md5_ff(b,c,d,a,x[i+7],22,-45705983),a=md5_ff(a,b,c,d,x[i+8],7,1770035416),d=md5_ff(d,a,b,c,x[i+9],12,-1958414417),c=md5_ff(c,d,a,b,x[i+10],17,-42063),b=md5_ff(b,c,d,a,x[i+11],22,-1990404162),a=md5_ff(a,b,c,d,x[i+12],7,1804603682),d=md5_ff(d,a,b,c,x[i+13],12,-40341101),c=md5_ff(c,d,a,b,x[i+14],17,-1502002290),b=md5_ff(b,c,d,a,x[i+15],22,1236535329),a=md5_gg(a,b,c,d,x[i+1],5,-165796510),d=md5_gg(d,a,b,c,x[i+6],9,-1069501632),c=md5_gg(c,d,a,b,x[i+11],14,643717713),b=md5_gg(b,c,d,a,x[i+0],20,-373897302),a=md5_gg(a,b,c,d,x[i+5],5,-701558691),d=md5_gg(d,a,b,c,x[i+10],9,38016083),c=md5_gg(c,d,a,b,x[i+15],14,-660478335),b=md5_gg(b,c,d,a,x[i+4],20,-405537848),a=md5_gg(a,b,c,d,x[i+9],5,568446438),d=md5_gg(d,a,b,c,x[i+14],9,-1019803690),c=md5_gg(c,d,a,b,x[i+3],14,-187363961),b=md5_gg(b,c,d,a,x[i+8],20,1163531501),a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),d=md5_gg(d,a,b,c,x[i+2],9,-51403784),c=md5_gg(c,d,a,b,x[i+7],14,1735328473),b=md5_gg(b,c,d,a,x[i+12],20,-1926607734),a=md5_hh(a,b,c,d,x[i+5],4,-378558),d=md5_hh(d,a,b,c,x[i+8],11,-2022574463),c=md5_hh(c,d,a,b,x[i+11],16,1839030562),b=md5_hh(b,c,d,a,x[i+14],23,-35309556),a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),d=md5_hh(d,a,b,c,x[i+4],11,1272893353),c=md5_hh(c,d,a,b,x[i+7],16,-155497632),b=md5_hh(b,c,d,a,x[i+10],23,-1094730640),a=md5_hh(a,b,c,d,x[i+13],4,681279174),d=md5_hh(d,a,b,c,x[i+0],11,-358537222),c=md5_hh(c,d,a,b,x[i+3],16,-722521979),b=md5_hh(b,c,d,a,x[i+6],23,76029189),a=md5_hh(a,b,c,d,x[i+9],4,-640364487),d=md5_hh(d,a,b,c,x[i+12],11,-421815835),c=md5_hh(c,d,a,b,x[i+15],16,530742520),b=md5_hh(b,c,d,a,x[i+2],23,-995338651),a=md5_ii(a,b,c,d,x[i+0],6,-198630844),d=md5_ii(d,a,b,c,x[i+7],10,1126891415),c=md5_ii(c,d,a,b,x[i+14],15,-1416354905),b=md5_ii(b,c,d,a,x[i+5],21,-57434055),a=md5_ii(a,b,c,d,x[i+12],6,1700485571),d=md5_ii(d,a,b,c,x[i+3],10,-1894986606),c=md5_ii(c,d,a,b,x[i+10],15,-1051523),b=md5_ii(b,c,d,a,x[i+1],21,-2054922799),a=md5_ii(a,b,c,d,x[i+8],6,1873313359),d=md5_ii(d,a,b,c,x[i+15],10,-30611744),c=md5_ii(c,d,a,b,x[i+6],15,-1560198380),b=md5_ii(b,c,d,a,x[i+13],21,1309151649),a=md5_ii(a,b,c,d,x[i+4],6,-145523070),d=md5_ii(d,a,b,c,x[i+11],10,-1120210379),c=md5_ii(c,d,a,b,x[i+2],15,718787259),b=md5_ii(b,c,d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}var helpers=require("./helpers");module.exports=function(buf){return helpers.hash(buf,core_md5,16)}},{"./helpers":131}],133:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{buffer:2,dup:23,inherits:199,stream:216,string_decoder:217}],134:[function(require,module,exports){(function(Buffer){function bytesToWords(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words}function wordsToBytes(words){for(var bytes=[],b=0;b<32*words.length;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes}function processBlock(H,M,offset){for(var i=0;16>i;i++){var offset_i=offset+i,M_offset_i=M[offset_i];M[offset_i]=16711935&(M_offset_i<<8|M_offset_i>>>24)|4278255360&(M_offset_i<<24|M_offset_i>>>8)}var al,bl,cl,dl,el,ar,br,cr,dr,er;ar=al=H[0],br=bl=H[1],cr=cl=H[2],dr=dl=H[3],er=el=H[4];var t;for(i=0;80>i;i+=1)t=al+M[offset+zl[i]]|0,t+=16>i?f1(bl,cl,dl)+hl[0]:32>i?f2(bl,cl,dl)+hl[1]:48>i?f3(bl,cl,dl)+hl[2]:64>i?f4(bl,cl,dl)+hl[3]:f5(bl,cl,dl)+hl[4],t=0|t,t=rotl(t,sl[i]),t=t+el|0,al=el,el=dl,dl=rotl(cl,10),cl=bl,bl=t,t=ar+M[offset+zr[i]]|0,t+=16>i?f5(br,cr,dr)+hr[0]:32>i?f4(br,cr,dr)+hr[1]:48>i?f3(br,cr,dr)+hr[2]:64>i?f2(br,cr,dr)+hr[3]:f1(br,cr,dr)+hr[4],t=0|t,t=rotl(t,sr[i]),t=t+er|0,ar=er,er=dr,dr=rotl(cr,10),cr=br,br=t;t=H[1]+cl+dr|0,H[1]=H[2]+dl+er|0,H[2]=H[3]+el+ar|0,H[3]=H[4]+al+br|0,H[4]=H[0]+bl+cr|0,H[0]=t}function f1(x,y,z){return x^y^z}function f2(x,y,z){return x&y|~x&z}function f3(x,y,z){return(x|~y)^z}function f4(x,y,z){return x&z|y&~z}function f5(x,y,z){return x^(y|~z)}function rotl(x,n){return x<<n|x>>>32-n}function ripemd160(message){var H=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof message&&(message=new Buffer(message,"utf8"));var m=bytesToWords(message),nBitsLeft=8*message.length,nBitsTotal=8*message.length;m[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,m[(nBitsLeft+64>>>9<<4)+14]=16711935&(nBitsTotal<<8|nBitsTotal>>>24)|4278255360&(nBitsTotal<<24|nBitsTotal>>>8);for(var i=0;i<m.length;i+=16)processBlock(H,m,i);for(i=0;5>i;i++){var H_i=H[i];H[i]=16711935&(H_i<<8|H_i>>>24)|4278255360&(H_i<<24|H_i>>>8)}var digestbytes=wordsToBytes(H);return new Buffer(digestbytes)}var zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];module.exports=ripemd160}).call(this,require("buffer").Buffer)},{buffer:2}],135:[function(require,module,exports){(function(Buffer){function Hash(blockSize,finalSize){this._block=new Buffer(blockSize),this._finalSize=finalSize,this._blockSize=blockSize,this._len=0,this._s=0}Hash.prototype.update=function(data,enc){"string"==typeof data&&(enc=enc||"utf8",data=new Buffer(data,enc));for(var l=this._len+=data.length,s=this._s||0,f=0,buffer=this._block;l>s;){for(var t=Math.min(data.length,f+this._blockSize-s%this._blockSize),ch=t-f,i=0;ch>i;i++)buffer[s%this._blockSize+i]=data[i+f];s+=ch,f+=ch,s%this._blockSize===0&&this._update(buffer)}return this._s=s,this},Hash.prototype.digest=function(enc){var l=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),l%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(l,this._blockSize-4);var hash=this._update(this._block)||this._hash();return enc?hash.toString(enc):hash},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=Hash}).call(this,require("buffer").Buffer)},{buffer:2}],136:[function(require,module,exports){var exports=module.exports=function(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=exports[algorithm];if(!Algorithm)throw new Error(algorithm+" is not supported (we accept pull requests)");return new Algorithm};exports.sha=require("./sha"),exports.sha1=require("./sha1"),exports.sha224=require("./sha224"),exports.sha256=require("./sha256"),exports.sha384=require("./sha384"),exports.sha512=require("./sha512")},{"./sha":137,"./sha1":138,"./sha224":139,"./sha256":140,"./sha384":141,"./sha512":142}],137:[function(require,module,exports){(function(Buffer){function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return 0===s?b&c|~b&d:2===s?b&c|b&d|c&d:b^c^d}var inherits=require("inherits"),Hash=require("./hash"),K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);inherits(Sha,Hash),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(M){for(var W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,i=0;16>i;++i)W[i]=M.readInt32BE(4*i);for(;80>i;++i)W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16];for(var j=0;80>j;++j){var s=~~(j/20),t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha.prototype._hash=function(){var H=new Buffer(20);return H.writeInt32BE(0|this._a,0),H.writeInt32BE(0|this._b,4),H.writeInt32BE(0|this._c,8),H.writeInt32BE(0|this._d,12),H.writeInt32BE(0|this._e,16),H},module.exports=Sha}).call(this,require("buffer").Buffer)},{"./hash":135,buffer:2,inherits:199}],138:[function(require,module,exports){(function(Buffer){function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl1(num){return num<<1|num>>>31}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return 0===s?b&c|~b&d:2===s?b&c|b&d|c&d:b^c^d}var inherits=require("inherits"),Hash=require("./hash"),K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);inherits(Sha1,Hash),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(M){for(var W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,i=0;16>i;++i)W[i]=M.readInt32BE(4*i);for(;80>i;++i)W[i]=rotl1(W[i-3]^W[i-8]^W[i-14]^W[i-16]);for(var j=0;80>j;++j){var s=~~(j/20),t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha1.prototype._hash=function(){var H=new Buffer(20);return H.writeInt32BE(0|this._a,0),H.writeInt32BE(0|this._b,4),H.writeInt32BE(0|this._c,8),H.writeInt32BE(0|this._d,12),H.writeInt32BE(0|this._e,16),H},module.exports=Sha1}).call(this,require("buffer").Buffer)},{"./hash":135,buffer:2,inherits:199}],139:[function(require,module,exports){(function(Buffer){function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}var inherits=require("inherits"),Sha256=require("./sha256"),Hash=require("./hash"),W=new Array(64);inherits(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var H=new Buffer(28);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H},module.exports=Sha224}).call(this,require("buffer").Buffer)},{"./hash":135,"./sha256":140,buffer:2,inherits:199}],140:[function(require,module,exports){(function(Buffer){function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}var inherits=require("inherits"),Hash=require("./hash"),K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=new Array(64);inherits(Sha256,Hash),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(M){for(var W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,f=0|this._f,g=0|this._g,h=0|this._h,i=0;16>i;++i)W[i]=M.readInt32BE(4*i);for(;64>i;++i)W[i]=gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16]|0;for(var j=0;64>j;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0,T2=sigma0(a)+maj(a,b,c)|0;h=g,g=f,f=e,e=d+T1|0,d=c,c=b,b=a,a=T1+T2|0}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=h+this._h|0},Sha256.prototype._hash=function(){var H=new Buffer(32);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H.writeInt32BE(this._h,28),H},module.exports=Sha256}).call(this,require("buffer").Buffer)},{"./hash":135,buffer:2,inherits:199}],141:[function(require,module,exports){(function(Buffer){function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}var inherits=require("inherits"),SHA512=require("./sha512"),Hash=require("./hash"),W=new Array(160);inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}var H=new Buffer(48);return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),H},module.exports=Sha384}).call(this,require("buffer").Buffer)},{"./hash":135,"./sha512":142,buffer:2,inherits:199}],142:[function(require,module,exports){(function(Buffer){function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}function Ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}function getCarry(a,b){return b>>>0>a>>>0?1:0}var inherits=require("inherits"),Hash=require("./hash"),K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W=new Array(160);inherits(Sha512,Hash),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(M){for(var W=this._w,ah=0|this._ah,bh=0|this._bh,ch=0|this._ch,dh=0|this._dh,eh=0|this._eh,fh=0|this._fh,gh=0|this._gh,hh=0|this._hh,al=0|this._al,bl=0|this._bl,cl=0|this._cl,dl=0|this._dl,el=0|this._el,fl=0|this._fl,gl=0|this._gl,hl=0|this._hl,i=0;32>i;i+=2)W[i]=M.readInt32BE(4*i),W[i+1]=M.readInt32BE(4*i+4);for(;160>i;i+=2){var xh=W[i-30],xl=W[i-30+1],gamma0=Gamma0(xh,xl),gamma0l=Gamma0l(xl,xh);xh=W[i-4],xl=W[i-4+1];var gamma1=Gamma1(xh,xl),gamma1l=Gamma1l(xl,xh),Wi7h=W[i-14],Wi7l=W[i-14+1],Wi16h=W[i-32],Wi16l=W[i-32+1],Wil=gamma0l+Wi7l|0,Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wil=Wil+gamma1l|0,Wih=Wih+gamma1+getCarry(Wil,gamma1l)|0,Wil=Wil+Wi16l|0,Wih=Wih+Wi16h+getCarry(Wil,Wi16l)|0,W[i]=Wih,W[i+1]=Wil}for(var j=0;160>j;j+=2){Wih=W[j],Wil=W[j+1];var majh=maj(ah,bh,ch),majl=maj(al,bl,cl),sigma0h=sigma0(ah,al),sigma0l=sigma0(al,ah),sigma1h=sigma1(eh,el),sigma1l=sigma1(el,eh),Kih=K[j],Kil=K[j+1],chh=Ch(eh,fh,gh),chl=Ch(el,fl,gl),t1l=hl+sigma1l|0,t1h=hh+sigma1h+getCarry(t1l,hl)|0;
t1l=t1l+chl|0,t1h=t1h+chh+getCarry(t1l,chl)|0,t1l=t1l+Kil|0,t1h=t1h+Kih+getCarry(t1l,Kil)|0,t1l=t1l+Wil|0,t1h=t1h+Wih+getCarry(t1l,Wil)|0;var t2l=sigma0l+majl|0,t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,el=dl+t1l|0,eh=dh+t1h+getCarry(el,dl)|0,dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,al=t1l+t2l|0,ah=t1h+t2h+getCarry(al,t1l)|0}this._al=this._al+al|0,this._bl=this._bl+bl|0,this._cl=this._cl+cl|0,this._dl=this._dl+dl|0,this._el=this._el+el|0,this._fl=this._fl+fl|0,this._gl=this._gl+gl|0,this._hl=this._hl+hl|0,this._ah=this._ah+ah+getCarry(this._al,al)|0,this._bh=this._bh+bh+getCarry(this._bl,bl)|0,this._ch=this._ch+ch+getCarry(this._cl,cl)|0,this._dh=this._dh+dh+getCarry(this._dl,dl)|0,this._eh=this._eh+eh+getCarry(this._el,el)|0,this._fh=this._fh+fh+getCarry(this._fl,fl)|0,this._gh=this._gh+gh+getCarry(this._gl,gl)|0,this._hh=this._hh+hh+getCarry(this._hl,hl)|0},Sha512.prototype._hash=function(){function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}var H=new Buffer(64);return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),H},module.exports=Sha512}).call(this,require("buffer").Buffer)},{"./hash":135,buffer:2,inherits:199}],143:[function(require,module,exports){(function(Buffer){"use strict";function Hmac(alg,key){Transform.call(this),alg=alg.toLowerCase(),"string"==typeof key&&(key=new Buffer(key));var blocksize="sha512"===alg||"sha384"===alg?128:64;this._alg=alg,this._key=key,key.length>blocksize?key=createHash(alg).update(key).digest():key.length<blocksize&&(key=Buffer.concat([key,ZEROS],blocksize));for(var ipad=this._ipad=new Buffer(blocksize),opad=this._opad=new Buffer(blocksize),i=0;blocksize>i;i++)ipad[i]=54^key[i],opad[i]=92^key[i];this._hash=createHash(alg).update(ipad)}var createHash=require("create-hash/browser"),inherits=require("inherits"),Transform=require("stream").Transform,ZEROS=new Buffer(128);ZEROS.fill(0),inherits(Hmac,Transform),Hmac.prototype.update=function(data,enc){return this._hash.update(data,enc),this},Hmac.prototype._transform=function(data,_,next){this._hash.update(data),next()},Hmac.prototype._flush=function(next){this.push(this.digest()),next()},Hmac.prototype.digest=function(enc){var h=this._hash.digest();return createHash(this._alg).update(this._opad).update(h).digest(enc)},module.exports=function(alg,key){return new Hmac(alg,key)}}).call(this,require("buffer").Buffer)},{buffer:2,"create-hash/browser":130,inherits:199,stream:216}],144:[function(require,module,exports){(function(Buffer){function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,"hex"),gen=new Buffer(primes[mod].gen,"hex");return new DH(prime,gen)}function createDiffieHellman(prime,enc,generator,genc){return Buffer.isBuffer(enc)||void 0===ENCODINGS[enc]?createDiffieHellman(prime,"binary",enc,generator):(enc=enc||"binary",genc=genc||"binary",generator=generator||new Buffer([2]),Buffer.isBuffer(generator)||(generator=new Buffer(generator,genc)),"number"==typeof prime?new DH(generatePrime(prime,generator),generator,!0):(Buffer.isBuffer(prime)||(prime=new Buffer(prime,enc)),new DH(prime,generator,!0)))}var generatePrime=require("./lib/generatePrime"),primes=require("./lib/primes.json"),DH=require("./lib/dh"),ENCODINGS={binary:!0,hex:!0,base64:!0};exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=getDiffieHellman,exports.createDiffieHellman=exports.DiffieHellman=createDiffieHellman}).call(this,require("buffer").Buffer)},{"./lib/dh":145,"./lib/generatePrime":146,"./lib/primes.json":147,buffer:2}],145:[function(require,module,exports){(function(Buffer){function setPublicKey(pub,enc){return enc=enc||"utf8",Buffer.isBuffer(pub)||(pub=new Buffer(pub,enc)),this._pub=new BN(pub),this}function setPrivateKey(priv,enc){return enc=enc||"utf8",Buffer.isBuffer(priv)||(priv=new Buffer(priv,enc)),this._priv=new BN(priv),this}function checkPrime(prime,generator){var gen=generator.toString("hex"),hex=[gen,prime.toString(16)].join("_");if(hex in primeCache)return primeCache[hex];var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime))return error+=1,error+="02"===gen||"05"===gen?8:4,primeCache[hex]=error,error;millerRabin.test(prime.shrn(1))||(error+=2);var rem;switch(gen){case"02":prime.mod(TWENTYFOUR).cmp(ELEVEN)&&(error+=8);break;case"05":rem=prime.mod(TEN),rem.cmp(THREE)&&rem.cmp(SEVEN)&&(error+=8);break;default:error+=4}return primeCache[hex]=error,error}function DH(prime,generator,malleable){this.setGenerator(generator),this.__prime=new BN(prime),this._prime=BN.mont(this.__prime),this._primeLen=prime.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,malleable?(this.setPublicKey=setPublicKey,this.setPrivateKey=setPrivateKey):this._primeCode=8}function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());return enc?buf.toString(enc):buf}var BN=require("bn.js"),MillerRabin=require("miller-rabin"),millerRabin=new MillerRabin,TWENTYFOUR=new BN(24),ELEVEN=new BN(11),TEN=new BN(10),THREE=new BN(3),SEVEN=new BN(7),primes=require("./generatePrime"),randomBytes=require("randombytes");module.exports=DH;var primeCache={};Object.defineProperty(DH.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=checkPrime(this.__prime,this.__gen)),this._primeCode}}),DH.prototype.generateKeys=function(){return this._priv||(this._priv=new BN(randomBytes(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},DH.prototype.computeSecret=function(other){other=new BN(other),other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed(),out=new Buffer(secret.toArray()),prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0),out=Buffer.concat([front,out])}return out},DH.prototype.getPublicKey=function(enc){return formatReturnValue(this._pub,enc)},DH.prototype.getPrivateKey=function(enc){return formatReturnValue(this._priv,enc)},DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc)},DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc)},DH.prototype.setGenerator=function(gen,enc){return enc=enc||"utf8",Buffer.isBuffer(gen)||(gen=new Buffer(gen,enc)),this.__gen=gen,this._gen=new BN(gen),this}}).call(this,require("buffer").Buffer)},{"./generatePrime":146,"bn.js":148,buffer:2,"miller-rabin":149,randombytes:197}],146:[function(require,module,exports){function _getPrimes(){if(null!==primes)return primes;var limit=1048576,res=[];res[0]=2;for(var i=1,k=3;limit>k;k+=2){for(var sqrt=Math.ceil(Math.sqrt(k)),j=0;i>j&&res[j]<=sqrt&&k%res[j]!==0;j++);i!==j&&res[j]<=sqrt||(res[i++]=k)}return primes=res,res}function simpleSieve(p){for(var primes=_getPrimes(),i=0;i<primes.length;i++)if(0===p.modn(primes[i]))return 0===p.cmpn(primes[i]);return!0}function fermatTest(p){var red=BN.mont(p);return 0===TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1)}function findPrime(bits,gen){if(16>bits)return new BN(2===gen||5===gen?[140,123]:[140,39]);gen=new BN(gen);for(var num,n2;;){for(num=new BN(randomBytes(Math.ceil(bits/8)));num.bitLength()>bits;)num.ishrn(1);if(num.isEven()&&num.iadd(ONE),num.testn(1)||num.iadd(TWO),gen.cmp(TWO)){if(!gen.cmp(FIVE))for(;num.mod(TEN).cmp(THREE);)num.iadd(FOUR)}else for(;num.mod(TWENTYFOUR).cmp(ELEVEN);)num.iadd(FOUR);if(n2=num.shrn(1),simpleSieve(n2)&&simpleSieve(num)&&fermatTest(n2)&&fermatTest(num)&&millerRabin.test(n2)&&millerRabin.test(num))return num}}var randomBytes=require("randombytes");module.exports=findPrime,findPrime.simpleSieve=simpleSieve,findPrime.fermatTest=fermatTest;var BN=require("bn.js"),TWENTYFOUR=new BN(24),MillerRabin=require("miller-rabin"),millerRabin=new MillerRabin,ONE=new BN(1),TWO=new BN(2),FIVE=new BN(5),TEN=(new BN(16),new BN(8),new BN(10)),THREE=new BN(3),ELEVEN=(new BN(7),new BN(11)),FOUR=new BN(4),primes=(new BN(12),null)},{"bn.js":148,"miller-rabin":149,randombytes:197}],147:[function(require,module,exports){module.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],148:[function(require,module,exports){arguments[4][39][0].apply(exports,arguments)},{dup:39}],149:[function(require,module,exports){function MillerRabin(rand){this.rand=rand||new brorand.Rand}var bn=require("bn.js"),brorand=require("brorand");module.exports=MillerRabin,MillerRabin.create=function(rand){return new MillerRabin(rand)},MillerRabin.prototype._rand=function(n){var len=n.bitLength(),buf=this.rand.generate(Math.ceil(len/8));buf[0]|=3;var mask=7&len;return 0!==mask&&(buf[buf.length-1]>>=7-mask),new bn(buf)},MillerRabin.prototype.test=function(n,k,cb){var len=n.bitLength(),red=bn.mont(n),rone=new bn(1).toRed(red);k||(k=Math.max(1,len/48|0));for(var n1=n.subn(1),n2=n1.subn(1),s=0;!n1.testn(s);s++);for(var d=n.shrn(s),rn1=n1.toRed(red),prime=!0;k>0;k--){var a=this._rand(n2);cb&&cb(a);var x=a.toRed(red).redPow(d);if(0!==x.cmp(rone)&&0!==x.cmp(rn1)){for(var i=1;s>i;i++){if(x=x.redSqr(),0===x.cmp(rone))return!1;if(0===x.cmp(rn1))break}if(i===s)return!1}}return prime},MillerRabin.prototype.getDivisor=function(n,k){var len=n.bitLength(),red=bn.mont(n),rone=new bn(1).toRed(red);k||(k=Math.max(1,len/48|0));for(var n1=n.subn(1),n2=n1.subn(1),s=0;!n1.testn(s);s++);for(var d=n.shrn(s),rn1=n1.toRed(red);k>0;k--){var a=this._rand(n2),g=n.gcd(a);if(0!==g.cmpn(1))return g;var x=a.toRed(red).redPow(d);if(0!==x.cmp(rone)&&0!==x.cmp(rn1)){for(var i=1;s>i;i++){if(x=x.redSqr(),0===x.cmp(rone))return x.fromRed().subn(1).gcd(n);if(0===x.cmp(rn1))break}if(i===s)return x=x.redSqr(),x.fromRed().subn(1).gcd(n)}}return!1}},{"bn.js":148,brorand:150}],150:[function(require,module,exports){arguments[4][57][0].apply(exports,arguments)},{dup:57}],151:[function(require,module,exports){(function(Buffer){function pbkdf2(password,salt,iterations,keylen,digest,callback){if("function"==typeof digest&&(callback=digest,digest=void 0),"function"!=typeof callback)throw new Error("No callback provided to pbkdf2");var result=pbkdf2Sync(password,salt,iterations,keylen,digest);setTimeout(function(){callback(void 0,result)})}function pbkdf2Sync(password,salt,iterations,keylen,digest){if("number"!=typeof iterations)throw new TypeError("Iterations not a number");if(0>iterations)throw new TypeError("Bad iterations");if("number"!=typeof keylen)throw new TypeError("Key length not a number");if(0>keylen||keylen>MAX_ALLOC)throw new TypeError("Bad key length");digest=digest||"sha1",Buffer.isBuffer(password)||(password=new Buffer(password,"binary")),Buffer.isBuffer(salt)||(salt=new Buffer(salt,"binary"));var hLen,l=1,DK=new Buffer(keylen),block1=new Buffer(salt.length+4);salt.copy(block1,0,0,salt.length);for(var r,T,i=1;l>=i;i++){block1.writeUInt32BE(i,salt.length);var U=createHmac(digest,password).update(block1).digest();hLen||(hLen=U.length,T=new Buffer(hLen),l=Math.ceil(keylen/hLen),r=keylen-(l-1)*hLen),U.copy(T,0,0,hLen);for(var j=1;iterations>j;j++){U=createHmac(digest,password).update(U).digest();for(var k=0;hLen>k;k++)T[k]^=U[k]}var destPos=(i-1)*hLen,len=i===l?r:hLen;T.copy(DK,destPos,0,len)}return DK}var createHmac=require("create-hmac"),MAX_ALLOC=Math.pow(2,30)-1;exports.pbkdf2=pbkdf2,exports.pbkdf2Sync=pbkdf2Sync}).call(this,require("buffer").Buffer)},{buffer:2,"create-hmac":143}],152:[function(require,module,exports){exports.publicEncrypt=require("./publicEncrypt"),exports.privateDecrypt=require("./privateDecrypt"),exports.privateEncrypt=function(key,buf){return exports.publicEncrypt(key,buf,!0)},exports.publicDecrypt=function(key,buf){return exports.privateDecrypt(key,buf,!0)}},{"./privateDecrypt":193,"./publicEncrypt":194}],153:[function(require,module,exports){(function(Buffer){function i2ops(c){var out=new Buffer(4);return out.writeUInt32BE(c,0),out}var createHash=require("create-hash");module.exports=function(seed,len){for(var c,t=new Buffer(""),i=0;t.length<len;)c=i2ops(i++),t=Buffer.concat([t,createHash("sha1").update(seed).update(c).digest()]);return t.slice(0,len)}}).call(this,require("buffer").Buffer)},{buffer:2,"create-hash":130}],154:[function(require,module,exports){arguments[4][39][0].apply(exports,arguments)},{dup:39}],155:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"bn.js":154,buffer:2,dup:40,randombytes:197}],156:[function(require,module,exports){arguments[4][65][0].apply(exports,arguments)},{dup:65}],157:[function(require,module,exports){arguments[4][66][0].apply(exports,arguments)},{"asn1.js":160,dup:66}],158:[function(require,module,exports){arguments[4][67][0].apply(exports,arguments)},{"browserify-aes":177,buffer:2,dup:67,evp_bytestokey:192}],159:[function(require,module,exports){arguments[4][68][0].apply(exports,arguments)},{"./aesid.json":156,"./asn1":157,"./fixProc":158,"browserify-aes":177,buffer:2,dup:68,pbkdf2:151}],160:[function(require,module,exports){arguments[4][69][0].apply(exports,arguments)},{"./asn1/api":161,"./asn1/base":163,"./asn1/constants":167,"./asn1/decoders":169,"./asn1/encoders":172,"bn.js":154,dup:69}],161:[function(require,module,exports){arguments[4][70][0].apply(exports,arguments)},{"../asn1":160,dup:70,inherits:199,vm:218}],162:[function(require,module,exports){arguments[4][71][0].apply(exports,arguments)},{"../base":163,buffer:2,dup:71,inherits:199}],163:[function(require,module,exports){arguments[4][72][0].apply(exports,arguments)},{"./buffer":162,"./node":164,"./reporter":165,dup:72}],164:[function(require,module,exports){arguments[4][73][0].apply(exports,arguments)},{"../base":163,dup:73,"minimalistic-assert":174}],165:[function(require,module,exports){arguments[4][74][0].apply(exports,arguments)},{dup:74,inherits:199}],166:[function(require,module,exports){arguments[4][75][0].apply(exports,arguments)},{"../constants":167,dup:75}],167:[function(require,module,exports){arguments[4][76][0].apply(exports,arguments)},{"./der":166,dup:76}],168:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"../../asn1":160,dup:77,inherits:199}],169:[function(require,module,exports){arguments[4][78][0].apply(exports,arguments)},{"./der":168,"./pem":170,dup:78}],170:[function(require,module,exports){arguments[4][79][0].apply(exports,arguments)},{"../../asn1":160,"./der":168,buffer:2,dup:79,inherits:199}],171:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{"../../asn1":160,buffer:2,dup:80,inherits:199}],172:[function(require,module,exports){arguments[4][81][0].apply(exports,arguments)},{"./der":171,"./pem":173,dup:81}],173:[function(require,module,exports){arguments[4][82][0].apply(exports,arguments)},{"../../asn1":160,"./der":171,buffer:2,dup:82,inherits:199}],174:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],175:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{buffer:2,dup:8}],176:[function(require,module,exports){arguments[4][9][0].apply(exports,arguments)},{"./aes":175,"./ghash":180,buffer:2,"buffer-xor":189,"cipher-base":190,dup:9,inherits:199}],177:[function(require,module,exports){arguments[4][10][0].apply(exports,arguments)},{"./decrypter":178,"./encrypter":179,"./modes":181,dup:10}],178:[function(require,module,exports){arguments[4][11][0].apply(exports,arguments)},{"./aes":175,"./authCipher":176,"./modes":181,"./modes/cbc":182,"./modes/cfb":183,"./modes/cfb1":184,"./modes/cfb8":185,"./modes/ctr":186,"./modes/ecb":187,"./modes/ofb":188,"./streamCipher":191,buffer:2,"cipher-base":190,dup:11,evp_bytestokey:192,inherits:199}],179:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{"./aes":175,"./authCipher":176,"./modes":181,"./modes/cbc":182,"./modes/cfb":183,"./modes/cfb1":184,"./modes/cfb8":185,"./modes/ctr":186,"./modes/ecb":187,"./modes/ofb":188,"./streamCipher":191,buffer:2,"cipher-base":190,dup:12,evp_bytestokey:192,inherits:199}],180:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{buffer:2,dup:13}],181:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],182:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"buffer-xor":189,dup:15}],183:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{buffer:2,"buffer-xor":189,dup:16}],184:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{buffer:2,dup:17}],185:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{buffer:2,dup:18}],186:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{buffer:2,"buffer-xor":189,dup:19}],187:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{dup:20}],188:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{buffer:2,"buffer-xor":189,dup:21}],189:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{buffer:2,dup:22}],190:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{buffer:2,dup:23,inherits:199,stream:216,string_decoder:217}],191:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"./aes":175,buffer:2,"cipher-base":190,dup:24,inherits:199}],192:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{buffer:2,"create-hash/md5":132,dup:35}],193:[function(require,module,exports){(function(Buffer){function oaep(key,msg){var k=(key.modulus,key.modulus.byteLength()),iHash=(msg.length,createHash("sha1").update(new Buffer("")).digest()),hLen=iHash.length;if(0!==msg[0])throw new Error("decryption error");var maskedSeed=msg.slice(1,hLen+1),maskedDb=msg.slice(hLen+1),seed=xor(maskedSeed,mgf(maskedDb,hLen)),db=xor(maskedDb,mgf(seed,k-hLen-1));if(compare(iHash,db.slice(0,hLen)))throw new Error("decryption error");for(var i=hLen;0===db[i];)i++;if(1!==db[i++])throw new Error("decryption error");return db.slice(i)}function pkcs1(key,msg,reverse){for(var p1=msg.slice(0,2),i=2,status=0;0!==msg[i++];)if(i>=msg.length){status++;break}var ps=msg.slice(2,i-1);msg.slice(i-1,i);if(("0002"!==p1.toString("hex")&&!reverse||"0001"!==p1.toString("hex")&&reverse)&&status++,ps.length<8&&status++,status)throw new Error("decryption error");return msg.slice(i)}function compare(a,b){a=new Buffer(a),b=new Buffer(b);var dif=0,len=a.length;a.length!==b.length&&(dif++,len=Math.min(a.length,b.length));for(var i=-1;++i<len;)dif+=a[i]^b[i];return dif}var parseKeys=require("parse-asn1"),mgf=require("./mgf"),xor=require("./xor"),bn=require("bn.js"),crt=require("browserify-rsa"),createHash=require("create-hash"),withPublic=require("./withPublic");module.exports=function(private_key,enc,reverse){var padding;padding=private_key.padding?private_key.padding:reverse?1:4;var key=parseKeys(private_key),k=key.modulus.byteLength();if(enc.length>k||new bn(enc).cmp(key.modulus)>=0)throw new Error("decryption error");var msg;msg=reverse?withPublic(new bn(enc),key):crt(enc,key);var zBuffer=new Buffer(k-msg.length);if(zBuffer.fill(0),msg=Buffer.concat([zBuffer,msg],k),4===padding)return oaep(key,msg);if(1===padding)return pkcs1(key,msg,reverse);if(3===padding)return msg;throw new Error("unknown padding")}}).call(this,require("buffer").Buffer)},{"./mgf":153,"./withPublic":195,"./xor":196,"bn.js":154,"browserify-rsa":155,buffer:2,"create-hash":130,"parse-asn1":159}],194:[function(require,module,exports){(function(Buffer){function oaep(key,msg){var k=key.modulus.byteLength(),mLen=msg.length,iHash=createHash("sha1").update(new Buffer("")).digest(),hLen=iHash.length,hLen2=2*hLen;if(mLen>k-hLen2-2)throw new Error("message too long");var ps=new Buffer(k-mLen-hLen2-2);ps.fill(0);var dblen=k-hLen-1,seed=randomBytes(hLen),maskedDb=xor(Buffer.concat([iHash,ps,new Buffer([1]),msg],dblen),mgf(seed,dblen)),maskedSeed=xor(seed,mgf(maskedDb,hLen));return new bn(Buffer.concat([new Buffer([0]),maskedSeed,maskedDb],k))}function pkcs1(key,msg,reverse){var mLen=msg.length,k=key.modulus.byteLength();if(mLen>k-11)throw new Error("message too long");var ps;return reverse?(ps=new Buffer(k-mLen-3),ps.fill(255)):ps=nonZero(k-mLen-3),new bn(Buffer.concat([new Buffer([0,reverse?1:2]),ps,new Buffer([0]),msg],k))}function nonZero(len,crypto){for(var num,out=new Buffer(len),i=0,cache=randomBytes(2*len),cur=0;len>i;)cur===cache.length&&(cache=randomBytes(2*len),cur=0),num=cache[cur++],num&&(out[i++]=num);return out}var parseKeys=require("parse-asn1"),randomBytes=require("randombytes"),createHash=require("create-hash"),mgf=require("./mgf"),xor=require("./xor"),bn=require("bn.js"),withPublic=require("./withPublic"),crt=require("browserify-rsa");module.exports=function(public_key,msg,reverse){var padding;padding=public_key.padding?public_key.padding:reverse?1:4;var paddedMsg,key=parseKeys(public_key);if(4===padding)paddedMsg=oaep(key,msg);else if(1===padding)paddedMsg=pkcs1(key,msg,reverse);else{if(3!==padding)throw new Error("unknown padding");if(paddedMsg=new bn(msg),paddedMsg.cmp(key.modulus)>=0)throw new Error("data too long for modulus")}return reverse?crt(paddedMsg,key):withPublic(paddedMsg,key)}}).call(this,require("buffer").Buffer)},{"./mgf":153,"./withPublic":195,"./xor":196,"bn.js":154,"browserify-rsa":155,buffer:2,"create-hash":130,"parse-asn1":159,randombytes:197}],195:[function(require,module,exports){(function(Buffer){function withPublic(paddedMsg,key){return new Buffer(paddedMsg.toRed(bn.mont(key.modulus)).redPow(new bn(key.publicExponent)).fromRed().toArray())}var bn=require("bn.js");module.exports=withPublic}).call(this,require("buffer").Buffer)},{"bn.js":154,buffer:2}],196:[function(require,module,exports){module.exports=function(a,b){for(var len=a.length,i=-1;++i<len;)a[i]^=b[i];return a}},{}],197:[function(require,module,exports){(function(process,global,Buffer){"use strict";function oldBrowser(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function randomBytes(size,cb){if(size>65536)throw new Error("requested too many random bytes");var rawBytes=new global.Uint8Array(size);size>0&&crypto.getRandomValues(rawBytes);var bytes=new Buffer(rawBytes.buffer);return"function"==typeof cb?process.nextTick(function(){cb(null,bytes)}):bytes}var crypto=global.crypto||global.msCrypto;crypto&&crypto.getRandomValues?module.exports=randomBytes:module.exports=oldBrowser}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},require("buffer").Buffer)},{_process:201,buffer:2}],198:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),
"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},{}],199:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],200:[function(require,module,exports){module.exports=function(obj){return!(null==obj||!(obj._isBuffer||obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)))}},{}],201:[function(require,module,exports){function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var currentQueue,process=module.exports={},queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],202:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":203}],203:[function(require,module,exports){"use strict";function Duplex(options){return this instanceof Duplex?(Readable.call(this,options),Writable.call(this,options),options&&options.readable===!1&&(this.readable=!1),options&&options.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,options&&options.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(options)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}function onEndNT(self){self.end()}var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var processNextTick=require("process-nextick-args"),util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}},{"./_stream_readable":205,"./_stream_writable":207,"core-util-is":208,inherits:199,"process-nextick-args":210}],204:[function(require,module,exports){"use strict";function PassThrough(options){return this instanceof PassThrough?void Transform.call(this,options):new PassThrough(options)}module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":206,"core-util-is":208,inherits:199}],205:[function(require,module,exports){(function(process){"use strict";function ReadableState(options,stream){Duplex=Duplex||require("./_stream_duplex"),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){return Duplex=Duplex||require("./_stream_duplex"),this instanceof Readable?(this._readableState=new ReadableState(options,this),this.readable=!0,options&&"function"==typeof options.read&&(this._read=options.read),void Stream.call(this)):new Readable(options)}function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er)stream.emit("error",er);else if(null===chunk)state.reading=!1,onEofChunk(stream,state);else if(state.objectMode||chunk&&chunk.length>0)if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else{var skipAdd;!state.decoder||addToFront||encoding||(chunk=state.decoder.write(chunk),skipAdd=!state.objectMode&&0===chunk.length),addToFront||(state.reading=!1),skipAdd||(state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream))),maybeReadMore(stream,state)}else addToFront||(state.reading=!1);return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function howMuchToRead(n,state){return 0===state.length&&state.ended?0:state.objectMode?0===n?0:1:null===n||isNaN(n)?state.flowing&&state.buffer.length?state.buffer[0].length:state.length:0>=n?0:(n>state.highWaterMark&&(state.highWaterMark=computeNewHighWaterMark(n)),n>state.length?state.ended?state.length:(state.needReadable=!0,0):n)}function chunkInvalid(state,chunk){var er=null;return Buffer.isBuffer(chunk)||"string"==typeof chunk||null===chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er}function onEofChunk(stream,state){if(!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?processNextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,processNextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,processNextTick(resume_,stream,state))}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;if(debug("flow",state.flowing),state.flowing)do var chunk=stream.read();while(null!==chunk&&state.flowing)}function fromList(n,state){var ret,list=state.buffer,length=state.length,stringMode=!!state.decoder,objectMode=!!state.objectMode;if(0===list.length)return null;if(0===length)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length)ret=stringMode?list.join(""):1===list.length?list[0]:Buffer.concat(list,length),list.length=0;else if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n),list[0]=buf.slice(n)}else if(n===list[0].length)ret=list.shift();else{ret=stringMode?"":new Buffer(n);for(var c=0,i=0,l=list.length;l>i&&n>c;i++){var buf=list[0],cpy=Math.min(n-c,buf.length);stringMode?ret+=buf.slice(0,cpy):buf.copy(ret,c,0,cpy),cpy<buf.length?list[0]=buf.slice(cpy):list.shift(),c+=cpy}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");state.endEmitted||(state.ended=!0,processNextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function forEach(xs,f){for(var i=0,l=xs.length;l>i;i++)f(xs[i],i)}function indexOf(xs,x){for(var i=0,l=xs.length;l>i;i++)if(xs[i]===x)return i;return-1}module.exports=Readable;var processNextTick=require("process-nextick-args"),isArray=require("isarray"),Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var Stream,EElistenerCount=(require("events"),function(emitter,type){return emitter.listeners(type).length});!function(){try{Stream=require("stream")}catch(_){}finally{Stream||(Stream=require("events").EventEmitter)}}();var Buffer=require("buffer").Buffer,util=require("core-util-is");util.inherits=require("inherits");var debugUtil=require("util"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder;util.inherits(Readable,Stream);var Duplex,Duplex;Readable.prototype.push=function(chunk,encoding){var state=this._readableState;return state.objectMode||"string"!=typeof chunk||(encoding=encoding||state.defaultEncoding,encoding!==state.encoding&&(chunk=new Buffer(chunk,encoding),encoding="")),readableAddChunk(this,state,chunk,encoding,!1)},Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",!0)},Readable.prototype.isPaused=function(){return this._readableState.flowing===!1},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};var MAX_HWM=8388608;Readable.prototype.read=function(n){debug("read",n);var state=this._readableState,nOrig=n;if(("number"!=typeof n||n>0)&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(n=howMuchToRead(n,state),0===n&&state.ended)return 0===state.length&&endReadable(this),null;var doRead=state.needReadable;debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&(doRead=!0,debug("length less than watermark",doRead)),(state.ended||state.reading)&&(doRead=!1,debug("reading or ended",doRead)),doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1),doRead&&!state.reading&&(n=howMuchToRead(nOrig,state));var ret;return ret=n>0?fromList(n,state):null,null===ret&&(state.needReadable=!0,n=0),state.length-=n,0!==state.length||state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&0===state.length&&endReadable(this),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){function onunpipe(readable){debug("onunpipe"),readable===src&&cleanup()}function onend(){debug("onend"),dest.end()}function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",cleanup),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}function ondata(chunk){debug("ondata");var ret=dest.write(chunk);!1===ret&&(1!==state.pipesCount||state.pipes[0]!==dest||1!==src.listenerCount("data")||cleanedUp||(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==!1)&&dest!==process.stdout&&dest!==process.stderr,endFn=doEnd?onend:cleanup;state.endEmitted?processNextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=!1;return src.on("data",ondata),dest._events&&dest._events.error?isArray(dest._events.error)?dest._events.error.unshift(onerror):dest._events.error=[onerror,dest._events.error]:dest.on("error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState;if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes?this:(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this),this);if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var _i=0;len>_i;_i++)dests[_i].emit("unpipe",this);return this}var i=indexOf(state.pipes,dest);return-1===i?this:(state.pipes.splice(i,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this),this)},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev&&!1!==this._readableState.flowing&&this.resume(),"readable"===ev&&!this._readableState.endEmitted){var state=this._readableState;state.readableListening||(state.readableListening=!0,state.emittedReadable=!1,state.needReadable=!0,state.reading?state.length&&emitReadable(this,state):processNextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,resume(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var state=this._readableState,paused=!1,self=this;stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self.push(chunk)}self.push(null)}),stream.on("data",function(chunk){if(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),(!state.objectMode||null!==chunk&&void 0!==chunk)&&(state.objectMode||chunk&&chunk.length)){var ret=self.push(chunk);ret||(paused=!0,stream.pause())}});for(var i in stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));var events=["error","close","destroy","pause","resume"];return forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))}),self._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},self},Readable._fromList=fromList}).call(this,require("_process"))},{"./_stream_duplex":203,_process:201,buffer:2,"core-util-is":208,events:198,inherits:199,isarray:209,"process-nextick-args":210,"string_decoder/":217,util:1}],206:[function(require,module,exports){"use strict";function TransformState(stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null,ts.writecb=null,null!==data&&void 0!==data&&stream.push(data),cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(er){done(stream,er)}):done(stream)})}function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState,ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0}},{"./_stream_duplex":203,"core-util-is":208,inherits:199}],207:[function(require,module,exports){"use strict";function nop(){}function WriteReq(chunk,encoding,cb){this.chunk=chunk,this.encoding=encoding,this.callback=cb,this.next=null}function WritableState(options,stream){Duplex=Duplex||require("./_stream_duplex"),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var noDecode=options.decodeStrings===!1;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this),this.corkedRequestsFree.next=new CorkedRequest(this)}function Writable(options){return Duplex=Duplex||require("./_stream_duplex"),this instanceof Writable||this instanceof Duplex?(this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev)),void Stream.call(this)):new Writable(options)}function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er),processNextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=!0;if(!Buffer.isBuffer(chunk)&&"string"!=typeof chunk&&null!==chunk&&void 0!==chunk&&!state.objectMode){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er),processNextTick(cb,er),valid=!1}return valid}function decodeChunk(state,chunk,encoding){return state.objectMode||state.decodeStrings===!1||"string"!=typeof chunk||(chunk=new Buffer(chunk,encoding)),chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding),Buffer.isBuffer(chunk)&&(encoding="buffer");var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(ret||(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest=new WriteReq(chunk,encoding,cb),last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?processNextTick(cb,er):cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){finished||onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0;entry;)buffer[count]=entry,entry=entry.next,count+=1;doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,state.corkedRequestsFree=holder.next,holder.next=null}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),entry=entry.next,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequestCount=0,state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function prefinish(stream,state){state.prefinished||(state.prefinished=!0,stream.emit("prefinish"))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(0===state.pendingcb?(prefinish(stream,state),state.finished=!0,stream.emit("finish")):prefinish(stream,state)),need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?processNextTick(cb):stream.once("finish",cb)),state.ended=!0,stream.writable=!1}function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(err){var entry=_this.entry;for(_this.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=_this:state.corkedRequestsFree=_this}}module.exports=Writable;var processNextTick=require("process-nextick-args"),asyncWrite=processNextTick,Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream,internalUtil={deprecate:require("util-deprecate")};!function(){try{Stream=require("stream")}catch(_){}finally{Stream||(Stream=require("events").EventEmitter)}}();var Buffer=require("buffer").Buffer;util.inherits(Writable,Stream);var Duplex;WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(_){}}();var Duplex;Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1;return"function"==typeof encoding&&(cb=encoding,encoding=null),Buffer.isBuffer(chunk)?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?writeAfterEnd(this,cb):validChunk(this,state,chunk,cb)&&(state.pendingcb++,ret=writeOrBuffer(this,state,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){var state=this._writableState;state.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);this._writableState.defaultEncoding=encoding},Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!==chunk&&void 0!==chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||endWritable(this,state,cb)}},{"./_stream_duplex":203,buffer:2,"core-util-is":208,events:198,inherits:199,"process-nextick-args":210,"util-deprecate":211}],208:[function(require,module,exports){(function(Buffer){function isArray(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return"[object Date]"===objectToString(d)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer}).call(this,{isBuffer:require("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":200}],209:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{dup:5}],210:[function(require,module,exports){(function(process){"use strict";function nextTick(fn){for(var args=new Array(arguments.length-1),i=0;i<args.length;)args[i++]=arguments[i];process.nextTick(function(){fn.apply(null,args)})}!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports=nextTick:module.exports=process.nextTick;
}).call(this,require("_process"))},{_process:201}],211:[function(require,module,exports){(function(global){function deprecate(fn,msg){function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}if(config("noDeprecation"))return fn;var warned=!1;return deprecated}function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null==val?!1:"true"===String(val).toLowerCase()}module.exports=deprecate}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],212:[function(require,module,exports){module.exports=require("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":204}],213:[function(require,module,exports){var Stream=function(){try{return require("stream")}catch(_){}}();exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=Stream||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":203,"./lib/_stream_passthrough.js":204,"./lib/_stream_readable.js":205,"./lib/_stream_transform.js":206,"./lib/_stream_writable.js":207,stream:216}],214:[function(require,module,exports){module.exports=require("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":206}],215:[function(require,module,exports){module.exports=require("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":207}],216:[function(require,module,exports){function Stream(){EE.call(this)}module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(dest,options){function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()}function ondrain(){source.readable&&source.resume&&source.resume()}function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,"function"==typeof dest.destroy&&dest.destroy())}function onerror(er){if(cleanup(),0===EE.listenerCount(this,"error"))throw er}function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("close",cleanup)}var source=this;source.on("data",ondata),dest.on("drain",ondrain),dest._isStdio||options&&options.end===!1||(source.on("end",onend),source.on("close",onclose));var didOnEnd=!1;return source.on("error",onerror),dest.on("error",onerror),source.on("end",cleanup),source.on("close",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}},{events:198,inherits:199,"readable-stream/duplex.js":202,"readable-stream/passthrough.js":212,"readable-stream/readable.js":213,"readable-stream/transform.js":214,"readable-stream/writable.js":215}],217:[function(require,module,exports){function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding))throw new Error("Unknown encoding: "+encoding)}function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3,this.charLength=this.charReceived?3:0}var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(encoding){switch(this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(encoding),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(buffer){for(var charStr="";this.charLength;){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;if(buffer.copy(this.charBuffer,this.charReceived,0,available),this.charReceived+=available,this.charReceived<this.charLength)return"";buffer=buffer.slice(available,buffer.length),charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(!(charCode>=55296&&56319>=charCode)){if(this.charReceived=this.charLength=0,0===buffer.length)return charStr;break}this.charLength+=this.surrogateSize,charStr=""}this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end),end-=this.charReceived),charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1,charCode=charStr.charCodeAt(end);if(charCode>=55296&&56319>=charCode){var size=this.surrogateSize;return this.charLength+=size,this.charReceived+=size,this.charBuffer.copy(this.charBuffer,size,0,size),buffer.copy(this.charBuffer,0,0,size),charStr.substring(0,end)}return charStr},StringDecoder.prototype.detectIncompleteChar=function(buffer){for(var i=buffer.length>=3?3:buffer.length;i>0;i--){var c=buffer[buffer.length-i];if(1==i&&c>>5==6){this.charLength=2;break}if(2>=i&&c>>4==14){this.charLength=3;break}if(3>=i&&c>>3==30){this.charLength=4;break}}this.charReceived=i},StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length&&(res=this.write(buffer)),this.charReceived){var cr=this.charReceived,buf=this.charBuffer,enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res}},{buffer:2}],218:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(obj){if(Object.keys)return Object.keys(obj);var res=[];for(var key in obj)res.push(key);return res},forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn);for(var i=0;i<xs.length;i++)fn(xs[i],i,xs)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(obj,name,value){Object.defineProperty(obj,name,{writable:!0,enumerable:!1,configurable:!0,value:value})}}catch(e){return function(obj,name,value){obj[name]=value}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(code){return this instanceof Script?void(this.code=code):new Script(code)};Script.prototype.runInContext=function(context){if(!(context instanceof Context))throw new TypeError("needs a 'context' argument.");var iframe=document.createElement("iframe");iframe.style||(iframe.style={}),iframe.style.display="none",document.body.appendChild(iframe);var win=iframe.contentWindow,wEval=win.eval,wExecScript=win.execScript;!wEval&&wExecScript&&(wExecScript.call(win,"null"),wEval=win.eval),forEach(Object_keys(context),function(key){win[key]=context[key]}),forEach(globals,function(key){context[key]&&(win[key]=context[key])});var winKeys=Object_keys(win),res=wEval.call(win,this.code);return forEach(Object_keys(win),function(key){(key in context||-1===indexOf(winKeys,key))&&(context[key]=win[key])}),forEach(globals,function(key){key in context||defineProp(context,key,win[key])}),document.body.removeChild(iframe),res},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(context){var ctx=Script.createContext(context),res=this.runInContext(ctx);return forEach(Object_keys(ctx),function(key){context[key]=ctx[key]}),res},forEach(Object_keys(Script.prototype),function(name){exports[name]=Script[name]=function(code){var s=Script(code);return s[name].apply(s,[].slice.call(arguments,1))}}),exports.createScript=function(code){return exports.Script(code)},exports.createContext=Script.createContext=function(context){var copy=new Context;return"object"==typeof context&&forEach(Object_keys(context),function(key){copy[key]=context[key]}),copy}},{indexof:219}],219:[function(require,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},{}],220:[function(require,module,exports){module.exports=require("./lib/core/core")},{"./lib/core/core":223}],221:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){math.on("config",function(curr,prev){curr.number!==prev.number&&factory(type,config,load,typed,math)}),math["true"]=!0,math["false"]=!1,math["null"]=null,math.uninitialized=require("./utils/array").UNINITIALIZED,"bignumber"===config.number?(math.Infinity=new type.BigNumber(1/0),math.NaN=new type.BigNumber(NaN),object.lazy(math,"pi",function(){return bigConstants.pi(type.BigNumber)}),object.lazy(math,"tau",function(){return bigConstants.tau(type.BigNumber)}),object.lazy(math,"e",function(){return bigConstants.e(type.BigNumber)}),object.lazy(math,"phi",function(){return bigConstants.phi(type.BigNumber)}),object.lazy(math,"E",function(){return math.e}),object.lazy(math,"LN2",function(){return new type.BigNumber(2).ln()}),object.lazy(math,"LN10",function(){return new type.BigNumber(10).ln()}),object.lazy(math,"LOG2E",function(){return new type.BigNumber(1).div(new type.BigNumber(2).ln())}),object.lazy(math,"LOG10E",function(){return new type.BigNumber(1).div(new type.BigNumber(10).ln())}),object.lazy(math,"PI",function(){return math.pi}),object.lazy(math,"SQRT1_2",function(){return new type.BigNumber("0.5").sqrt()}),object.lazy(math,"SQRT2",function(){return new type.BigNumber(2).sqrt()})):(math.Infinity=1/0,math.NaN=NaN,math.pi=Math.PI,math.tau=2*Math.PI,math.e=Math.E,math.phi=1.618033988749895,math.E=math.e,math.LN2=Math.LN2,math.LN10=Math.LN10,math.LOG2E=Math.LOG2E,math.LOG10E=Math.LOG10E,math.PI=math.pi,math.SQRT1_2=Math.SQRT1_2,math.SQRT2=Math.SQRT2),math.i=new type.Complex(0,1),math.version=require("./version")}var object=require("./utils/object"),bigConstants=require("./utils/bignumber/constants");exports.factory=factory,exports.lazy=!1,exports.math=!0},{"./utils/array":670,"./utils/bignumber/constants":685,"./utils/object":707,"./version":710}],222:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){return function(options){if(options){var prev=object.clone(config);object.deepExtend(config,options);var curr=object.clone(config);return math.emit("config",curr,prev),curr}return object.clone(config)}}var object=require("../utils/object");exports.name="config",exports.math=!0,exports.factory=factory},{"../utils/object":707}],223:[function(require,module,exports){var isFactory=require("./../utils/object").isFactory,deepExtend=require("./../utils/object").deepExtend,typedFactory=require("./typed"),emitter=require("./../utils/emitter"),importFactory=require("./import"),configFactory=require("./config");exports.create=function(options){function load(factory){if(!isFactory(factory))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var instance,index=factories.indexOf(factory);return-1===index?(instance=factory.math===!0?factory.factory(math.type,_config,load,math.typed,math):factory.factory(math.type,_config,load,math.typed),factories.push(factory),instances.push(instance)):instance=instances[index],instance}if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var factories=[],instances=[],math=emitter.mixin({});math.type={},math.expression={transform:Object.create(math)},math.typed=typedFactory.create(math.type);var _config={epsilon:1e-14,matrix:"matrix",number:"number",precision:64,predictable:!1};return options&&deepExtend(_config,options),math["import"]=load(importFactory),math.config=load(configFactory),math}},{"./../utils/emitter":702,"./../utils/object":707,"./config":222,"./import":224,"./typed":225}],224:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){function math_import(object,options){var num=arguments.length;if(1!=num&&2!=num)throw new ArgumentsError("import",num,1,2);if(options||(options={}),isFactory(object))_importFactory(object,options);else if(Array.isArray(object))object.forEach(function(entry){math_import(entry,options)});else if("object"==typeof object){for(var name in object)if(object.hasOwnProperty(name)){var value=object[name];isSupportedType(value)?_import(name,value,options):isFactory(object)?_importFactory(object,options):math_import(value,options)}}else if(!options.silent)throw new TypeError("Factory, Object, or Array expected")}function _import(name,value,options){if(options.wrap&&"function"==typeof value&&(value=_wrap(value)),isTypedFunction(math[name])&&isTypedFunction(value))return value=options.override?typed(name,value.signatures):typed(math[name],value),math[name]=value,_importTransform(name,value),void math.emit("import",name,function(){return value});if(void 0===math[name]||options.override)return math[name]=value,_importTransform(name,value),void math.emit("import",name,function(){return value});if(!options.silent)throw new Error('Cannot import "'+name+'": already exists')}function _importTransform(name,value){value&&"function"==typeof value.transform&&(math.expression.transform[name]=value.transform)}function _wrap(fn){var wrapper=function(){for(var args=[],i=0,len=arguments.length;len>i;i++){var arg=arguments[i];args[i]=arg&&arg.valueOf()}return fn.apply(math,args)};return fn.transform&&(wrapper.transform=fn.transform),wrapper}function _importFactory(factory,options){if("string"==typeof factory.name){var name=factory.name,namespace=factory.path?traverse(math,factory.path):math,existing=namespace.hasOwnProperty(name)?namespace[name]:void 0,resolver=function(){var instance=load(factory);if(isTypedFunction(existing)&&isTypedFunction(instance))return options.override||(instance=typed(existing,instance)),instance;if(void 0===existing||options.override)return instance;if(!options.silent)throw new Error('Cannot import "'+name+'": already exists')};factory.lazy!==!1?lazy(namespace,name,resolver):namespace[name]=resolver(),math.emit("import",name,resolver,factory.path)}else load(factory)}function isSupportedType(object){return"function"==typeof object||"number"==typeof object||"string"==typeof object||"boolean"==typeof object||null===object||object&&object.isUnit===!0||object&&object.isComplex===!0||object&&object.isBigNumber===!0||object&&object.isFraction===!0||object&&object.isMatrix===!0||object&&Array.isArray(object)===!0}function isTypedFunction(fn){return"function"==typeof fn&&"object"==typeof fn.signatures}return math_import}var lazy=require("../utils/object").lazy,isFactory=require("../utils/object").isFactory,traverse=require("../utils/object").traverse,ArgumentsError=(require("../utils/object").extend,require("../error/ArgumentsError"));exports.math=!0,exports.name="import",exports.factory=factory,exports.lazy=!0},{"../error/ArgumentsError":226,"../utils/object":707}],225:[function(require,module,exports){var typedFunction=require("typed-function"),digits=require("./../utils/number").digits,createTyped=function(){return createTyped=typedFunction.create,typedFunction};exports.create=function(type){var typed=createTyped();return typed.types=[{name:"number",test:function(x){return"number"==typeof x}},{name:"Complex",test:function(x){return x&&x.isComplex}},{name:"BigNumber",test:function(x){return x&&x.isBigNumber}},{name:"Fraction",test:function(x){return x&&x.isFraction}},{name:"Unit",test:function(x){return x&&x.isUnit}},{name:"string",test:function(x){return"string"==typeof x}},{name:"Array",test:Array.isArray},{name:"Matrix",test:function(x){return x&&x.isMatrix}},{name:"DenseMatrix",test:function(x){return x&&x.isDenseMatrix}},{name:"SparseMatrix",test:function(x){return x&&x.isSparseMatrix}},{name:"ImmutableDenseMatrix",test:function(x){return x&&x.isImmutableDenseMatrix}},{name:"Range",test:function(x){return x&&x.isRange}},{name:"Index",test:function(x){return x&&x.isIndex}},{name:"boolean",test:function(x){return"boolean"==typeof x}},{name:"ResultSet",test:function(x){return x&&x.isResultSet}},{name:"Help",test:function(x){return x&&x.isHelp}},{name:"function",test:function(x){return"function"==typeof x}},{name:"Date",test:function(x){return x instanceof Date}},{name:"RegExp",test:function(x){return x instanceof RegExp}},{name:"Object",test:function(x){return"object"==typeof x}},{name:"null",test:function(x){return null===x}},{name:"undefined",test:function(x){return void 0===x}}],typed.conversions=[{from:"number",to:"BigNumber",convert:function(x){if(digits(x)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+x+"). Use function bignumber(x) to convert to BigNumber.");return new type.BigNumber(x)}},{from:"number",to:"Complex",convert:function(x){return new type.Complex(x,0)}},{from:"number",to:"string",convert:function(x){return x+""}},{from:"BigNumber",to:"Complex",convert:function(x){return new type.Complex(x.toNumber(),0)}},{from:"number",to:"Fraction",convert:function(x){if(digits(x)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to Fraction (value: "+x+"). Use function fraction(x) to convert to Fraction.");return new type.Fraction(x)}},{from:"Fraction",to:"BigNumber",convert:function(x){return new type.BigNumber(x.valueOf())}},{from:"string",to:"number",convert:function(x){var n=Number(x);if(isNaN(n))throw new Error('Cannot convert "'+x+'" to a number');return n}},{from:"boolean",to:"number",convert:function(x){return+x}},{from:"boolean",to:"BigNumber",convert:function(x){return new type.BigNumber(+x)}},{from:"boolean",to:"string",convert:function(x){return+x}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new type.BigNumber(0)}},{from:"Array",to:"Matrix",convert:function(array){return new type.DenseMatrix(array)}},{from:"Matrix",to:"Array",convert:function(matrix){return matrix.valueOf()}}],typed}},{"./../utils/number":706,"typed-function":714}],226:[function(require,module,exports){"use strict";function ArgumentsError(fn,count,min,max){if(!(this instanceof ArgumentsError))throw new SyntaxError("Constructor must be called with the new operator");this.fn=fn,this.count=count,this.min=min,this.max=max,this.message="Wrong number of arguments in function "+fn+" ("+count+" provided, "+min+(void 0!=max?"-"+max:"")+" expected)",this.stack=(new Error).stack}ArgumentsError.prototype=new Error,ArgumentsError.prototype.constructor=Error,ArgumentsError.prototype.name="ArgumentsError",ArgumentsError.prototype.isArgumentsError=!0,module.exports=ArgumentsError},{}],227:[function(require,module,exports){"use strict";function DimensionError(actual,expected,relation){if(!(this instanceof DimensionError))throw new SyntaxError("Constructor must be called with the new operator");this.actual=actual,this.expected=expected,this.relation=relation,this.message="Dimension mismatch ("+(Array.isArray(actual)?"["+actual.join(", ")+"]":actual)+" "+(this.relation||"!=")+" "+(Array.isArray(expected)?"["+expected.join(", ")+"]":expected)+")",this.stack=(new Error).stack}DimensionError.prototype=new RangeError,DimensionError.prototype.constructor=RangeError,DimensionError.prototype.name="DimensionError",DimensionError.prototype.isDimensionError=!0,module.exports=DimensionError},{}],228:[function(require,module,exports){"use strict";function IndexError(index,min,max){if(!(this instanceof IndexError))throw new SyntaxError("Constructor must be called with the new operator");this.index=index,arguments.length<3?(this.min=0,this.max=min):(this.min=min,this.max=max),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}IndexError.prototype=new RangeError,IndexError.prototype.constructor=RangeError,IndexError.prototype.name="IndexError",IndexError.prototype.isIndexError=!0,module.exports=IndexError},{}],229:[function(require,module,exports){"use strict";var ArgumentsError=require("./ArgumentsError"),DimensionError=require("./DimensionError"),IndexError=require("./IndexError");module.exports=[{name:"ArgumentsError",path:"error",factory:function(){return ArgumentsError}},{name:"DimensionError",path:"error",factory:function(){return DimensionError}},{name:"IndexError",path:"error",factory:function(){return IndexError}}]},{"./ArgumentsError":226,"./DimensionError":227,"./IndexError":228}],230:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function Help(doc){if(!(this instanceof Help))throw new SyntaxError("Constructor must be called with the new operator");if(!doc)throw new Error('Argument "doc" missing');this.doc=doc}var parser=load(require("./function/parser"))();return Help.prototype.type="Help",Help.prototype.isHelp=!0,Help.prototype.toString=function(){var doc=this.doc||{},desc="\n";if(doc.name&&(desc+="Name: "+doc.name+"\n\n"),doc.category&&(desc+="Category: "+doc.category+"\n\n"),doc.description&&(desc+="Description:\n    "+doc.description+"\n\n"),doc.syntax&&(desc+="Syntax:\n    "+doc.syntax.join("\n    ")+"\n\n"),doc.examples){desc+="Examples:\n";for(var i=0;i<doc.examples.length;i++){var expr=doc.examples[i];desc+="    "+expr+"\n";var res;try{res=parser.eval(expr)}catch(e){res=e}res&&!res.isHelp&&(desc+="        "+string.format(res,{precision:14})+"\n")}desc+="\n"}return doc.seealso&&(desc+="See also: "+doc.seealso.join(", ")+"\n"),desc},Help.prototype.toJSON=function(){var obj=object.clone(this.doc);return obj.mathjs="Help",obj},Help.fromJSON=function(json){var doc={};for(var prop in json)"mathjs"!==prop&&(doc[prop]=json[prop]);return new Help(doc)},Help.prototype.valueOf=Help.prototype.toString,Help}var object=require("../utils/object"),string=require("../utils/string");exports.name="Help",exports.path="type",exports.factory=factory},{"../utils/object":707,"../utils/string":708,"./function/parser":407}],231:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){function Parser(){if(!(this instanceof Parser))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}var _parse=load(require("./parse"));return Parser.prototype.type="Parser",Parser.prototype.isParser=!0,Parser.prototype.parse=function(expr){throw new Error("Parser.parse is deprecated. Use math.parse instead.")},Parser.prototype.compile=function(expr){throw new Error("Parser.compile is deprecated. Use math.compile instead.")},Parser.prototype.eval=function(expr){return _parse(expr).compile().eval(this.scope)},Parser.prototype.get=function(name){return this.scope[name]},Parser.prototype.set=function(name,value){return this.scope[name]=value},Parser.prototype.remove=function(name){delete this.scope[name]},Parser.prototype.clear=function(){for(var name in this.scope)this.scope.hasOwnProperty(name)&&delete this.scope[name]},Parser}exports.name="Parser",exports.path="expression",exports.factory=factory,exports.math=!0},{"./parse":426}],232:[function(require,module,exports){module.exports={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]}},{}],233:[function(require,module,exports){module.exports={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]}},{}],234:[function(require,module,exports){module.exports={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]}},{}],235:[function(require,module,exports){module.exports={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]}},{}],236:[function(require,module,exports){module.exports={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]}},{}],237:[function(require,module,exports){module.exports={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]}},{}],238:[function(require,module,exports){module.exports={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]}},{}],239:[function(require,module,exports){module.exports={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]}},{}],240:[function(require,module,exports){module.exports={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]}},{}],241:[function(require,module,exports){module.exports={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]}},{}],242:[function(require,module,exports){module.exports={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]}},{}],243:[function(require,module,exports){module.exports={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]}},{}],244:[function(require,module,exports){module.exports={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["tau"],seealso:[]}},{}],245:[function(require,module,exports){module.exports={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]}},{}],246:[function(require,module,exports){module.exports={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]}},{}],247:[function(require,module,exports){module.exports={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]}},{}],248:[function(require,module,exports){module.exports={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]}},{}],249:[function(require,module,exports){module.exports={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]}},{}],250:[function(require,module,exports){module.exports={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu"]}},{}],251:[function(require,module,exports){module.exports={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]}},{}],252:[function(require,module,exports){module.exports={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup"]}},{}],253:[function(require,module,exports){module.exports={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]}},{}],254:[function(require,module,exports){module.exports={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]}},{}],255:[function(require,module,exports){module.exports={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]}},{}],256:[function(require,module,exports){module.exports={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]}},{}],257:[function(require,module,exports){module.exports={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]}},{}],258:[function(require,module,exports){module.exports={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",
examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]}},{}],259:[function(require,module,exports){module.exports={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]}},{}],260:[function(require,module,exports){module.exports={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]}},{}],261:[function(require,module,exports){module.exports={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]}},{}],262:[function(require,module,exports){module.exports={name:"dotpow",category:"Operators",syntax:["x .^ y","dotpow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]}},{}],263:[function(require,module,exports){module.exports={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["pow","log"]}},{}],264:[function(require,module,exports){module.exports={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]}},{}],265:[function(require,module,exports){module.exports={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]}},{}],266:[function(require,module,exports){module.exports={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]}},{}],267:[function(require,module,exports){module.exports={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]}},{}],268:[function(require,module,exports){module.exports={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]}},{}],269:[function(require,module,exports){module.exports={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log10"]}},{}],270:[function(require,module,exports){module.exports={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]}},{}],271:[function(require,module,exports){module.exports={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","function isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]}},{}],272:[function(require,module,exports){module.exports={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]}},{}],273:[function(require,module,exports){module.exports={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i))","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)","norm([[1, 2], [3, 4]], 'inf')","norm([[1, 2], [3, 4]], 'fro')"]}},{}],274:[function(require,module,exports){module.exports={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["sqrt","pow"]}},{}],275:[function(require,module,exports){module.exports={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3 = 8","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply"]}},{}],276:[function(require,module,exports){module.exports={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]}},{}],277:[function(require,module,exports){module.exports={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]}},{}],278:[function(require,module,exports){module.exports={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","multiply"]}},{}],279:[function(require,module,exports){module.exports={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]}},{}],280:[function(require,module,exports){module.exports={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]}},{}],281:[function(require,module,exports){module.exports={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]}},{}],282:[function(require,module,exports){module.exports={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]}},{}],283:[function(require,module,exports){module.exports={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]}},{}],284:[function(require,module,exports){module.exports={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},{}],285:[function(require,module,exports){module.exports={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},{}],286:[function(require,module,exports){module.exports={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]}},{}],287:[function(require,module,exports){module.exports={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]}},{}],288:[function(require,module,exports){module.exports={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]}},{}],289:[function(require,module,exports){module.exports={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","leftShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]}},{}],290:[function(require,module,exports){module.exports={name:"rightLogShift",category:"Bitwise",syntax:["x >> y","leftShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]}},{}],291:[function(require,module,exports){module.exports={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]}},{}],292:[function(require,module,exports){module.exports={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]}},{}],293:[function(require,module,exports){module.exports={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]}},{}],294:[function(require,module,exports){module.exports={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]}},{}],295:[function(require,module,exports){module.exports={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]}},{}],296:[function(require,module,exports){module.exports={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]}},{}],297:[function(require,module,exports){module.exports={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]}},{}],298:[function(require,module,exports){module.exports={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]}},{}],299:[function(require,module,exports){module.exports={name:"eval",category:"Expression",syntax:["eval(expression)","eval([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['eval("2 + 3")','eval("sqrt(" + 4 + ")")'],seealso:[]}},{}],300:[function(require,module,exports){module.exports={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]}},{}],301:[function(require,module,exports){module.exports={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]}},{}],302:[function(require,module,exports){module.exports={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]}},{}],303:[function(require,module,exports){module.exports={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]}},{}],304:[function(require,module,exports){module.exports={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]}},{}],305:[function(require,module,exports){module.exports={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]}},{}],306:[function(require,module,exports){module.exports={name:"xor",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 or 4"],seealso:["not","and","or"]}},{}],307:[function(require,module,exports){module.exports={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],308:[function(require,module,exports){module.exports={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]}},{}],309:[function(require,module,exports){module.exports={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],310:[function(require,module,exports){module.exports={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],311:[function(require,module,exports){module.exports={name:"dot",category:"Matrix",syntax:["dot(A, B)"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]}},{}],312:[function(require,module,exports){module.exports={name:"eye",category:"Matrix",syntax:["eye(n)","eye(m, n)","eye([m, n])","eye"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["eye(3)","eye(3, 5)","a = [1, 2, 3; 4, 5, 6]","eye(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],313:[function(require,module,exports){module.exports={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]}},{}],314:[function(require,module,exports){module.exports={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","eye","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],315:[function(require,module,exports){module.exports={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])","ones"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","eye","inv","range","size","squeeze","subset","trace","transpose","zeros"]}},{}],316:[function(require,module,exports){module.exports={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","eye","inv","ones","size","squeeze","subset","trace","transpose","zeros"]}},{}],317:[function(require,module,exports){module.exports={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze"]}},{}],318:[function(require,module,exports){module.exports={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","eye","inv","ones","range","squeeze","subset","trace","transpose","zeros"]}},{}],319:[function(require,module,exports){module.exports={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","eye","inv","ones","range","size","subset","trace","transpose","zeros"]}},{}],320:[function(require,module,exports){module.exports={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","trace","transpose","zeros"]}},{}],321:[function(require,module,exports){module.exports={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","transpose","zeros"]}},{}],322:[function(require,module,exports){module.exports={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","trace","zeros"]}},{}],323:[function(require,module,exports){module.exports={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])","zeros"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose"]}},{}],324:[function(require,module,exports){module.exports={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["permutations","factorial"]}},{}],325:[function(require,module,exports){module.exports={name:"factorial",category:"Probability",syntax:["kldivergence(x, y)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","permutations","gamma"]}},{}],326:[function(require,module,exports){module.exports={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]}},{}],327:[function(require,module,exports){module.exports={name:"kldivergence",category:"Probability",syntax:["n!","factorial(n)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["math.kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]}},{}],328:[function(require,module,exports){module.exports={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai <= 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]}},{}],329:[function(require,module,exports){module.exports={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","factorial"]}},{}],330:[function(require,module,exports){module.exports={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])"],seealso:["random","randomInt"]}},{}],331:[function(require,module,exports){module.exports={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]}},{}],332:[function(require,module,exports){module.exports={name:"randInt",category:"Probability",syntax:["randInt(max)","randInt(min, max)","randInt(size)","randInt(size, max)","randInt(size, min, max)"],description:"Return a random integer number",examples:["randInt(10, 20)","randInt([2, 3], 10)"],seealso:["pickRandom","random"]}},{}],333:[function(require,module,exports){module.exports={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 if x is larger than y, -1 if x is smaller than y, and 0 if x and y are equal.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq"]}},{}],334:[function(require,module,exports){module.exports={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["[1,3,4] == [1,3,4]","[1,3,4] == [1,3]"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]}},{}],335:[function(require,module,exports){module.exports={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},{}],336:[function(require,module,exports){module.exports={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]}},{}],337:[function(require,module,exports){module.exports={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 > 1+1","2 >= 1+1","a = 3.2","b = 6-2.8","(a > b)"],seealso:["equal","unequal","smallerEq","smaller","largerEq","compare"]}},{}],338:[function(require,module,exports){module.exports={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]}},{}],339:[function(require,module,exports){module.exports={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 1+1","2 <= 1+1","a = 3.2","b = 6-2.8","(a < b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]}},{}],340:[function(require,module,exports){module.exports={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},{}],341:[function(require,module,exports){module.exports={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","var"]}},{}],342:[function(require,module,exports){module.exports={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","var"]}},{}],343:[function(require,module,exports){module.exports={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","var"]}},{}],344:[function(require,module,exports){module.exports={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","var"]}},{}],345:[function(require,module,exports){module.exports={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(5, 2, 7)","mode([3, -1, 5, 7])"],seealso:["max","mean","min","median","prod","std","sum","var"]}},{}],346:[function(require,module,exports){module.exports={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","var"]}},{}],347:[function(require,module,exports){module.exports={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",
examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","var"]}},{}],348:[function(require,module,exports){module.exports={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(var(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","sum","var"]}},{}],349:[function(require,module,exports){module.exports={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","var"]}},{}],350:[function(require,module,exports){module.exports={name:"var",category:"Statistics",syntax:["var(a, b, c, ...)","var(A)","var(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["var(2, 4, 6)","var([2, 4, 6, 8])",'var([2, 4, 6, 8], "uncorrected")','var([2, 4, 6, 8], "biased")',"var([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]}},{}],351:[function(require,module,exports){module.exports={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]}},{}],352:[function(require,module,exports){module.exports={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]}},{}],353:[function(require,module,exports){module.exports={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]}},{}],354:[function(require,module,exports){module.exports={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(0.5)"],seealso:["acsch","asech"]}},{}],355:[function(require,module,exports){module.exports={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(0.5)","acsc(csc(0.5))","acsc(2)"],seealso:["csc","asin","asec"]}},{}],356:[function(require,module,exports){module.exports={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]}},{}],357:[function(require,module,exports){module.exports={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]}},{}],358:[function(require,module,exports){module.exports={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]}},{}],359:[function(require,module,exports){module.exports={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(2.3))"],seealso:["sin","acos","atan"]}},{}],360:[function(require,module,exports){module.exports={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]}},{}],361:[function(require,module,exports){module.exports={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(2.3))"],seealso:["tan","acos","asin"]}},{}],362:[function(require,module,exports){module.exports={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]}},{}],363:[function(require,module,exports){module.exports={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]}},{}],364:[function(require,module,exports){module.exports={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]}},{}],365:[function(require,module,exports){module.exports={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]}},{}],366:[function(require,module,exports){module.exports={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]}},{}],367:[function(require,module,exports){module.exports={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]}},{}],368:[function(require,module,exports){module.exports={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]}},{}],369:[function(require,module,exports){module.exports={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]}},{}],370:[function(require,module,exports){module.exports={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]}},{}],371:[function(require,module,exports){module.exports={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]}},{}],372:[function(require,module,exports){module.exports={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]}},{}],373:[function(require,module,exports){module.exports={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]}},{}],374:[function(require,module,exports){module.exports={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]}},{}],375:[function(require,module,exports){module.exports={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]}},{}],376:[function(require,module,exports){module.exports={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]}},{}],377:[function(require,module,exports){module.exports={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]}},{}],378:[function(require,module,exports){module.exports={name:"filter",category:"Utils",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]}},{}],379:[function(require,module,exports){module.exports={name:"forEach",category:"Utils",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]}},{}],380:[function(require,module,exports){module.exports={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]}},{}],381:[function(require,module,exports){module.exports={name:"import",category:"Utils",syntax:["import(string)"],description:"Import functions from a file.",examples:['import("numbers")','import("./mylib.js")'],seealso:[]}},{}],382:[function(require,module,exports){module.exports={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]}},{}],383:[function(require,module,exports){module.exports={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]}},{}],384:[function(require,module,exports){module.exports={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)","isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))",'isNumeric("3")',"isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive"]}},{}],385:[function(require,module,exports){module.exports={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}},{}],386:[function(require,module,exports){module.exports={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]}},{}],387:[function(require,module,exports){module.exports={name:"map",category:"Utils",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], function(val) { return value * value })"],seealso:["filter","forEach"]}},{}],388:[function(require,module,exports){module.exports={name:"partitionSelect",category:"Utils",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]}},{}],389:[function(require,module,exports){module.exports={name:"sort",category:"Utils",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc" or "desc", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)'],seealso:["map","filter","forEach"]}},{}],390:[function(require,module,exports){module.exports={name:"typeof",category:"Utils",syntax:["typeof(x)"],description:"Get the type of a variable.",examples:["typeof(3.5)","typeof(2 - 4i)","typeof(45 deg)",'typeof("hello world")'],seealso:[]}},{}],391:[function(require,module,exports){function factory(type,config,load,typed){var docs={};return docs.bignumber=require("./type/bignumber"),docs["boolean"]=require("./type/boolean"),docs.complex=require("./type/complex"),docs.fraction=require("./type/fraction"),docs.index=require("./type/index"),docs.matrix=require("./type/matrix"),docs.number=require("./type/number"),docs.sparse=require("./type/sparse"),docs.string=require("./type/string"),docs.unit=require("./type/unit"),docs.e=require("./constants/e"),docs.E=require("./constants/e"),docs["false"]=require("./constants/false"),docs.i=require("./constants/i"),docs.Infinity=require("./constants/Infinity"),docs.LN2=require("./constants/LN2"),docs.LN10=require("./constants/LN10"),docs.LOG2E=require("./constants/LOG2E"),docs.LOG10E=require("./constants/LOG10E"),docs.NaN=require("./constants/NaN"),docs["null"]=require("./constants/null"),docs.pi=require("./constants/pi"),docs.PI=require("./constants/pi"),docs.phi=require("./constants/phi"),docs.SQRT1_2=require("./constants/SQRT1_2"),docs.SQRT2=require("./constants/SQRT2"),docs.tau=require("./constants/tau"),docs["true"]=require("./constants/true"),docs.version=require("./constants/version"),docs.speedOfLight={description:"Speed of light in vacuum",examples:["speedOfLight"]},docs.gravitationConstant={description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},docs.planckConstant={description:"Planck constant",examples:["planckConstant"]},docs.reducedPlanckConstant={description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},docs.magneticConstant={description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},docs.electricConstant={description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},docs.vacuumImpedance={description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},docs.coulomb={description:"Coulomb's constant",examples:["coulomb"]},docs.elementaryCharge={description:"Elementary charge",examples:["elementaryCharge"]},docs.bohrMagneton={description:"Borh magneton",examples:["bohrMagneton"]},docs.conductanceQuantum={description:"Conductance quantum",examples:["conductanceQuantum"]},docs.inverseConductanceQuantum={description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},docs.magneticFluxQuantum={description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},docs.nuclearMagneton={description:"Nuclear magneton",examples:["nuclearMagneton"]},docs.klitzing={description:"Von Klitzing constant",examples:["klitzing"]},docs.bohrRadius={description:"Borh radius",examples:["bohrRadius"]},docs.classicalElectronRadius={description:"Classical electron radius",examples:["classicalElectronRadius"]},docs.electronMass={description:"Electron mass",examples:["electronMass"]},docs.fermiCoupling={description:"Fermi coupling constant",examples:["fermiCoupling"]},docs.fineStructure={description:"Fine-structure constant",examples:["fineStructure"]},docs.hartreeEnergy={description:"Hartree energy",examples:["hartreeEnergy"]},docs.protonMass={description:"Proton mass",examples:["protonMass"]},docs.deuteronMass={description:"Deuteron Mass",examples:["deuteronMass"]},docs.neutronMass={description:"Neutron mass",examples:["neutronMass"]},docs.quantumOfCirculation={description:"Quantum of circulation",examples:["quantumOfCirculation"]},docs.rydberg={description:"Rydberg constant",examples:["rydberg"]},docs.thomsonCrossSection={description:"Thomson cross section",examples:["thomsonCrossSection"]},docs.weakMixingAngle={description:"Weak mixing angle",examples:["weakMixingAngle"]},docs.efimovFactor={description:"Efimov factor",examples:["efimovFactor"]},docs.atomicMass={description:"Atomic mass constant",examples:["atomicMass"]},docs.avogadro={description:"Avogadro's number",examples:["avogadro"]},docs.boltzmann={description:"Boltzmann constant",examples:["boltzmann"]},docs.faraday={description:"Faraday constant",examples:["faraday"]},docs.firstRadiation={description:"First radiation constant",examples:["firstRadiation"]},docs.loschmidt={description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},docs.gasConstant={description:"Gas constant",examples:["gasConstant"]},docs.molarPlanckConstant={description:"Molar Planck constant",examples:["molarPlanckConstant"]},docs.molarVolume={description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},docs.sackurTetrode={description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},docs.secondRadiation={description:"Second radiation constant",examples:["secondRadiation"]},docs.stefanBoltzmann={description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},docs.wienDisplacement={description:"Wien displacement law constant",examples:["wienDisplacement"]},docs.molarMass={description:"Molar mass constant",examples:["molarMass"]},docs.molarMassC12={description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},docs.gravity={description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},docs.planckLength={description:"Planck length",examples:["planckLength"]},docs.planckMass={description:"Planck mass",examples:["planckMass"]},docs.planckTime={description:"Planck time",examples:["planckTime"]},docs.planckCharge={description:"Planck charge",examples:["planckCharge"]},docs.planckTemperature={description:"Planck temperature",examples:["planckTemperature"]},docs.lsolve=require("./function/algebra/lsolve"),docs.lup=require("./function/algebra/lup"),docs.lusolve=require("./function/algebra/lusolve"),docs.slu=require("./function/algebra/slu"),docs.usolve=require("./function/algebra/usolve"),docs.abs=require("./function/arithmetic/abs"),docs.add=require("./function/arithmetic/add"),docs.cbrt=require("./function/arithmetic/cbrt"),docs.ceil=require("./function/arithmetic/ceil"),docs.cube=require("./function/arithmetic/cube"),docs.divide=require("./function/arithmetic/divide"),docs.dotDivide=require("./function/arithmetic/dotDivide"),docs.dotMultiply=require("./function/arithmetic/dotMultiply"),docs.dotPow=require("./function/arithmetic/dotPow"),docs.exp=require("./function/arithmetic/exp"),docs.fix=require("./function/arithmetic/fix"),docs.floor=require("./function/arithmetic/floor"),docs.gcd=require("./function/arithmetic/gcd"),docs.hypot=require("./function/arithmetic/hypot"),docs.lcm=require("./function/arithmetic/lcm"),docs.log=require("./function/arithmetic/log"),docs.log10=require("./function/arithmetic/log10"),docs.mod=require("./function/arithmetic/mod"),docs.multiply=require("./function/arithmetic/multiply"),docs.norm=require("./function/arithmetic/norm"),docs.nthRoot=require("./function/arithmetic/nthRoot"),docs.pow=require("./function/arithmetic/pow"),docs.round=require("./function/arithmetic/round"),docs.sign=require("./function/arithmetic/sign"),docs.sqrt=require("./function/arithmetic/sqrt"),docs.square=require("./function/arithmetic/square"),docs.subtract=require("./function/arithmetic/subtract"),docs.unaryMinus=require("./function/arithmetic/unaryMinus"),docs.unaryPlus=require("./function/arithmetic/unaryPlus"),docs.xgcd=require("./function/arithmetic/xgcd"),docs.bitAnd=require("./function/bitwise/bitAnd"),docs.bitNot=require("./function/bitwise/bitNot"),docs.bitOr=require("./function/bitwise/bitOr"),docs.bitXor=require("./function/bitwise/bitXor"),docs.leftShift=require("./function/bitwise/leftShift"),docs.rightArithShift=require("./function/bitwise/rightArithShift"),docs.rightLogShift=require("./function/bitwise/rightLogShift"),docs.bellNumbers=require("./function/combinatorics/bellNumbers"),docs.catalan=require("./function/combinatorics/catalan"),docs.composition=require("./function/combinatorics/composition"),docs.stirlingS2=require("./function/combinatorics/stirlingS2"),docs.arg=require("./function/complex/arg"),docs.conj=require("./function/complex/conj"),docs.re=require("./function/complex/re"),docs.im=require("./function/complex/im"),docs.eval=require("./function/expression/eval"),docs.help=require("./function/expression/help"),docs.distance=require("./function/geometry/distance"),docs.intersect=require("./function/geometry/intersect"),docs.and=require("./function/logical/and"),docs.not=require("./function/logical/not"),docs.or=require("./function/logical/or"),docs.xor=require("./function/logical/xor"),docs.concat=require("./function/matrix/concat"),docs.cross=require("./function/matrix/cross"),docs.det=require("./function/matrix/det"),docs.diag=require("./function/matrix/diag"),docs.dot=require("./function/matrix/dot"),docs.eye=require("./function/matrix/eye"),docs.flatten=require("./function/matrix/flatten"),docs.inv=require("./function/matrix/inv"),docs.ones=require("./function/matrix/ones"),docs.range=require("./function/matrix/range"),docs.resize=require("./function/matrix/resize"),docs.size=require("./function/matrix/size"),docs.squeeze=require("./function/matrix/squeeze"),docs.subset=require("./function/matrix/subset"),docs.trace=require("./function/matrix/trace"),docs.transpose=require("./function/matrix/transpose"),docs.zeros=require("./function/matrix/zeros"),docs.combinations=require("./function/probability/combinations"),docs.factorial=require("./function/probability/factorial"),docs.gamma=require("./function/probability/gamma"),docs.kldivergence=require("./function/probability/kldivergence"),docs.multinomial=require("./function/probability/multinomial"),docs.permutations=require("./function/probability/permutations"),docs.pickRandom=require("./function/probability/pickRandom"),docs.random=require("./function/probability/random"),docs.randomInt=require("./function/probability/randomInt"),docs.compare=require("./function/relational/compare"),docs.deepEqual=require("./function/relational/deepEqual"),docs.equal=require("./function/relational/equal"),docs.larger=require("./function/relational/larger"),docs.largerEq=require("./function/relational/largerEq"),docs.smaller=require("./function/relational/smaller"),docs.smallerEq=require("./function/relational/smallerEq"),docs.unequal=require("./function/relational/unequal"),docs.max=require("./function/statistics/max"),docs.mean=require("./function/statistics/mean"),docs.median=require("./function/statistics/median"),docs.min=require("./function/statistics/min"),docs.mode=require("./function/statistics/mode"),docs.prod=require("./function/statistics/prod"),docs.quantileSeq=require("./function/statistics/quantileSeq"),docs.std=require("./function/statistics/std"),docs.sum=require("./function/statistics/sum"),docs["var"]=require("./function/statistics/var"),docs.acos=require("./function/trigonometry/acos"),docs.acosh=require("./function/trigonometry/acosh"),docs.acot=require("./function/trigonometry/acot"),docs.acoth=require("./function/trigonometry/acoth"),docs.acsc=require("./function/trigonometry/acsc"),docs.acsch=require("./function/trigonometry/acsch"),docs.asec=require("./function/trigonometry/asec"),docs.asech=require("./function/trigonometry/asech"),docs.asin=require("./function/trigonometry/asin"),docs.asinh=require("./function/trigonometry/asinh"),docs.atan=require("./function/trigonometry/atan"),docs.atanh=require("./function/trigonometry/atanh"),docs.atan2=require("./function/trigonometry/atan2"),docs.cos=require("./function/trigonometry/cos"),docs.cosh=require("./function/trigonometry/cosh"),docs.cot=require("./function/trigonometry/cot"),docs.coth=require("./function/trigonometry/coth"),docs.csc=require("./function/trigonometry/csc"),docs.csch=require("./function/trigonometry/csch"),docs.sec=require("./function/trigonometry/sec"),docs.sech=require("./function/trigonometry/sech"),docs.sin=require("./function/trigonometry/sin"),docs.sinh=require("./function/trigonometry/sinh"),docs.tan=require("./function/trigonometry/tan"),docs.tanh=require("./function/trigonometry/tanh"),docs.to=require("./function/units/to"),docs.clone=require("./function/utils/clone"),docs.map=require("./function/utils/map"),docs.partitionSelect=require("./function/utils/partitionSelect"),docs.filter=require("./function/utils/filter"),docs.forEach=require("./function/utils/forEach"),docs.format=require("./function/utils/format"),docs.isInteger=require("./function/utils/isInteger"),docs.isNegative=require("./function/utils/isNegative"),docs.isNumeric=require("./function/utils/isNumeric"),docs.isPositive=require("./function/utils/isPositive"),docs.isZero=require("./function/utils/isZero"),docs["import"]=require("./function/utils/import"),docs.sort=require("./function/utils/sort"),docs["typeof"]=require("./function/utils/typeof"),docs}exports.name="docs",exports.path="expression",exports.factory=factory},{"./constants/Infinity":232,"./constants/LN10":233,"./constants/LN2":234,"./constants/LOG10E":235,"./constants/LOG2E":236,"./constants/NaN":237,"./constants/SQRT1_2":238,"./constants/SQRT2":239,"./constants/e":240,"./constants/false":241,"./constants/i":242,"./constants/null":243,"./constants/phi":244,"./constants/pi":245,"./constants/tau":246,"./constants/true":247,"./constants/version":248,"./function/algebra/lsolve":249,"./function/algebra/lup":250,"./function/algebra/lusolve":251,"./function/algebra/slu":252,"./function/algebra/usolve":253,"./function/arithmetic/abs":254,"./function/arithmetic/add":255,"./function/arithmetic/cbrt":256,"./function/arithmetic/ceil":257,"./function/arithmetic/cube":258,"./function/arithmetic/divide":259,"./function/arithmetic/dotDivide":260,"./function/arithmetic/dotMultiply":261,"./function/arithmetic/dotPow":262,"./function/arithmetic/exp":263,"./function/arithmetic/fix":264,"./function/arithmetic/floor":265,"./function/arithmetic/gcd":266,"./function/arithmetic/hypot":267,"./function/arithmetic/lcm":268,"./function/arithmetic/log":269,"./function/arithmetic/log10":270,"./function/arithmetic/mod":271,"./function/arithmetic/multiply":272,"./function/arithmetic/norm":273,"./function/arithmetic/nthRoot":274,"./function/arithmetic/pow":275,"./function/arithmetic/round":276,"./function/arithmetic/sign":277,"./function/arithmetic/sqrt":278,"./function/arithmetic/square":279,"./function/arithmetic/subtract":280,"./function/arithmetic/unaryMinus":281,"./function/arithmetic/unaryPlus":282,"./function/arithmetic/xgcd":283,"./function/bitwise/bitAnd":284,"./function/bitwise/bitNot":285,"./function/bitwise/bitOr":286,"./function/bitwise/bitXor":287,"./function/bitwise/leftShift":288,"./function/bitwise/rightArithShift":289,"./function/bitwise/rightLogShift":290,"./function/combinatorics/bellNumbers":291,"./function/combinatorics/catalan":292,"./function/combinatorics/composition":293,"./function/combinatorics/stirlingS2":294,"./function/complex/arg":295,"./function/complex/conj":296,"./function/complex/im":297,"./function/complex/re":298,"./function/expression/eval":299,"./function/expression/help":300,"./function/geometry/distance":301,"./function/geometry/intersect":302,"./function/logical/and":303,"./function/logical/not":304,"./function/logical/or":305,"./function/logical/xor":306,"./function/matrix/concat":307,"./function/matrix/cross":308,"./function/matrix/det":309,"./function/matrix/diag":310,"./function/matrix/dot":311,"./function/matrix/eye":312,"./function/matrix/flatten":313,"./function/matrix/inv":314,"./function/matrix/ones":315,"./function/matrix/range":316,"./function/matrix/resize":317,"./function/matrix/size":318,"./function/matrix/squeeze":319,"./function/matrix/subset":320,"./function/matrix/trace":321,"./function/matrix/transpose":322,"./function/matrix/zeros":323,"./function/probability/combinations":324,"./function/probability/factorial":325,"./function/probability/gamma":326,"./function/probability/kldivergence":327,"./function/probability/multinomial":328,"./function/probability/permutations":329,"./function/probability/pickRandom":330,"./function/probability/random":331,"./function/probability/randomInt":332,"./function/relational/compare":333,"./function/relational/deepEqual":334,"./function/relational/equal":335,"./function/relational/larger":336,"./function/relational/largerEq":337,"./function/relational/smaller":338,"./function/relational/smallerEq":339,"./function/relational/unequal":340,"./function/statistics/max":341,"./function/statistics/mean":342,"./function/statistics/median":343,"./function/statistics/min":344,"./function/statistics/mode":345,"./function/statistics/prod":346,"./function/statistics/quantileSeq":347,"./function/statistics/std":348,"./function/statistics/sum":349,"./function/statistics/var":350,"./function/trigonometry/acos":351,"./function/trigonometry/acosh":352,"./function/trigonometry/acot":353,"./function/trigonometry/acoth":354,"./function/trigonometry/acsc":355,"./function/trigonometry/acsch":356,"./function/trigonometry/asec":357,"./function/trigonometry/asech":358,"./function/trigonometry/asin":359,"./function/trigonometry/asinh":360,"./function/trigonometry/atan":361,"./function/trigonometry/atan2":362,"./function/trigonometry/atanh":363,"./function/trigonometry/cos":364,"./function/trigonometry/cosh":365,"./function/trigonometry/cot":366,"./function/trigonometry/coth":367,"./function/trigonometry/csc":368,"./function/trigonometry/csch":369,"./function/trigonometry/sec":370,"./function/trigonometry/sech":371,"./function/trigonometry/sin":372,"./function/trigonometry/sinh":373,"./function/trigonometry/tan":374,"./function/trigonometry/tanh":375,"./function/units/to":376,"./function/utils/clone":377,"./function/utils/filter":378,"./function/utils/forEach":379,"./function/utils/format":380,"./function/utils/import":381,"./function/utils/isInteger":382,"./function/utils/isNegative":383,"./function/utils/isNumeric":384,"./function/utils/isPositive":385,"./function/utils/isZero":386,"./function/utils/map":387,"./function/utils/partitionSelect":388,"./function/utils/sort":389,"./function/utils/typeof":390,"./type/bignumber":392,"./type/boolean":393,"./type/complex":394,"./type/fraction":395,"./type/index":396,"./type/matrix":397,"./type/number":398,"./type/sparse":399,"./type/string":400,"./type/unit":401}],392:[function(require,module,exports){module.exports={name:"bignumber",category:"Type",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]}},{}],393:[function(require,module,exports){module.exports={name:"boolean",category:"Type",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]}},{}],394:[function(require,module,exports){module.exports={name:"complex",category:"Type",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],
seealso:["bignumber","boolean","index","matrix","number","string","unit"]}},{}],395:[function(require,module,exports){module.exports={name:"fraction",category:"Type",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]}},{}],396:[function(require,module,exports){module.exports={name:"index",category:"Type",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]}},{}],397:[function(require,module,exports){module.exports={name:"matrix",category:"Type",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]}},{}],398:[function(require,module,exports){module.exports={name:"number",category:"Type",syntax:["x","number(x)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number("52cm", "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]}},{}],399:[function(require,module,exports){module.exports={name:"sparse",category:"Type",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]}},{}],400:[function(require,module,exports){module.exports={name:"string",category:"Type",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]}},{}],401:[function(require,module,exports){module.exports={name:"unit",category:"Type",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]}},{}],402:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var parse=load(require("../parse"));return typed("compile",{string:function(expr){return parse(expr).compile()},"Array | Matrix":function(expr){return deepMap(expr,function(entry){return parse(entry).compile()})}})}var deepMap=require("../../utils/collection/deepMap");exports.name="compile",exports.factory=factory},{"../../utils/collection/deepMap":698,"../parse":426}],403:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var parse=load(require("../parse"));return typed("compile",{string:function(expr){var scope={};return parse(expr).compile().eval(scope)},"string, Object":function(expr,scope){return parse(expr).compile().eval(scope)},"Array | Matrix":function(expr){var scope={};return deepMap(expr,function(entry){return parse(entry).compile().eval(scope)})},"Array | Matrix, Object":function(expr,scope){return deepMap(expr,function(entry){return parse(entry).compile().eval(scope)})}})}var deepMap=require("../../utils/collection/deepMap");exports.name="eval",exports.factory=factory},{"../../utils/collection/deepMap":698,"../parse":426}],404:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){var docs=load(require("../docs"));return typed("help",{any:function(search){var prop,name=search;if("string"!=typeof search)for(prop in math)if(math.hasOwnProperty(prop)&&search===math[prop]){name=prop;break}var doc=docs[name];if(!doc)throw new Error('No documentation found on "'+name+'"');return new type.Help(doc)}})}exports.math=!0,exports.name="help",exports.factory=factory},{"../docs":391}],405:[function(require,module,exports){module.exports=[require("./compile"),require("./eval"),require("./help"),require("./parse"),require("./parser")]},{"./compile":402,"./eval":403,"./help":404,"./parse":406,"./parser":407}],406:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var parse=load(require("../parse"));return typed("parse",{"string | Array | Matrix":parse,"string | Array | Matrix, Object":parse})}exports.name="parse",exports.factory=factory},{"../parse":426}],407:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){var Parser=load(require("../Parser"));return typed("parser",{"":function(){return new Parser(math)}})}exports.name="parser",exports.factory=factory,exports.math=!0},{"../Parser":231}],408:[function(require,module,exports){module.exports=[require("./docs"),require("./function"),require("./node"),require("./transform"),require("./Help"),require("./parse"),require("./Parser")]},{"./Help":230,"./Parser":231,"./docs":391,"./function":405,"./node":424,"./parse":426,"./transform":431}],409:[function(require,module,exports){"use strict";module.exports={end:!0}},{}],410:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function ArrayNode(nodes){if(!(this instanceof ArrayNode))throw new SyntaxError("Constructor must be called with the new operator");if(this.nodes=nodes||[],!Array.isArray(this.nodes)||!this.nodes.every(function(node){return node&&node.isNode}))throw new TypeError("Array containing Nodes expected")}var Node=load(require("./Node"));return ArrayNode.prototype=new Node,ArrayNode.prototype.type="ArrayNode",ArrayNode.prototype.isArrayNode=!0,ArrayNode.prototype._compile=function(defs,args){var asMatrix="array"!==defs.math.config().matrix,nodes=this.nodes.map(function(node){return node._compile(defs,args)});return(asMatrix?"math.matrix([":"[")+nodes.join(",")+(asMatrix?"])":"]")},ArrayNode.prototype.forEach=function(callback){for(var i=0;i<this.nodes.length;i++){var node=this.nodes[i];callback(node,"nodes["+i+"]",this)}},ArrayNode.prototype.map=function(callback){for(var nodes=[],i=0;i<this.nodes.length;i++)nodes[i]=this._ifNode(callback(this.nodes[i],"nodes["+i+"]",this));return new ArrayNode(nodes)},ArrayNode.prototype.clone=function(){return new ArrayNode(this.nodes.slice(0))},ArrayNode.prototype._toString=function(options){return string.format(this.nodes)},ArrayNode.prototype._toTex=function(options){var s="\\begin{bmatrix}";return this.nodes.forEach(function(node){s+=node.nodes?node.nodes.map(function(childNode){return childNode.toTex(options)}).join("&"):node.toTex(options),s+="\\\\"}),s+="\\end{bmatrix}"},ArrayNode}var string=require("../../utils/string");exports.name="ArrayNode",exports.path="expression.node",exports.factory=factory},{"../../utils/string":708,"./Node":418}],411:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function AssignmentNode(name,expr){if(!(this instanceof AssignmentNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof name)throw new TypeError('String expected for parameter "name"');if(!expr||!expr.isNode)throw new TypeError('Node expected for parameter "expr"');if(name in keywords)throw new Error('Illegal symbol name, "'+name+'" is a reserved keyword');this.name=name,this.expr=expr}function needParenthesis(node,parenthesis){var precedence=operators.getPrecedence(node,parenthesis),exprPrecedence=operators.getPrecedence(node.expr,parenthesis);return"all"===parenthesis||null!==exprPrecedence&&precedence>=exprPrecedence}var Node=load(require("./Node")),keywords=(load(require("./ArrayNode")),require("../keywords")),operators=require("../operators");return AssignmentNode.prototype=new Node,AssignmentNode.prototype.type="AssignmentNode",AssignmentNode.prototype.isAssignmentNode=!0,AssignmentNode.prototype._compile=function(defs,args){return'scope["'+this.name+'"] = '+this.expr._compile(defs,args)},AssignmentNode.prototype.forEach=function(callback){callback(this.expr,"expr",this)},AssignmentNode.prototype.map=function(callback){return new AssignmentNode(this.name,this._ifNode(callback(this.expr,"expr",this)))},AssignmentNode.prototype.clone=function(){return new AssignmentNode(this.name,this.expr)},AssignmentNode.prototype._toString=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",expr=this.expr.toString(options);return needParenthesis(this,parenthesis)&&(expr="("+expr+")"),this.name+" = "+expr},AssignmentNode.prototype._toTex=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",expr=this.expr.toTex(options);return needParenthesis(this,parenthesis)&&(expr="\\left("+expr+"\\right)"),latex.toSymbol(this.name)+":="+expr},AssignmentNode}var latex=require("../../utils/latex");exports.name="AssignmentNode",exports.path="expression.node",exports.factory=factory},{"../../utils/latex":705,"../keywords":409,"../operators":425,"./ArrayNode":410,"./Node":418}],412:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function BlockNode(blocks){if(!(this instanceof BlockNode))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(blocks))throw new Error("Array expected");this.blocks=blocks.map(function(block){var node=block&&block.node,visible=block&&void 0!==block.visible?block.visible:!0;if(!node||!node.isNode)throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof visible)throw new TypeError('Property "visible" must be a boolean');return{node:node,visible:visible}})}var Node=load(require("./Node")),ResultSet=load(require("../../type/resultset/ResultSet"));return BlockNode.prototype=new Node,BlockNode.prototype.type="BlockNode",BlockNode.prototype.isBlockNode=!0,BlockNode.prototype._compile=function(defs,args){defs.ResultSet=ResultSet;var blocks=this.blocks.map(function(param){var js=param.node._compile(defs,args);return param.visible?"results.push("+js+");":js+";"});return"(function () {var results = [];"+blocks.join("")+"return new ResultSet(results);})()"},BlockNode.prototype.forEach=function(callback){for(var i=0;i<this.blocks.length;i++)callback(this.blocks[i].node,"blocks["+i+"].node",this)},BlockNode.prototype.map=function(callback){for(var blocks=[],i=0;i<this.blocks.length;i++){var block=this.blocks[i],node=this._ifNode(callback(block.node,"blocks["+i+"].node",this));blocks[i]={node:node,visible:block.visible}}return new BlockNode(blocks)},BlockNode.prototype.clone=function(){var blocks=this.blocks.map(function(block){return{node:block.node,visible:block.visible}});return new BlockNode(blocks)},BlockNode.prototype._toString=function(options){return this.blocks.map(function(param){return param.node.toString(options)+(param.visible?"":";")}).join("\n")},BlockNode.prototype._toTex=function(options){return this.blocks.map(function(param){return param.node.toTex(options)+(param.visible?"":";")}).join("\\;\\;\n")},BlockNode}exports.name="BlockNode",exports.path="expression.node",exports.factory=factory},{"../../type/resultset/ResultSet":662,"./Node":418}],413:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function ConditionalNode(condition,trueExpr,falseExpr){if(!(this instanceof ConditionalNode))throw new SyntaxError("Constructor must be called with the new operator");if(!condition||!condition.isNode)throw new TypeError("Parameter condition must be a Node");if(!trueExpr||!trueExpr.isNode)throw new TypeError("Parameter trueExpr must be a Node");if(!falseExpr||!falseExpr.isNode)throw new TypeError("Parameter falseExpr must be a Node");this.condition=condition,this.trueExpr=trueExpr,this.falseExpr=falseExpr}var Node=load(require("./Node"));return ConditionalNode.prototype=new Node,ConditionalNode.prototype.type="ConditionalNode",ConditionalNode.prototype.isConditionalNode=!0,ConditionalNode.prototype._compile=function(defs,args){return defs.testCondition=function(condition){if("number"==typeof condition||"boolean"==typeof condition||"string"==typeof condition)return!!condition;if(condition){if(condition.isBigNumber===!0)return!condition.isZero();if(condition.isComplex===!0)return!(!condition.re&&!condition.im);if(condition.isUnit===!0)return!!condition.value}if(null===condition||void 0===condition)return!1;throw new TypeError('Unsupported type of condition "'+defs.math["typeof"](condition)+'"')},"testCondition("+this.condition._compile(defs,args)+") ? ( "+this.trueExpr._compile(defs,args)+") : ( "+this.falseExpr._compile(defs,args)+")"},ConditionalNode.prototype.forEach=function(callback){callback(this.condition,"condition",this),callback(this.trueExpr,"trueExpr",this),callback(this.falseExpr,"falseExpr",this)},ConditionalNode.prototype.map=function(callback){return new ConditionalNode(this._ifNode(callback(this.condition,"condition",this)),this._ifNode(callback(this.trueExpr,"trueExpr",this)),this._ifNode(callback(this.falseExpr,"falseExpr",this)))},ConditionalNode.prototype.clone=function(){return new ConditionalNode(this.condition,this.trueExpr,this.falseExpr)},ConditionalNode.prototype._toString=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",precedence=operators.getPrecedence(this,parenthesis),condition=this.condition.toString(options),conditionPrecedence=operators.getPrecedence(this.condition,parenthesis);("all"===parenthesis||"OperatorNode"===this.condition.type||null!==conditionPrecedence&&precedence>=conditionPrecedence)&&(condition="("+condition+")");var trueExpr=this.trueExpr.toString(options),truePrecedence=operators.getPrecedence(this.trueExpr,parenthesis);("all"===parenthesis||"OperatorNode"===this.trueExpr.type||null!==truePrecedence&&precedence>=truePrecedence)&&(trueExpr="("+trueExpr+")");var falseExpr=this.falseExpr.toString(options),falsePrecedence=operators.getPrecedence(this.falseExpr,parenthesis);return("all"===parenthesis||"OperatorNode"===this.falseExpr.type||null!==falsePrecedence&&precedence>=falsePrecedence)&&(falseExpr="("+falseExpr+")"),condition+" ? "+trueExpr+" : "+falseExpr},ConditionalNode.prototype._toTex=function(options){return"\\begin{cases} {"+this.trueExpr.toTex(options)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(options)+"}\\\\{"+this.falseExpr.toTex(options)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},ConditionalNode}var operators=(require("../../utils/latex"),require("../operators"));exports.name="ConditionalNode",exports.path="expression.node",exports.factory=factory},{"../../utils/latex":705,"../operators":425,"./Node":418}],414:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function ConstantNode(value,valueType){if(!(this instanceof ConstantNode))throw new SyntaxError("Constructor must be called with the new operator");if(valueType){if("string"!=typeof valueType)throw new TypeError('String expected for parameter "valueType"');if("string"!=typeof value)throw new TypeError('String expected for parameter "value"');this.value=value,this.valueType=valueType}else this.value=value+"",this.valueType=getType(value);if(!SUPPORTED_TYPES[this.valueType])throw new TypeError('Unsupported type of value "'+this.valueType+'"')}var Node=load(require("./Node")),SUPPORTED_TYPES={number:!0,string:!0,"boolean":!0,undefined:!0,"null":!0};return ConstantNode.prototype=new Node,ConstantNode.prototype.type="ConstantNode",ConstantNode.prototype.isConstantNode=!0,ConstantNode.prototype._compile=function(defs,args){switch(this.valueType){case"number":var numConfig=defs.math.config().number;return"bignumber"===numConfig?'math.bignumber("'+this.value+'")':"fraction"===numConfig?'math.fraction("'+this.value+'")':this.value.replace(/^(0*)[0-9]/,function(match,zeros){return match.substring(zeros.length)});case"string":return'"'+this.value+'"';case"boolean":return this.value;case"undefined":return this.value;case"null":return this.value;default:throw new TypeError('Unsupported type of constant "'+this.valueType+'"')}},ConstantNode.prototype.forEach=function(callback){},ConstantNode.prototype.map=function(callback){return this.clone()},ConstantNode.prototype.clone=function(){return new ConstantNode(this.value,this.valueType)},ConstantNode.prototype._toString=function(options){switch(this.valueType){case"string":return'"'+this.value+'"';default:return this.value}},ConstantNode.prototype._toTex=function(options){var index,value=this.value;switch(this.valueType){case"string":return'\\mathtt{"'+value+'"}';case"number":return index=value.toLowerCase().indexOf("e"),-1!==index?value.substring(0,index)+"\\cdot10^{"+value.substring(index+1)+"}":value;default:return value}},ConstantNode}var getType=require("../../utils/types").type;exports.name="ConstantNode",exports.path="expression.node",exports.factory=factory},{"../../utils/types":709,"./Node":418}],415:[function(require,module,exports){"use strict";function isString(x){return"string"==typeof x}function factory(type,config,load,typed){function FunctionAssignmentNode(name,params,expr){if(!(this instanceof FunctionAssignmentNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof name)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(params)||!params.every(isString))throw new TypeError('Array containing strings expected for parameter "params"');if(!expr||!expr.isNode)throw new TypeError('Node expected for parameter "expr"');if(name in keywords)throw new Error('Illegal function name, "'+name+'" is a reserved keyword');this.name=name,this.params=params,this.expr=expr}function needParenthesis(node,parenthesis){var precedence=operators.getPrecedence(node,parenthesis),exprPrecedence=operators.getPrecedence(node.expr,parenthesis);return"all"===parenthesis||null!==exprPrecedence&&precedence>=exprPrecedence}var Node=load(require("./Node"));return FunctionAssignmentNode.prototype=new Node,FunctionAssignmentNode.prototype.type="FunctionAssignmentNode",FunctionAssignmentNode.prototype.isFunctionAssignmentNode=!0,FunctionAssignmentNode.prototype._compile=function(defs,args){var childArgs=Object.create(args);this.params.forEach(function(variable){childArgs[variable]=!0});var jsExpr=this.expr._compile(defs,childArgs);return'scope["'+this.name+'"] =   (function () {    var fn = function '+this.name+"("+this.params.join(",")+") {      if (arguments.length != "+this.params.length+') {        throw new SyntaxError("Wrong number of arguments in function '+this.name+' (" + arguments.length + " provided, '+this.params.length+' expected)");      }      return '+jsExpr+'    };    fn.syntax = "'+this.name+"("+this.params.join(", ")+')";    return fn;  })()'},FunctionAssignmentNode.prototype.forEach=function(callback){callback(this.expr,"expr",this)},FunctionAssignmentNode.prototype.map=function(callback){var expr=this._ifNode(callback(this.expr,"expr",this));return new FunctionAssignmentNode(this.name,this.params.slice(0),expr)},FunctionAssignmentNode.prototype.clone=function(){return new FunctionAssignmentNode(this.name,this.params.slice(0),this.expr)},FunctionAssignmentNode.prototype._toString=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",expr=this.expr.toString(options);return needParenthesis(this,parenthesis)&&(expr="("+expr+")"),"function "+this.name+"("+this.params.join(", ")+") = "+expr},FunctionAssignmentNode.prototype._toTex=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",expr=this.expr.toTex(options);return needParenthesis(this,parenthesis)&&(expr="\\left("+expr+"\\right)"),"\\mathrm{"+this.name+"}\\left("+this.params.map(latex.toSymbol).join(",")+"\\right):="+expr},FunctionAssignmentNode}var keywords=require("../keywords"),latex=require("../../utils/latex"),operators=require("../operators");exports.name="FunctionAssignmentNode",exports.path="expression.node",exports.factory=factory},{"../../utils/latex":705,"../keywords":409,"../operators":425,"./Node":418}],416:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){function FunctionNode(name,args){if(!(this instanceof FunctionNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof name)throw new TypeError('string expected for parameter "name"');if(!Array.isArray(args)||!args.every(function(arg){return arg&&arg.isNode}))throw new TypeError('Array containing Nodes expected for parameter "args"');this.name=name,this.args=args||[]}function expandTemplate(template,node,options){for(var match,latex="",regex=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),inputPos=0;null!==(match=regex.exec(template));)if(latex+=template.substring(inputPos,match.index),inputPos=match.index,"$$"===match[0])latex+="$",inputPos++;else{inputPos+=match[0].length;var property=node[match[1]];if(!property)throw new ReferenceError("Template: Property "+match[1]+" does not exist.");if(void 0===match[2])switch(typeof property){case"string":latex+=property;break;case"object":if(property.isNode)latex+=property.toTex(options);else{if(!Array.isArray(property))throw new TypeError("Template: "+match[1]+" has to be a Node, String or array of Nodes");latex+=property.map(function(arg,index){if(arg&&arg.isNode)return arg.toTex(options);throw new TypeError("Template: "+match[1]+"["+index+"] is not a Node.")}).join(",")}break;default:throw new TypeError("Template: "+match[1]+" has to be a Node, String or array of Nodes")}else{if(!property[match[2]]||!property[match[2]].isNode)throw new TypeError("Template: "+match[1]+"["+match[2]+"] is not a Node.");latex+=property[match[2]].toTex(options)}}return latex+=template.slice(inputPos)}var Node=load(require("./Node")),SymbolNode=load(require("./SymbolNode"));FunctionNode.prototype=new Node,FunctionNode.prototype.type="FunctionNode",FunctionNode.prototype.isFunctionNode=!0,FunctionNode.prototype._compile=function(defs,args){var fn=defs.math[this.name],isRaw="function"==typeof fn&&1==fn.rawArgs,jsArgs=this.args.map(function(arg){return arg._compile(defs,args)});if(isRaw){var paramsName,i=0;do paramsName="p"+i,i++;while(paramsName in defs);return defs[paramsName]=this.args,'("'+this.name+'" in scope ? scope["'+this.name+'"]('+jsArgs.join(", ")+') : math["'+this.name+'"]('+paramsName+", math, scope))"}var symbol=new SymbolNode(this.name);return symbol._compile(defs,args)+"("+jsArgs.join(", ")+")"},FunctionNode.prototype.forEach=function(callback){for(var i=0;i<this.args.length;i++)callback(this.args[i],"args["+i+"]",this)},FunctionNode.prototype.map=function(callback){for(var args=[],i=0;i<this.args.length;i++)args[i]=this._ifNode(callback(this.args[i],"args["+i+"]",this));return new FunctionNode(this.name,args)},FunctionNode.prototype.clone=function(){return new FunctionNode(this.name,this.args.slice(0))};var nodeToString=FunctionNode.prototype.toString;FunctionNode.prototype.toString=function(options){var customString;return options&&"object"==typeof options.handler&&options.handler.hasOwnProperty(this.name)&&(customString=options.handler[this.name](this,options)),"undefined"!=typeof customString?customString:nodeToString.call(this,options)},FunctionNode.prototype._toString=function(options){return this.name+"("+this.args.join(", ")+")"};var nodeToTex=FunctionNode.prototype.toTex;return FunctionNode.prototype.toTex=function(options){var customTex;return options&&"object"==typeof options.handler&&options.handler.hasOwnProperty(this.name)&&(customTex=options.handler[this.name](this,options)),"undefined"!=typeof customTex?customTex:nodeToTex.call(this,options)},FunctionNode.prototype._toTex=function(options){var latexConverter,args=(options&&options.parenthesis?options.parenthesis:"keep",this.args.map(function(arg){return arg.toTex(options)}));!math[this.name]||"function"!=typeof math[this.name].toTex&&"object"!=typeof math[this.name].toTex&&"string"!=typeof math[this.name].toTex||(latexConverter=math[this.name].toTex);var customToTex;switch(typeof latexConverter){case"function":customToTex=latexConverter(this,options);break;case"string":customToTex=expandTemplate(latexConverter,this,options);break;case"object":switch(typeof latexConverter[args.length]){case"function":customToTex=latexConverter[args.length](this,options);break;case"string":customToTex=expandTemplate(latexConverter[args.length],this,options)}}return"undefined"!=typeof customToTex?customToTex:expandTemplate(latex.defaultTemplate,this,options)},FunctionNode.prototype.getIdentifier=function(){return this.type+":"+this.name},FunctionNode}var latex=require("../../utils/latex");exports.name="FunctionNode",exports.path="expression.node",exports.math=!0,exports.factory=factory},{"../../utils/latex":705,"./Node":418,"./SymbolNode":422}],417:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function IndexNode(object,ranges){if(!(this instanceof IndexNode))throw new SyntaxError("Constructor must be called with the new operator");if(!object||!object.isNode)throw new TypeError('Node expected for parameter "object"');if(!isArray(ranges)||!ranges.every(function(range){return range&&range.isNode}))throw new TypeError('Array containing Nodes expected for parameter "ranges"');this.object=object,this.ranges=ranges}function needParenthesis(node){switch(node.object.type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}var Node=load(require("./Node")),Range=(load(require("./RangeNode")),load(require("./SymbolNode")),load(require("../../type/matrix/Range"))),isArray=Array.isArray;return IndexNode.prototype=new Node,IndexNode.prototype.type="IndexNode",IndexNode.prototype.isIndexNode=!0,IndexNode.prototype._compile=function(defs,args){return this.compileSubset(defs,args)},IndexNode.prototype.compileSubset=function(defs,args,replacement){function test(node){return node&&node.isSymbolNode&&"end"==node.name}var someUseEnd=!1,rangesUseEnd=this.ranges.map(function(range){var useEnd=range.filter(test).length>0;return someUseEnd=useEnd?useEnd:someUseEnd,useEnd});defs.range=function(start,end,step){return new Range(start&&start.isBigNumber===!0?start.toNumber():start,end&&end.isBigNumber===!0?end.toNumber():end,step&&step.isBigNumber===!0?step.toNumber():step)};var childArgs=Object.create(args),ranges=this.ranges.map(function(range,i){var useEnd=rangesUseEnd[i];return range&&range.isRangeNode?useEnd?(childArgs.end=!0,"(function () {  var end = size["+i+"];  return range(    "+range.start._compile(defs,childArgs)+",     "+range.end._compile(defs,childArgs)+",     "+(range.step?range.step._compile(defs,childArgs):"1")+"  );})()"):"range("+range.start._compile(defs,childArgs)+", "+range.end._compile(defs,childArgs)+", "+(range.step?range.step._compile(defs,childArgs):"1")+")":useEnd?(childArgs.end=!0,"(function () {  var end = size["+i+"];  return "+range._compile(defs,childArgs)+";})()"):range._compile(defs,childArgs)});return someUseEnd?"(function () {  var obj = "+this.object._compile(defs,childArgs)+";  var size = math.size(obj).valueOf();  return math.subset(    obj,     math.index("+ranges.join(", ")+")    "+(replacement?", "+replacement:"")+"  );})()":"math.subset("+this.object._compile(defs,childArgs)+",math.index("+ranges.join(", ")+")"+(replacement?", "+replacement:"")+")"},IndexNode.prototype.forEach=function(callback){callback(this.object,"object",this);for(var i=0;i<this.ranges.length;i++)callback(this.ranges[i],"ranges["+i+"]",this)},IndexNode.prototype.map=function(callback){for(var object=this._ifNode(callback(this.object,"object",this)),ranges=[],i=0;i<this.ranges.length;i++)ranges[i]=this._ifNode(callback(this.ranges[i],"ranges["+i+"]",this));return new IndexNode(object,ranges)},IndexNode.prototype.objectName=function(){return this.object.name},IndexNode.prototype.clone=function(){return new IndexNode(this.object,this.ranges.slice(0))},IndexNode.prototype._toString=function(options){var object=this.object.toString(options);return needParenthesis(this)&&(object="("+object+"("),object+"["+this.ranges.join(", ")+"]"},IndexNode.prototype._toTex=function(options){var object=this.object.toTex(options);needParenthesis(this)&&(object="\\left("+object+"\\right)");var ranges=this.ranges.map(function(range){return range.toTex(options)});return object+"_{"+ranges.join(",")+"}"},IndexNode}exports.name="IndexNode",exports.path="expression.node",exports.factory=factory},{"../../type/matrix/Range":640,"./Node":418,"./RangeNode":421,"./SymbolNode":422}],418:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){function Node(){if(!(this instanceof Node))throw new SyntaxError("Constructor must be called with the new operator")}function _validateScope(scope){for(var symbol in scope)if(scope.hasOwnProperty(symbol)&&symbol in keywords)throw new Error('Scope contains an illegal symbol, "'+symbol+'" is a reserved keyword')}return Node.prototype.eval=function(scope){return this.compile().eval(scope)},Node.prototype.type="Node",Node.prototype.isNode=!0,Node.prototype.compile=function(){if(arguments.length>0)throw new Error("Calling compile(math) is deprecated. Call the function as compile() instead.");var defs={math:math.expression.transform,args:{},_validateScope:_validateScope},args={},code=this._compile(defs,args),defsCode=Object.keys(defs).map(function(name){return"    var "+name+' = defs["'+name+'"];'}),factoryCode=defsCode.join(" ")+'return {  "eval": function (scope) {    if (scope) _validateScope(scope);    scope = scope || {};    return '+code+";  }};",factory=new Function("defs",factoryCode);return factory(defs)},Node.prototype._compile=function(defs,args){throw new Error("Cannot compile a Node interface")},Node.prototype.forEach=function(callback){throw new Error("Cannot run forEach on a Node interface")},Node.prototype.map=function(callback){throw new Error("Cannot run map on a Node interface")},Node.prototype._ifNode=function(node){if(!node||!node.isNode)throw new TypeError("Callback function must return a Node");return node},Node.prototype.traverse=function(callback){function _traverse(node,callback){node.forEach(function(child,path,parent){callback(child,path,parent),_traverse(child,callback)})}callback(this,null,null),_traverse(this,callback)},Node.prototype.transform=function(callback){function _transform(node,callback){return node.map(function(child,path,parent){var replacement=callback(child,path,parent);return _transform(replacement,callback)})}var replacement=callback(this,null,null);return _transform(replacement,callback)},Node.prototype.filter=function(callback){var nodes=[];return this.traverse(function(node,path,parent){callback(node,path,parent)&&nodes.push(node)}),nodes},Node.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},Node.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},Node.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},Node.prototype.toString=function(options){var customString;if(options&&"object"==typeof options)switch(typeof options.handler){case"object":case"undefined":break;case"function":customString=options.handler(this,options);break;default:throw new TypeError("Object or function expected as callback")}return"undefined"!=typeof customString?customString:this._toString(options);
},Node.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},Node.prototype.toTex=function(options){var customTex;if(options&&"object"==typeof options)switch(typeof options.handler){case"object":case"undefined":break;case"function":customTex=options.handler(this,options);break;default:throw new TypeError("Object or function expected as callback")}return"undefined"!=typeof customTex?customTex:this._toTex(options)},Node.prototype._toTex=function(options){throw new Error("_toTex not implemented for "+this.type)},Node.prototype.getIdentifier=function(){return this.type},Node.prototype.getContent=function(){return this},Node}var keywords=require("../keywords");require("../../utils/object").extend;exports.name="Node",exports.path="expression.node",exports.math=!0,exports.factory=factory},{"../../utils/object":707,"../keywords":409}],419:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){function OperatorNode(op,fn,args){if(!(this instanceof OperatorNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof op)throw new TypeError('string expected for parameter "op"');if("string"!=typeof fn)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(args)||!args.every(function(node){return node&&node.isNode}))throw new TypeError('Array containing Nodes expected for parameter "args"');this.op=op,this.fn=fn,this.args=args||[]}function calculateNecessaryParentheses(root,parenthesis,args,latex){var precedence=operators.getPrecedence(root,parenthesis),associativity=operators.getAssociativity(root,parenthesis);if("all"===parenthesis||args.length>2){var parens=[];return args.forEach(function(arg){switch(arg.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":parens.push(!1);break;default:parens.push(!0)}}),parens}switch(args.length){case 0:return[];case 1:var operandPrecedence=operators.getPrecedence(args[0],parenthesis);if(latex&&null!==operandPrecedence){var operandIdentifier,rootIdentifier;if("keep"===parenthesis?(operandIdentifier=args[0].getIdentifier(),rootIdentifier=root.getIdentifier()):(operandIdentifier=args[0].getContent().getIdentifier(),rootIdentifier=root.getContent().getIdentifier()),operators.properties[precedence][rootIdentifier].latexLeftParens===!1)return[!1];if(operators.properties[operandPrecedence][operandIdentifier].latexParens===!1)return[!1]}return null===operandPrecedence?[!1]:precedence>=operandPrecedence?[!0]:[!1];case 2:var lhsParens,lhsPrecedence=operators.getPrecedence(args[0],parenthesis),assocWithLhs=operators.isAssociativeWith(root,args[0],parenthesis);lhsParens=null===lhsPrecedence?!1:lhsPrecedence!==precedence||"right"!==associativity||assocWithLhs?precedence>lhsPrecedence:!0;var rhsParens,rhsPrecedence=operators.getPrecedence(args[1],parenthesis),assocWithRhs=operators.isAssociativeWith(root,args[1],parenthesis);if(rhsParens=null===rhsPrecedence?!1:rhsPrecedence!==precedence||"left"!==associativity||assocWithRhs?precedence>rhsPrecedence:!0,latex){var rootIdentifier,lhsIdentifier,rhsIdentifier;"keep"===parenthesis?(rootIdentifier=root.getIdentifier(),lhsIdentifier=root.args[0].getIdentifier(),rhsIdentifier=root.args[1].getIdentifier()):(rootIdentifier=root.getContent().getIdentifier(),lhsIdentifier=root.args[0].getContent().getIdentifier(),rhsIdentifier=root.args[1].getContent().getIdentifier()),null!==lhsPrecedence&&(operators.properties[precedence][rootIdentifier].latexLeftParens===!1&&(lhsParens=!1),operators.properties[lhsPrecedence][lhsIdentifier].latexParens===!1&&(lhsParens=!1)),null!==rhsPrecedence&&(operators.properties[precedence][rootIdentifier].latexRightParens===!1&&(rhsParens=!1),operators.properties[rhsPrecedence][rhsIdentifier].latexParens===!1&&(rhsParens=!1))}return[lhsParens,rhsParens]}}var Node=load(require("./Node"));load(require("./ConstantNode")),load(require("./SymbolNode")),load(require("./FunctionNode"));return OperatorNode.prototype=new Node,OperatorNode.prototype.type="OperatorNode",OperatorNode.prototype.isOperatorNode=!0,OperatorNode.prototype._compile=function(defs,args){if(!defs.math[this.fn])throw new Error("Function "+this.fn+' missing in provided namespace "math"');var jsArgs=this.args.map(function(arg){return arg._compile(defs,args)});return"math."+this.fn+"("+jsArgs.join(", ")+")"},OperatorNode.prototype.forEach=function(callback){for(var i=0;i<this.args.length;i++)callback(this.args[i],"args["+i+"]",this)},OperatorNode.prototype.map=function(callback){for(var args=[],i=0;i<this.args.length;i++)args[i]=this._ifNode(callback(this.args[i],"args["+i+"]",this));return new OperatorNode(this.op,this.fn,args)},OperatorNode.prototype.clone=function(){return new OperatorNode(this.op,this.fn,this.args.slice(0))},OperatorNode.prototype._toString=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",args=this.args,parens=calculateNecessaryParentheses(this,parenthesis,args,!1);switch(args.length){case 1:var assoc=operators.getAssociativity(this,parenthesis),operand=args[0].toString(options);return parens[0]&&(operand="("+operand+")"),"right"===assoc?this.op+operand:"left"===assoc?operand+this.op:operand+this.op;case 2:var lhs=args[0].toString(options),rhs=args[1].toString(options);return parens[0]&&(lhs="("+lhs+")"),parens[1]&&(rhs="("+rhs+")"),lhs+" "+this.op+" "+rhs;default:return this.fn+"("+this.args.join(", ")+")"}},OperatorNode.prototype._toTex=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",args=this.args,parens=calculateNecessaryParentheses(this,parenthesis,args,!0),op=latex.operators[this.fn];switch(op="undefined"==typeof op?this.op:op,args.length){case 1:var assoc=operators.getAssociativity(this,parenthesis),operand=args[0].toTex(options);return parens[0]&&(operand="\\left("+operand+"\\right)"),"right"===assoc?op+operand:"left"===assoc?operand+op:operand+op;case 2:var lhs=args[0],lhsTex=lhs.toTex(options);parens[0]&&(lhsTex="\\left("+lhsTex+"\\right)");var rhs=args[1],rhsTex=rhs.toTex(options);parens[1]&&(rhsTex="\\left("+rhsTex+"\\right)");var lhsIdentifier;switch(lhsIdentifier="keep"===parenthesis?lhs.getIdentifier():lhs.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return op+"{"+lhsTex+"}{"+rhsTex+"}";case"OperatorNode:pow":switch(lhsTex="{"+lhsTex+"}",rhsTex="{"+rhsTex+"}",lhsIdentifier){case"ConditionalNode":case"OperatorNode:divide":lhsTex="\\left("+lhsTex+"\\right)"}}return lhsTex+op+rhsTex;default:return"\\mathrm{"+this.fn+"}\\left("+args.map(function(arg){return arg.toTex(options)}).join(",")+"\\right)"}},OperatorNode.prototype.getIdentifier=function(){return this.type+":"+this.fn},OperatorNode}var latex=require("../../utils/latex"),operators=require("../operators");exports.name="OperatorNode",exports.path="expression.node",exports.math=!0,exports.factory=factory},{"../../utils/latex":705,"../operators":425,"./ConstantNode":414,"./FunctionNode":416,"./Node":418,"./SymbolNode":422}],420:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function ParenthesisNode(content){if(!(this instanceof ParenthesisNode))throw new SyntaxError("Constructor must be called with the new operator");if(!content||!content.isNode)throw new TypeError('Node expected for parameter "content"');this.content=content}var Node=load(require("./Node"));return ParenthesisNode.prototype=new Node,ParenthesisNode.prototype.type="ParenthesisNode",ParenthesisNode.prototype.isParenthesisNode=!0,ParenthesisNode.prototype._compile=function(defs,args){return this.content._compile(defs,args)},ParenthesisNode.prototype.getContent=function(){return this.content.getContent()},ParenthesisNode.prototype.forEach=function(callback){callback(this.content,"content",this)},ParenthesisNode.prototype.map=function(callback){var content=callback(this.content,"content",this);return new ParenthesisNode(content)},ParenthesisNode.prototype.clone=function(){return new ParenthesisNode(this.content)},ParenthesisNode.prototype._toString=function(options){return!options||options&&"keep"===options.parenthesis?"("+this.content.toString(options)+")":this.content.toString(options)},ParenthesisNode.prototype._toTex=function(options){return!options||options&&"keep"===options.parenthesis?"\\left("+this.content.toTex(options)+"\\right)":this.content.toTex(options)},ParenthesisNode}exports.name="ParenthesisNode",exports.path="expression.node",exports.factory=factory},{"./Node":418}],421:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function RangeNode(start,end,step){if(!(this instanceof RangeNode))throw new SyntaxError("Constructor must be called with the new operator");if(!start||!start.isNode)throw new TypeError("Node expected");if(!end||!end.isNode)throw new TypeError("Node expected");if(step&&(!step||!step.isNode))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=start,this.end=end,this.step=step||null}function calculateNecessaryParentheses(node,parenthesis){var precedence=operators.getPrecedence(node,parenthesis),parens={},startPrecedence=operators.getPrecedence(node.start,parenthesis);if(parens.start=null!==startPrecedence&&precedence>=startPrecedence||"all"===parenthesis,node.step){var stepPrecedence=operators.getPrecedence(node.step,parenthesis);parens.step=null!==stepPrecedence&&precedence>=stepPrecedence||"all"===parenthesis}var endPrecedence=operators.getPrecedence(node.end,parenthesis);return parens.end=null!==endPrecedence&&precedence>=endPrecedence||"all"===parenthesis,parens}var Node=load(require("./Node"));return RangeNode.prototype=new Node,RangeNode.prototype.type="RangeNode",RangeNode.prototype.isRangeNode=!0,RangeNode.prototype._compile=function(defs,args){return"math.range("+this.start._compile(defs,args)+", "+this.end._compile(defs,args)+(this.step?", "+this.step._compile(defs,args):"")+")"},RangeNode.prototype.forEach=function(callback){callback(this.start,"start",this),callback(this.end,"end",this),this.step&&callback(this.step,"step",this)},RangeNode.prototype.map=function(callback){return new RangeNode(this._ifNode(callback(this.start,"start",this)),this._ifNode(callback(this.end,"end",this)),this.step&&this._ifNode(callback(this.step,"step",this)))},RangeNode.prototype.clone=function(){return new RangeNode(this.start,this.end,this.step&&this.step)},RangeNode.prototype._toString=function(options){var str,parenthesis=options&&options.parenthesis?options.parenthesis:"keep",parens=calculateNecessaryParentheses(this,parenthesis),start=this.start.toString(options);if(parens.start&&(start="("+start+")"),str=start,this.step){var step=this.step.toString(options);parens.step&&(step="("+step+")"),str+=":"+step}var end=this.end.toString(options);return parens.end&&(end="("+end+")"),str+=":"+end},RangeNode.prototype._toTex=function(options){var parenthesis=options&&options.parenthesis?options.parenthesis:"keep",parens=calculateNecessaryParentheses(this,parenthesis),str=this.start.toTex(options);if(parens.start&&(str="\\left("+str+"\\right)"),this.step){var step=this.step.toTex(options);parens.step&&(step="\\left("+step+"\\right)"),str+=":"+step}var end=this.end.toTex(options);return parens.end&&(end="\\left("+end+"\\right)"),str+=":"+end},RangeNode}var operators=require("../operators");exports.name="RangeNode",exports.path="expression.node",exports.factory=factory},{"../operators":425,"./Node":418}],422:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){function SymbolNode(name){if(!(this instanceof SymbolNode))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof name)throw new TypeError('String expected for parameter "name"');this.name=name}function undef(name){throw new Error("Undefined symbol "+name)}var Node=load(require("./Node")),Unit=load(require("../../type/unit/Unit"));return SymbolNode.prototype=new Node,SymbolNode.prototype.type="SymbolNode",SymbolNode.prototype.isSymbolNode=!0,SymbolNode.prototype._compile=function(defs,args){return defs.undef=undef,defs.Unit=Unit,args[this.name]?this.name:this.name in defs.math?'("'+this.name+'" in scope ? scope["'+this.name+'"] : math["'+this.name+'"])':'("'+this.name+'" in scope ? scope["'+this.name+'"] : '+(Unit.isValuelessUnit(this.name)?'new Unit(null, "'+this.name+'")':'undef("'+this.name+'")')+")"},SymbolNode.prototype.forEach=function(callback){},SymbolNode.prototype.map=function(callback){return this.clone()},SymbolNode.prototype.clone=function(){return new SymbolNode(this.name)},SymbolNode.prototype._toString=function(options){return this.name},SymbolNode.prototype._toTex=function(options){var isUnit=!1;"undefined"==typeof math[this.name]&&Unit.isValuelessUnit(this.name)&&(isUnit=!0);var symbol=latex.toSymbol(this.name,isUnit);return"\\"===symbol[0]?symbol:" "+symbol},SymbolNode}var latex=require("../../utils/latex");exports.name="SymbolNode",exports.path="expression.node",exports.math=!0,exports.factory=factory},{"../../type/unit/Unit":665,"../../utils/latex":705,"./Node":418}],423:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function UpdateNode(index,expr){if(!(this instanceof UpdateNode))throw new SyntaxError("Constructor must be called with the new operator");if(!index||!index.isIndexNode)throw new TypeError('Expected IndexNode for parameter "index"');if(!expr||!expr.isNode)throw new TypeError('Expected Node for parameter "expr"');this.index=index,this.expr=expr}var Node=load(require("./Node"));load(require("./IndexNode"));return UpdateNode.prototype=new Node,UpdateNode.prototype.type="UpdateNode",UpdateNode.prototype.isUpdateNode=!0,UpdateNode.prototype._compile=function(defs,args){var lhs=args[this.index.objectName()]?this.name+" = ":'scope["'+this.index.objectName()+'"]',rhs=this.index.compileSubset(defs,args,this.expr._compile(defs,args));return lhs+" = "+rhs},UpdateNode.prototype.forEach=function(callback){callback(this.index,"index",this),callback(this.expr,"expr",this)},UpdateNode.prototype.map=function(callback){return new UpdateNode(this._ifNode(callback(this.index,"index",this)),this._ifNode(callback(this.expr,"expr",this)))},UpdateNode.prototype.clone=function(){return new UpdateNode(this.index,this.expr)},UpdateNode.prototype._toString=function(options){var expr=this.expr.toString(options);return options&&"all"===options.parenthesis&&(expr="("+expr+")"),this.index.toString(options)+" = "+expr},UpdateNode.prototype._toTex=function(options){var expr=this.expr.toTex(options);return options&&"all"===options.parenthesis&&(expr="\\left("+expr+"\\right)"),this.index.toTex(options)+":="+expr},UpdateNode}exports.name="UpdateNode",exports.path="expression.node",exports.factory=factory},{"./IndexNode":417,"./Node":418}],424:[function(require,module,exports){module.exports=[require("./ArrayNode"),require("./AssignmentNode"),require("./BlockNode"),require("./ConditionalNode"),require("./ConstantNode"),require("./IndexNode"),require("./FunctionAssignmentNode"),require("./FunctionNode"),require("./Node"),require("./OperatorNode"),require("./ParenthesisNode"),require("./RangeNode"),require("./SymbolNode"),require("./UpdateNode")]},{"./ArrayNode":410,"./AssignmentNode":411,"./BlockNode":412,"./ConditionalNode":413,"./ConstantNode":414,"./FunctionAssignmentNode":415,"./FunctionNode":416,"./IndexNode":417,"./Node":418,"./OperatorNode":419,"./ParenthesisNode":420,"./RangeNode":421,"./SymbolNode":422,"./UpdateNode":423}],425:[function(require,module,exports){"use strict";function getPrecedence(_node,parenthesis){var node=_node;"keep"!==parenthesis&&(node=_node.getContent());for(var identifier=node.getIdentifier(),i=0;i<properties.length;i++)if(identifier in properties[i])return i;return null}function getAssociativity(_node,parenthesis){var node=_node;"keep"!==parenthesis&&(node=_node.getContent());var identifier=node.getIdentifier(),index=getPrecedence(node,parenthesis);if(null===index)return null;var property=properties[index][identifier];if(property.hasOwnProperty("associativity")){if("left"===property.associativity)return"left";if("right"===property.associativity)return"right";throw Error("'"+identifier+"' has the invalid associativity '"+property.associativity+"'.")}return null}function isAssociativeWith(nodeA,nodeB,parenthesis){var a=nodeA,b=nodeB;if("keep"!==parenthesis)var a=nodeA.getContent(),b=nodeB.getContent();var identifierA=a.getIdentifier(),identifierB=b.getIdentifier(),index=getPrecedence(a,parenthesis);if(null===index)return null;var property=properties[index][identifierA];if(property.hasOwnProperty("associativeWith")&&property.associativeWith instanceof Array){for(var i=0;i<property.associativeWith.length;i++)if(property.associativeWith[i]===identifierB)return!0;return!1}return null}var properties=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];module.exports.properties=properties,module.exports.getPrecedence=getPrecedence,module.exports.getAssociativity=getAssociativity,module.exports.isAssociativeWith=isAssociativeWith},{}],426:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function parse(expr,options){if(1!=arguments.length&&2!=arguments.length)throw new ArgumentsError("parse",arguments.length,1,2);if(extra_nodes=options&&options.nodes?options.nodes:{},"string"==typeof expr)return expression=expr,parseStart();if(Array.isArray(expr)||expr instanceof type.Matrix)return deepMap(expr,function(elem){if("string"!=typeof elem)throw new TypeError("String expected");return expression=elem,parseStart()});throw new TypeError("String or matrix expected")}function first(){index=0,c=expression.charAt(0),nesting_level=0,conditional_level=null}function next(){index++,c=expression.charAt(index)}function nextPreview(){return expression.charAt(index+1)}function nextNextPreview(){return expression.charAt(index+2)}function getToken(){for(token_type=TOKENTYPE.NULL,token="";" "==c||"	"==c||"\n"==c&&nesting_level;)next();if("#"==c)for(;"\n"!=c&&""!=c;)next();if(""==c)return void(token_type=TOKENTYPE.DELIMITER);if("\n"==c&&!nesting_level)return token_type=TOKENTYPE.DELIMITER,token=c,void next();var c2=c+nextPreview(),c3=c2+nextNextPreview();if(3==c3.length&&DELIMITERS[c3])return token_type=TOKENTYPE.DELIMITER,token=c3,next(),next(),void next();if(2==c2.length&&DELIMITERS[c2])return token_type=TOKENTYPE.DELIMITER,token=c2,next(),void next();if(DELIMITERS[c])return token_type=TOKENTYPE.DELIMITER,token=c,void next();if(!isDigitDot(c)){if(currentIsAlpha()){for(;currentIsAlpha()||isDigit(c);)token+=c,next();return void(token_type=NAMED_DELIMITERS[token]?TOKENTYPE.DELIMITER:TOKENTYPE.SYMBOL)}for(token_type=TOKENTYPE.UNKNOWN;""!=c;)token+=c,next();throw createSyntaxError('Syntax error in part "'+token+'"')}if(token_type=TOKENTYPE.NUMBER,"."==c)token+=c,next(),isDigit(c)||(token_type=TOKENTYPE.UNKNOWN);else{for(;isDigit(c);)token+=c,next();"."==c&&(token+=c,next())}for(;isDigit(c);)token+=c,next();if(c2=nextPreview(),("E"==c||"e"==c)&&(isDigit(c2)||"-"==c2||"+"==c2))for(token+=c,next(),"+"!=c&&"-"!=c||(token+=c,next()),isDigit(c)||(token_type=TOKENTYPE.UNKNOWN);isDigit(c);)token+=c,next()}function getTokenSkipNewline(){do getToken();while("\n"==token)}function openParams(){nesting_level++}function closeParams(){nesting_level--}function currentIsAlpha(){var cPrev=expression.charAt(index-1),cNext=expression.charAt(index+1),isValidLatinOrGreek=function(p){return/^[a-zA-Z_\u00C0-\u02AF\u0370-\u03FF]$/.test(p)},isValidMathSymbol=function(high,low){return/^[\uD835]$/.test(high)&&/^[\uDC00-\uDFFF]$/.test(low)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(low)};return isValidLatinOrGreek(c)||isValidMathSymbol(c,cNext)||isValidMathSymbol(cPrev,c)}function isDigitDot(c){return c>="0"&&"9">=c||"."==c}function isDigit(c){return c>="0"&&"9">=c}function parseStart(){first(),getToken();var node=parseBlock();if(""!=token)throw token_type==TOKENTYPE.DELIMITER?createError("Unexpected operator "+token):createSyntaxError('Unexpected part "'+token+'"');return node}function parseBlock(){var node,visible,blocks=[];if(""==token)return new ConstantNode("undefined","undefined");for("\n"!=token&&";"!=token&&(node=parseFunctionAssignment());"\n"==token||";"==token;)0==blocks.length&&node&&(visible=";"!=token,blocks.push({node:node,visible:visible})),getToken(),"\n"!=token&&";"!=token&&""!=token&&(node=parseFunctionAssignment(),visible=";"!=token,blocks.push({node:node,visible:visible}));return blocks.length>0?new BlockNode(blocks):node}function parseFunctionAssignment(){if(token_type==TOKENTYPE.SYMBOL&&"function"==token)throw createSyntaxError('Deprecated keyword "function". Functions can now be assigned without it, like "f(x) = x^2".');return parseAssignment()}function parseAssignment(){var name,args,expr,valid,node=parseConditional();if("="==token){if(node&&node.isSymbolNode)return name=node.name,getTokenSkipNewline(),expr=parseAssignment(),new AssignmentNode(name,expr);if(node&&node.isIndexNode)return getTokenSkipNewline(),expr=parseAssignment(),new UpdateNode(node,expr);if(node&&node.isFunctionNode&&(valid=!0,args=[],name=node.name,node.args.forEach(function(arg,index){arg&&arg.isSymbolNode?args[index]=arg.name:valid=!1}),valid))return getTokenSkipNewline(),expr=parseAssignment(),new FunctionAssignmentNode(name,args,expr);throw createSyntaxError("Invalid left hand side of assignment operator =")}return node}function parseConditional(){for(var node=parseLogicalOr();"?"==token;){var prev=conditional_level;conditional_level=nesting_level,getTokenSkipNewline();var condition=node,trueExpr=parseLogicalOr();if(":"!=token)throw createSyntaxError("False part of conditional expression expected");conditional_level=null,getTokenSkipNewline();var falseExpr=parseConditional();node=new ConditionalNode(condition,trueExpr,falseExpr),conditional_level=prev}return node}function parseLogicalOr(){for(var node=parseLogicalXor();"or"==token;)getTokenSkipNewline(),node=new OperatorNode("or","or",[node,parseLogicalXor()]);return node}function parseLogicalXor(){for(var node=parseLogicalAnd();"xor"==token;)getTokenSkipNewline(),node=new OperatorNode("xor","xor",[node,parseLogicalAnd()]);return node}function parseLogicalAnd(){for(var node=parseBitwiseOr();"and"==token;)getTokenSkipNewline(),node=new OperatorNode("and","and",[node,parseBitwiseOr()]);return node}function parseBitwiseOr(){for(var node=parseBitwiseXor();"|"==token;)getTokenSkipNewline(),node=new OperatorNode("|","bitOr",[node,parseBitwiseXor()]);return node}function parseBitwiseXor(){for(var node=parseBitwiseAnd();"^|"==token;)getTokenSkipNewline(),node=new OperatorNode("^|","bitXor",[node,parseBitwiseAnd()]);return node}function parseBitwiseAnd(){for(var node=parseRelational();"&"==token;)getTokenSkipNewline(),node=new OperatorNode("&","bitAnd",[node,parseRelational()]);return node}function parseRelational(){var node,operators,name,fn,params;for(node=parseShift(),operators={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};token in operators;)name=token,fn=operators[name],getTokenSkipNewline(),params=[node,parseShift()],node=new OperatorNode(name,fn,params);return node}function parseShift(){var node,operators,name,fn,params;for(node=parseConversion(),operators={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};token in operators;)name=token,fn=operators[name],getTokenSkipNewline(),params=[node,parseConversion()],node=new OperatorNode(name,fn,params);return node}function parseConversion(){var node,operators,name,fn,params;for(node=parseRange(),operators={to:"to","in":"to"};token in operators;)name=token,fn=operators[name],getTokenSkipNewline(),params=[node,parseRange()],node=new OperatorNode(name,fn,params);return node}function parseRange(){var node,params=[];if(node=":"==token?new ConstantNode("1","number"):parseAddSubtract(),":"==token&&conditional_level!==nesting_level){for(params.push(node);":"==token&&params.length<3;)getTokenSkipNewline(),")"==token||"]"==token||","==token||""==token?params.push(new SymbolNode("end")):params.push(parseAddSubtract());node=3==params.length?new RangeNode(params[0],params[2],params[1]):new RangeNode(params[0],params[1])}return node}function parseAddSubtract(){var node,operators,name,fn,params;for(node=parseMultiplyDivide(),operators={"+":"add","-":"subtract"};token in operators;)name=token,fn=operators[name],getTokenSkipNewline(),params=[node,parseMultiplyDivide()],node=new OperatorNode(name,fn,params);return node}function parseMultiplyDivide(){var node,last,operators,name,fn;for(node=parseUnary(),last=node,operators={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};;)if(token in operators)name=token,fn=operators[name],getTokenSkipNewline(),last=parseUnary(),node=new OperatorNode(name,fn,[node,last]);else{if(!(token_type==TOKENTYPE.SYMBOL||"in"==token&&node&&node.isConstantNode||token_type==TOKENTYPE.NUMBER&&!last.isConstantNode||"("==token||"["==token))break;last=parseUnary(),node=new OperatorNode("*","multiply",[node,last])}return node}function parseUnary(){var name,params,fn={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"}[token];return fn?(name=token,getTokenSkipNewline(),params=[parseUnary()],new OperatorNode(name,fn,params)):parsePow()}function parsePow(){var node,name,fn,params;return node=parseLeftHandOperators(),"^"!=token&&".^"!=token||(name=token,fn="^"==name?"pow":"dotPow",getTokenSkipNewline(),params=[node,parseUnary()],node=new OperatorNode(name,fn,params)),node}function parseLeftHandOperators(){var node,operators,name,fn,params;for(node=parseCustomNodes(),operators={"!":"factorial","'":"transpose"};token in operators;)name=token,fn=operators[name],getToken(),params=[node],node=new OperatorNode(name,fn,params);return node}function parseCustomNodes(){var handler,params=[];if(token_type==TOKENTYPE.SYMBOL&&extra_nodes[token]){if(handler=extra_nodes[token],getToken(),"("==token){if(params=[],openParams(),getToken(),")"!=token)for(params.push(parseConditional());","==token;)getToken(),params.push(parseConditional());if(")"!=token)throw createSyntaxError("Parenthesis ) expected");closeParams(),getToken()}return new handler(params)}return parseSymbol()}function parseSymbol(){var node,name;return token_type==TOKENTYPE.SYMBOL||token_type==TOKENTYPE.DELIMITER&&token in NAMED_DELIMITERS?(name=token,getToken(),node=parseFunctions(name),node=parseIndex(node)):parseString()}function parseFunctions(name){var params;if("("==token){if(params=[],openParams(),getToken(),")"!=token)for(params.push(parseConditional());","==token;)getToken(),params.push(parseConditional());if(")"!=token)throw createSyntaxError("Parenthesis ) expected");return closeParams(),getToken(),new FunctionNode(name,params)}return new SymbolNode(name)}function parseIndex(node){for(var params;"["==token;){if(params=[],openParams(),getToken(),"]"!=token)for(params.push(parseConditional());","==token;)getToken(),params.push(parseConditional());if("]"!=token)throw createSyntaxError("Parenthesis ] expected");closeParams(),getToken(),node=new IndexNode(node,params)}return node}function parseString(){var node,str,tPrev;if('"'==token){for(str="",tPrev="";""!=c&&('"'!=c||"\\"==tPrev);)str+=c,tPrev=c,next();if(getToken(),'"'!=token)throw createSyntaxError('End of string " expected');return getToken(),node=new ConstantNode(str,"string"),node=parseIndex(node)}return parseMatrix()}function parseMatrix(){var array,params,rows,cols;if("["==token){if(openParams(),getToken(),"]"!=token){var row=parseRow();if(";"==token){for(rows=1,params=[row];";"==token;)getToken(),params[rows]=parseRow(),rows++;if("]"!=token)throw createSyntaxError("End of matrix ] expected");closeParams(),getToken(),cols=params[0].nodes.length;for(var r=1;rows>r;r++)if(params[r].nodes.length!=cols)throw createError("Column dimensions mismatch ("+params[r].nodes.length+" != "+cols+")");array=new ArrayNode(params)}else{if("]"!=token)throw createSyntaxError("End of matrix ] expected");closeParams(),getToken(),array=row}}else closeParams(),getToken(),array=new ArrayNode([]);return array}return parseNumber()}function parseRow(){for(var params=[parseAssignment()],len=1;","==token;)getToken(),params[len]=parseAssignment(),len++;return new ArrayNode(params)}function parseNumber(){var number;return token_type==TOKENTYPE.NUMBER?(number=token,getToken(),new ConstantNode(number,"number")):parseParentheses()}function parseParentheses(){var node;if("("==token){if(openParams(),getToken(),node=parseAssignment(),")"!=token)throw createSyntaxError("Parenthesis ) expected");return closeParams(),getToken(),new ParenthesisNode(node)}return parseEnd()}function parseEnd(){throw createSyntaxError(""==token?"Unexpected end of expression":"Value expected")}function col(){return index-token.length+1}function createSyntaxError(message){var c=col(),error=new SyntaxError(message+" (char "+c+")");return error["char"]=c,error}function createError(message){var c=col(),error=new Error(message+" (char "+c+")");return error["char"]=c,error}var ArrayNode=load(require("./node/ArrayNode")),AssignmentNode=load(require("./node/AssignmentNode")),BlockNode=load(require("./node/BlockNode")),ConditionalNode=load(require("./node/ConditionalNode")),ConstantNode=load(require("./node/ConstantNode")),FunctionAssignmentNode=load(require("./node/FunctionAssignmentNode")),IndexNode=load(require("./node/IndexNode")),OperatorNode=load(require("./node/OperatorNode")),ParenthesisNode=load(require("./node/ParenthesisNode")),FunctionNode=load(require("./node/FunctionNode")),RangeNode=load(require("./node/RangeNode")),SymbolNode=load(require("./node/SymbolNode")),UpdateNode=load(require("./node/UpdateNode")),TOKENTYPE={
NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},DELIMITERS={",":!0,"(":!0,")":!0,"[":!0,"]":!0,'"':!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"'":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},NAMED_DELIMITERS={mod:!0,to:!0,"in":!0,and:!0,xor:!0,or:!0,not:!0},extra_nodes={},expression="",index=0,c="",token="",token_type=TOKENTYPE.NULL,nesting_level=0,conditional_level=null;return parse}var ArgumentsError=require("../error/ArgumentsError"),deepMap=require("../utils/collection/deepMap");exports.name="parse",exports.path="expression",exports.factory=factory},{"../error/ArgumentsError":226,"../utils/collection/deepMap":698,"./node/ArrayNode":410,"./node/AssignmentNode":411,"./node/BlockNode":412,"./node/ConditionalNode":413,"./node/ConstantNode":414,"./node/FunctionAssignmentNode":415,"./node/FunctionNode":416,"./node/IndexNode":417,"./node/OperatorNode":419,"./node/ParenthesisNode":420,"./node/RangeNode":421,"./node/SymbolNode":422,"./node/UpdateNode":423}],427:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var concat=load(require("../../function/matrix/concat"));return typed("concat",{"...any":function(args){var lastIndex=args.length-1,last=args[lastIndex];"number"==typeof last?args[lastIndex]=last-1:last&&last.isBigNumber===!0&&(args[lastIndex]=last.minus(1));try{return concat.apply(null,args)}catch(err){throw errorTransform(err)}}})}var errorTransform=require("./error.transform").transform;exports.name="concat",exports.path="expression.transform",exports.factory=factory},{"../../function/matrix/concat":525,"./error.transform":428}],428:[function(require,module,exports){var IndexError=require("../../error/IndexError");exports.transform=function(err){return err&&err.isIndexError?new IndexError(err.index+1,err.min+1,err.max+1):err}},{"../../error/IndexError":228}],429:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function filterTransform(args,math,scope){var x,test;if(args[0]&&(x=args[0].compile().eval(scope)),args[1])if(args[1]&&args[1].isSymbolNode)test=args[1].compile().eval(scope);else{var _scope=scope||{},symbol=args[1].filter(function(node){return node&&node.isSymbolNode&&!(node.name in math)&&!(node.name in _scope)})[0],sub=Object.create(_scope),eq=args[1].compile();if(!symbol)throw new Error("No undefined variable found in filter equation");var name=symbol.name;test=function(x){return sub[name]=x,eq.eval(sub)}}return filter(x,test)}var filter=load(require("../../function/utils/filter"));load(require("../node/SymbolNode"));return filterTransform.rawArgs=!0,filterTransform}exports.name="filter",exports.path="expression.transform",exports.factory=factory},{"../../function/utils/filter":604,"../node/SymbolNode":422}],430:[function(require,module,exports){"use strict";function factory(type,config,load,typed){load(require("../../function/utils/forEach"));return typed("forEach",{"Array | Matrix, function":function(array,callback){var recurse=function(value,index){Array.isArray(value)?value.forEach(function(child,i){recurse(child,index.concat(i+1))}):callback(value,index,array)};recurse(array.valueOf(),[])}})}exports.name="forEach",exports.path="expression.transform",exports.factory=factory},{"../../function/utils/forEach":605}],431:[function(require,module,exports){module.exports=[require("./concat.transform"),require("./filter.transform"),require("./forEach.transform"),require("./index.transform"),require("./map.transform"),require("./max.transform"),require("./mean.transform"),require("./min.transform"),require("./range.transform"),require("./subset.transform")]},{"./concat.transform":427,"./filter.transform":429,"./forEach.transform":430,"./index.transform":432,"./map.transform":433,"./max.transform":434,"./mean.transform":435,"./min.transform":436,"./range.transform":437,"./subset.transform":438}],432:[function(require,module,exports){"use strict";function factory(type,config,load){load(require("../../type/matrix/function/index"));return function(){for(var args=[],i=0,ii=arguments.length;ii>i;i++){var arg=arguments[i];if(arg&&arg.isRange===!0)arg.start--,arg.end-=arg.step>0?0:2;else if(arg&&arg.isSet===!0)arg=arg.map(function(v){return v-1});else if(arg&&(arg.isArray===!0||arg.isMatrix))arg=arg.map(function(v){return v-1});else if("number"==typeof arg)arg--;else{if(!arg||arg.isBigNumber!==!0)throw new TypeError("Ranges must be a Number, Range, Array or Matrix");arg=arg.toNumber()-1}args[i]=arg}var res=new type.Index;return type.Index.apply(res,args),res}}Array.isArray;exports.name="index",exports.path="expression.transform",exports.factory=factory},{"../../type/matrix/function/index":643}],433:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=(load(require("../../function/utils/map")),load(require("../../type/matrix/function/matrix")));return typed("max",{"Array, function":function(x,callback){return _map(x,callback,x)},"Matrix, function":function(x,callback){return matrix(_map(x.valueOf(),callback,x))}})}function _map(array,callback,orig){function recurse(value,index){return Array.isArray(value)?value.map(function(child,i){return recurse(child,index.concat(i+1))}):callback(value,index,orig)}return recurse(array,[])}exports.name="map",exports.path="expression.transform",exports.factory=factory},{"../../function/utils/map":613,"../../type/matrix/function/matrix":644}],434:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var max=load(require("../../function/statistics/max"));return typed("max",{"...any":function(args){if(2==args.length&&isCollection(args[0])){var dim=args[1];"number"==typeof dim?args[1]=dim-1:dim&&dim.isBigNumber===!0&&(args[1]=dim.minus(1))}try{return max.apply(null,args)}catch(err){throw errorTransform(err)}}})}var errorTransform=require("./error.transform").transform,isCollection=require("../../utils/collection/isCollection");exports.name="max",exports.path="expression.transform",exports.factory=factory},{"../../function/statistics/max":565,"../../utils/collection/isCollection":699,"./error.transform":428}],435:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var mean=load(require("../../function/statistics/mean"));return typed("mean",{"...any":function(args){if(2==args.length&&isCollection(args[0])){var dim=args[1];"number"==typeof dim?args[1]=dim-1:dim&&dim.isBigNumber===!0&&(args[1]=dim.minus(1))}try{return mean.apply(null,args)}catch(err){throw errorTransform(err)}}})}var errorTransform=require("./error.transform").transform,isCollection=require("../../utils/collection/isCollection");exports.name="mean",exports.path="expression.transform",exports.factory=factory},{"../../function/statistics/mean":566,"../../utils/collection/isCollection":699,"./error.transform":428}],436:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var min=load(require("../../function/statistics/min"));return typed("min",{"...any":function(args){if(2==args.length&&isCollection(args[0])){var dim=args[1];"number"==typeof dim?args[1]=dim-1:dim&&dim.isBigNumber===!0&&(args[1]=dim.minus(1))}try{return min.apply(null,args)}catch(err){throw errorTransform(err)}}})}var errorTransform=require("./error.transform").transform,isCollection=require("../../utils/collection/isCollection");exports.name="min",exports.path="expression.transform",exports.factory=factory},{"../../function/statistics/min":568,"../../utils/collection/isCollection":699,"./error.transform":428}],437:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var range=load(require("../../function/matrix/range"));return typed("range",{"...any":function(args){var lastIndex=args.length-1,last=args[lastIndex];return"boolean"!=typeof last&&args.push(!0),range.apply(null,args)}})}exports.name="range",exports.path="expression.transform",exports.factory=factory},{"../../function/matrix/range":535}],438:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var subset=load(require("../../function/matrix/subset"));return typed("subset",{"...any":function(args){try{return subset.apply(null,args)}catch(err){throw errorTransform(err)}}})}var errorTransform=require("./error.transform").transform;exports.name="subset",exports.path="expression.transform",exports.factory=factory},{"../../function/matrix/subset":539,"./error.transform":428}],439:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../../type/matrix/function/matrix")),abs=load(require("../../arithmetic/abs")),addScalar=load(require("../../arithmetic/addScalar")),divideScalar=load(require("../../arithmetic/divideScalar")),multiplyScalar=load(require("../../arithmetic/multiplyScalar")),subtract=load(require("../../arithmetic/subtract")),larger=load(require("../../relational/larger")),equalScalar=load(require("../../relational/equalScalar")),unaryMinus=load(require("../../arithmetic/unaryMinus")),SparseMatrix=type.SparseMatrix,DenseMatrix=type.DenseMatrix,Spa=type.Spa,lup=typed("lup",{DenseMatrix:function(m){return _denseLUP(m)},SparseMatrix:function(m){return _sparseLUP(m)},Array:function(a){var m=matrix(a),r=_denseLUP(m);return{L:r.L.valueOf(),U:r.U.valueOf(),p:r.p}}}),_denseLUP=function(m){var i,j,k,rows=m._size[0],columns=m._size[1],n=Math.min(rows,columns),data=object.clone(m._data),ldata=[],lsize=[rows,n],udata=[],usize=[n,columns],p=[];for(i=0;rows>i;i++)p[i]=i;for(j=0;columns>j;j++){if(j>0)for(i=0;rows>i;i++){var min=Math.min(i,j),s=0;for(k=0;min>k;k++)s=addScalar(s,multiplyScalar(data[i][k],data[k][j]));data[i][j]=subtract(data[i][j],s)}var pi=j,pabsv=0,vjj=0;for(i=j;rows>i;i++){var v=data[i][j],absv=abs(v);larger(absv,pabsv)&&(pi=i,pabsv=absv,vjj=v)}if(j!==pi&&(p[j]=[p[pi],p[pi]=p[j]][0],DenseMatrix._swapRows(j,pi,data)),rows>j)for(i=j+1;rows>i;i++){var vij=data[i][j];equalScalar(vij,0)||(data[i][j]=divideScalar(data[i][j],vjj))}}for(j=0;columns>j;j++)for(i=0;rows>i;i++)0===j&&(columns>i&&(udata[i]=[]),ldata[i]=[]),j>i?(columns>i&&(udata[i][j]=data[i][j]),rows>j&&(ldata[i][j]=0)):i!==j?(columns>i&&(udata[i][j]=0),rows>j&&(ldata[i][j]=data[i][j])):(columns>i&&(udata[i][j]=data[i][j]),rows>j&&(ldata[i][j]=1));var l=new DenseMatrix({data:ldata,size:lsize}),u=new DenseMatrix({data:udata,size:usize}),pv=[];for(i=0,n=p.length;n>i;i++)pv[p[i]]=i;return{L:l,U:u,p:pv,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}},_sparseLUP=function(m){var i,j,k,rows=m._size[0],columns=m._size[1],n=Math.min(rows,columns),values=m._values,index=m._index,ptr=m._ptr,lvalues=[],lindex=[],lptr=[],lsize=[rows,n],uvalues=[],uindex=[],uptr=[],usize=[n,columns],pv_co=[],pv_oc=[];for(i=0;rows>i;i++)pv_co[i]=i,pv_oc[i]=i;var swapIndeces=function(x,y){var kx=pv_oc[x],ky=pv_oc[y];pv_co[kx]=y,pv_co[ky]=x,pv_oc[x]=ky,pv_oc[y]=kx};for(j=0;columns>j;j++){var spa=new Spa;rows>j&&(lptr.push(lvalues.length),lvalues.push(1),lindex.push(j)),uptr.push(uvalues.length);var k0=ptr[j],k1=ptr[j+1];for(k=k0;k1>k;k++)i=index[k],spa.set(pv_co[i],values[k]);j>0&&spa.forEach(0,j-1,function(k,vkj){SparseMatrix._forEachRow(k,lvalues,lindex,lptr,function(i,vik){i>k&&spa.accumulate(i,unaryMinus(multiplyScalar(vik,vkj)))})});var pi=j,vjj=spa.get(j),pabsv=abs(vjj);spa.forEach(j+1,rows-1,function(x,v){var absv=abs(v);larger(absv,pabsv)&&(pi=x,pabsv=absv,vjj=v)}),j!==pi&&(SparseMatrix._swapRows(j,pi,lsize[1],lvalues,lindex,lptr),SparseMatrix._swapRows(j,pi,usize[1],uvalues,uindex,uptr),spa.swap(j,pi),swapIndeces(j,pi)),spa.forEach(0,rows-1,function(x,v){j>=x?(uvalues.push(v),uindex.push(x)):(v=divideScalar(v,vjj),equalScalar(v,0)||(lvalues.push(v),lindex.push(x)))})}return uptr.push(uvalues.length),lptr.push(lvalues.length),{L:new SparseMatrix({values:lvalues,index:lindex,ptr:lptr,size:lsize}),U:new SparseMatrix({values:uvalues,index:uindex,ptr:uptr,size:usize}),p:pv_co,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}};return lup}var util=require("../../../utils/index"),object=util.object;exports.name="lup",exports.factory=factory},{"../../../type/matrix/function/matrix":644,"../../../utils/index":704,"../../arithmetic/abs":464,"../../arithmetic/addScalar":466,"../../arithmetic/divideScalar":471,"../../arithmetic/multiplyScalar":486,"../../arithmetic/subtract":494,"../../arithmetic/unaryMinus":495,"../../relational/equalScalar":557,"../../relational/larger":559}],440:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var cs_sqr=load(require("../../algebra/sparse/cs_sqr")),cs_lu=load(require("../../algebra/sparse/cs_lu")),slu=typed("slu",{"SparseMatrix, number, number":function(a,order,threshold){if(!isInteger(order)||0>order||order>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(0>threshold||threshold>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var s=cs_sqr(order,a,!1),f=cs_lu(a,s,threshold);return{L:f.L,U:f.U,p:f.pinv,q:s.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}});return slu}var util=require("../../../utils/index"),number=util.number,isInteger=number.isInteger;exports.name="slu",exports.factory=factory},{"../../../utils/index":704,"../../algebra/sparse/cs_lu":454,"../../algebra/sparse/cs_sqr":461}],441:[function(require,module,exports){module.exports=[require("./decomposition/lup"),require("./decomposition/slu"),require("./solver/lsolve"),require("./solver/lusolve"),require("./solver/usolve")]},{"./decomposition/lup":439,"./decomposition/slu":440,"./solver/lsolve":442,"./solver/lusolve":443,"./solver/usolve":444}],442:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../../type/matrix/function/matrix")),divideScalar=load(require("../../arithmetic/divideScalar")),multiplyScalar=load(require("../../arithmetic/multiplyScalar")),subtract=load(require("../../arithmetic/subtract")),equalScalar=load(require("../../relational/equalScalar")),solveValidation=load(require("./utils/solveValidation")),DenseMatrix=type.DenseMatrix,lsolve=typed("lsolve",{"SparseMatrix, Array | Matrix":function(m,b){return _sparseForwardSubstitution(m,b)},"DenseMatrix, Array | Matrix":function(m,b){return _denseForwardSubstitution(m,b)},"Array, Array | Matrix":function(a,b){var m=matrix(a),r=_denseForwardSubstitution(m,b);return r.valueOf()}}),_denseForwardSubstitution=function(m,b){b=solveValidation(m,b,!0);for(var bdata=b._data,rows=m._size[0],columns=m._size[1],x=[],data=m._data,j=0;columns>j;j++){var xj,bj=bdata[j][0]||0;if(equalScalar(bj,0))xj=0;else{var vjj=data[j][j];if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");xj=divideScalar(bj,vjj);for(var i=j+1;rows>i;i++)bdata[i]=[subtract(bdata[i][0]||0,multiplyScalar(xj,data[i][j]))]}x[j]=[xj]}return new DenseMatrix({data:x,size:[rows,1]})},_sparseForwardSubstitution=function(m,b){b=solveValidation(m,b,!0);for(var i,k,bdata=b._data,rows=m._size[0],columns=m._size[1],values=m._values,index=m._index,ptr=m._ptr,x=[],j=0;columns>j;j++){var bj=bdata[j][0]||0;if(equalScalar(bj,0))x[j]=[0];else{var vjj=0,jvalues=[],jindex=[],l=ptr[j+1];for(k=ptr[j];l>k;k++)i=index[k],i===j?vjj=values[k]:i>j&&(jvalues.push(values[k]),jindex.push(i));if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");var xj=divideScalar(bj,vjj);for(k=0,l=jindex.length;l>k;k++)i=jindex[k],bdata[i]=[subtract(bdata[i][0]||0,multiplyScalar(xj,jvalues[k]))];x[j]=[xj]}}return new DenseMatrix({data:x,size:[rows,1]})};return lsolve}exports.name="lsolve",exports.factory=factory},{"../../../type/matrix/function/matrix":644,"../../arithmetic/divideScalar":471,"../../arithmetic/multiplyScalar":486,"../../arithmetic/subtract":494,"../../relational/equalScalar":557,"./utils/solveValidation":445}],443:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../../type/matrix/function/matrix")),lup=load(require("../decomposition/lup")),slu=load(require("../decomposition/slu")),cs_ipvec=load(require("../sparse/cs_ipvec")),solveValidation=load(require("./utils/solveValidation")),usolve=load(require("./usolve")),lsolve=load(require("./lsolve")),lusolve=typed("lusolve",{"Array, Array | Matrix":function(a,b){a=matrix(a);var d=lup(a),x=_lusolve(d.L,d.U,d.p,null,b);return x.valueOf()},"DenseMatrix, Array | Matrix":function(a,b){var d=lup(a);return _lusolve(d.L,d.U,d.p,null,b)},"SparseMatrix, Array | Matrix":function(a,b){var d=lup(a);return _lusolve(d.L,d.U,d.p,null,b)},"SparseMatrix, Array | Matrix, number, number":function(a,b,order,threshold){var d=slu(a,order,threshold);return _lusolve(d.L,d.U,d.p,d.q,b)},"Object, Array | Matrix":function(d,b){return _lusolve(d.L,d.U,d.p,d.q,b)}}),_toMatrix=function(a){if(a&&a.isMatrix===!0)return a;if(isArray(a))return matrix(a);throw new TypeError("Invalid Matrix LU decomposition")},_lusolve=function(l,u,p,q,b){l=_toMatrix(l),u=_toMatrix(u),b=solveValidation(l,b,!1),p&&(b._data=cs_ipvec(p,b._data));var y=lsolve(l,b),x=usolve(u,y);return q&&(x._data=cs_ipvec(q,x._data)),x};return lusolve}var isArray=Array.isArray;exports.name="lusolve",exports.factory=factory},{"../../../type/matrix/function/matrix":644,"../decomposition/lup":439,"../decomposition/slu":440,"../sparse/cs_ipvec":452,"./lsolve":442,"./usolve":444,"./utils/solveValidation":445}],444:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../../type/matrix/function/matrix")),divideScalar=load(require("../../arithmetic/divideScalar")),multiplyScalar=load(require("../../arithmetic/multiplyScalar")),subtract=load(require("../../arithmetic/subtract")),equalScalar=load(require("../../relational/equalScalar")),solveValidation=load(require("./utils/solveValidation")),DenseMatrix=type.DenseMatrix,usolve=typed("usolve",{"SparseMatrix, Array | Matrix":function(m,b){return _sparseBackwardSubstitution(m,b)},"DenseMatrix, Array | Matrix":function(m,b){return _denseBackwardSubstitution(m,b)},"Array, Array | Matrix":function(a,b){var m=matrix(a),r=_denseBackwardSubstitution(m,b);return r.valueOf()}}),_denseBackwardSubstitution=function(m,b){b=solveValidation(m,b,!0);for(var bdata=b._data,rows=m._size[0],columns=m._size[1],x=[],data=m._data,j=columns-1;j>=0;j--){var xj,bj=bdata[j][0]||0;if(equalScalar(bj,0))xj=0;else{var vjj=data[j][j];if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");xj=divideScalar(bj,vjj);for(var i=j-1;i>=0;i--)bdata[i]=[subtract(bdata[i][0]||0,multiplyScalar(xj,data[i][j]))]}x[j]=[xj]}return new DenseMatrix({data:x,size:[rows,1]})},_sparseBackwardSubstitution=function(m,b){b=solveValidation(m,b,!0);for(var i,k,bdata=b._data,rows=m._size[0],columns=m._size[1],values=m._values,index=m._index,ptr=m._ptr,x=[],j=columns-1;j>=0;j--){var bj=bdata[j][0]||0;if(equalScalar(bj,0))x[j]=[0];else{var vjj=0,jvalues=[],jindex=[],f=ptr[j],l=ptr[j+1];for(k=l-1;k>=f;k--)i=index[k],i===j?vjj=values[k]:j>i&&(jvalues.push(values[k]),jindex.push(i));if(equalScalar(vjj,0))throw new Error("Linear system cannot be solved since matrix is singular");var xj=divideScalar(bj,vjj);for(k=0,l=jindex.length;l>k;k++)i=jindex[k],bdata[i]=[subtract(bdata[i][0],multiplyScalar(xj,jvalues[k]))];x[j]=[xj]}}return new DenseMatrix({data:x,size:[rows,1]})};return usolve}exports.name="usolve",exports.factory=factory},{"../../../type/matrix/function/matrix":644,"../../arithmetic/divideScalar":471,"../../arithmetic/multiplyScalar":486,"../../arithmetic/subtract":494,"../../relational/equalScalar":557,"./utils/solveValidation":445}],445:[function(require,module,exports){"use strict";function factory(type){var DenseMatrix=type.DenseMatrix,solveValidation=function(m,b,copy){var size=m.size();if(2!==size.length)throw new RangeError("Matrix must be two dimensional (size: "+string.format(size)+")");var rows=size[0],columns=size[1];if(rows!==columns)throw new RangeError("Matrix must be square (size: "+string.format(size)+")");var data,i,bdata;if(b&&b.isMatrix===!0){var msize=b.size();if(1===msize.length){if(msize[0]!==rows)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(data=[],bdata=b._data,i=0;rows>i;i++)data[i]=[bdata[i]];return new DenseMatrix({data:data,size:[rows,1],datatype:b._datatype})}if(2===msize.length){if(msize[0]!==rows||1!==msize[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(b.isDenseMatrix===!0){if(copy){for(data=[],bdata=b._data,i=0;rows>i;i++)data[i]=[bdata[i][0]];return new DenseMatrix({data:data,size:[rows,1],datatype:b._datatype})}return b}for(data=[],i=0;rows>i;i++)data[i]=[0];for(var values=b._values,index=b._index,ptr=b._ptr,k1=ptr[1],k=ptr[0];k1>k;k++)i=index[k],data[i][0]=values[k];return new DenseMatrix({data:data,size:[rows,1],datatype:b._datatype})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}if(isArray(b)){var asize=array.size(b);if(1===asize.length){if(asize[0]!==rows)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(data=[],i=0;rows>i;i++)data[i]=[b[i]];return new DenseMatrix({data:data,size:[rows,1]})}if(2===asize.length){if(asize[0]!==rows||1!==asize[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(data=[],i=0;rows>i;i++)data[i]=[b[i][0]];return new DenseMatrix({data:data,size:[rows,1]})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}};return solveValidation}var util=require("../../../../utils/index"),string=util.string,array=util.array,isArray=Array.isArray;exports.factory=factory},{"../../../../utils/index":704}],446:[function(require,module,exports){"use strict";function factory(type,config,load){var cs_flip=load(require("./cs_flip")),cs_fkeep=load(require("./cs_fkeep")),cs_tdfs=load(require("./cs_tdfs")),add=load(require("../../arithmetic/add")),multiply=load(require("../../arithmetic/multiply")),transpose=load(require("../../matrix/transpose")),cs_amd=function(order,a){if(!a||0>=order||order>3)return null;var asize=a._size,m=asize[0],n=asize[1],lemax=0,dense=Math.max(16,10*Math.sqrt(n));dense=Math.min(n-2,dense);var cm=_createTargetMatrix(order,a,m,n,dense);cs_fkeep(cm,_diag,null);for(var i,j,k,k1,k2,e,pj,ln,nvi,pk,eln,p1,p2,pn,h,d,cindex=cm._index,cptr=cm._ptr,cnz=cptr[n],P=[],W=[],len=0,nv=n+1,next=2*(n+1),head=3*(n+1),elen=4*(n+1),degree=5*(n+1),w=6*(n+1),hhead=7*(n+1),last=P,mark=_initializeQuotientGraph(n,cptr,W,len,head,last,next,hhead,nv,w,elen,degree),nel=_initializeDegreeLists(n,cptr,W,degree,elen,w,dense,nv,head,last,next),mindeg=0;n>nel;){for(k=-1;n>mindeg&&-1==(k=W[head+mindeg]);mindeg++);-1!=W[next+k]&&(last[W[next+k]]=-1),W[head+mindeg]=W[next+k];var elenk=W[elen+k],nvk=W[nv+k];nel+=nvk;var dk=0;W[nv+k]=-nvk;var p=cptr[k],pk1=0===elenk?p:cnz,pk2=pk1;for(k1=1;elenk+1>=k1;k1++){for(k1>elenk?(e=k,pj=p,ln=W[len+k]-elenk):(e=cindex[p++],pj=cptr[e],ln=W[len+e]),k2=1;ln>=k2;k2++)i=cindex[pj++],(nvi=W[nv+i])<=0||(dk+=nvi,W[nv+i]=-nvi,cindex[pk2++]=i,-1!=W[next+i]&&(last[W[next+i]]=last[i]),-1!=last[i]?W[next+last[i]]=W[next+i]:W[head+W[degree+i]]=W[next+i]);e!=k&&(cptr[e]=cs_flip(k),W[w+e]=0)}for(0!==elenk&&(cnz=pk2),W[degree+k]=dk,cptr[k]=pk1,W[len+k]=pk2-pk1,W[elen+k]=-2,mark=_wclear(mark,lemax,W,w,n),pk=pk1;pk2>pk;pk++)if(i=cindex[pk],!((eln=W[elen+i])<=0)){nvi=-W[nv+i];var wnvi=mark-nvi;for(p=cptr[i],p1=cptr[i]+eln-1;p1>=p;p++)e=cindex[p],W[w+e]>=mark?W[w+e]-=nvi:0!==W[w+e]&&(W[w+e]=W[degree+e]+wnvi)}for(pk=pk1;pk2>pk;pk++){for(i=cindex[pk],p1=cptr[i],p2=p1+W[elen+i]-1,pn=p1,h=0,d=0,p=p1;p2>=p;p++)if(e=cindex[p],0!==W[w+e]){var dext=W[w+e]-mark;dext>0?(d+=dext,cindex[pn++]=e,h+=e):(cptr[e]=cs_flip(k),W[w+e]=0)}W[elen+i]=pn-p1+1;var p3=pn,p4=p1+W[len+i];for(p=p2+1;p4>p;p++){j=cindex[p];var nvj=W[nv+j];0>=nvj||(d+=nvj,cindex[pn++]=j,h+=j)}0===d?(cptr[i]=cs_flip(k),nvi=-W[nv+i],dk-=nvi,nvk+=nvi,nel+=nvi,W[nv+i]=0,W[elen+i]=-1):(W[degree+i]=Math.min(W[degree+i],d),cindex[pn]=cindex[p3],cindex[p3]=cindex[p1],cindex[p1]=k,W[len+i]=pn-p1+1,h=(0>h?-h:h)%n,W[next+i]=W[hhead+h],W[hhead+h]=i,last[i]=h)}for(W[degree+k]=dk,lemax=Math.max(lemax,dk),mark=_wclear(mark+lemax,lemax,W,w,n),pk=pk1;pk2>pk;pk++)if(i=cindex[pk],!(W[nv+i]>=0))for(h=last[i],i=W[hhead+h],W[hhead+h]=-1;-1!=i&&-1!=W[next+i];i=W[next+i],mark++){for(ln=W[len+i],eln=W[elen+i],p=cptr[i]+1;p<=cptr[i]+ln-1;p++)W[w+cindex[p]]=mark;var jlast=i;for(j=W[next+i];-1!=j;){var ok=W[len+j]===ln&&W[elen+j]===eln;for(p=cptr[j]+1;ok&&p<=cptr[j]+ln-1;p++)W[w+cindex[p]]!=mark&&(ok=0);ok?(cptr[j]=cs_flip(i),W[nv+i]+=W[nv+j],W[nv+j]=0,W[elen+j]=-1,j=W[next+j],W[next+jlast]=j):(jlast=j,j=W[next+j])}}for(p=pk1,pk=pk1;pk2>pk;pk++)i=cindex[pk],(nvi=-W[nv+i])<=0||(W[nv+i]=nvi,d=W[degree+i]+dk-nvi,d=Math.min(d,n-nel-nvi),-1!=W[head+d]&&(last[W[head+d]]=i),W[next+i]=W[head+d],last[i]=-1,W[head+d]=i,mindeg=Math.min(mindeg,d),W[degree+i]=d,cindex[p++]=i);W[nv+k]=nvk,0===(W[len+k]=p-pk1)&&(cptr[k]=-1,W[w+k]=0),0!==elenk&&(cnz=p)}for(i=0;n>i;i++)cptr[i]=cs_flip(cptr[i]);for(j=0;n>=j;j++)W[head+j]=-1;for(j=n;j>=0;j--)W[nv+j]>0||(W[next+j]=W[head+cptr[j]],W[head+cptr[j]]=j);for(e=n;e>=0;e--)W[nv+e]<=0||-1!=cptr[e]&&(W[next+e]=W[head+cptr[e]],W[head+cptr[e]]=e);for(k=0,i=0;n>=i;i++)-1==cptr[i]&&(k=cs_tdfs(i,k,W,head,next,P,w));return P.splice(P.length-1,1),P},_createTargetMatrix=function(order,a,m,n,dense){var at=transpose(a);if(1===order&&n===m)return add(a,at);if(2==order){for(var tindex=at._index,tptr=at._ptr,p2=0,j=0;m>j;j++){var p=tptr[j];if(tptr[j]=p2,!(tptr[j+1]-p>dense))for(var p1=tptr[j+1];p1>p;p++)tindex[p2++]=tindex[p]}return tptr[m]=p2,a=transpose(at),multiply(at,a)}return multiply(at,a)},_initializeQuotientGraph=function(n,cptr,W,len,head,last,next,hhead,nv,w,elen,degree){for(var k=0;n>k;k++)W[len+k]=cptr[k+1]-cptr[k];W[len+n]=0;for(var i=0;n>=i;i++)W[head+i]=-1,last[i]=-1,W[next+i]=-1,W[hhead+i]=-1,W[nv+i]=1,W[w+i]=1,W[elen+i]=0,W[degree+i]=W[len+i];var mark=_wclear(0,0,W,w,n);return W[elen+n]=-2,cptr[n]=-1,W[w+n]=0,mark},_initializeDegreeLists=function(n,cptr,W,degree,elen,w,dense,nv,head,last,next){for(var nel=0,i=0;n>i;i++){var d=W[degree+i];if(0===d)W[elen+i]=-2,nel++,cptr[i]=-1,W[w+i]=0;else if(d>dense)W[nv+i]=0,W[elen+i]=-1,nel++,cptr[i]=cs_flip(n),W[nv+n]++;else{var h=W[head+d];-1!=h&&(last[h]=i),W[next+i]=W[head+d],W[head+d]=i}}return nel},_wclear=function(mark,lemax,W,w,n){if(2>mark||0>mark+lemax){for(var k=0;n>k;k++)0!==W[w+k]&&(W[w+k]=1);mark=2}return mark},_diag=function(i,j){return i!=j};return cs_amd}exports.name="cs_amd",exports.path="sparse",exports.factory=factory},{"../../arithmetic/add":465,"../../arithmetic/multiply":485,"../../matrix/transpose":541,"./cs_fkeep":450,"./cs_flip":451,"./cs_tdfs":462}],447:[function(require,module,exports){"use strict";function factory(type,config,load){var transpose=load(require("../../matrix/transpose")),cs_leaf=load(require("./cs_leaf")),cs_counts=function(a,parent,post,ata){if(!a||!parent||!post)return null;var i,j,k,J,p,p0,p1,asize=a._size,m=asize[0],n=asize[1],s=4*n+(ata?n+m+1:0),w=[],ancestor=0,maxfirst=n,prevleaf=2*n,first=3*n,head=4*n,next=5*n+1;for(k=0;s>k;k++)w[k]=-1;var colcount=[],at=transpose(a),tindex=at._index,tptr=at._ptr;for(k=0;n>k;k++)for(j=post[k],colcount[j]=-1==w[first+j]?1:0;-1!=j&&-1==w[first+j];j=parent[j])w[first+j]=k;if(ata){for(k=0;n>k;k++)w[post[k]]=k;for(i=0;m>i;i++){for(k=n,p0=tptr[i],p1=tptr[i+1],p=p0;p1>p;p++)k=Math.min(k,w[tindex[p]]);w[next+i]=w[head+k],w[head+k]=i}}for(i=0;n>i;i++)w[ancestor+i]=i;for(k=0;n>k;k++){for(j=post[k],-1!=parent[j]&&colcount[parent[j]]--,J=ata?w[head+k]:j;-1!=J;J=ata?w[next+J]:-1)for(p=tptr[J];p<tptr[J+1];p++){i=tindex[p];var r=cs_leaf(i,j,w,first,maxfirst,prevleaf,ancestor);r.jleaf>=1&&colcount[j]++,2==r.jleaf&&colcount[r.q]--}-1!=parent[j]&&(w[ancestor+j]=parent[j])}for(j=0;n>j;j++)-1!=parent[j]&&(colcount[parent[j]]+=colcount[j]);return colcount};return cs_counts}exports.name="cs_counts",exports.path="sparse",exports.factory=factory},{"../../matrix/transpose":541,"./cs_leaf":453}],448:[function(require,module,exports){"use strict";function factory(type,config,load){var cs_marked=load(require("./cs_marked")),cs_mark=load(require("./cs_mark")),cs_unflip=load(require("./cs_unflip")),cs_dfs=function(j,g,top,xi,pinv){var i,p,p2,index=g._index,ptr=g._ptr,size=g._size,n=size[1],head=0;for(xi[0]=j;head>=0;){j=xi[head];var jnew=pinv?pinv[j]:j;cs_marked(ptr,j)||(cs_mark(ptr,j),xi[n+head]=0>jnew?0:cs_unflip(ptr[jnew]));var done=1;for(p=xi[n+head],p2=0>jnew?0:cs_unflip(ptr[jnew+1]);p2>p;p++)if(i=index[p],!cs_marked(ptr,i)){xi[n+head]=p,xi[++head]=i,done=0;break}done&&(head--,xi[--top]=j)}return top};return cs_dfs}exports.name="cs_dfs",exports.path="sparse",exports.factory=factory},{"./cs_mark":455,"./cs_marked":456,"./cs_unflip":463}],449:[function(require,module,exports){"use strict";function factory(){var cs_etree=function(a,ata){if(!a)return null;var i,inext,aindex=a._index,aptr=a._ptr,asize=a._size,m=asize[0],n=asize[1],parent=[],w=[],ancestor=0,prev=n;if(ata)for(i=0;m>i;i++)w[prev+i]=-1;for(var k=0;n>k;k++){parent[k]=-1,w[ancestor+k]=-1;for(var p0=aptr[k],p1=aptr[k+1],p=p0;p1>p;p++){var r=aindex[p];for(i=ata?w[prev+r]:r;-1!=i&&k>i;i=inext)inext=w[ancestor+i],w[ancestor+i]=k,-1==inext&&(parent[i]=k);ata&&(w[prev+r]=k)}}return parent};return cs_etree}exports.name="cs_etree",exports.path="sparse",exports.factory=factory},{}],450:[function(require,module,exports){"use strict";function factory(){var cs_fkeep=function(a,callback,other){for(var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,n=asize[1],nz=0,j=0;n>j;j++){var p=aptr[j];for(aptr[j]=nz;p<aptr[j+1];p++)callback(aindex[p],j,avalues?avalues[p]:1,other)&&(aindex[nz]=aindex[p],avalues&&(avalues[nz]=avalues[p]),nz++)}return aptr[n]=nz,aindex.splice(nz,aindex.length-nz),avalues&&avalues.splice(nz,avalues.length-nz),nz};return cs_fkeep}exports.name="cs_fkeep",exports.path="sparse",exports.factory=factory},{}],451:[function(require,module,exports){"use strict";function factory(){var cs_flip=function(i){return-i-2};return cs_flip}exports.name="cs_flip",exports.path="sparse",exports.factory=factory},{}],452:[function(require,module,exports){"use strict";function factory(){var cs_ipvec=function(p,b,n){var k,n=b.length,x=[];if(p)for(k=0;n>k;k++)x[p[k]]=b[k];else for(k=0;n>k;k++)x[k]=b[k];return x};return cs_ipvec}exports.name="cs_ipvec",exports.path="sparse",exports.factory=factory},{}],453:[function(require,module,exports){"use strict";function factory(){var cs_leaf=function(i,j,w,first,maxfirst,prevleaf,ancestor){var s,sparent,jprev,q,jleaf=0;if(j>=i||w[first+j]<=w[maxfirst+i])return-1;if(w[maxfirst+i]=w[first+j],jprev=w[prevleaf+i],w[prevleaf+i]=j,-1===jprev)jleaf=1,q=i;else{for(jleaf=2,q=jprev;q!=w[ancestor+q];q=w[ancestor+q]);for(s=jprev;s!=q;s=sparent)sparent=w[ancestor+s],w[ancestor+s]=q}return{jleaf:jleaf,q:q}};return cs_leaf}exports.name="cs_leaf",exports.path="sparse",exports.factory=factory},{}],454:[function(require,module,exports){"use strict";function factory(type,config,load){var abs=load(require("../../arithmetic/abs")),divideScalar=load(require("../../arithmetic/divideScalar")),multiply=load(require("../../arithmetic/multiply")),larger=load(require("../../relational/larger")),largerEq=load(require("../../relational/largerEq")),cs_spsolve=load(require("./cs_spsolve")),SparseMatrix=type.SparseMatrix,cs_lu=function(m,s,tol){if(!m)return null;var q,size=m._size,n=size[1],lnz=100,unz=100;s&&(q=s.q,lnz=s.lnz||lnz,unz=s.unz||unz);var i,p,lvalues=[],lindex=[],lptr=[],L=new SparseMatrix({values:lvalues,index:lindex,
ptr:lptr,size:[n,n]}),uvalues=[],uindex=[],uptr=[],U=new SparseMatrix({values:uvalues,index:uindex,ptr:uptr,size:[n,n]}),pinv=[],x=[],xi=[];for(i=0;n>i;i++)x[i]=0,pinv[i]=-1,lptr[i+1]=0;lnz=0,unz=0;for(var k=0;n>k;k++){lptr[k]=lnz,uptr[k]=unz;var col=q?q[k]:k,top=cs_spsolve(L,m,col,xi,x,pinv,1),ipiv=-1,a=-1;for(p=top;n>p;p++)if(i=xi[p],pinv[i]<0){var xabs=abs(x[i]);larger(xabs,a)&&(a=xabs,ipiv=i)}else uindex[unz]=pinv[i],uvalues[unz++]=x[i];if(-1==ipiv||0>=a)return null;pinv[col]<0&&largerEq(abs(x[col]),multiply(a,tol))&&(ipiv=col);var pivot=x[ipiv];for(uindex[unz]=k,uvalues[unz++]=pivot,pinv[ipiv]=k,lindex[lnz]=ipiv,lvalues[lnz++]=1,p=top;n>p;p++)i=xi[p],pinv[i]<0&&(lindex[lnz]=i,lvalues[lnz++]=divideScalar(x[i],pivot)),x[i]=0}for(lptr[n]=lnz,uptr[n]=unz,p=0;lnz>p;p++)lindex[p]=pinv[lindex[p]];return lvalues.splice(lnz,lvalues.length-lnz),lindex.splice(lnz,lindex.length-lnz),uvalues.splice(unz,uvalues.length-unz),uindex.splice(unz,uindex.length-unz),{L:L,U:U,pinv:pinv}};return cs_lu}exports.name="cs_lu",exports.path="sparse",exports.factory=factory},{"../../arithmetic/abs":464,"../../arithmetic/divideScalar":471,"../../arithmetic/multiply":485,"../../relational/larger":559,"../../relational/largerEq":560,"./cs_spsolve":460}],455:[function(require,module,exports){"use strict";function factory(type,config,load){var cs_flip=load(require("./cs_flip")),cs_mark=function(w,j){w[j]=cs_flip(w[j])};return cs_mark}exports.name="cs_mark",exports.path="sparse",exports.factory=factory},{"./cs_flip":451}],456:[function(require,module,exports){"use strict";function factory(){var cs_marked=function(w,j){return w[j]<0};return cs_marked}exports.name="cs_marked",exports.path="sparse",exports.factory=factory},{}],457:[function(require,module,exports){"use strict";function factory(type){var SparseMatrix=type.SparseMatrix,cs_permute=function(a,pinv,q,values){for(var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,m=asize[0],n=asize[1],cvalues=values&&a._values?[]:null,cindex=[],cptr=[],nz=0,k=0;n>k;k++){cptr[k]=nz;for(var j=q?q[k]:k,t0=aptr[j],t1=aptr[j+1],t=t0;t1>t;t++){var r=pinv?pinv[aindex[t]]:aindex[t];cindex[nz]=r,cvalues&&(cvalues[nz]=avalues[t]),nz++}}return cptr[n]=nz,new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[m,n],datatype:adt})};return cs_permute}exports.name="cs_permute",exports.path="sparse",exports.factory=factory},{}],458:[function(require,module,exports){"use strict";function factory(type,config,load){var cs_tdfs=load(require("./cs_tdfs")),cs_post=function(parent,n){if(!parent)return null;var j,k=0,post=[],w=[],head=0,next=n,stack=2*n;for(j=0;n>j;j++)w[head+j]=-1;for(j=n-1;j>=0;j--)-1!=parent[j]&&(w[next+j]=w[head+parent[j]],w[head+parent[j]]=j);for(j=0;n>j;j++)-1==parent[j]&&(k=cs_tdfs(j,k,w,head,next,post,stack));return post};return cs_post}exports.name="cs_post",exports.path="sparse",exports.factory=factory},{"./cs_tdfs":462}],459:[function(require,module,exports){"use strict";function factory(type,config,load){var cs_dfs=load(require("./cs_dfs")),cs_marked=load(require("./cs_marked")),cs_mark=load(require("./cs_mark")),cs_reach=function(g,b,k,xi,pinv){var p,p0,p1,gptr=g._ptr,gsize=g._size,bindex=b._index,bptr=b._ptr,n=gsize[1],top=n;for(p0=bptr[k],p1=bptr[k+1],p=p0;p1>p;p++){var i=bindex[p];cs_marked(gptr,i)||(top=cs_dfs(i,g,top,xi,pinv))}for(p=top;n>p;p++)cs_mark(gptr,xi[p]);return top};return cs_reach}exports.name="cs_reach",exports.path="sparse",exports.factory=factory},{"./cs_dfs":448,"./cs_mark":455,"./cs_marked":456}],460:[function(require,module,exports){"use strict";function factory(type,config,load){var divideScalar=load(require("../../arithmetic/divideScalar")),multiply=load(require("../../arithmetic/multiply")),subtract=load(require("../../arithmetic/subtract")),cs_reach=load(require("./cs_reach")),cs_spsolve=function(g,b,k,xi,x,pinv,lo){var p,p0,p1,q,gvalues=g._values,gindex=g._index,gptr=g._ptr,gsize=g._size,n=gsize[1],bvalues=b._values,bindex=b._index,bptr=b._ptr,top=cs_reach(g,b,k,xi,pinv);for(p=top;n>p;p++)x[xi[p]]=0;for(p0=bptr[k],p1=bptr[k+1],p=p0;p1>p;p++)x[bindex[p]]=bvalues[p];for(var px=top;n>px;px++){var j=xi[px],J=pinv?pinv[j]:j;if(!(0>J))for(p0=gptr[J],p1=gptr[J+1],x[j]=divideScalar(x[j],gvalues[lo?p0:p1-1]),p=lo?p0+1:p0,q=lo?p1:p1-1;q>p;p++){var i=gindex[p];x[i]=subtract(x[i],multiply(gvalues[p],x[j]))}}return top};return cs_spsolve}exports.name="cs_spsolve",exports.path="sparse",exports.factory=factory},{"../../arithmetic/divideScalar":471,"../../arithmetic/multiply":485,"../../arithmetic/subtract":494,"./cs_reach":459}],461:[function(require,module,exports){"use strict";function factory(type,config,load){var cs_amd=load(require("./cs_amd")),cs_permute=load(require("./cs_permute")),cs_etree=load(require("./cs_etree")),cs_post=load(require("./cs_post")),cs_counts=load(require("./cs_counts")),cs_sqr=function(order,a,qr){var k,aptr=a._ptr,asize=a._size,n=asize[1],s={};if(s.q=cs_amd(order,a),order&&!s.q)return null;if(qr){var c=order?cs_permute(a,null,s.q,0):a;s.parent=cs_etree(c,1);var post=cs_post(s.parent,n);if(s.cp=cs_counts(c,s.parent,post,1),c&&s.parent&&s.cp&&_vcount(c,s))for(s.unz=0,k=0;n>k;k++)s.unz+=s.cp[k]}else s.unz=4*aptr[n]+n,s.lnz=s.unz;return s},_vcount=function(a,s){var aptr=a._ptr,aindex=a._index,asize=a._size,m=asize[0],n=asize[1];s.pinv=[],s.leftmost=[];var i,k,p,p0,p1,parent=s.parent,pinv=s.pinv,leftmost=s.leftmost,w=[],next=0,head=m,tail=m+n,nque=m+2*n;for(k=0;n>k;k++)w[head+k]=-1,w[tail+k]=-1,w[nque+k]=0;for(i=0;m>i;i++)leftmost[i]=-1;for(k=n-1;k>=0;k--)for(p0=aptr[k],p1=aptr[k+1],p=p0;p1>p;p++)leftmost[aindex[p]]=k;for(i=m-1;i>=0;i--)pinv[i]=-1,k=leftmost[i],-1!=k&&(0===w[nque+k]++&&(w[tail+k]=i),w[next+i]=w[head+k],w[head+k]=i);for(s.lnz=0,s.m2=m,k=0;n>k;k++)if(i=w[head+k],s.lnz++,0>i&&(i=s.m2++),pinv[i]=k,!(--nque[k]<=0)){s.lnz+=w[nque+k];var pa=parent[k];-1!=pa&&(0===w[nque+pa]&&(w[tail+pa]=w[tail+k]),w[next+w[tail+k]]=w[head+pa],w[head+pa]=w[next+i],w[nque+pa]+=w[nque+k])}for(i=0;m>i;i++)pinv[i]<0&&(pinv[i]=k++);return!0};return cs_sqr}exports.name="cs_sqr",exports.path="sparse",exports.factory=factory},{"./cs_amd":446,"./cs_counts":447,"./cs_etree":449,"./cs_permute":457,"./cs_post":458}],462:[function(require,module,exports){"use strict";function factory(){var cs_tdfs=function(j,k,w,head,next,post,stack){var top=0;for(w[stack]=j;top>=0;){var p=w[stack+top],i=w[head+p];-1==i?(top--,post[k++]=p):(w[head+p]=w[next+i],++top,w[stack+top]=i)}return k};return cs_tdfs}exports.name="cs_tdfs",exports.path="sparse",exports.factory=factory},{}],463:[function(require,module,exports){"use strict";function factory(type,config,load){var cs_flip=load(require("./cs_flip")),cs_unflip=function(i){return 0>i?cs_flip(i):i};return cs_unflip}exports.name="cs_unflip",exports.path="sparse",exports.factory=factory},{"./cs_flip":451}],464:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var abs=typed("abs",{number:Math.abs,Complex:function(x){var re=Math.abs(x.re),im=Math.abs(x.im);if(1e3>re&&1e3>im)return Math.sqrt(re*re+im*im);if(re>=im){var i=im/re;return re*Math.sqrt(1+i*i)}var j=re/im;return im*Math.sqrt(1+j*j)},BigNumber:function(x){return x.abs()},Fraction:function(x){return x.abs()},"Array | Matrix":function(x){return deepMap(x,abs,!0)},Unit:function(x){return x.abs()}});return abs.toTex="\\left|${args[0]}\\right|",abs}var deepMap=require("../../utils/collection/deepMap");exports.name="abs",exports.factory=factory},{"../../utils/collection/deepMap":698}],465:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),addScalar=load(require("./addScalar")),latex=require("../../utils/latex.js"),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm04=load(require("../../type/matrix/utils/algorithm04")),algorithm10=load(require("../../type/matrix/utils/algorithm10")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),add=typed("add",extend({"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm04(x,y,addScalar);break;default:c=algorithm01(y,x,addScalar,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm01(x,y,addScalar,!1);break;default:c=algorithm13(x,y,addScalar)}}return c},"Array, Array":function(x,y){return add(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return add(matrix(x),y)},"Matrix, Array":function(x,y){return add(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm10(x,y,addScalar,!1);break;default:c=algorithm14(x,y,addScalar,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm10(y,x,addScalar,!0);break;default:c=algorithm14(y,x,addScalar,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,addScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,addScalar,!0).valueOf()}},addScalar.signatures));return add.toTex="\\left(${args[0]}"+latex.operators.add+"${args[1]}\\right)",add}var extend=require("../../utils/object").extend;exports.name="add",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm04":650,"../../type/matrix/utils/algorithm10":656,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex.js":705,"../../utils/object":707,"./addScalar":466}],466:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var add=typed("add",{"number, number":function(x,y){return x+y},"Complex, Complex":function(x,y){return new type.Complex(x.re+y.re,x.im+y.im)},"BigNumber, BigNumber":function(x,y){return x.plus(y)},"Fraction, Fraction":function(x,y){return x.add(y)},"Unit, Unit":function(x,y){if(null==x.value)throw new Error("Parameter x contains a unit with undefined value");if(null==y.value)throw new Error("Parameter y contains a unit with undefined value");if(!x.equalBase(y))throw new Error("Units do not match");var res=x.clone();return res.value=add(res.value,y.value),res.fixPrefix=!1,res}});return add}exports.factory=factory},{}],467:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _cbrtNumber(x){if(0===x)return x;var result,negate=0>x;return negate&&(x=-x),isFinite(x)?(result=Math.exp(Math.log(x)/3),result=(x/(result*result)+2*result)/3):result=x,negate?-result:result}function _cbrtComplex(x,allRoots){var polar=x.toPolar(),principal=complexMultiply(new type.Complex(_cbrtNumber(polar.r),0),complexExp(new type.Complex(0,polar.phi/3)));if(allRoots){var all=[principal,complexMultiply(new type.Complex(_cbrtNumber(polar.r),0),complexExp(new type.Complex(0,polar.phi/3+2*Math.PI/3))),complexMultiply(new type.Complex(_cbrtNumber(polar.r),0),complexExp(new type.Complex(0,polar.phi/3-2*Math.PI/3)))];return"array"===config.matrix?all:matrix(all)}return principal}function _cbrtBigNumber(x){if(x.isZero())return x;var result,negate=x.isNegative();return negate&&(x=x.neg()),x.isFinite()?(result=x.ln().div(3).exp(),result=x.div(result.times(result)).plus(result.times(2)).div(3)):result=1/0,negate?result.neg():result}function _cbrtUnit(x){if(x.value&&x.value.isComplex){var result=x.clone();return result.value=1,result=result.pow(1/3),result.value=_cbrtComplex(x.value),result}var negate=isNegative(x.value);negate&&(x.value=unaryMinus(x.value));var third;third=x.value&&x.value.isBigNumber?new type.BigNumber(1).div(3):x.value&&x.value.isFraction?new type.Fraction(1,3):1/3;var result=x.pow(third);return negate&&(result.value=unaryMinus(result.value)),result}var unaryMinus=load(require("./unaryMinus")),isNegative=load(require("../utils/isNegative")),matrix=load(require("../../type/matrix/function/matrix")),complexMultiply=typed.find(load(require("./multiplyScalar")),["Complex,Complex"]),complexExp=typed.find(load(require("./exp")),["Complex"]),cbrt=typed("cbrt",{number:_cbrtNumber,Complex:_cbrtComplex,"Complex, boolean":_cbrtComplex,BigNumber:_cbrtBigNumber,Unit:_cbrtUnit,"Array | Matrix":function(x){return deepMap(x,cbrt,!0)}});return cbrt.toTex="\\sqrt[3]{${args[0]}}",cbrt}var deepMap=require("../../utils/collection/deepMap");exports.name="cbrt",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/collection/deepMap":698,"../utils/isNegative":609,"./exp":475,"./multiplyScalar":486,"./unaryMinus":495}],468:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var ceil=typed("ceil",{number:Math.ceil,Complex:function(x){return new type.Complex(Math.ceil(x.re),Math.ceil(x.im))},BigNumber:function(x){return x.ceil()},Fraction:function(x){return x.ceil()},"Array | Matrix":function(x){return deepMap(x,ceil,!0)}});return ceil.toTex="\\left\\lceil${args[0]}\\right\\rceil",ceil}var deepMap=require("../../utils/collection/deepMap");exports.name="ceil",exports.factory=factory},{"../../utils/collection/deepMap":698}],469:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var complexMultiply=typed.find(load(require("./multiplyScalar")),["Complex,Complex"]),cube=typed("cube",{number:function(x){return x*x*x},Complex:function(x){return complexMultiply(complexMultiply(x,x),x)},BigNumber:function(x){return x.times(x).times(x)},Fraction:function(x){return x.mul(x).mul(x)},"Array | Matrix":function(x){return deepMap(x,cube,!0)},Unit:function(x){return x.pow(3)}});return cube.toTex="\\left(${args[0]}\\right)^3",cube}var deepMap=require("../../utils/collection/deepMap");exports.name="cube",exports.factory=factory},{"../../utils/collection/deepMap":698,"./multiplyScalar":486}],470:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var divideScalar=load(require("./divideScalar")),multiply=load(require("./multiply")),inv=load(require("../matrix/inv")),matrix=load(require("../../type/matrix/function/matrix")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),divide=typed("divide",extend({"Array | Matrix, Array | Matrix":function(x,y){return multiply(x,inv(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,divideScalar,!1);break;case"dense":c=algorithm14(x,y,divideScalar,!1)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,divideScalar,!1).valueOf()},"any, Array | Matrix":function(x,y){return multiply(x,inv(y))}},divideScalar.signatures));return divide.toTex="\\frac{${args[0]}}{${args[1]}}",divide}var extend=require("../../utils/object").extend;exports.name="divide",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm14":660,"../../utils/object":707,"../matrix/inv":533,"./divideScalar":471,"./multiply":485}],471:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _divideComplex(x,y){var den=y.re*y.re+y.im*y.im;return 0!=den?new type.Complex((x.re*y.re+x.im*y.im)/den,(x.im*y.re-x.re*y.im)/den):new type.Complex(0!=x.re?x.re/0:0,0!=x.im?x.im/0:0)}var multiplyScalar=load(require("./multiplyScalar")),divideScalar=typed("divide",{"number, number":function(x,y){return x/y},"Complex, Complex":_divideComplex,"BigNumber, BigNumber":function(x,y){return x.div(y)},"Fraction, Fraction":function(x,y){return x.div(y)},"Unit, number | Fraction | BigNumber":function(x,y){var res=x.clone();return res.value=divideScalar(null===res.value?res._normalize(1):res.value,y),res},"number | Fraction | BigNumber, Unit":function(x,y){var res=y.pow(-1);return res.value=multiplyScalar(null===res.value?res._normalize(1):res.value,x),res},"Unit, Unit":function(x,y){return x.divide(y)}});return divideScalar}exports.factory=factory},{"./multiplyScalar":486}],472:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),divideScalar=load(require("./divideScalar")),latex=require("../../utils/latex"),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),dotDivide=typed("dotDivide",{"any, any":divideScalar,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,divideScalar,!1);break;default:c=algorithm02(y,x,divideScalar,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,divideScalar,!1);break;default:c=algorithm13(x,y,divideScalar)}}return c},"Array, Array":function(x,y){return dotDivide(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return dotDivide(matrix(x),y)},"Matrix, Array":function(x,y){return dotDivide(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,divideScalar,!1);break;default:c=algorithm14(x,y,divideScalar,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,divideScalar,!0);break;default:c=algorithm14(y,x,divideScalar,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,divideScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,divideScalar,!0).valueOf()}});return dotDivide.toTex="\\left(${args[0]}"+latex.operators.dotDivide+"${args[1]}\\right)",dotDivide}exports.name="dotDivide",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"./divideScalar":471}],473:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),multiplyScalar=load(require("./multiplyScalar")),latex=require("../../utils/latex"),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm09=load(require("../../type/matrix/utils/algorithm09")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),dotMultiply=typed("dotMultiply",{"any, any":multiplyScalar,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm09(x,y,multiplyScalar,!1);break;default:c=algorithm02(y,x,multiplyScalar,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm02(x,y,multiplyScalar,!1);break;default:c=algorithm13(x,y,multiplyScalar)}}return c},"Array, Array":function(x,y){return dotMultiply(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return dotMultiply(matrix(x),y)},"Matrix, Array":function(x,y){return dotMultiply(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,multiplyScalar,!1);break;default:c=algorithm14(x,y,multiplyScalar,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm11(y,x,multiplyScalar,!0);break;default:c=algorithm14(y,x,multiplyScalar,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,multiplyScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,multiplyScalar,!0).valueOf()}});return dotMultiply.toTex="\\left(${args[0]}"+latex.operators.dotMultiply+"${args[1]}\\right)",dotMultiply}exports.name="dotMultiply",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm09":655,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"./multiplyScalar":486}],474:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),pow=load(require("./pow")),latex=require("../../utils/latex"),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),dotPow=typed("dotPow",{"any, any":pow,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,pow,!1);break;default:c=algorithm03(y,x,pow,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,pow,!1);break;default:c=algorithm13(x,y,pow)}}return c},"Array, Array":function(x,y){return dotPow(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return dotPow(matrix(x),y)},"Matrix, Array":function(x,y){return dotPow(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,dotPow,!1);break;default:c=algorithm14(x,y,dotPow,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,dotPow,!0);break;default:c=algorithm14(y,x,dotPow,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,dotPow,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,dotPow,!0).valueOf()}});return dotPow.toTex="\\left(${args[0]}"+latex.operators.dotPow+"${args[1]}\\right)",dotPow}exports.name="dotPow",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"./pow":489}],475:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var exp=typed("exp",{number:Math.exp,Complex:function(x){var r=Math.exp(x.re);return new type.Complex(r*Math.cos(x.im),r*Math.sin(x.im))},BigNumber:function(x){return x.exp()},"Array | Matrix":function(x){return deepMap(x,exp)}});return exp.toTex="\\exp\\left(${args[0]}\\right)",exp}var deepMap=require("../../utils/collection/deepMap");exports.name="exp",exports.factory=factory},{"../../utils/collection/deepMap":698}],476:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var fix=typed("fix",{number:function(x){return x>0?Math.floor(x):Math.ceil(x)},Complex:function(x){return new type.Complex(x.re>0?Math.floor(x.re):Math.ceil(x.re),x.im>0?Math.floor(x.im):Math.ceil(x.im))},BigNumber:function(x){return x.isNegative()?x.ceil():x.floor()},Fraction:function(x){return x.s<0?x.ceil():x.floor()},"Array | Matrix":function(x){return deepMap(x,fix,!0)}});return fix.toTex="\\mathrm{${name}}\\left(${args}\\right)",fix}var deepMap=require("../../utils/collection/deepMap");exports.name="fix",exports.factory=factory},{"../../utils/collection/deepMap":698}],477:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var floor=typed("floor",{number:Math.floor,Complex:function(x){return new type.Complex(Math.floor(x.re),Math.floor(x.im))},BigNumber:function(x){return x.floor()},Fraction:function(x){return x.floor()},"Array | Matrix":function(x){return deepMap(x,floor,!0)}});return floor.toTex="\\left\\lfloor${args[0]}\\right\\rfloor",floor}var deepMap=require("../../utils/collection/deepMap");exports.name="floor",exports.factory=factory},{"../../utils/collection/deepMap":698}],478:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _gcdBigNumber(a,b){if(!a.isInt()||!b.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var zero=new type.BigNumber(0);!b.isZero();){var r=a.mod(b);a=b,b=r}return a.lt(zero)?a.neg():a}var matrix=load(require("../../type/matrix/function/matrix")),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm04=load(require("../../type/matrix/utils/algorithm04")),algorithm10=load(require("../../type/matrix/utils/algorithm10")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),gcd=typed("gcd",{"number, number":_gcd,"BigNumber, BigNumber":_gcdBigNumber,"Fraction, Fraction":function(x,y){return x.gcd(y)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm04(x,y,gcd);break;default:c=algorithm01(y,x,gcd,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm01(x,y,gcd,!1);break;default:c=algorithm13(x,y,gcd)}}return c},"Array, Array":function(x,y){return gcd(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return gcd(matrix(x),y)},"Matrix, Array":function(x,y){return gcd(x,matrix(y))},"Matrix, number | BigNumber":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm10(x,y,gcd,!1);break;default:c=algorithm14(x,y,gcd,!1)}return c},"number | BigNumber, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm10(y,x,gcd,!0);break;default:c=algorithm14(y,x,gcd,!0)}return c},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,gcd,!1).valueOf()},"number | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,gcd,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(a,b,args){for(var res=gcd(a,b),i=0;i<args.length;i++)res=gcd(res,args[i]);return res}});return gcd.toTex="\\gcd\\left(${args}\\right)",gcd}function _gcd(a,b){if(!isInteger(a)||!isInteger(b))throw new Error("Parameters in function gcd must be integer numbers");for(var r;0!=b;)r=a%b,a=b,b=r;return 0>a?-a:a}var isInteger=require("../../utils/number").isInteger;exports.name="gcd",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm04":650,"../../type/matrix/utils/algorithm10":656,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/number":706}],479:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _hypot(args){for(var result=0,largest=0,i=0;i<args.length;i++){var value=abs(args[i]);smaller(largest,value)?(result=multiply(result,multiply(divide(largest,value),divide(largest,value))),result=add(result,1),largest=value):result=add(result,isPositive(value)?multiply(divide(value,largest),divide(value,largest)):value)}return multiply(largest,sqrt(result))}var abs=load(require("./abs")),add=load(require("./addScalar")),divide=load(require("./divideScalar")),multiply=load(require("./multiplyScalar")),sqrt=load(require("./sqrt")),smaller=load(require("../relational/smaller")),isPositive=load(require("../utils/isPositive")),hypot=typed("hypot",{"... number | BigNumber":_hypot,Array:function(x){return hypot.apply(hypot,flatten(x))},Matrix:function(x){return hypot.apply(hypot,flatten(x.toArray()))}});return hypot.toTex="\\hypot\\left(${args}\\right)",hypot}var flatten=require("../../utils/array").flatten;exports.name="hypot",exports.factory=factory},{"../../utils/array":670,"../relational/smaller":561,"../utils/isPositive":611,"./abs":464,"./addScalar":466,"./divideScalar":471,"./multiplyScalar":486,"./sqrt":492}],480:[function(require,module,exports){module.exports=[require("./abs"),require("./add"),require("./addScalar"),require("./cbrt"),require("./ceil"),require("./cube"),require("./divide"),require("./dotDivide"),require("./dotMultiply"),require("./dotPow"),require("./exp"),require("./fix"),require("./floor"),require("./gcd"),require("./hypot"),require("./lcm"),require("./log"),require("./log10"),require("./mod"),require("./multiply"),require("./norm"),require("./nthRoot"),require("./pow"),require("./round"),require("./sign"),require("./sqrt"),require("./square"),require("./subtract"),require("./unaryMinus"),require("./unaryPlus"),require("./xgcd")]},{"./abs":464,"./add":465,"./addScalar":466,"./cbrt":467,"./ceil":468,"./cube":469,"./divide":470,"./dotDivide":472,"./dotMultiply":473,"./dotPow":474,"./exp":475,"./fix":476,"./floor":477,"./gcd":478,"./hypot":479,"./lcm":481,"./log":482,"./log10":483,"./mod":484,"./multiply":485,"./norm":487,"./nthRoot":488,"./pow":489,"./round":490,"./sign":491,"./sqrt":492,"./square":493,"./subtract":494,"./unaryMinus":495,"./unaryPlus":496,"./xgcd":497}],481:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _lcmBigNumber(a,b){if(!a.isInt()||!b.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(a.isZero()||b.isZero())return new type.BigNumber(0);for(var prod=a.times(b);!b.isZero();){var t=b;b=a.mod(t),a=t}return prod.div(a).abs()}var matrix=load(require("../../type/matrix/function/matrix")),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm06=load(require("../../type/matrix/utils/algorithm06")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),lcm=typed("lcm",{"number, number":_lcm,"BigNumber, BigNumber":_lcmBigNumber,"Fraction, Fraction":function(x,y){return 0===x.n&&0===y.n?new type.Fraction(0):x.mul(y).abs().div(x.gcd(y))},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm06(x,y,lcm);break;default:c=algorithm02(y,x,lcm,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm02(x,y,lcm,!1);break;default:c=algorithm13(x,y,lcm)}}return c},"Array, Array":function(x,y){return lcm(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return lcm(matrix(x),y)},"Matrix, Array":function(x,y){return lcm(x,matrix(y))},"Matrix, number | BigNumber":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,lcm,!1);break;default:c=algorithm14(x,y,lcm,!1)}return c},"number | BigNumber, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm11(y,x,lcm,!0);break;default:c=algorithm14(y,x,lcm,!0)}return c},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,lcm,!1).valueOf()},"number | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,lcm,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(a,b,args){for(var res=lcm(a,b),i=0;i<args.length;i++)res=lcm(res,args[i]);return res}});return lcm.toTex="\\mathrm{${name}}\\left(${args}\\right)",lcm}function _lcm(a,b){if(!isInteger(a)||!isInteger(b))throw new Error("Parameters in function lcm must be integer numbers");if(0==a||0==b)return 0;for(var t,prod=a*b;0!=b;)t=b,b=a%t,a=t;return Math.abs(prod/a)}var isInteger=require("../../utils/number").isInteger;exports.name="lcm",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm06":652,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/number":706}],482:[function(require,module,exports){"use strict";function factory(type,config,load,typed){
function _logNumber(x){return x>=0||config.predictable?Math.log(x):log(new type.Complex(x,0))}function _logComplex(x){return new type.Complex(Math.log(Math.sqrt(x.re*x.re+x.im*x.im)),Math.atan2(x.im,x.re))}var divideScalar=load(require("./divideScalar")),log=typed("log",{number:_logNumber,Complex:_logComplex,BigNumber:function(x){return!x.isNegative()||config.predictable?x.ln():_logComplex(new type.Complex(x.toNumber(),0))},"Array | Matrix":function(x){return deepMap(x,log)},"any, any":function(x,base){return divideScalar(log(x),log(base))}});return log.toTex={1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log}var deepMap=require("../../utils/collection/deepMap");exports.name="log",exports.factory=factory},{"../../utils/collection/deepMap":698,"./divideScalar":471}],483:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _log10Complex(x){return new type.Complex(Math.log(Math.sqrt(x.re*x.re+x.im*x.im))/Math.LN10,Math.atan2(x.im,x.re)/Math.LN10)}var log10=typed("log10",{number:function(x){return x>=0||config.predictable?Math.log(x)/Math.LN10:log10(new type.Complex(x,0))},Complex:_log10Complex,BigNumber:function(x){return!x.isNegative()||config.predictable?x.log():_log10Complex(new type.Complex(x.toNumber(),0))},"Array | Matrix":function(x){return deepMap(x,log10)}});return log10.toTex="\\log_{10}\\left(${args[0]}\\right)",log10}var deepMap=require("../../utils/collection/deepMap");exports.name="log10",exports.factory=factory},{"../../utils/collection/deepMap":698}],484:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _mod(x,y){if(y>0)return x-y*Math.floor(x/y);if(0===y)return x;throw new Error("Cannot calculate mod for a negative divisor")}var matrix=load(require("../../type/matrix/function/matrix")),latex=require("../../utils/latex"),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm05=load(require("../../type/matrix/utils/algorithm05")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),mod=typed("mod",{"number, number":_mod,"BigNumber, BigNumber":function(x,y){return y.isZero()?x:x.mod(y)},"Fraction, Fraction":function(x,y){return x.mod(y)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm05(x,y,mod,!1);break;default:c=algorithm02(y,x,mod,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,mod,!1);break;default:c=algorithm13(x,y,mod)}}return c},"Array, Array":function(x,y){return mod(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return mod(matrix(x),y)},"Matrix, Array":function(x,y){return mod(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,mod,!1);break;default:c=algorithm14(x,y,mod,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,mod,!0);break;default:c=algorithm14(y,x,mod,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,mod,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,mod,!0).valueOf()}});return mod.toTex="\\left(${args[0]}"+latex.operators.mod+"${args[1]}\\right)",mod}exports.name="mod",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm05":651,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705}],485:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),addScalar=load(require("./addScalar")),multiplyScalar=load(require("./multiplyScalar")),equalScalar=load(require("../relational/equalScalar")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),DenseMatrix=type.DenseMatrix,SparseMatrix=type.SparseMatrix,multiply=typed("multiply",extend({"Array, Array":function(x,y){_validateMatrixDimensions(array.size(x),array.size(y));var m=multiply(matrix(x),matrix(y));return m&&m.isMatrix===!0?m.valueOf():m},"Matrix, Matrix":function(x,y){var xsize=x.size(),ysize=y.size();return _validateMatrixDimensions(xsize,ysize),1===xsize.length?1===ysize.length?_multiplyVectorVector(x,y,xsize[0]):_multiplyVectorMatrix(x,y):1===ysize.length?_multiplyMatrixVector(x,y):_multiplyMatrixMatrix(x,y)},"Matrix, Array":function(x,y){return multiply(x,matrix(y))},"Array, Matrix":function(x,y){return multiply(matrix(x,y.storage()),y)},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,multiplyScalar,!1);break;case"dense":c=algorithm14(x,y,multiplyScalar,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm11(y,x,multiplyScalar,!0);break;case"dense":c=algorithm14(y,x,multiplyScalar,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,multiplyScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,multiplyScalar,!0).valueOf()}},multiplyScalar.signatures)),_validateMatrixDimensions=function(size1,size2){switch(size1.length){case 1:switch(size2.length){case 1:if(size1[0]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(size1[0]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+size1[0]+") must match Matrix rows ("+size2[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+size2.length+" dimensions)")}break;case 2:switch(size2.length){case 1:if(size1[1]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+size1[1]+") must match Vector length ("+size2[0]+")");break;case 2:if(size1[1]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+size1[1]+") must match Matrix B rows ("+size2[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+size2.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+size1.length+" dimensions)")}},_multiplyVectorVector=function(a,b,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var dt,adata=a._data,adt=a._datatype,bdata=b._data,bdt=b._datatype,af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=mf(adata[0],bdata[0]),i=1;n>i;i++)c=af(c,mf(adata[i],bdata[i]));return c},_multiplyVectorMatrix=function(a,b){switch(b.storage()){case"dense":return _multiplyVectorDenseMatrix(a,b)}throw new Error("Not implemented")},_multiplyVectorDenseMatrix=function(a,b){var dt,adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bsize=b._size,bdt=b._datatype,alength=asize[0],bcolumns=bsize[1],af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=[],j=0;bcolumns>j;j++){for(var sum=mf(adata[0],bdata[0][j]),i=1;alength>i;i++)sum=af(sum,mf(adata[i],bdata[i][j]));c[j]=sum}return 1===bcolumns?c[0]:new DenseMatrix({data:c,size:[bcolumns],datatype:dt})},_multiplyMatrixVector=function(a,b){switch(a.storage()){case"dense":return _multiplyDenseMatrixVector(a,b);case"sparse":return _multiplySparseMatrixVector(a,b)}},_multiplyMatrixMatrix=function(a,b){switch(a.storage()){case"dense":switch(b.storage()){case"dense":return _multiplyDenseMatrixDenseMatrix(a,b);case"sparse":return _multiplyDenseMatrixSparseMatrix(a,b)}break;case"sparse":switch(b.storage()){case"dense":return _multiplySparseMatrixDenseMatrix(a,b);case"sparse":return _multiplySparseMatrixSparseMatrix(a,b)}}},_multiplyDenseMatrixVector=function(a,b){var dt,adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bdt=b._datatype,arows=asize[0],acolumns=asize[1],af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=[],i=0;arows>i;i++){for(var row=adata[i],sum=mf(row[0],bdata[0]),j=1;acolumns>j;j++)sum=af(sum,mf(row[j],bdata[j]));c[i]=sum}return 1===arows?c[0]:new DenseMatrix({data:c,size:[arows],datatype:dt})},_multiplyDenseMatrixDenseMatrix=function(a,b){var dt,adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bsize=b._size,bdt=b._datatype,arows=asize[0],acolumns=asize[1],bcolumns=bsize[1],af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var c=[],i=0;arows>i;i++){var row=adata[i];c[i]=[];for(var j=0;bcolumns>j;j++){for(var sum=mf(row[0],bdata[0][j]),x=1;acolumns>x;x++)sum=af(sum,mf(row[x],bdata[x][j]));c[i][j]=sum}}return 1===arows&&1===bcolumns?c[0][0]:new DenseMatrix({data:c,size:[arows,bcolumns],datatype:dt})},_multiplyDenseMatrixSparseMatrix=function(a,b){var adata=a._data,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(!bvalues)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var dt,arows=asize[0],bcolumns=bsize[1],af=addScalar,mf=multiplyScalar,eq=equalScalar,zero=0;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]),eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt));for(var cvalues=[],cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:dt}),jb=0;bcolumns>jb;jb++){cptr[jb]=cindex.length;var kb0=bptr[jb],kb1=bptr[jb+1];if(kb1>kb0)for(var last=0,i=0;arows>i;i++){for(var cij,mark=i+1,kb=kb0;kb1>kb;kb++){var ib=bindex[kb];last!==mark?(cij=mf(adata[i][ib],bvalues[kb]),last=mark):cij=af(cij,mf(adata[i][ib],bvalues[kb]))}last!==mark||eq(cij,zero)||(cindex.push(i),cvalues.push(cij))}}return cptr[bcolumns]=cindex.length,1===arows&&1===bcolumns?1===cvalues.length?cvalues[0]:0:c},_multiplySparseMatrixVector=function(a,b){var avalues=a._values,aindex=a._index,aptr=a._ptr,adt=a._datatype;if(!avalues)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var dt,bdata=b._data,bdt=b._datatype,arows=a._size[0],brows=b._size[0],cvalues=[],cindex=[],cptr=[],af=addScalar,mf=multiplyScalar,eq=equalScalar,zero=0;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]),eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt));var x=[],w=[];cptr[0]=0;for(var ib=0;brows>ib;ib++){var vbi=bdata[ib];if(!eq(vbi,zero))for(var ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka1>ka;ka++){var ia=aindex[ka];w[ia]?x[ia]=af(x[ia],mf(vbi,avalues[ka])):(w[ia]=!0,cindex.push(ia),x[ia]=mf(vbi,avalues[ka]))}}for(var p1=cindex.length,p=0;p1>p;p++){var ic=cindex[p];cvalues[p]=x[ic]}return cptr[1]=cindex.length,1===arows?1===cvalues.length?cvalues[0]:0:new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,1],datatype:dt})},_multiplySparseMatrixDenseMatrix=function(a,b){var avalues=a._values,aindex=a._index,aptr=a._ptr,adt=a._datatype;if(!avalues)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var dt,bdata=b._data,bdt=b._datatype,arows=a._size[0],brows=b._size[0],bcolumns=b._size[1],af=addScalar,mf=multiplyScalar,eq=equalScalar,zero=0;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]),eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt));for(var cvalues=[],cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:dt}),x=[],w=[],jb=0;bcolumns>jb;jb++){cptr[jb]=cindex.length;for(var mark=jb+1,ib=0;brows>ib;ib++){var vbij=bdata[ib][jb];if(!eq(vbij,zero))for(var ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka1>ka;ka++){var ia=aindex[ka];w[ia]!==mark?(w[ia]=mark,cindex.push(ia),x[ia]=mf(vbij,avalues[ka])):x[ia]=af(x[ia],mf(vbij,avalues[ka]))}}for(var p0=cptr[jb],p1=cindex.length,p=p0;p1>p;p++){var ic=cindex[p];cvalues[p]=x[ic]}}return cptr[bcolumns]=cindex.length,1===arows&&1===bcolumns?1===cvalues.length?cvalues[0]:0:c},_multiplySparseMatrixSparseMatrix=function(a,b){var dt,avalues=a._values,aindex=a._index,aptr=a._ptr,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bdt=b._datatype,arows=a._size[0],bcolumns=b._size[1],values=avalues&&bvalues,af=addScalar,mf=multiplyScalar;adt&&bdt&&adt===bdt&&"string"==typeof adt&&(dt=adt,af=typed.find(addScalar,[dt,dt]),mf=typed.find(multiplyScalar,[dt,dt]));for(var ka,ka0,ka1,kb,kb0,kb1,ia,ib,cvalues=values?[]:void 0,cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:dt}),x=values?[]:void 0,w=[],jb=0;bcolumns>jb;jb++){cptr[jb]=cindex.length;var mark=jb+1;for(kb0=bptr[jb],kb1=bptr[jb+1],kb=kb0;kb1>kb;kb++)if(ib=bindex[kb],values)for(ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka1>ka;ka++)ia=aindex[ka],w[ia]!==mark?(w[ia]=mark,cindex.push(ia),x[ia]=mf(bvalues[kb],avalues[ka])):x[ia]=af(x[ia],mf(bvalues[kb],avalues[ka]));else for(ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka1>ka;ka++)ia=aindex[ka],w[ia]!==mark&&(w[ia]=mark,cindex.push(ia));if(values)for(var p0=cptr[jb],p1=cindex.length,p=p0;p1>p;p++){var ic=cindex[p];cvalues[p]=x[ic]}}return cptr[bcolumns]=cindex.length,1===arows&&1===bcolumns&&values?1===cvalues.length?cvalues[0]:0:c};return multiply.toTex="\\left(${args[0]}"+latex.operators.multiply+"${args[1]}\\right)",multiply}var extend=require("../../utils/object").extend,array=require("../../utils/array");exports.name="multiply",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm14":660,"../../utils/array":670,"../../utils/latex":705,"../../utils/object":707,"../relational/equalScalar":557,"./addScalar":466,"./multiplyScalar":486}],486:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var multiplyScalar=typed("multiplyScalar",{"number, number":function(x,y){return x*y},"Complex, Complex":function(x,y){return new type.Complex(x.re*y.re-x.im*y.im,x.re*y.im+x.im*y.re)},"BigNumber, BigNumber":function(x,y){return x.times(y)},"Fraction, Fraction":function(x,y){return x.mul(y)},"number | Fraction | BigNumber | Complex, Unit":function(x,y){var res=y.clone();return res.value=null===res.value?res._normalize(x):multiplyScalar(res.value,x),res},"Unit, number | Fraction | BigNumber | Complex":function(x,y){var res=x.clone();return res.value=null===res.value?res._normalize(y):multiplyScalar(res.value,y),res},"Unit, Unit":function(x,y){return x.multiply(y)}});return multiplyScalar}exports.factory=factory},{}],487:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _norm(x,p){var sizeX=x.size();if(1==sizeX.length){if(p===Number.POSITIVE_INFINITY||"inf"===p){var pinf=0;return x.forEach(function(value){var v=abs(value);larger(v,pinf)&&(pinf=v)},!0),pinf}if(p===Number.NEGATIVE_INFINITY||"-inf"===p){var ninf;return x.forEach(function(value){var v=abs(value);ninf&&!smaller(v,ninf)||(ninf=v)},!0),ninf||0}if("fro"===p)return _norm(x,2);if("number"==typeof p&&!isNaN(p)){if(!equalScalar(p,0)){var n=0;return x.forEach(function(value){n=add(pow(abs(value),p),n)},!0),pow(n,1/p)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}if(2==sizeX.length){if(1===p){var c=[],maxc=0;return x.forEach(function(value,index){var j=index[1],cj=add(c[j]||0,abs(value));larger(cj,maxc)&&(maxc=cj),c[j]=cj},!0),maxc}if(p===Number.POSITIVE_INFINITY||"inf"===p){var r=[],maxr=0;return x.forEach(function(value,index){var i=index[0],ri=add(r[i]||0,abs(value));larger(ri,maxr)&&(maxr=ri),r[i]=ri},!0),maxr}if("fro"===p)return sqrt(trace(multiply(transpose(x),x)));if(2===p)throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");throw new Error("Unsupported parameter value")}}var abs=load(require("../arithmetic/abs")),add=load(require("../arithmetic/add")),pow=load(require("../arithmetic/pow")),sqrt=load(require("../arithmetic/sqrt")),multiply=load(require("../arithmetic/multiply")),equalScalar=load(require("../relational/equalScalar")),larger=load(require("../relational/larger")),smaller=load(require("../relational/smaller")),matrix=load(require("../../type/matrix/function/matrix")),trace=load(require("../matrix/trace")),transpose=load(require("../matrix/transpose")),complexAbs=typed.find(abs,["Complex"]),norm=typed("norm",{number:Math.abs,Complex:complexAbs,BigNumber:function(x){return x.abs()},"boolean | null":function(x){return Math.abs(x)},Array:function(x){return _norm(matrix(x),2)},Matrix:function(x){return _norm(x,2)},"number | Complex | BigNumber | boolean | null, number | BigNumber | string":function(x){return norm(x)},"Array, number | BigNumber | string":function(x,p){return _norm(matrix(x),p)},"Matrix, number | BigNumber | string":function(x,p){return _norm(x,p)}});return norm.toTex={1:"\\left\\|${args[0]}\\right\\|",2:"\\mathrm{${name}}\\left(${args}\\right)"},norm}exports.name="norm",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../arithmetic/abs":464,"../arithmetic/add":465,"../arithmetic/multiply":485,"../arithmetic/pow":489,"../arithmetic/sqrt":492,"../matrix/trace":540,"../matrix/transpose":541,"../relational/equalScalar":557,"../relational/larger":559,"../relational/smaller":561}],488:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _bigNthRoot(a,root){var precision=type.BigNumber.precision,Big=type.BigNumber.constructor({precision:precision+2}),zero=new type.BigNumber(0),one=new Big(1),inv=root.isNegative();if(inv&&(root=root.neg()),root.isZero())throw new Error("Root must be non-zero");if(a.isNegative()&&!root.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(a.isZero())return zero;if(!a.isFinite())return inv?zero:a;var x=a.abs().pow(one.div(root));return x=a.isNeg()?x.neg():x,new type.BigNumber((inv?one.div(x):x).toPrecision(precision))}var matrix=load(require("../../type/matrix/function/matrix")),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm06=load(require("../../type/matrix/utils/algorithm06")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),nthRoot=typed("nthRoot",{number:function(x){return _nthRoot(x,2)},"number, number":_nthRoot,BigNumber:function(x){return _bigNthRoot(x,new type.BigNumber(2))},Complex:function(x){return _nthComplexRoot(x,2)},"Complex, number":_nthComplexRoot,"BigNumber, BigNumber":_bigNthRoot,"Array | Matrix":function(x){return nthRoot(x,2)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":if(1!==y.density())throw new Error("Root must be non-zero");c=algorithm06(x,y,nthRoot);break;default:c=algorithm02(y,x,nthRoot,!0)}break;default:switch(y.storage()){case"sparse":if(1!==y.density())throw new Error("Root must be non-zero");c=algorithm01(x,y,nthRoot,!1);break;default:c=algorithm13(x,y,nthRoot)}}return c},"Array, Array":function(x,y){return nthRoot(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return nthRoot(matrix(x),y)},"Matrix, Array":function(x,y){return nthRoot(x,matrix(y))},"Matrix, number | BigNumber":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,nthRoot,!1);break;default:c=algorithm14(x,y,nthRoot,!1)}return c},"number | BigNumber, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":if(1!==y.density())throw new Error("Root must be non-zero");c=algorithm11(y,x,nthRoot,!0);break;default:c=algorithm14(y,x,nthRoot,!0)}return c},"Array, number | BigNumber":function(x,y){return nthRoot(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return nthRoot(x,matrix(y)).valueOf()}});return nthRoot.toTex="\\sqrt[${args[1]}]{${args[0]}}",nthRoot}function _nthRoot(a,root){var inv=0>root;if(inv&&(root=-root),0===root)throw new Error("Root must be non-zero");if(0>a&&Math.abs(root)%2!=1)throw new Error("Root must be odd when a is negative.");if(0==a)return 0;if(!isFinite(a))return inv?0:a;var x=Math.pow(Math.abs(a),1/root);return x=0>a?-x:x,inv?1/x:x}function _nthComplexRoot(a,root){if(0>root)throw new Error("Root must be greater than zero");if(0===root)throw new Error("Root must be non-zero");if(root%1!==0)throw new Error("Root must be an integer");for(var polar=a.toPolar(),roots=[],r=Math.pow(polar.r,1/root),k=0;root>k;k++)roots.push({r:r,phi:(polar.phi+2*Math.PI*k)/root});return roots}exports.name="nthRoot",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm06":652,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660}],489:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _pow(x,y){return isInteger(y)||x>=0||config.predictable?Math.pow(x,y):_powComplex(new type.Complex(x,0),new type.Complex(y,0))}function _powComplex(x,y){return exp(multiply(log(x),y))}function _powArray(x,y){if(!isInteger(y)||0>y)throw new TypeError("For A^b, b must be a positive integer (value is "+y+")");var s=size(x);if(2!=s.length)throw new Error("For A^b, A must be 2 dimensional (A has "+s.length+" dimensions)");if(s[0]!=s[1])throw new Error("For A^b, A must be square (size is "+s[0]+"x"+s[1]+")");for(var res=eye(s[0]).valueOf(),px=x;y>=1;)1==(1&y)&&(res=multiply(px,res)),y>>=1,px=multiply(px,px);return res}function _powMatrix(x,y){return matrix(_powArray(x.valueOf(),y))}var latex=require("../../utils/latex"),exp=load(require("./exp")),eye=load(require("../matrix/eye")),log=load(require("./log")),multiply=load(require("./multiply")),matrix=load(require("../../type/matrix/function/matrix")),pow=typed("pow",{"number, number":_pow,"Complex, Complex":_powComplex,"BigNumber, BigNumber":function(x,y){return y.isInteger()||x>=0||config.predictable?x.pow(y):_powComplex(new type.Complex(x.toNumber(),0),new type.Complex(y.toNumber(),0))},"Fraction, Fraction":function(x,y){if(1!==y.d){if(config.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return _pow(x.valueOf(),y.valueOf())}return x.pow(y)},"Array, number":_powArray,"Array, BigNumber":function(x,y){return _powArray(x,y.toNumber())},"Matrix, number":_powMatrix,"Matrix, BigNumber":function(x,y){return _powMatrix(x,y.toNumber())},"Unit, number":function(x,y){return x.pow(y)}});return pow.toTex="\\left(${args[0]}\\right)"+latex.operators.pow+"{${args[1]}}",pow}var isInteger=require("../../utils/number").isInteger,size=require("../../utils/array").size;exports.name="pow",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/latex":705,"../../utils/number":706,"../matrix/eye":530,"./exp":475,"./log":482,"./multiply":485}],490:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),equalScalar=load(require("../relational/equalScalar")),zeros=load(require("../matrix/zeros")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),round=typed("round",{number:Math.round,"number, number":function(x,n){if(!isInteger(n))throw new TypeError(NO_INT);if(0>n||n>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return _round(x,n)},Complex:function(x){return new type.Complex(Math.round(x.re),Math.round(x.im))},"Complex, number":function(x,n){return new type.Complex(_round(x.re,n),_round(x.im,n))},"Complex, BigNumber":function(x,n){if(!n.isInteger())throw new TypeError(NO_INT);var _n=n.toNumber();return new type.Complex(_round(x.re,_n),_round(x.im,_n))},"number, BigNumber":function(x,n){if(!n.isInteger())throw new TypeError(NO_INT);return new type.BigNumber(x).toDecimalPlaces(n.toNumber())},BigNumber:function(x){return x.toDecimalPlaces(0)},"BigNumber, BigNumber":function(x,n){if(!n.isInteger())throw new TypeError(NO_INT);return x.toDecimalPlaces(n.toNumber())},Fraction:function(x){return x.round()},"Array | Matrix":function(x){return deepMap(x,round,!0)},"Matrix, number | BigNumber":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,round,!1);break;default:c=algorithm14(x,y,round,!1)}return c},"number | Complex | BigNumber, Matrix":function(x,y){if(!equalScalar(x,0)){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,round,!0);break;default:c=algorithm14(y,x,round,!0)}return c}return zeros(y.size(),y.storage())},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,round,!1).valueOf()},"number | Complex | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,round,!0).valueOf()}});return round.toTex={1:"\\left\\lfloor${args[0]}\\right\\rceil",2:"\\mathrm{${name}}\\left(${args}\\right)"},round}function _round(value,decimals){return parseFloat(toFixed(value,decimals))}var isInteger=require("../../utils/number").isInteger,toFixed=require("../../utils/number").toFixed,deepMap=require("../../utils/collection/deepMap"),NO_INT="Number of decimals in function round must be an integer";exports.name="round",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm14":660,"../../utils/collection/deepMap":698,"../../utils/number":706,"../matrix/zeros":542,"../relational/equalScalar":557}],491:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var sign=typed("sign",{number:number.sign,Complex:function(x){var abs=Math.sqrt(x.re*x.re+x.im*x.im);return new type.Complex(x.re/abs,x.im/abs)},BigNumber:function(x){return new type.BigNumber(x.cmp(0))},Fraction:function(x){return new type.Fraction(x.s)},"Array | Matrix":function(x){return deepMap(x,sign,!0)},Unit:function(x){return sign(x.value)}});return sign.toTex="\\mathrm{${name}}\\left(${args}\\right)",sign}var number=require("../../utils/number"),deepMap=require("../../utils/collection/deepMap");exports.name="sign",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/number":706}],492:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _sqrtNumber(x){return x>=0||config.predictable?Math.sqrt(x):_sqrtComplex(new type.Complex(x,0))}function _sqrtComplex(x){var re,im,r=Math.sqrt(x.re*x.re+x.im*x.im);return re=x.re>=0?.5*Math.sqrt(2*(r+x.re)):Math.abs(x.im)/Math.sqrt(2*(r-x.re)),im=x.re<=0?.5*Math.sqrt(2*(r-x.re)):Math.abs(x.im)/Math.sqrt(2*(r+x.re)),x.im>=0?new type.Complex(re,im):new type.Complex(re,-im)}var sqrt=typed("sqrt",{number:_sqrtNumber,Complex:_sqrtComplex,BigNumber:function(x){return!x.isNegative()||config.predictable?x.sqrt():_sqrtNumber(x.toNumber())},"Array | Matrix":function(x){return deepMap(x,sqrt,!0)},Unit:function(x){return x.pow(.5)}});return sqrt.toTex="\\sqrt{${args[0]}}",sqrt}var deepMap=require("../../utils/collection/deepMap");exports.name="sqrt",exports.factory=factory},{"../../utils/collection/deepMap":698}],493:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var square=typed("square",{number:function(x){return x*x},Complex:function(x){return new type.Complex(x.re*x.re-x.im*x.im,x.re*x.im+x.im*x.re)},BigNumber:function(x){return x.times(x)},Fraction:function(x){return x.mul(x)},"Array | Matrix":function(x){return deepMap(x,square,!0)},Unit:function(x){return x.pow(2)}});return square.toTex="\\left(${args[0]}\\right)^2",square}var deepMap=require("../../utils/collection/deepMap");exports.name="square",exports.factory=factory},{"../../utils/collection/deepMap":698}],494:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),addScalar=load(require("./addScalar")),unaryMinus=load(require("./unaryMinus")),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm05=load(require("../../type/matrix/utils/algorithm05")),algorithm10=load(require("../../type/matrix/utils/algorithm10")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),subtract=typed("subtract",{"number, number":function(x,y){return x-y},"Complex, Complex":function(x,y){return new type.Complex(x.re-y.re,x.im-y.im)},"BigNumber, BigNumber":function(x,y){return x.minus(y)},"Fraction, Fraction":function(x,y){return x.sub(y)},"Unit, Unit":function(x,y){if(null==x.value)throw new Error("Parameter x contains a unit with undefined value");if(null==y.value)throw new Error("Parameter y contains a unit with undefined value");if(!x.equalBase(y))throw new Error("Units do not match");var res=x.clone();return res.value=subtract(res.value,y.value),res.fixPrefix=!1,res},"Matrix, Matrix":function(x,y){var xsize=x.size(),ysize=y.size();if(xsize.length!==ysize.length)throw new DimensionError(xsize.length,ysize.length);var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm05(x,y,subtract);break;default:c=algorithm03(y,x,subtract,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm01(x,y,subtract,!1);break;default:c=algorithm13(x,y,subtract)}}return c},"Array, Array":function(x,y){return subtract(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return subtract(matrix(x),y)},"Matrix, Array":function(x,y){return subtract(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm10(x,unaryMinus(y),addScalar);break;default:c=algorithm14(x,y,subtract)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm10(y,x,subtract,!0);break;default:c=algorithm14(y,x,subtract,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,subtract,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,subtract,!0).valueOf()}});return subtract.toTex="\\left(${args[0]}"+latex.operators.subtract+"${args[1]}\\right)",subtract}var DimensionError=require("../../error/DimensionError");exports.name="subtract",exports.factory=factory},{"../../error/DimensionError":227,"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm05":651,"../../type/matrix/utils/algorithm10":656,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"./addScalar":466,"./unaryMinus":495}],495:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),unaryMinus=typed("unaryMinus",{number:function(x){return-x},Complex:function(x){return new type.Complex(-x.re,-x.im)},BigNumber:function(x){return x.neg()},Fraction:function(x){return x.neg();
},Unit:function(x){var res=x.clone();return res.value=unaryMinus(x.value),res},"Array | Matrix":function(x){return deepMap(x,unaryMinus,!0)}});return unaryMinus.toTex=latex.operators.unaryMinus+"\\left(${args[0]}\\right)",unaryMinus}var deepMap=require("../../utils/collection/deepMap");exports.name="unaryMinus",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/latex":705}],496:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),unaryPlus=typed("unaryPlus",{number:function(x){return x},Complex:function(x){return x.clone()},BigNumber:function(x){return x},Fraction:function(x){return x},Unit:function(x){return x.clone()},"Array | Matrix":function(x){return deepMap(x,unaryPlus,!0)},"boolean | string | null":function(x){return"bignumber"==config.number?new type.BigNumber(+x):+x}});return unaryPlus.toTex=latex.operators.unaryPlus+"\\left(${args[0]}\\right)",unaryPlus}var deepMap=require("../../utils/collection/deepMap");exports.name="unaryPlus",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/latex":705}],497:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _xgcd(a,b){var t,q,r,x=0,lastx=1,y=1,lasty=0;if(!isInteger(a)||!isInteger(b))throw new Error("Parameters in function xgcd must be integer numbers");for(;b;)q=Math.floor(a/b),r=a%b,t=x,x=lastx-q*x,lastx=t,t=y,y=lasty-q*y,lasty=t,a=b,b=r;var res;return res=0>a?[-a,-lastx,-lasty]:[a,a?lastx:0,lasty],"array"===config.matrix?res:matrix(res)}function _xgcdBigNumber(a,b){var t,q,r,zero=new type.BigNumber(0),x=new type.BigNumber(0),lastx=new type.BigNumber(1),y=new type.BigNumber(1),lasty=new type.BigNumber(0);if(!a.isInt()||!b.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!b.isZero();)q=a.div(b).floor(),r=a.mod(b),t=x,x=lastx.minus(q.times(x)),lastx=t,t=y,y=lasty.minus(q.times(y)),lasty=t,a=b,b=r;var res;return res=a.lt(zero)?[a.neg(),lastx.neg(),lasty.neg()]:[a,a.isZero()?0:lastx,lasty],"array"===config.matrix?res:matrix(res)}var matrix=load(require("../../type/matrix/function/matrix")),xgcd=typed("xgcd",{"number, number":_xgcd,"BigNumber, BigNumber":_xgcdBigNumber});return xgcd.toTex="\\mathrm{${name}}\\left(${args}\\right)",xgcd}var isInteger=require("../../utils/number").isInteger;exports.name="xgcd",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/number":706}],498:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm06=load(require("../../type/matrix/utils/algorithm06")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),bitAnd=typed("bitAnd",{"number, number":function(x,y){if(!isInteger(x)||!isInteger(y))throw new Error("Integers expected in function bitAnd");return x&y},"BigNumber, BigNumber":bigBitAnd,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm06(x,y,bitAnd,!1);break;default:c=algorithm02(y,x,bitAnd,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm02(x,y,bitAnd,!1);break;default:c=algorithm13(x,y,bitAnd)}}return c},"Array, Array":function(x,y){return bitAnd(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return bitAnd(matrix(x),y)},"Matrix, Array":function(x,y){return bitAnd(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,bitAnd,!1);break;default:c=algorithm14(x,y,bitAnd,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm11(y,x,bitAnd,!0);break;default:c=algorithm14(y,x,bitAnd,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,bitAnd,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,bitAnd,!0).valueOf()}});return bitAnd.toTex="\\left(${args[0]}"+latex.operators.bitAnd+"${args[1]}\\right)",bitAnd}var isInteger=require("../../utils/number").isInteger,bigBitAnd=require("../../utils/bignumber/bitAnd");exports.name="bitAnd",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm06":652,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/bignumber/bitAnd":680,"../../utils/latex":705,"../../utils/number":706}],499:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),bitNot=typed("bitNot",{number:function(x){if(!isInteger(x))throw new Error("Integer expected in function bitNot");return~x},BigNumber:bigBitNot,"Array | Matrix":function(x){return deepMap(x,bitNot)}});return bitNot.toTex=latex.operators.bitNot+"\\left(${args[0]}\\right)",bitNot}var deepMap=require("../../utils/collection/deepMap"),bigBitNot=require("../../utils/bignumber/bitNot"),isInteger=require("../../utils/number").isInteger;exports.name="bitNot",exports.factory=factory},{"../../utils/bignumber/bitNot":681,"../../utils/collection/deepMap":698,"../../utils/latex":705,"../../utils/number":706}],500:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm04=load(require("../../type/matrix/utils/algorithm04")),algorithm10=load(require("../../type/matrix/utils/algorithm10")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),bitOr=typed("bitOr",{"number, number":function(x,y){if(!isInteger(x)||!isInteger(y))throw new Error("Integers expected in function bitOr");return x|y},"BigNumber, BigNumber":bigBitOr,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm04(x,y,bitOr);break;default:c=algorithm01(y,x,bitOr,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm01(x,y,bitOr,!1);break;default:c=algorithm13(x,y,bitOr)}}return c},"Array, Array":function(x,y){return bitOr(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return bitOr(matrix(x),y)},"Matrix, Array":function(x,y){return bitOr(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm10(x,y,bitOr,!1);break;default:c=algorithm14(x,y,bitOr,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm10(y,x,bitOr,!0);break;default:c=algorithm14(y,x,bitOr,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,bitOr,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,bitOr,!0).valueOf()}});return bitOr.toTex="\\left(${args[0]}"+latex.operators.bitOr+"${args[1]}\\right)",bitOr}var isInteger=require("../../utils/number").isInteger,bigBitOr=require("../../utils/bignumber/bitOr");exports.name="bitOr",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm04":650,"../../type/matrix/utils/algorithm10":656,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/bignumber/bitOr":682,"../../utils/latex":705,"../../utils/number":706}],501:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),bitXor=typed("bitXor",{"number, number":function(x,y){if(!isInteger(x)||!isInteger(y))throw new Error("Integers expected in function bitXor");return x^y},"BigNumber, BigNumber":bigBitXor,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,bitXor);break;default:c=algorithm03(y,x,bitXor,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,bitXor,!1);break;default:c=algorithm13(x,y,bitXor)}}return c},"Array, Array":function(x,y){return bitXor(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return bitXor(matrix(x),y)},"Matrix, Array":function(x,y){return bitXor(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,bitXor,!1);break;default:c=algorithm14(x,y,bitXor,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,bitXor,!0);break;default:c=algorithm14(y,x,bitXor,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,bitXor,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,bitXor,!0).valueOf()}});return bitXor.toTex="\\left(${args[0]}"+latex.operators.bitXor+"${args[1]}\\right)",bitXor}var isInteger=require("../../utils/number").isInteger,bigBitXor=require("../../utils/bignumber/bitXor");exports.name="bitXor",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/bignumber/bitXor":683,"../../utils/latex":705,"../../utils/number":706}],502:[function(require,module,exports){module.exports=[require("./bitAnd"),require("./bitNot"),require("./bitOr"),require("./bitXor"),require("./leftShift"),require("./rightArithShift"),require("./rightLogShift")]},{"./bitAnd":498,"./bitNot":499,"./bitOr":500,"./bitXor":501,"./leftShift":503,"./rightArithShift":504,"./rightLogShift":505}],503:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),equalScalar=load(require("../relational/equalScalar")),zeros=load(require("../matrix/zeros")),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm08=load(require("../../type/matrix/utils/algorithm08")),algorithm10=load(require("../../type/matrix/utils/algorithm10")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),leftShift=typed("leftShift",{"number, number":function(x,y){if(!isInteger(x)||!isInteger(y))throw new Error("Integers expected in function leftShift");return x<<y},"BigNumber, BigNumber":bigLeftShift,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm08(x,y,leftShift,!1);break;default:c=algorithm02(y,x,leftShift,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm01(x,y,leftShift,!1);break;default:c=algorithm13(x,y,leftShift)}}return c},"Array, Array":function(x,y){return leftShift(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return leftShift(matrix(x),y)},"Matrix, Array":function(x,y){return leftShift(x,matrix(y))},"Matrix, number | BigNumber":function(x,y){if(!equalScalar(y,0)){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,leftShift,!1);break;default:c=algorithm14(x,y,leftShift,!1)}return c}return x.clone()},"number | BigNumber, Matrix":function(x,y){if(!equalScalar(x,0)){var c;switch(y.storage()){case"sparse":c=algorithm10(y,x,leftShift,!0);break;default:c=algorithm14(y,x,leftShift,!0)}return c}return zeros(y.size(),y.storage())},"Array, number | BigNumber":function(x,y){return leftShift(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return leftShift(x,matrix(y)).valueOf()}});return leftShift.toTex="\\left(${args[0]}"+latex.operators.leftShift+"${args[1]}\\right)",leftShift}var isInteger=require("../../utils/number").isInteger,bigLeftShift=require("../../utils/bignumber/leftShift");exports.name="leftShift",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm08":654,"../../type/matrix/utils/algorithm10":656,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/bignumber/leftShift":690,"../../utils/latex":705,"../../utils/number":706,"../matrix/zeros":542,"../relational/equalScalar":557}],504:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),equalScalar=load(require("../relational/equalScalar")),zeros=load(require("../matrix/zeros")),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm08=load(require("../../type/matrix/utils/algorithm08")),algorithm10=load(require("../../type/matrix/utils/algorithm10")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),rightArithShift=typed("rightArithShift",{"number, number":function(x,y){if(!isInteger(x)||!isInteger(y))throw new Error("Integers expected in function rightArithShift");return x>>y},"BigNumber, BigNumber":bigRightArithShift,"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm08(x,y,rightArithShift,!1);break;default:c=algorithm02(y,x,rightArithShift,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm01(x,y,rightArithShift,!1);break;default:c=algorithm13(x,y,rightArithShift)}}return c},"Array, Array":function(x,y){return rightArithShift(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return rightArithShift(matrix(x),y)},"Matrix, Array":function(x,y){return rightArithShift(x,matrix(y))},"Matrix, number | BigNumber":function(x,y){if(!equalScalar(y,0)){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,rightArithShift,!1);break;default:c=algorithm14(x,y,rightArithShift,!1)}return c}return x.clone()},"number | BigNumber, Matrix":function(x,y){if(!equalScalar(x,0)){var c;switch(y.storage()){case"sparse":c=algorithm10(y,x,rightArithShift,!0);break;default:c=algorithm14(y,x,rightArithShift,!0)}return c}return zeros(y.size(),y.storage())},"Array, number | BigNumber":function(x,y){return rightArithShift(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return rightArithShift(x,matrix(y)).valueOf()}});return rightArithShift.toTex="\\left(${args[0]}"+latex.operators.rightArithShift+"${args[1]}\\right)",rightArithShift}var isInteger=require("../../utils/number").isInteger,bigRightArithShift=require("../../utils/bignumber/rightArithShift");exports.name="rightArithShift",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm08":654,"../../type/matrix/utils/algorithm10":656,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/bignumber/rightArithShift":692,"../../utils/latex":705,"../../utils/number":706,"../matrix/zeros":542,"../relational/equalScalar":557}],505:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),equalScalar=load(require("../relational/equalScalar")),zeros=load(require("../matrix/zeros")),algorithm01=load(require("../../type/matrix/utils/algorithm01")),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm08=load(require("../../type/matrix/utils/algorithm08")),algorithm10=load(require("../../type/matrix/utils/algorithm10")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),rightLogShift=typed("rightLogShift",{"number, number":function(x,y){if(!isInteger(x)||!isInteger(y))throw new Error("Integers expected in function rightLogShift");return x>>>y},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm08(x,y,rightLogShift,!1);break;default:c=algorithm02(y,x,rightLogShift,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm01(x,y,rightLogShift,!1);break;default:c=algorithm13(x,y,rightLogShift)}}return c},"Array, Array":function(x,y){return rightLogShift(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return rightLogShift(matrix(x),y)},"Matrix, Array":function(x,y){return rightLogShift(x,matrix(y))},"Matrix, number | BigNumber":function(x,y){if(!equalScalar(y,0)){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,rightLogShift,!1);break;default:c=algorithm14(x,y,rightLogShift,!1)}return c}return x.clone()},"number | BigNumber, Matrix":function(x,y){if(!equalScalar(x,0)){var c;switch(y.storage()){case"sparse":c=algorithm10(y,x,rightLogShift,!0);break;default:c=algorithm14(y,x,rightLogShift,!0)}return c}return zeros(y.size(),y.storage())},"Array, number | BigNumber":function(x,y){return rightLogShift(matrix(x),y).valueOf()},"number | BigNumber, Array":function(x,y){return rightLogShift(x,matrix(y)).valueOf()}});return rightLogShift.toTex="\\left(${args[0]}"+latex.operators.rightLogShift+"${args[1]}\\right)",rightLogShift}var isInteger=require("../../utils/number").isInteger;exports.name="rightLogShift",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm01":647,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm08":654,"../../type/matrix/utils/algorithm10":656,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"../../utils/number":706,"../matrix/zeros":542,"../relational/equalScalar":557}],506:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var add=load(require("../arithmetic/add")),stirlingS2=load(require("./stirlingS2")),isNegative=load(require("../utils/isNegative")),isInteger=load(require("../utils/isInteger")),bellNumbers=typed("bellNumbers",{"number | BigNumber":function(n){if(!isInteger(n)||isNegative(n))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var result=0,i=0;n>=i;i++)result=add(result,stirlingS2(n,i));return result}});return bellNumbers.toTex="\\mathrm{B}_{${args[0]}}",bellNumbers}exports.name="bellNumbers",exports.factory=factory},{"../arithmetic/add":465,"../utils/isInteger":608,"../utils/isNegative":609,"./stirlingS2":510}],507:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var add=load(require("../arithmetic/add")),divide=load(require("../arithmetic/divide")),multiply=load(require("../arithmetic/multiply")),combinations=load(require("../probability/combinations")),isNegative=load(require("../utils/isNegative")),isInteger=load(require("../utils/isInteger")),catalan=typed("catalan",{"number | BigNumber":function(n){if(!isInteger(n)||isNegative(n))throw new TypeError("Non-negative integer value expected in function catalan");return divide(combinations(multiply(n,2),n),add(n,1))}});return catalan.toTex="\\mathrm{C}_{${args[0]}}",catalan}exports.name="catalan",exports.factory=factory},{"../arithmetic/add":465,"../arithmetic/divide":470,"../arithmetic/multiply":485,"../probability/combinations":543,"../utils/isInteger":608,"../utils/isNegative":609}],508:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var combinations=load(require("../probability/combinations")),add=load(require("../arithmetic/addScalar")),isPositive=load(require("../utils/isPositive")),isInteger=load(require("../utils/isInteger")),larger=load(require("../relational/larger")),composition=typed("composition",{"number | BigNumber, number | BigNumber":function(n,k){if(!(isInteger(n)&&isPositive(n)&&isInteger(k)&&isPositive(k)))throw new TypeError("Positive integer value expected in function composition");if(larger(k,n))throw new TypeError("k must be less than or equal to n in function composition");return combinations(add(n,-1),add(k,-1))}});return composition.toTex="\\mathrm{${name}}\\left(${args}\\right)",composition}exports.name="composition",exports.factory=factory},{"../arithmetic/addScalar":466,"../probability/combinations":543,"../relational/larger":559,"../utils/isInteger":608,"../utils/isPositive":611}],509:[function(require,module,exports){module.exports=[require("./bellNumbers"),require("./composition"),require("./stirlingS2"),require("./catalan")]},{"./bellNumbers":506,"./catalan":507,"./composition":508,"./stirlingS2":510}],510:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var add=load(require("../arithmetic/add")),subtract=load(require("../arithmetic/subtract")),multiply=load(require("../arithmetic/multiply")),divide=load(require("../arithmetic/divide")),pow=load(require("../arithmetic/pow")),factorial=load(require("../probability/factorial")),combinations=load(require("../probability/combinations")),isNegative=load(require("../utils/isNegative")),isInteger=load(require("../utils/isInteger")),larger=load(require("../relational/larger")),stirlingS2=typed("stirlingS2",{"number | BigNumber, number | BigNumber":function(n,k){if(!isInteger(n)||isNegative(n)||!isInteger(k)||isNegative(k))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(larger(k,n))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var kFactorial=factorial(k),result=0,i=0;k>=i;i++){var negativeOne=pow(-1,subtract(k,i)),kChooseI=combinations(k,i),iPower=pow(i,n);result=add(result,multiply(multiply(kChooseI,iPower),negativeOne))}return divide(result,kFactorial)}});return stirlingS2.toTex="\\mathrm{S}\\left(${args[0]},${args[1]}\\right)",stirlingS2}exports.name="stirlingS2",exports.factory=factory},{"../arithmetic/add":465,"../arithmetic/divide":470,"../arithmetic/multiply":485,"../arithmetic/pow":489,"../arithmetic/subtract":494,"../probability/combinations":543,"../probability/factorial":545,"../relational/larger":559,"../utils/isInteger":608,"../utils/isNegative":609}],511:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var arg=typed("arg",{number:function(x){return Math.atan2(0,x)},Complex:function(x){return Math.atan2(x.im,x.re)},"Array | Matrix":function(x){return deepMap(x,arg)}});return arg.toTex="\\arg\\left(${args[0]}\\right)",arg}var deepMap=require("../../utils/collection/deepMap");exports.name="arg",exports.factory=factory},{"../../utils/collection/deepMap":698}],512:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var conj=typed("conj",{number:function(x){return x},BigNumber:function(x){return x},Complex:function(x){return new type.Complex(x.re,-x.im)},"Array | Matrix":function(x){return deepMap(x,conj)}});return conj.toTex="\\left(${args[0]}\\right)^*",conj}var deepMap=require("../../utils/collection/deepMap");exports.name="conj",exports.factory=factory},{"../../utils/collection/deepMap":698}],513:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var im=typed("im",{number:function(x){return 0},BigNumber:function(x){return new type.BigNumber(0)},Complex:function(x){return x.im},"Array | Matrix":function(x){return deepMap(x,im)}});return im.toTex="\\Im\\left\\lbrace${args[0]}\\right\\rbrace",im}var deepMap=require("../../utils/collection/deepMap");exports.name="im",exports.factory=factory},{"../../utils/collection/deepMap":698}],514:[function(require,module,exports){module.exports=[require("./arg"),require("./conj"),require("./im"),require("./re")]},{"./arg":511,"./conj":512,"./im":513,"./re":515}],515:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var re=typed("re",{number:function(x){return x},BigNumber:function(x){return x},Complex:function(x){return x.re},"Array | Matrix":function(x){return deepMap(x,re)}});return re.toTex="\\Re\\left\\lbrace${args[0]}\\right\\rbrace",re}var deepMap=require("../../utils/collection/deepMap");exports.name="re",exports.factory=factory},{"../../utils/collection/deepMap":698}],516:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var distance=(load(require("../../type/matrix/function/matrix")),typed("distance",{"Array, Array, Array":function(x,y,z){if(2==x.length&&2==y.length&&2==z.length){if(!_2d(x))throw new TypeError("Array with 2 numbers expected for first argument");if(!_2d(y))throw new TypeError("Array with 2 numbers expected for second argument");if(!_2d(z))throw new TypeError("Array with 2 numbers expected for third argument");var m=(z[1]-z[0])/(y[1]-y[0]),xCoeff=m*m*y[0],yCoeff=-1*(m*y[0]),constant=x[1];return _distancePointLine2D(x[0],x[1],xCoeff,yCoeff,constant)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(x,y,z){if(2==Object.keys(x).length&&2==Object.keys(y).length&&2==Object.keys(z).length){if(!_2d(x))throw new TypeError("Values of pointX and pointY should be numbers");if(!_2d(y))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers");if(!_2d(z))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers");if(x.hasOwnProperty("pointX")&&x.hasOwnProperty("pointY")&&y.hasOwnProperty("lineOnePtX")&&y.hasOwnProperty("lineOnePtY")&&z.hasOwnProperty("lineTwoPtX")&&z.hasOwnProperty("lineTwoPtY")){var m=(z.lineTwoPtY-z.lineTwoPtX)/(y.lineOnePtY-y.lineOnePtX),xCoeff=m*m*y.lineOnePtX,yCoeff=-1*(m*y.lineOnePtX),constant=x.pointX;return _distancePointLine2D(x.pointX,x.pointY,xCoeff,yCoeff,constant)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(x,y){if(2==x.length&&3==y.length){if(!_2d(x))throw new TypeError("Array with 2 numbers expected for first argument");if(!_3d(y))throw new TypeError("Array with 3 numbers expected for second argument");return _distancePointLine2D(x[0],x[1],y[0],y[1],y[2])}if(3==x.length&&6==y.length){if(!_3d(x))throw new TypeError("Array with 3 numbers expected for first argument");if(!_parametricLine(y))throw new TypeError("Array with 6 numbers expected for second argument");return _distancePointLine3D(x[0],x[1],x[2],y[0],y[1],y[2],y[3],y[4],y[5])}if(2==x.length&&2==y.length){if(!_2d(x))throw new TypeError("Array with 2 numbers expected for first argument");if(!_2d(y))throw new TypeError("Array with 2 numbers expected for second argument");return _distance2d(x[0],x[1],y[0],y[1])}if(3==x.length&&3==y.length){if(!_3d(x))throw new TypeError("Array with 3 numbers expected for first argument");if(!_3d(y))throw new TypeError("Array with 3 numbers expected for second argument");return _distance3d(x[0],x[1],x[2],y[0],y[1],y[2])}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,y){if(2==Object.keys(x).length&&3==Object.keys(y).length){if(!_2d(x))throw new TypeError("Values of pointX and pointY should be numbers");if(!_3d(y))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers");if(x.hasOwnProperty("pointX")&&x.hasOwnProperty("pointY")&&y.hasOwnProperty("xCoeffLine")&&y.hasOwnProperty("yCoeffLine")&&y.hasOwnProperty("yCoeffLine"))return _distancePointLine2D(x.pointX,x.pointY,y.xCoeffLine,y.yCoeffLine,y.constant);throw new TypeError("Key names do not match")}if(3==Object.keys(x).length&&6==Object.keys(y).length){if(!_3d(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers");if(!_parametricLine(y))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers");if(x.hasOwnProperty("pointX")&&x.hasOwnProperty("pointY")&&y.hasOwnProperty("x0")&&y.hasOwnProperty("y0")&&y.hasOwnProperty("z0")&&y.hasOwnProperty("a")&&y.hasOwnProperty("b")&&y.hasOwnProperty("c"))return _distancePointLine3D(x.pointX,x.pointY,x.pointZ,y.x0,y.y0,y.z0,y.a,y.b,y.c);throw new TypeError("Key names do not match")}if(2==Object.keys(x).length&&2==Object.keys(y).length){if(!_2d(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers");if(!_2d(y))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers");if(x.hasOwnProperty("pointOneX")&&x.hasOwnProperty("pointOneY")&&y.hasOwnProperty("pointTwoX")&&y.hasOwnProperty("pointTwoY"))return _distance2d(x.pointOneX,x.pointOneY,y.pointTwoX,y.pointTwoY);throw new TypeError("Key names do not match")}if(3==Object.keys(x).length&&3==Object.keys(y).length){if(!_3d(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers");if(!_3d(y))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers");if(x.hasOwnProperty("pointOneX")&&x.hasOwnProperty("pointOneY")&&x.hasOwnProperty("pointOneZ")&&y.hasOwnProperty("pointTwoX")&&y.hasOwnProperty("pointTwoY")&&y.hasOwnProperty("pointTwoZ"))return _distance3d(x.pointOneX,x.pointOneY,x.pointOneZ,y.pointTwoX,y.pointTwoY,y.pointTwoZ);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(arr){if(!_pairwise(arr))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return _distancePairwise(arr)}}));return distance}function _2d(a){return a.constructor!==Array&&(a=_objectToArray(a)),"number"==typeof a[0]&&"number"==typeof a[1]}function _3d(a){return a.constructor!==Array&&(a=_objectToArray(a)),"number"==typeof a[0]&&"number"==typeof a[1]&&"number"==typeof a[2]}function _parametricLine(a){return a.constructor!==Array&&(a=_objectToArray(a)),"number"==typeof a[0]&&"number"==typeof a[1]&&"number"==typeof a[2]&&"number"==typeof a[3]&&"number"==typeof a[4]&&"number"==typeof a[5]}function _objectToArray(o){for(var keys=Object.keys(o),a=[],i=0;i<keys.length;i++)a.push(o[keys[i]]);return a}function _pairwise(a){if(2==a[0].length&&"number"==typeof a[0][0]&&"number"==typeof a[0][1]){for(var i in a)if(2!=a[i].length||"number"!=typeof a[i][0]||"number"!=typeof a[i][1])return!1}else{if(3!=a[0].length||"number"!=typeof a[0][0]||"number"!=typeof a[0][1]||"number"!=typeof a[0][2])return!1;for(var i in a)if(3!=a[i].length||"number"!=typeof a[i][0]||"number"!=typeof a[i][1]||"number"!=typeof a[i][2])return!1}return!0}function _distancePointLine2D(x,y,a,b,c){var num=Math.abs(a*x+b*y+c),den=Math.pow(a*a+b*b,.5),result=num/den;return result}function _distancePointLine3D(x,y,z,x0,y0,z0,a,b,c){var num=[(y0-y)*c-(z0-z)*b,(z0-z)*a-(x0-x)*c,(x0-x)*b-(y0-y)*a];num=Math.pow(num[0]*num[0]+num[1]*num[1]+num[2]*num[2],.5);var den=Math.pow(a*a+b*b+c*c,.5),result=num/den;return result}function _distance2d(x1,y1,x2,y2){var yDiff=y2-y1,xDiff=x2-x1,radicant=yDiff*yDiff+xDiff*xDiff,result=Math.pow(radicant,.5);return result}function _distance3d(x1,y1,z1,x2,y2,z2){var zDiff=z2-z1,yDiff=y2-y1,xDiff=x2-x1,radicant=zDiff*zDiff+yDiff*yDiff+xDiff*xDiff,result=Math.pow(radicant,.5);return result}function _distancePairwise(a){for(var result=[],i=0;i<a.length-1;i++)for(var j=i+1;j<a.length;j++)2==a[0].length?result.push(_distance2d(a[i][0],a[i][1],a[j][0],a[j][1])):3==a[0].length&&result.push(_distance3d(a[i][0],a[i][1],a[i][2],a[j][0],a[j][1],a[j][2]));
return result}exports.name="distance",exports.factory=factory},{"../../type/matrix/function/matrix":644}],517:[function(require,module,exports){module.exports=[require("./intersect"),require("./distance")]},{"./distance":516,"./intersect":518}],518:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _2d(x){return 2===x.length&&"number"==typeof x[0]&&"number"==typeof x[1]}function _3d(x){return 3===x.length&&"number"==typeof x[0]&&"number"==typeof x[1]&&"number"==typeof x[2]}function _4d(x){return 4===x.length&&"number"==typeof x[0]&&"number"==typeof x[1]&&"number"==typeof x[2]&&"number"==typeof x[3]}function _intersect2d(p1a,p1b,p2a,p2b){var o1=p1a,o2=p2a,d1=subtract(o1,p1b),d2=subtract(o2,p2b),det=d1[0]*d2[1]-d2[0]*d1[1];if(abs(det)<config.epsilon)return null;var t=(d2[0]*o1[1]-d2[1]*o1[0]-d2[0]*o2[1]+d2[1]*o2[0])/det;return add(multiply(d1,t),o1)}function _intersect3d(x1,y1,z1,x2,y2,z2,x3,y3,z3,x4,y4,z4){var d1343=(x1-x3)*(x4-x3)+(y1-y3)*(y4-y3)+(z1-z3)*(z4-z3),d4321=(x4-x3)*(x2-x1)+(y4-y3)*(y2-y1)+(z4-z3)*(z2-z1),d1321=(x1-x3)*(x2-x1)+(y1-y3)*(y2-y1)+(z1-z3)*(z2-z1),d4343=(x4-x3)*(x4-x3)+(y4-y3)*(y4-y3)+(z4-z3)*(z4-z3),d2121=(x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)+(z2-z1)*(z2-z1),ta=(d1343*d4321-d1321*d4343)/(d2121*d4343-d4321*d4321),tb=(d1343+ta*d4321)/d4343,pax=x1+ta*(x2-x1),pay=y1+ta*(y2-y1),paz=z1+ta*(z2-z1),pbx=x3+tb*(x4-x3),pby=y3+tb*(y4-y3),pbz=z3+tb*(z4-z3);return pax===pbx&&pay===pby&&paz===pbz?[pax,pay,paz]:null}function _intersectLinePlane(x1,y1,z1,x2,y2,z2,x,y,z,c){var t=(c-x1*x-y1*y-z1*z)/(x2*x+y2*y+z2*z-x1-y1-z1),px=x1+t*(x2-x1),py=y1+t*(y2-y1),pz=z1+t*(z2-z1);return[px,py,pz]}var abs=load(require("../arithmetic/abs")),add=load(require("../arithmetic/add")),matrix=load(require("../../type/matrix/function/matrix")),multiply=load(require("../arithmetic/multiply")),subtract=load(require("../arithmetic/subtract")),intersect=typed("intersect",{"Array, Array, Array":function(x,y,plane){if(!_3d(x))throw new TypeError("Array with 3 numbers expected for first argument");if(!_3d(y))throw new TypeError("Array with 3 numbers expected for second argument");if(!_4d(plane))throw new TypeError("Array with 4 numbers expected as third argument");return _intersectLinePlane(x[0],x[1],x[2],y[0],y[1],y[2],plane[0],plane[1],plane[2],plane[3])},"Array, Array, Array, Array":function(w,x,y,z){if(2===w.length){if(!_2d(w))throw new TypeError("Array with 2 numbers expected for first argument");if(!_2d(x))throw new TypeError("Array with 2 numbers expected for second argument");if(!_2d(y))throw new TypeError("Array with 2 numbers expected for third argument");if(!_2d(z))throw new TypeError("Array with 2 numbers expected for fourth argument");return _intersect2d(w,x,y,z)}if(3===w.length){if(!_3d(w))throw new TypeError("Array with 3 numbers expected for first argument");if(!_3d(x))throw new TypeError("Array with 3 numbers expected for second argument");if(!_3d(y))throw new TypeError("Array with 3 numbers expected for third argument");if(!_3d(z))throw new TypeError("Array with 3 numbers expected for fourth argument");return _intersect3d(w[0],w[1],w[2],x[0],x[1],x[2],y[0],y[1],y[2],z[0],z[1],z[2])}throw new TypeError("Arrays with two or thee dimensional points expected")},"Matrix, Matrix, Matrix":function(x,y,plane){return matrix(intersect(x.valueOf(),y.valueOf(),plane.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(w,x,y,z){return matrix(intersect(w.valueOf(),x.valueOf(),y.valueOf(),z.valueOf()))}});return intersect}exports.name="intersect",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../arithmetic/abs":464,"../arithmetic/add":465,"../arithmetic/multiply":485,"../arithmetic/subtract":494}],519:[function(require,module,exports){module.exports=[require("./algebra"),require("./arithmetic"),require("./bitwise"),require("./combinatorics"),require("./complex"),require("./geometry"),require("./logical"),require("./matrix"),require("./probability"),require("./relational"),require("./statistics"),require("./trigonometry"),require("./units"),require("./utils")]},{"./algebra":441,"./arithmetic":480,"./bitwise":502,"./combinatorics":509,"./complex":514,"./geometry":517,"./logical":521,"./matrix":532,"./probability":547,"./relational":558,"./statistics":564,"./trigonometry":594,"./units":601,"./utils":607}],520:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),zeros=load(require("../matrix/zeros")),not=load(require("./not")),algorithm02=(load(require("../utils/isZero")),load(require("../../type/matrix/utils/algorithm02"))),algorithm06=load(require("../../type/matrix/utils/algorithm06")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),and=typed("and",{"number, number":function(x,y){return!(!x||!y)},"Complex, Complex":function(x,y){return!(0===x.re&&0===x.im||0===y.re&&0===y.im)},"BigNumber, BigNumber":function(x,y){return!(x.isZero()||y.isZero()||x.isNaN()||y.isNaN())},"Unit, Unit":function(x,y){return and(x.value,y.value)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm06(x,y,and,!1);break;default:c=algorithm02(y,x,and,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm02(x,y,and,!1);break;default:c=algorithm13(x,y,and)}}return c},"Array, Array":function(x,y){return and(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return and(matrix(x),y)},"Matrix, Array":function(x,y){return and(x,matrix(y))},"Matrix, any":function(x,y){if(not(y))return zeros(x.size(),x.storage());var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,and,!1);break;default:c=algorithm14(x,y,and,!1)}return c},"any, Matrix":function(x,y){if(not(x))return zeros(x.size(),x.storage());var c;switch(y.storage()){case"sparse":c=algorithm11(y,x,and,!0);break;default:c=algorithm14(y,x,and,!0)}return c},"Array, any":function(x,y){return and(matrix(x),y).valueOf()},"any, Array":function(x,y){return and(x,matrix(y)).valueOf()}});return and.toTex="\\left(${args[0]}"+latex.operators.and+"${args[1]}\\right)",and}exports.name="and",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm06":652,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"../matrix/zeros":542,"../utils/isZero":612,"./not":522}],521:[function(require,module,exports){module.exports=[require("./and"),require("./not"),require("./or"),require("./xor")]},{"./and":520,"./not":522,"./or":523,"./xor":524}],522:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),not=typed("not",{number:function(x){return!x},Complex:function(x){return 0===x.re&&0===x.im},BigNumber:function(x){return x.isZero()||x.isNaN()},Unit:function(x){return not(x.value)},"Array | Matrix":function(x){return deepMap(x,not)}});return not.toTex=latex.operators.not+"\\left(${args[0]}\\right)",not}var deepMap=require("../../utils/collection/deepMap");exports.name="not",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/latex":705}],523:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm05=load(require("../../type/matrix/utils/algorithm05")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),or=typed("or",{"number, number":function(x,y){return!(!x&&!y)},"Complex, Complex":function(x,y){return 0!==x.re||0!==x.im||0!==y.re||0!==y.im},"BigNumber, BigNumber":function(x,y){return!x.isZero()&&!x.isNaN()||!y.isZero()&&!y.isNaN()},"Unit, Unit":function(x,y){return or(x.value,y.value)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm05(x,y,or);break;default:c=algorithm03(y,x,or,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,or,!1);break;default:c=algorithm13(x,y,or)}}return c},"Array, Array":function(x,y){return or(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return or(matrix(x),y)},"Matrix, Array":function(x,y){return or(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,or,!1);break;default:c=algorithm14(x,y,or,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,or,!0);break;default:c=algorithm14(y,x,or,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,or,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,or,!0).valueOf()}});return or.toTex="\\left(${args[0]}"+latex.operators.or+"${args[1]}\\right)",or}exports.name="or",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm05":651,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705}],524:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),xor=typed("xor",{"number, number":function(x,y){return!!(!!x^!!y)},"Complex, Complex":function(x,y){return!!((0!==x.re||0!==x.im)^(0!==y.re||0!==y.im))},"BigNumber, BigNumber":function(x,y){return!!((!x.isZero()&&!x.isNaN())^(!y.isZero()&&!y.isNaN()))},"Unit, Unit":function(x,y){return xor(x.value,y.value)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,xor);break;default:c=algorithm03(y,x,xor,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,xor,!1);break;default:c=algorithm13(x,y,xor)}}return c},"Array, Array":function(x,y){return xor(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return xor(matrix(x),y)},"Matrix, Array":function(x,y){return xor(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,xor,!1);break;default:c=algorithm14(x,y,xor,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,xor,!0);break;default:c=algorithm14(y,x,xor,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,xor,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,xor,!0).valueOf()}});return xor.toTex="\\left(${args[0]}"+latex.operators.xor+"${args[1]}\\right)",xor}exports.name="xor",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705}],525:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),concat=typed("concat",{"...Array | Matrix | number | BigNumber":function(args){var i,prevDim,len=args.length,dim=-1,asMatrix=!1,matrices=[];for(i=0;len>i;i++){var arg=args[i];if(arg&&arg.isMatrix===!0&&(asMatrix=!0),"number"==typeof arg||arg&&arg.isBigNumber===!0){if(i!==len-1)throw new Error("Dimension must be specified as last argument");if(prevDim=dim,dim=arg.valueOf(),!isInteger(dim))throw new TypeError("Integer number expected for dimension");if(0>dim)throw new IndexError(dim);if(i>0&&dim>prevDim)throw new IndexError(dim,prevDim+1)}else{var m=clone(arg).valueOf(),size=array.size(m);if(matrices[i]=m,prevDim=dim,dim=size.length-1,i>0&&dim!=prevDim)throw new DimensionError(prevDim+1,dim+1)}}if(0==matrices.length)throw new SyntaxError("At least one matrix expected");for(var res=matrices.shift();matrices.length;)res=_concat(res,matrices.shift(),dim,0);return asMatrix?matrix(res):res},"...string":function(args){return args.join("")}});return concat.toTex="\\mathrm{${name}}\\left(${args}\\right)",concat}function _concat(a,b,concatDim,dim){if(concatDim>dim){if(a.length!=b.length)throw new DimensionError(a.length,b.length);for(var c=[],i=0;i<a.length;i++)c[i]=_concat(a[i],b[i],concatDim,dim+1);return c}return a.concat(b)}var clone=require("../../utils/object").clone,isInteger=require("../../utils/number").isInteger,array=require("../../utils/array"),IndexError=require("../../error/IndexError"),DimensionError=require("../../error/DimensionError");exports.name="concat",exports.factory=factory},{"../../error/DimensionError":227,"../../error/IndexError":228,"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/number":706,"../../utils/object":707}],526:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _cross(x,y){var xSize=size(x),ySize=size(y);if(1!=xSize.length||1!=ySize.length||3!=xSize[0]||3!=ySize[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+xSize.join(", ")+"], B = ["+ySize.join(", ")+"])");return[subtract(multiply(x[1],y[2]),multiply(x[2],y[1])),subtract(multiply(x[2],y[0]),multiply(x[0],y[2])),subtract(multiply(x[0],y[1]),multiply(x[1],y[0]))]}var matrix=load(require("../../type/matrix/function/matrix")),subtract=load(require("../arithmetic/subtract")),multiply=load(require("../arithmetic/multiply")),cross=typed("cross",{"Matrix, Matrix":function(x,y){return matrix(_cross(x.toArray(),y.toArray()))},"Matrix, Array":function(x,y){return matrix(_cross(x.toArray(),y))},"Array, Matrix":function(x,y){return matrix(_cross(x,y.toArray()))},"Array, Array":_cross});return cross.toTex="\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)",cross}var size=require("../../utils/array").size;exports.name="cross",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../arithmetic/multiply":485,"../arithmetic/subtract":494}],527:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _det(matrix,rows,cols){if(1==rows)return object.clone(matrix[0][0]);if(2==rows)return subtract(multiply(matrix[0][0],matrix[1][1]),multiply(matrix[1][0],matrix[0][1]));for(var compute_mu=function(matrix){var i,j,mu=new Array(matrix.length),sum=0;for(i=1;i<matrix.length;i++)sum=add(sum,matrix[i][i]);for(i=0;i<matrix.length;i++){for(mu[i]=new Array(matrix.length),mu[i][i]=unaryMinus(sum),j=0;i>j;j++)mu[i][j]=0;for(j=i+1;j<matrix.length;j++)mu[i][j]=matrix[i][j];i+1<matrix.length&&(sum=subtract(sum,matrix[i+1][i+1]))}return mu},fa=matrix,i=0;rows-1>i;i++)fa=multiply(compute_mu(fa),matrix);return rows%2==0?unaryMinus(fa[0][0]):fa[0][0]}var matrix=load(require("../../type/matrix/function/matrix")),add=load(require("../arithmetic/add")),subtract=load(require("../arithmetic/subtract")),multiply=load(require("../arithmetic/multiply")),unaryMinus=load(require("../arithmetic/unaryMinus")),det=typed("det",{any:function(x){return object.clone(x)},"Array | Matrix":function(x){var size;switch(x&&x.isMatrix===!0?size=x.size():Array.isArray(x)?(x=matrix(x),size=x.size()):size=[],size.length){case 0:return object.clone(x);case 1:if(1==size[0])return object.clone(x.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+string.format(size)+")");case 2:var rows=size[0],cols=size[1];if(rows==cols)return _det(x.clone().valueOf(),rows,cols);throw new RangeError("Matrix must be square (size: "+string.format(size)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+string.format(size)+")")}}});return det.toTex="\\det\\left(${args[0]}\\right)",det}var util=require("../../utils/index"),object=util.object,string=util.string;exports.name="det",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/index":704,"../arithmetic/add":465,"../arithmetic/multiply":485,"../arithmetic/subtract":494,"../arithmetic/unaryMinus":495}],528:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _diag(x,k,size,format){if(!isInteger(k))throw new TypeError("Second parameter in function diag must be an integer");var kSuper=k>0?k:0,kSub=0>k?-k:0;switch(size.length){case 1:return _createDiagonalMatrix(x,k,format,size[0],kSub,kSuper);case 2:return _getDiagonal(x,k,format,size,kSub,kSuper)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function _createDiagonalMatrix(x,k,format,l,kSub,kSuper){var ms=[l+kSub,l+kSuper],F=type.Matrix.storage(format||"dense"),m=F.diagonal(ms,x,k);return null!==format?m:m.valueOf()}function _getDiagonal(x,k,format,s,kSub,kSuper){if(x&&x.isMatrix===!0){var dm=x.diagonal(k);return null!==format?format!==dm.storage()?matrix(dm,format):dm:dm.valueOf()}for(var n=Math.min(s[0]-kSub,s[1]-kSuper),vector=[],i=0;n>i;i++)vector[i]=clone(x[i+kSub][i+kSuper]);return null!==format?matrix(vector):vector}var matrix=load(require("../../type/matrix/function/matrix")),diag=typed("diag",{Array:function(x){return _diag(x,0,array.size(x),null)},"Array, number":function(x,k){return _diag(x,k,array.size(x),null)},"Array, BigNumber":function(x,k){return _diag(x,k.toNumber(),array.size(x),null)},"Array, string":function(x,format){return _diag(x,0,array.size(x),format)},"Array, number, string":function(x,k,format){return _diag(x,k,array.size(x),format)},"Array, BigNumber, string":function(x,k,format){return _diag(x,k.toNumber(),array.size(x),format)},Matrix:function(x){return _diag(x,0,x.size(),x.storage())},"Matrix, number":function(x,k){return _diag(x,k,x.size(),x.storage())},"Matrix, BigNumber":function(x,k){return _diag(x,k.toNumber(),x.size(),x.storage())},"Matrix, string":function(x,format){return _diag(x,0,x.size(),format)},"Matrix, number, string":function(x,k,format){return _diag(x,k,x.size(),format)},"Matrix, BigNumber, string":function(x,k,format){return _diag(x,k.toNumber(),x.size(),format)}});return diag.toTex="\\mathrm{${name}}\\left(${args}\\right)",diag}var array=require("../../utils/array"),clone=require("../../utils/object").clone,isInteger=require("../../utils/number").isInteger;exports.name="diag",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/number":706,"../../utils/object":707}],529:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _dot(x,y){var xSize=size(x),ySize=size(y),len=xSize[0];if(1!==xSize.length||1!==ySize.length)throw new RangeError("Vector expected");if(xSize[0]!=ySize[0])throw new RangeError("Vectors must have equal length ("+xSize[0]+" != "+ySize[0]+")");if(0==len)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var prod=0,i=0;len>i;i++)prod=add(prod,multiply(x[i],y[i]));return prod}var add=load(require("../arithmetic/add")),multiply=load(require("../arithmetic/multiply")),dot=typed("dot",{"Matrix, Matrix":function(x,y){return _dot(x.toArray(),y.toArray())},"Matrix, Array":function(x,y){return _dot(x.toArray(),y)},"Array, Matrix":function(x,y){return _dot(x,y.toArray())},"Array, Array":_dot});return dot.toTex="\\left(${args[0]}\\cdot${args[1]}\\right)",dot}var size=require("../../utils/array").size;exports.name="dot",exports.factory=factory},{"../../utils/array":670,"../arithmetic/add":465,"../arithmetic/multiply":485}],530:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _eyeVector(size,format){switch(size.length){case 0:return format?matrix(format):[];case 1:return _eye(size[0],size[0],format);case 2:return _eye(size[0],size[1],format);default:throw new Error("Vector containing two values expected")}}function _eye(rows,cols,format){var Big=rows&&rows.isBigNumber===!0?type.BigNumber:cols&&cols.isBigNumber===!0?type.BigNumber:null;if(rows&&rows.isBigNumber===!0&&(rows=rows.toNumber()),cols&&cols.isBigNumber===!0&&(cols=cols.toNumber()),!isInteger(rows)||1>rows)throw new Error("Parameters in function eye must be positive integers");if(!isInteger(cols)||1>cols)throw new Error("Parameters in function eye must be positive integers");var one=Big?new type.BigNumber(1):1,defaultValue=Big?new Big(0):0,size=[rows,cols];if(format){var F=type.Matrix.storage(format);return F.diagonal(size,one,0,defaultValue)}for(var res=array.resize([],size,defaultValue),minimum=cols>rows?rows:cols,d=0;minimum>d;d++)res[d][d]=one;return res}var matrix=load(require("../../type/matrix/function/matrix")),eye=typed("eye",{"":function(){return"matrix"===config.matrix?matrix([]):[]},string:function(format){return matrix(format)},"number | BigNumber":function(rows){return _eye(rows,rows,"matrix"===config.matrix?"default":void 0)},"number | BigNumber, string":function(rows,format){return _eye(rows,rows,format)},"number | BigNumber, number | BigNumber":function(rows,cols){return _eye(rows,cols,"matrix"===config.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(rows,cols,format){return _eye(rows,cols,format)},Array:function(size){return _eyeVector(size)},"Array, string":function(size,format){return _eyeVector(size,format)},Matrix:function(size){return _eyeVector(size.valueOf(),size.storage())},"Matrix, string":function(size,format){return _eyeVector(size.valueOf(),format)}});return eye.toTex="\\mathrm{${name}}\\left(${args}\\right)",eye}var array=require("../../utils/array"),isInteger=require("../../utils/number").isInteger;exports.name="eye",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/number":706}],531:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),flatten=typed("flatten",{Array:function(x){return _flatten(clone(x))},Matrix:function(x){var flat=_flatten(clone(x.toArray()));return matrix(flat)}});return flatten.toTex="\\mathrm{${name}}\\left(${args}\\right)",flatten}var clone=require("../../utils/object").clone,_flatten=require("../../utils/array").flatten;exports.name="flatten",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/object":707}],532:[function(require,module,exports){module.exports=[require("./concat"),require("./cross"),require("./det"),require("./diag"),require("./dot"),require("./eye"),require("./flatten"),require("./inv"),require("./ones"),require("./range"),require("./resize"),require("./size"),require("./squeeze"),require("./subset"),require("./trace"),require("./transpose"),require("./zeros")]},{"./concat":525,"./cross":526,"./det":527,"./diag":528,"./dot":529,"./eye":530,"./flatten":531,"./inv":533,"./ones":534,"./range":535,"./resize":536,"./size":537,"./squeeze":538,"./subset":539,"./trace":540,"./transpose":541,"./zeros":542}],533:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _inv(mat,rows,cols){var r,s,f,value,temp;if(1==rows){if(value=mat[0][0],0==value)throw Error("Cannot calculate inverse, determinant is zero");return[[divideScalar(1,value)]]}if(2==rows){var d=det(mat);if(0==d)throw Error("Cannot calculate inverse, determinant is zero");return[[divideScalar(mat[1][1],d),divideScalar(unaryMinus(mat[0][1]),d)],[divideScalar(unaryMinus(mat[1][0]),d),divideScalar(mat[0][0],d)]]}var A=mat.concat();for(r=0;rows>r;r++)A[r]=A[r].concat();for(var B=eye(rows).valueOf(),c=0;cols>c;c++){for(r=c;rows>r&&0==A[r][c];)r++;if(r==rows||0==A[r][c])throw Error("Cannot calculate inverse, determinant is zero");r!=c&&(temp=A[c],A[c]=A[r],A[r]=temp,temp=B[c],B[c]=B[r],B[r]=temp);var Ac=A[c],Bc=B[c];for(r=0;rows>r;r++){var Ar=A[r],Br=B[r];if(r!=c){if(0!=Ar[c]){for(f=divideScalar(unaryMinus(Ar[c]),Ac[c]),s=c;cols>s;s++)Ar[s]=addScalar(Ar[s],multiply(f,Ac[s]));for(s=0;cols>s;s++)Br[s]=addScalar(Br[s],multiply(f,Bc[s]))}}else{for(f=Ac[c],s=c;cols>s;s++)Ar[s]=divideScalar(Ar[s],f);for(s=0;cols>s;s++)Br[s]=divideScalar(Br[s],f)}}}return B}var matrix=load(require("../../type/matrix/function/matrix")),divideScalar=load(require("../arithmetic/divideScalar")),addScalar=load(require("../arithmetic/addScalar")),multiply=load(require("../arithmetic/multiply")),unaryMinus=load(require("../arithmetic/unaryMinus")),det=load(require("../matrix/det")),eye=load(require("./eye")),inv=typed("inv",{"Array | Matrix":function(x){var size=x.isMatrix===!0?x.size():util.array.size(x);switch(size.length){case 1:if(1==size[0])return x.isMatrix===!0?matrix([divideScalar(1,x.valueOf()[0])]):[divideScalar(1,x[0])];throw new RangeError("Matrix must be square (size: "+util.string.format(size)+")");case 2:var rows=size[0],cols=size[1];if(rows==cols)return x.isMatrix===!0?matrix(_inv(x.valueOf(),rows,cols),x.storage()):_inv(x,rows,cols);throw new RangeError("Matrix must be square (size: "+util.string.format(size)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+util.string.format(size)+")")}},any:function(x){return divideScalar(1,x)}});return inv.toTex="\\left(${args[0]}\\right)^{-1}",inv}var util=require("../../utils/index");exports.name="inv",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/index":704,"../arithmetic/addScalar":466,"../arithmetic/divideScalar":471,"../arithmetic/multiply":485,"../arithmetic/unaryMinus":495,"../matrix/det":527,"./eye":530}],534:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _ones(size,format){var hasBigNumbers=_normalize(size),defaultValue=hasBigNumbers?new type.BigNumber(1):1;if(_validate(size),format){var m=matrix(format);return size.length>0?m.resize(size,defaultValue):m}var arr=[];return size.length>0?resize(arr,size,defaultValue):arr}function _normalize(size){var hasBigNumbers=!1;return size.forEach(function(value,index,arr){value&&value.isBigNumber===!0&&(hasBigNumbers=!0,arr[index]=value.toNumber())}),hasBigNumbers}function _validate(size){size.forEach(function(value){if("number"!=typeof value||!isInteger(value)||0>value)throw new Error("Parameters in function ones must be positive integers")})}var matrix=load(require("../../type/matrix/function/matrix")),ones=typed("ones",{"":function(){return"array"===config.matrix?_ones([]):_ones([],"default")},"...number | BigNumber | string":function(size){var last=size[size.length-1];if("string"==typeof last){var format=size.pop();return _ones(size,format)}return"array"===config.matrix?_ones(size):_ones(size,"default")},Array:_ones,Matrix:function(size){var format=size.storage();return _ones(size.valueOf(),format)},"Array | Matrix, string":function(size,format){return _ones(size.valueOf(),format)}});return ones.toTex="\\mathrm{${name}}\\left(${args}\\right)",ones}var isInteger=require("../../utils/number").isInteger,resize=require("../../utils/array").resize;exports.name="ones",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/number":706}],535:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _out(arr){return"array"===config.matrix?arr:matrix(arr)}function _strRange(str,includeEnd){var r=_parse(str);if(!r)throw new SyntaxError('String "'+str+'" is no valid range');var fn;return"bignumber"===config.number?(fn=includeEnd?_bigRangeInc:_bigRangeEx,_out(fn(new type.BigNumber(r.start),new type.BigNumber(r.end),new type.BigNumber(r.step)))):(fn=includeEnd?_rangeInc:_rangeEx,_out(fn(r.start,r.end,r.step)))}function _rangeEx(start,end,step){var array=[],x=start;if(step>0)for(;end>x;)array.push(x),x+=step;else if(0>step)for(;x>end;)array.push(x),x+=step;return array}function _rangeInc(start,end,step){var array=[],x=start;if(step>0)for(;end>=x;)array.push(x),x+=step;else if(0>step)for(;x>=end;)array.push(x),x+=step;return array}function _bigRangeEx(start,end,step){var array=[],x=start;if(step.gt(ZERO))for(;x.lt(end);)array.push(x),x=x.plus(step);else if(step.lt(ZERO))for(;x.gt(end);)array.push(x),x=x.plus(step);return array}function _bigRangeInc(start,end,step){var array=[],x=start;if(step.gt(ZERO))for(;x.lte(end);)array.push(x),x=x.plus(step);else if(step.lt(ZERO))for(;x.gte(end);)array.push(x),x=x.plus(step);return array}function _parse(str){var args=str.split(":"),nums=args.map(function(arg){return Number(arg)}),invalid=nums.some(function(num){return isNaN(num)});if(invalid)return null;switch(nums.length){case 2:return{start:nums[0],end:nums[1],step:1};case 3:return{start:nums[0],end:nums[2],step:nums[1]};default:return null}}var matrix=load(require("../../type/matrix/function/matrix")),ZERO=new type.BigNumber(0),ONE=new type.BigNumber(1),range=typed("range",{string:_strRange,"string, boolean":_strRange,"number, number":function(start,end){return _out(_rangeEx(start,end,1))},"number, number, number":function(start,end,step){return _out(_rangeEx(start,end,step))},"number, number, boolean":function(start,end,includeEnd){return _out(includeEnd?_rangeInc(start,end,1):_rangeEx(start,end,1))},"number, number, number, boolean":function(start,end,step,includeEnd){return _out(includeEnd?_rangeInc(start,end,step):_rangeEx(start,end,step))},"BigNumber, BigNumber":function(start,end){return _out(_bigRangeEx(start,end,ONE))},"BigNumber, BigNumber, BigNumber":function(start,end,step){return _out(_bigRangeEx(start,end,step))},"BigNumber, BigNumber, boolean":function(start,end,includeEnd){return _out(includeEnd?_bigRangeInc(start,end,ONE):_bigRangeEx(start,end,ONE))},"BigNumber, BigNumber, BigNumber, boolean":function(start,end,step,includeEnd){return _out(includeEnd?_bigRangeInc(start,end,step):_bigRangeEx(start,end,step))}});return range.toTex="\\mathrm{${name}}\\left(${args}\\right)",range}exports.name="range",exports.factory=factory},{"../../type/matrix/function/matrix":644}],536:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _resizeString(str,size,defaultChar){if(void 0!==defaultChar){if("string"!=typeof defaultChar||1!==defaultChar.length)throw new TypeError("Single character expected as defaultValue")}else defaultChar=" ";if(1!==size.length)throw new DimensionError(size.length,1);var len=size[0];if("number"!=typeof len||!isInteger(len))throw new TypeError("Invalid size, must contain positive integers (size: "+format(size)+")");if(str.length>len)return str.substring(0,len);if(str.length<len){for(var res=str,i=0,ii=len-str.length;ii>i;i++)res+=defaultChar;return res}return str}var matrix=load(require("../../type/matrix/function/matrix")),resize=function(x,size,defaultValue){if(2!=arguments.length&&3!=arguments.length)throw new ArgumentsError("resize",arguments.length,2,3);if(size&&size.isMatrix===!0&&(size=size.valueOf()),size.length&&size[0]&&size[0].isBigNumber===!0&&(size=size.map(function(value){return value&&value.isBigNumber===!0?value.toNumber():value})),x&&x.isMatrix===!0)return x.resize(size,defaultValue,!0);if("string"==typeof x)return _resizeString(x,size,defaultValue);var asMatrix=Array.isArray(x)?!1:"array"!==config.matrix;if(0==size.length){for(;Array.isArray(x);)x=x[0];return clone(x)}Array.isArray(x)||(x=[x]),x=clone(x);var res=array.resize(x,size,defaultValue);return asMatrix?matrix(res):res};return resize.toTex="\\mathrm{${name}}\\left(${args}\\right)",resize}var DimensionError=require("../../error/DimensionError"),ArgumentsError=require("../../error/ArgumentsError"),isInteger=require("../../utils/number").isInteger,format=require("../../utils/string").format,clone=require("../../utils/object").clone,array=require("../../utils/array");
exports.name="resize",exports.factory=factory},{"../../error/ArgumentsError":226,"../../error/DimensionError":227,"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/number":706,"../../utils/object":707,"../../utils/string":708}],537:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),size=typed("size",{Matrix:function(x){return matrix(x.size())},Array:array.size,string:function(x){return"array"===config.matrix?[x.length]:matrix([x.length])},"number | Complex | BigNumber | Unit | boolean | null":function(x){return"array"===config.matrix?[]:matrix([])}});return size.toTex="\\mathrm{${name}}\\left(${args}\\right)",size}var array=require("../../utils/array");exports.name="size",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670}],538:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),squeeze=typed("squeeze",{Array:function(x){return array.squeeze(object.clone(x))},Matrix:function(x){var res=array.squeeze(x.toArray());return Array.isArray(res)?matrix(res):res},any:function(x){return object.clone(x)}});return squeeze.toTex="\\mathrm{${name}}\\left(${args}\\right)",squeeze}var object=require("../../utils/object"),array=require("../../utils/array");exports.name="squeeze",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/object":707}],539:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _getSubstring(str,index){if(!index||index.isIndex!==!0)throw new TypeError("Index expected");if(1!=index.size().length)throw new DimensionError(index.size().length,1);var strLen=str.length;validateIndex(index.min()[0],strLen),validateIndex(index.max()[0],strLen);var range=index.dimension(0),substr="";return range.forEach(function(v){substr+=str.charAt(v)}),substr}function _setSubstring(str,index,replacement,defaultValue){if(!index||index.isIndex!==!0)throw new TypeError("Index expected");if(1!=index.size().length)throw new DimensionError(index.size().length,1);if(void 0!==defaultValue){if("string"!=typeof defaultValue||1!==defaultValue.length)throw new TypeError("Single character expected as defaultValue")}else defaultValue=" ";var range=index.dimension(0),len=range.size()[0];if(len!=replacement.length)throw new DimensionError(range.size()[0],replacement.length);var strLen=str.length;validateIndex(index.min()[0]),validateIndex(index.max()[0]);for(var chars=[],i=0;strLen>i;i++)chars[i]=str.charAt(i);if(range.forEach(function(v,i){chars[v]=replacement.charAt(i[0])}),chars.length>strLen)for(i=strLen-1,len=chars.length;len>i;i++)chars[i]||(chars[i]=defaultValue);return chars.join("")}var matrix=load(require("../../type/matrix/function/matrix")),subset=typed("subset",{"Array, Index":function(value,index){var m=matrix(value),subset=m.subset(index);return subset&&subset.valueOf()},"Matrix, Index":function(value,index){return value.subset(index)},"string, Index":_getSubstring,"Array, Index, any":function(value,index,replacement){return matrix(clone(value)).subset(index,replacement,void 0).valueOf()},"Array, Index, any, any":function(value,index,replacement,defaultValue){return matrix(clone(value)).subset(index,replacement,defaultValue).valueOf()},"Matrix, Index, any":function(value,index,replacement){return value.clone().subset(index,replacement)},"Matrix, Index, any, any":function(value,index,replacement,defaultValue){return value.clone().subset(index,replacement,defaultValue)},"string, Index, string":_setSubstring,"string, Index, string, string":_setSubstring});return subset.toTex="\\mathrm{${name}}\\left(${args}\\right)",subset}var clone=require("../../utils/object").clone,validateIndex=require("../../utils/array").validateIndex,DimensionError=require("../../error/DimensionError");exports.name="subset",exports.factory=factory},{"../../error/DimensionError":227,"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/object":707}],540:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),add=load(require("../arithmetic/add")),trace=typed("trace",{Array:function(x){return trace(matrix(x))},Matrix:function(x){var c;switch(x.storage()){case"dense":c=_denseTrace(x);break;case"sparse":c=_sparseTrace(x)}return c},any:clone}),_denseTrace=function(m){var size=m._size,data=m._data;switch(size.length){case 1:if(1==size[0])return clone(data[0]);throw new RangeError("Matrix must be square (size: "+format(size)+")");case 2:var rows=size[0],cols=size[1];if(rows===cols){for(var sum=0,i=0;rows>i;i++)sum=add(sum,data[i][i]);return sum}throw new RangeError("Matrix must be square (size: "+format(size)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+format(size)+")")}},_sparseTrace=function(m){var values=m._values,index=m._index,ptr=m._ptr,size=m._size,rows=size[0],columns=size[1];if(rows===columns){var sum=0;if(values.length>0)for(var j=0;columns>j;j++)for(var k0=ptr[j],k1=ptr[j+1],k=k0;k1>k;k++){var i=index[k];if(i===j){sum=add(sum,values[k]);break}if(i>j)break}return sum}throw new RangeError("Matrix must be square (size: "+format(size)+")")};return trace.toTex="\\mathrm{tr}\\left(${args[0]}\\right)",trace}var clone=require("../../utils/object").clone,format=require("../../utils/string").format;exports.name="trace",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/object":707,"../../utils/string":708,"../arithmetic/add":465}],541:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),DenseMatrix=type.DenseMatrix,SparseMatrix=type.SparseMatrix,transpose=typed("transpose",{Array:function(x){return transpose(matrix(x)).valueOf()},Matrix:function(x){var c,size=x.size();switch(size.length){case 1:c=x.clone();break;case 2:var rows=size[0],columns=size[1];if(0===columns)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+format(size)+")");switch(x.storage()){case"dense":c=_denseTranspose(x,rows,columns);break;case"sparse":c=_sparseTranspose(x,rows,columns)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+format(this._size)+")")}return c},any:function(x){return clone(x)}}),_denseTranspose=function(m,rows,columns){for(var transposedRow,data=m._data,transposed=[],j=0;columns>j;j++){transposedRow=transposed[j]=[];for(var i=0;rows>i;i++)transposedRow[i]=clone(data[i][j])}return new DenseMatrix({data:transposed,size:[columns,rows],datatype:m._datatype})},_sparseTranspose=function(m,rows,columns){for(var values=m._values,index=m._index,ptr=m._ptr,cvalues=values?[]:void 0,cindex=[],cptr=[],w=[],x=0;rows>x;x++)w[x]=0;var p,l,j;for(p=0,l=index.length;l>p;p++)w[index[p]]++;for(var sum=0,i=0;rows>i;i++)cptr.push(sum),sum+=w[i],w[i]=cptr[i];for(cptr.push(sum),j=0;columns>j;j++)for(var k0=ptr[j],k1=ptr[j+1],k=k0;k1>k;k++){var q=w[index[k]]++;cindex[q]=j,values&&(cvalues[q]=clone(values[k]))}return new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[columns,rows],datatype:m._datatype})};return transpose.toTex="\\left(${args[0]}\\right)"+latex.operators.transpose,transpose}var clone=require("../../utils/object").clone,format=require("../../utils/string").format;exports.name="transpose",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/latex":705,"../../utils/object":707,"../../utils/string":708}],542:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _zeros(size,format){var hasBigNumbers=_normalize(size),defaultValue=hasBigNumbers?new type.BigNumber(0):0;if(_validate(size),format){var m=matrix(format);return size.length>0?m.resize(size,defaultValue):m}var arr=[];return size.length>0?resize(arr,size,defaultValue):arr}function _normalize(size){var hasBigNumbers=!1;return size.forEach(function(value,index,arr){value&&value.isBigNumber===!0&&(hasBigNumbers=!0,arr[index]=value.toNumber())}),hasBigNumbers}function _validate(size){size.forEach(function(value){if("number"!=typeof value||!isInteger(value)||0>value)throw new Error("Parameters in function zeros must be positive integers")})}var matrix=load(require("../../type/matrix/function/matrix")),zeros=typed("zeros",{"":function(){return"array"===config.matrix?_zeros([]):_zeros([],"default")},"...number | BigNumber | string":function(size){var last=size[size.length-1];if("string"==typeof last){var format=size.pop();return _zeros(size,format)}return"array"===config.matrix?_zeros(size):_zeros(size,"default")},Array:_zeros,Matrix:function(size){var format=size.storage();return _zeros(size.valueOf(),format)},"Array | Matrix, string":function(size,format){return _zeros(size.valueOf(),format)}});return zeros.toTex="\\mathrm{${name}}\\left(${args}\\right)",zeros}var isInteger=require("../../utils/number").isInteger,resize=require("../../utils/array").resize;exports.name="zeros",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/number":706}],543:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var combinations=typed("combinations",{"number, number":function(n,k){var max,result,i;if(!isInteger(n)||0>n)throw new TypeError("Positive integer value expected in function combinations");if(!isInteger(k)||0>k)throw new TypeError("Positive integer value expected in function combinations");if(k>n)throw new TypeError("k must be less than or equal to n");for(max=Math.max(k,n-k),result=1,i=1;n-max>=i;i++)result=result*(max+i)/i;return result},"BigNumber, BigNumber":function(n,k){var max,result,i,ii,one=new type.BigNumber(1);if(!isPositiveInteger(n)||!isPositiveInteger(k))throw new TypeError("Positive integer value expected in function combinations");if(k.gt(n))throw new TypeError("k must be less than n in function combinations");for(max=n.minus(k),k.lt(max)&&(max=k),result=one,i=one,ii=n.minus(max);i.lte(ii);i=i.plus(1))result=result.times(max.plus(i)).dividedBy(i);return result}});return combinations.toTex="\\binom{${args[0]}}{${args[1]}}",combinations}function isPositiveInteger(n){return n.isInteger()&&n.gte(0)}var isInteger=require("../../utils/number").isInteger;exports.name="combinations",exports.factory=factory},{"../../utils/number":706}],544:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function distribution(name){if(!distributions.hasOwnProperty(name))throw new Error("Unknown distribution "+name);var args=Array.prototype.slice.call(arguments,1),distribution=distributions[name].apply(this,args);return function(distribution){var randFunctions={random:function(arg1,arg2,arg3){var size,min,max;if(arguments.length>3)throw new ArgumentsError("random",arguments.length,0,3);if(1===arguments.length?isCollection(arg1)?size=arg1:max=arg1:2===arguments.length?isCollection(arg1)?(size=arg1,max=arg2):(min=arg1,max=arg2):(size=arg1,min=arg2,max=arg3),void 0===max&&(max=1),void 0===min&&(min=0),void 0!==size){var res=_randomDataForMatrix(size.valueOf(),min,max,_random);return size&&size.isMatrix===!0?matrix(res):res}return _random(min,max)},randomInt:function(arg1,arg2,arg3){var size,min,max;if(arguments.length>3||arguments.length<1)throw new ArgumentsError("randomInt",arguments.length,1,3);if(1===arguments.length?isCollection(arg1)?size=arg1:max=arg1:2===arguments.length?isCollection(arg1)?(size=arg1,max=arg2):(min=arg1,max=arg2):(size=arg1,min=arg2,max=arg3),void 0===min&&(min=0),void 0!==size){var res=_randomDataForMatrix(size.valueOf(),min,max,_randomInt);return size&&size.isMatrix===!0?matrix(res):res}return _randomInt(min,max)},pickRandom:function(possibles){if(1!==arguments.length)throw new ArgumentsError("pickRandom",arguments.length,1);if(possibles&&possibles.isMatrix===!0)possibles=possibles.valueOf();else if(!Array.isArray(possibles))throw new TypeError("Unsupported type of value in function pickRandom");if(array.size(possibles).length>1)throw new Error("Only one dimensional vectors supported");return possibles[Math.floor(Math.random()*possibles.length)]}},_random=function(min,max){return min+distribution()*(max-min)},_randomInt=function(min,max){return Math.floor(min+distribution()*(max-min))},_randomDataForMatrix=function(size,min,max,randFunc){var length,i,data=[];if(size=size.slice(0),size.length>1)for(i=0,length=size.shift();length>i;i++)data.push(_randomDataForMatrix(size,min,max,randFunc));else for(i=0,length=size.shift();length>i;i++)data.push(randFunc(min,max));return data};return randFunctions}(distribution)}var matrix=load(require("../../type/matrix/function/matrix")),array=require("../../utils/array"),distributions={uniform:function(){return Math.random},normal:function(){return function(){for(var u1,u2,picked=-1;0>picked||picked>1;)u1=Math.random(),u2=Math.random(),picked=1/6*Math.pow(-2*Math.log(u1),.5)*Math.cos(2*Math.PI*u2)+.5;return picked}}};return distribution.toTex="\\mathrm{${name}}\\left(${args}\\right)",distribution}var ArgumentsError=require("../../error/ArgumentsError"),isCollection=require("../../utils/collection/isCollection");exports.name="distribution",exports.factory=factory},{"../../error/ArgumentsError":226,"../../type/matrix/function/matrix":644,"../../utils/array":670,"../../utils/collection/isCollection":699}],545:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var gamma=load(require("./gamma")),latex=require("../../utils/latex"),factorial=typed("factorial",{number:function(n){if(0>n)throw new Error("Value must be non-negative");return gamma(n+1)},BigNumber:function(n){if(n.isNegative())throw new Error("Value must be non-negative");return gamma(n.plus(1))},"Array | Matrix":function(n){return deepMap(n,factorial)}});return factorial.toTex="\\left(${args[0]}\\right)"+latex.operators.factorial,factorial}var deepMap=require("../../utils/collection/deepMap");require("../../utils/bignumber/constants");exports.name="factorial",exports.factory=factory},{"../../utils/bignumber/constants":685,"../../utils/collection/deepMap":698,"../../utils/latex":705,"./gamma":546}],546:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function bigFactorial(n){if(n.isZero())return new type.BigNumber(1);for(var precision=config.precision+(0|Math.log(n.toNumber())),Big=type.BigNumber.constructor({precision:precision}),res=new Big(n),value=n.toNumber()-1;value>1;)res=res.times(value),value--;return new type.BigNumber(res.toPrecision(type.BigNumber.precision))}var multiply=load(require("../arithmetic/multiply")),pow=load(require("../arithmetic/pow")),gamma=typed("gamma",{number:function(n){var t,x;if(isInteger(n)){if(0>=n)return isFinite(n)?1/0:NaN;if(n>171)return 1/0;for(var value=n-2,res=n-1;value>1;)res*=value,value--;return 0==res&&(res=1),res}if(.5>n)return Math.PI/(Math.sin(Math.PI*n)*gamma(1-n));if(n>=171.35)return 1/0;if(n>85){var twoN=n*n,threeN=twoN*n,fourN=threeN*n,fiveN=fourN*n;return Math.sqrt(2*Math.PI/n)*Math.pow(n/Math.E,n)*(1+1/(12*n)+1/(288*twoN)-139/(51840*threeN)-571/(2488320*fourN)+163879/(209018880*fiveN)+5246819/(75246796800*fiveN*n))}--n,x=p[0];for(var i=1;i<p.length;++i)x+=p[i]/(n+i);return t=n+g+.5,Math.sqrt(2*Math.PI)*Math.pow(t,n+.5)*Math.exp(-t)*x},Complex:function(n){var t,x;if(0==n.im)return gamma(n.re);n=new type.Complex(n.re-1,n.im),x=new type.Complex(p[0],0);for(var i=1;i<p.length;++i){var real=n.re+i,den=real*real+n.im*n.im;0!=den?(x.re+=p[i]*real/den,x.im+=-(p[i]*n.im)/den):x.re=p[i]<0?-(1/0):1/0}t=new type.Complex(n.re+g+.5,n.im);var twoPiSqrt=Math.sqrt(2*Math.PI);n.re+=.5;var result=pow(t,n);0==result.im?result.re*=twoPiSqrt:0==result.re?result.im*=twoPiSqrt:(result.re*=twoPiSqrt,result.im*=twoPiSqrt);var r=Math.exp(-t.re);return t.re=r*Math.cos(-t.im),t.im=r*Math.sin(-t.im),multiply(multiply(result,t),x)},BigNumber:function(n){if(n.isInteger())return n.isNegative()||n.isZero()?new type.BigNumber(1/0):bigFactorial(n.minus(1));if(!n.isFinite())return new type.BigNumber(n.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(n){return deepMap(n,gamma)}});return gamma.toTex="\\Gamma\\left(${args[0]}\\right)",gamma}var deepMap=require("../../utils/collection/deepMap"),isInteger=require("../../utils/number").isInteger,g=4.7421875,p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];exports.name="gamma",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/number":706,"../arithmetic/multiply":485,"../arithmetic/pow":489}],547:[function(require,module,exports){module.exports=[require("./combinations"),require("./factorial"),require("./gamma"),require("./kldivergence"),require("./multinomial"),require("./permutations"),require("./pickRandom"),require("./random"),require("./randomInt")]},{"./combinations":543,"./factorial":545,"./gamma":546,"./kldivergence":548,"./multinomial":549,"./permutations":550,"./pickRandom":551,"./random":552,"./randomInt":553}],548:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _kldiv(q,p){var plength=p.size().length,qlength=q.size().length;if(plength>1)throw new Error("first object must be one dimensional");if(qlength>1)throw new Error("second object must be one dimensional");if(plength!==qlength)throw new Error("Length of two vectors must be equal");var sumq=sum(q);if(0===sumq)throw new Error("Sum of elements in first object must be non zero");var sump=sum(p);if(0===sump)throw new Error("Sum of elements in second object must be non zero");var qnorm=divide(q,sum(q)),pnorm=divide(p,sum(p)),result=sum(multiply(qnorm,log(dotDivide(qnorm,pnorm))));return isNumeric(result)?result:Number.NaN}var matrix=load(require("../../type/matrix/function/matrix")),divide=load(require("../arithmetic/divide")),sum=load(require("../statistics/sum")),multiply=load(require("../arithmetic/multiply")),dotDivide=load(require("../arithmetic/dotDivide")),log=load(require("../arithmetic/log")),isNumeric=load(require("../utils/isNumeric")),kldivergence=typed("kldivergence",{"Array, Array":function(q,p){return _kldiv(matrix(q),matrix(p))},"Matrix, Array":function(q,p){return _kldiv(q,matrix(p))},"Array, Matrix":function(q,p){return _kldiv(matrix(q),p)},"Matrix, Matrix":function(q,p){return _kldiv(q,p)}});return kldivergence}exports.name="kldivergence",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../arithmetic/divide":470,"../arithmetic/dotDivide":472,"../arithmetic/log":482,"../arithmetic/multiply":485,"../statistics/sum":573,"../utils/isNumeric":610}],549:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var add=load(require("../arithmetic/add")),multiply=load(require("../arithmetic/multiply")),divide=load(require("../arithmetic/divide")),factorial=load(require("../probability/factorial")),isInteger=load(require("../utils/isInteger")),isPositive=load(require("../utils/isPositive"));return typed("multinomial",{"Array | Matrix":function(a){var sum=0,denom=1;return deepForEach(a,function(ai){if(!isInteger(ai)||!isPositive(ai))throw new TypeError("Positive integer value expected in function multinomial");sum=add(sum,ai),denom=multiply(denom,factorial(ai))}),divide(factorial(sum),denom)}})}var deepForEach=require("../../utils/collection/deepForEach");exports.name="multinomial",exports.factory=factory},{"../../utils/collection/deepForEach":697,"../arithmetic/add":465,"../arithmetic/divide":470,"../arithmetic/multiply":485,"../probability/factorial":545,"../utils/isInteger":608,"../utils/isPositive":611}],550:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var factorial=load(require("./factorial")),permutations=typed("permutations",{"number | BigNumber":factorial,"number, number":function(n,k){var result,i;if(!isInteger(n)||0>n)throw new TypeError("Positive integer value expected in function permutations");if(!isInteger(k)||0>k)throw new TypeError("Positive integer value expected in function permutations");if(k>n)throw new TypeError("second argument k must be less than or equal to first argument n");for(result=1,i=n-k+1;n>=i;i++)result*=i;return result},"BigNumber, BigNumber":function(n,k){var result,i;if(!isPositiveInteger(n)||!isPositiveInteger(k))throw new TypeError("Positive integer value expected in function permutations");if(k.gt(n))throw new TypeError("second argument k must be less than or equal to first argument n");for(result=new type.BigNumber(1),i=n.minus(k).plus(1);i.lte(n);i=i.plus(1))result=result.times(i);return result}});return permutations.toTex="\\mathrm{${name}}\\left(${args}\\right)",permutations}function isPositiveInteger(n){return n.isInteger()&&n.gte(0)}var isInteger=require("../../utils/number").isInteger;exports.name="permutations",exports.factory=factory},{"../../utils/number":706,"./factorial":545}],551:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var distribution=load(require("./distribution")),pickRandom=distribution("uniform").pickRandom;return pickRandom.toTex="\\mathrm{${name}}\\left(${args}\\right)",pickRandom}exports.name="pickRandom",exports.factory=factory},{"./distribution":544}],552:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var distribution=load(require("./distribution")),random=distribution("uniform").random;return random.toTex="\\mathrm{${name}}\\left(${args}\\right)",random}exports.name="random",exports.factory=factory},{"./distribution":544}],553:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var distribution=load(require("./distribution")),randomInt=distribution("uniform").randomInt;return randomInt.toTex="\\mathrm{${name}}\\left(${args}\\right)",randomInt}exports.name="randomInt",exports.factory=factory},{"./distribution":544}],554:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm05=load(require("../../type/matrix/utils/algorithm05")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),compare=typed("compare",{"boolean, boolean":function(x,y){return x===y?0:x>y?1:-1},"number, number":function(x,y){return x===y||nearlyEqual(x,y,config.epsilon)?0:x>y?1:-1},"BigNumber, BigNumber":function(x,y){return new type.BigNumber(x.cmp(y))},"Fraction, Fraction":function(x,y){return new type.Fraction(x.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return compare(x.value,y.value)},"string, string":function(x,y){return x===y?0:x>y?1:-1},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm05(x,y,compare);break;default:c=algorithm03(y,x,compare,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,compare,!1);break;default:c=algorithm13(x,y,compare)}}return c},"Array, Array":function(x,y){return compare(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return compare(matrix(x),y)},"Matrix, Array":function(x,y){return compare(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,compare,!1);break;default:c=algorithm14(x,y,compare,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,compare,!0);break;default:c=algorithm14(y,x,compare,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,compare,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,compare,!0).valueOf()}});return compare.toTex="\\mathrm{${name}}\\left(${args}\\right)",compare}var nearlyEqual=require("../../utils/number").nearlyEqual;exports.name="compare",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm05":651,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/number":706}],555:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _deepEqual(x,y){if(Array.isArray(x)){if(Array.isArray(y)){var len=x.length;if(len!==y.length)return!1;for(var i=0;len>i;i++)if(!_deepEqual(x[i],y[i]))return!1;return!0}return!1}return Array.isArray(y)?!1:equal(x,y)}var equal=load(require("./equal")),deepEqual=typed("deepEqual",{"any, any":function(x,y){return _deepEqual(x.valueOf(),y.valueOf())}});return deepEqual.toTex="\\mathrm{${name}}\\left(${args}\\right)",deepEqual}exports.name="deepEqual",exports.factory=factory},{"./equal":556}],556:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),equalScalar=load(require("./equalScalar")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),latex=require("../../utils/latex"),equal=typed("equal",{"any, any":function(x,y){return null===x?null===y:null===y?null===x:void 0===x?void 0===y:void 0===y?void 0===x:equalScalar(x,y)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,equalScalar);break;default:c=algorithm03(y,x,equalScalar,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,equalScalar,!1);break;default:c=algorithm13(x,y,equalScalar)}}return c},"Array, Array":function(x,y){return equal(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return equal(matrix(x),y)},"Matrix, Array":function(x,y){return equal(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,equalScalar,!1);break;default:c=algorithm14(x,y,equalScalar,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,equalScalar,!0);break;default:c=algorithm14(y,x,equalScalar,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,equalScalar,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,equalScalar,!0).valueOf()}});return equal.toTex="\\left(${args[0]}"+latex.operators.equal+"${args[1]}\\right)",equal}exports.name="equal",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"./equalScalar":557}],557:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=typed("equalScalar",{"boolean, boolean":function(x,y){return x===y},"number, number":function(x,y){return x===y||nearlyEqual(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.eq(y)},"Fraction, Fraction":function(x,y){return x.equals(y)},"Complex, Complex":function(x,y){return(x.re===y.re||nearlyEqual(x.re,y.re,config.epsilon))&&(x.im===y.im||nearlyEqual(x.im,y.im,config.epsilon))},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return equalScalar(x.value,y.value)},"string, string":function(x,y){return x===y}});return equalScalar}var nearlyEqual=require("../../utils/number").nearlyEqual;exports.factory=factory},{"../../utils/number":706}],558:[function(require,module,exports){module.exports=[require("./compare"),require("./deepEqual"),require("./equal"),require("./larger"),require("./largerEq"),require("./smaller"),require("./smallerEq"),require("./unequal")]},{"./compare":554,"./deepEqual":555,"./equal":556,"./larger":559,"./largerEq":560,"./smaller":561,"./smallerEq":562,"./unequal":563}],559:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),latex=require("../../utils/latex"),larger=typed("larger",{"boolean, boolean":function(x,y){return x>y},"number, number":function(x,y){return x>y&&!nearlyEqual(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.gt(y)},"Fraction, Fraction":function(x,y){return 1===x.compare(y)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return larger(x.value,y.value)},"string, string":function(x,y){return x>y},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,larger);break;default:c=algorithm03(y,x,larger,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,larger,!1);break;default:c=algorithm13(x,y,larger)}}return c},"Array, Array":function(x,y){return larger(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return larger(matrix(x),y)},"Matrix, Array":function(x,y){return larger(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,larger,!1);break;default:c=algorithm14(x,y,larger,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,larger,!0);break;default:c=algorithm14(y,x,larger,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,larger,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,larger,!0).valueOf()}});return larger.toTex="\\left(${args[0]}"+latex.operators.larger+"${args[1]}\\right)",larger}var nearlyEqual=require("../../utils/number").nearlyEqual;exports.name="larger",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"../../utils/number":706}],560:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),latex=require("../../utils/latex"),largerEq=typed("largerEq",{"boolean, boolean":function(x,y){return x>=y},"number, number":function(x,y){return x>=y||nearlyEqual(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){
return x.gte(y)},"Fraction, Fraction":function(x,y){return-1!==x.compare(y)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return largerEq(x.value,y.value)},"string, string":function(x,y){return x>=y},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,largerEq);break;default:c=algorithm03(y,x,largerEq,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,largerEq,!1);break;default:c=algorithm13(x,y,largerEq)}}return c},"Array, Array":function(x,y){return largerEq(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return largerEq(matrix(x),y)},"Matrix, Array":function(x,y){return largerEq(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,largerEq,!1);break;default:c=algorithm14(x,y,largerEq,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,largerEq,!0);break;default:c=algorithm14(y,x,largerEq,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,largerEq,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,largerEq,!0).valueOf()}});return largerEq.toTex="\\left(${args[0]}"+latex.operators.largerEq+"${args[1]}\\right)",largerEq}var nearlyEqual=require("../../utils/number").nearlyEqual;exports.name="largerEq",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"../../utils/number":706}],561:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),latex=require("../../utils/latex"),smaller=typed("smaller",{"boolean, boolean":function(x,y){return y>x},"number, number":function(x,y){return y>x&&!nearlyEqual(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.lt(y)},"Fraction, Fraction":function(x,y){return-1===x.compare(y)},"Complex, Complex":function(x,y){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return smaller(x.value,y.value)},"string, string":function(x,y){return y>x},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,smaller);break;default:c=algorithm03(y,x,smaller,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,smaller,!1);break;default:c=algorithm13(x,y,smaller)}}return c},"Array, Array":function(x,y){return smaller(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return smaller(matrix(x),y)},"Matrix, Array":function(x,y){return smaller(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,smaller,!1);break;default:c=algorithm14(x,y,smaller,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,smaller,!0);break;default:c=algorithm14(y,x,smaller,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,smaller,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,smaller,!0).valueOf()}});return smaller.toTex="\\left(${args[0]}"+latex.operators.smaller+"${args[1]}\\right)",smaller}var nearlyEqual=require("../../utils/number").nearlyEqual;exports.name="smaller",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"../../utils/number":706}],562:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),latex=require("../../utils/latex"),smallerEq=typed("smallerEq",{"boolean, boolean":function(x,y){return y>=x},"number, number":function(x,y){return y>=x||nearlyEqual(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return x.lte(y)},"Fraction, Fraction":function(x,y){return 1!==x.compare(y)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return smallerEq(x.value,y.value)},"string, string":function(x,y){return y>=x},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,smallerEq);break;default:c=algorithm03(y,x,smallerEq,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,smallerEq,!1);break;default:c=algorithm13(x,y,smallerEq)}}return c},"Array, Array":function(x,y){return smallerEq(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return smallerEq(matrix(x),y)},"Matrix, Array":function(x,y){return smallerEq(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,smallerEq,!1);break;default:c=algorithm14(x,y,smallerEq,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,smallerEq,!0);break;default:c=algorithm14(y,x,smallerEq,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,smallerEq,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,smallerEq,!0).valueOf()}});return smallerEq.toTex="\\left(${args[0]}"+latex.operators.smallerEq+"${args[1]}\\right)",smallerEq}var nearlyEqual=require("../../utils/number").nearlyEqual;exports.name="smallerEq",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"../../utils/number":706}],563:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm07=load(require("../../type/matrix/utils/algorithm07")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),latex=require("../../utils/latex"),unequal=typed("unequal",{"any, any":function(x,y){return null===x?null!==y:null===y?null!==x:void 0===x?void 0!==y:void 0===y?void 0!==x:_unequal(x,y)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm07(x,y,_unequal);break;default:c=algorithm03(y,x,_unequal,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,_unequal,!1);break;default:c=algorithm13(x,y,_unequal)}}return c},"Array, Array":function(x,y){return unequal(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return unequal(matrix(x),y)},"Matrix, Array":function(x,y){return unequal(x,matrix(y))},"Matrix, any":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm12(x,y,_unequal,!1);break;default:c=algorithm14(x,y,_unequal,!1)}return c},"any, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,_unequal,!0);break;default:c=algorithm14(y,x,_unequal,!0)}return c},"Array, any":function(x,y){return algorithm14(matrix(x),y,_unequal,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,_unequal,!0).valueOf()}}),_unequal=typed("_unequal",{"boolean, boolean":function(x,y){return x!==y},"number, number":function(x,y){return!nearlyEqual(x,y,config.epsilon)},"BigNumber, BigNumber":function(x,y){return!x.eq(y)},"Fraction, Fraction":function(x,y){return 0!==x.compare(y)},"Complex, Complex":function(x,y){return!nearlyEqual(x.re,y.re,config.epsilon)||!nearlyEqual(x.im,y.im,config.epsilon)},"Unit, Unit":function(x,y){if(!x.equalBase(y))throw new Error("Cannot compare units with different base");return unequal(x.value,y.value)},"string, string":function(x,y){return x!==y}});return unequal.toTex="\\left(${args[0]}"+latex.operators.unequal+"${args[1]}\\right)",unequal}var nearlyEqual=require("../../utils/number").nearlyEqual;exports.name="unequal",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm07":653,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705,"../../utils/number":706}],564:[function(require,module,exports){module.exports=[require("./max"),require("./mean"),require("./median"),require("./min"),require("./mode"),require("./prod"),require("./quantileSeq"),require("./std"),require("./sum"),require("./var")]},{"./max":565,"./mean":566,"./median":567,"./min":568,"./mode":569,"./prod":570,"./quantileSeq":571,"./std":572,"./sum":573,"./var":574}],565:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _largest(x,y){return larger(x,y)?x:y}function _max(array){var max=void 0;if(deepForEach(array,function(value){(void 0===max||larger(value,max))&&(max=value)}),void 0===max)throw new Error("Cannot calculate max of an empty array");return max}var larger=load(require("../relational/larger")),max=typed("max",{"Array | Matrix":_max,"Array | Matrix, number | BigNumber":function(array,dim){return reduce(array,dim.valueOf(),_largest)},"...":function(){return _max(arguments)}});return max.toTex="\\max\\left(${args}\\right)",max}var deepForEach=require("../../utils/collection/deepForEach"),reduce=require("../../utils/collection/reduce");exports.name="max",exports.factory=factory},{"../../utils/collection/deepForEach":697,"../../utils/collection/reduce":700,"../relational/larger":559}],566:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _nmean(array,dim){var sum=reduce(array,dim,add),s=Array.isArray(array)?size(array):array.size();return divide(sum,s[dim])}function _mean(array){var sum=0,num=0;if(deepForEach(array,function(value){sum=add(sum,value),num++}),0===num)throw new Error("Cannot calculate mean of an empty array");return divide(sum,num)}var add=load(require("../arithmetic/add")),divide=load(require("../arithmetic/divide")),mean=typed("mean",{"Array | Matrix":_mean,"Array | Matrix, number | BigNumber":_nmean,"...":function(){return _mean(arguments)}});return mean.toTex="\\mathrm{${name}}\\left(${args}\\right)",mean}var size=require("../../utils/array").size,deepForEach=require("../../utils/collection/deepForEach"),reduce=require("../../utils/collection/reduce");exports.name="mean",exports.factory=factory},{"../../utils/array":670,"../../utils/collection/deepForEach":697,"../../utils/collection/reduce":700,"../arithmetic/add":465,"../arithmetic/divide":470}],567:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _median(array){array=flatten(array.valueOf());var num=array.length;if(0==num)throw new Error("Cannot calculate median of an empty array");if(num%2==0){for(var mid=num/2-1,right=partitionSelect(array,mid+1),left=array[mid],i=0;mid>i;++i)compare(array[i],left)>0&&(left=array[i]);return middle2(left,right)}var m=partitionSelect(array,(num-1)/2);return middle(m)}var add=load(require("../arithmetic/addScalar")),divide=load(require("../arithmetic/divideScalar")),compare=load(require("../relational/compare")),partitionSelect=load(require("../utils/partitionSelect")),median=typed("median",{"Array | Matrix":_median,"Array | Matrix, number | BigNumber":function(array,dim){throw new Error("median(A, dim) is not yet supported")},"...":function(){return _median(Array.prototype.slice.call(arguments))}}),middle=typed({"number | BigNumber | Unit":function(value){return value}}),middle2=typed({"number | BigNumber | Unit, number | BigNumber | Unit":function(left,right){return divide(add(left,right),2)}});return median.toTex="\\mathrm{${name}}\\left(${args}\\right)",median}var flatten=require("../../utils/array").flatten;exports.name="median",exports.factory=factory},{"../../utils/array":670,"../arithmetic/addScalar":466,"../arithmetic/divideScalar":471,"../relational/compare":554,"../utils/partitionSelect":614}],568:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _smallest(x,y){return smaller(x,y)?x:y}function _min(array){var min=void 0;if(deepForEach(array,function(value){(void 0===min||smaller(value,min))&&(min=value)}),void 0===min)throw new Error("Cannot calculate min of an empty array");return min}var smaller=load(require("../relational/smaller")),min=typed("min",{"Array | Matrix":_min,"Array | Matrix, number | BigNumber":function(array,dim){return reduce(array,dim.valueOf(),_smallest)},"...":function(){return _min(arguments)}});return min.toTex="\\min\\left(${args}\\right)",min}var deepForEach=require("../../utils/collection/deepForEach"),reduce=require("../../utils/collection/reduce");exports.name="min",exports.factory=factory},{"../../utils/collection/deepForEach":697,"../../utils/collection/reduce":700,"../relational/smaller":561}],569:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _mode(values){values=flatten(values.valueOf());var num=values.length;if(0==num)throw new Error("Cannot calculate mode of an empty array");var count={},mode=[],max=0;for(var i in values)values[i]in count||(count[values[i]]=0),count[values[i]]++,count[values[i]]==max?mode.push(values[i]):count[values[i]]>max&&(max=count[values[i]],mode=[values[i]]);return mode}var mode=typed("mode",{"Array | Matrix":_mode,"...":function(){return _mode(Array.prototype.slice.call(arguments))}});return mode}var flatten=require("../../utils/array").flatten;exports.name="mode",exports.factory=factory},{"../../utils/array":670}],570:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _prod(array){var prod=void 0;if(deepForEach(array,function(value){prod=void 0===prod?value:multiply(prod,value)}),void 0===prod)throw new Error("Cannot calculate prod of an empty array");return prod}var multiply=load(require("../arithmetic/multiplyScalar")),prod=typed("prod",{"Array | Matrix":_prod,"Array | Matrix, number | BigNumber":function(array,dim){throw new Error("prod(A, dim) is not yet supported")},"...":function(){return _prod(arguments)}});return prod.toTex="\\mathrm{${name}}\\left(${args}\\right)",prod}var deepForEach=require("../../utils/collection/deepForEach");exports.name="prod",exports.factory=factory},{"../../utils/collection/deepForEach":697,"../arithmetic/multiplyScalar":486}],571:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function quantileSeq(data,probOrN,sorted){var probArr,dataArr,one;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(isCollection(data)){if(sorted=sorted||!1,"boolean"==typeof sorted){if(dataArr=data.valueOf(),isNumber(probOrN)){if(0>probOrN)throw new Error("N/prob must be non-negative");if(1>=probOrN)return _quantileSeq(dataArr,probOrN,sorted);if(probOrN>1){if(!isInteger(probOrN))throw new Error("N must be a positive integer");var nPlusOne=probOrN+1;probArr=new Array(probOrN);for(var i=0;probOrN>i;)probArr[i]=_quantileSeq(dataArr,++i/nPlusOne,sorted);return probArr}}if(probOrN&&probOrN.isBigNumber){if(probOrN.isNegative())throw new Error("N/prob must be non-negative");if(one=probOrN.constructor.ONE,probOrN.lte(one))return _quantileSeq(dataArr,probOrN,sorted);if(probOrN.gt(one)){if(!probOrN.isInteger())throw new Error("N must be a positive integer");var intN=probOrN.toNumber();if(intN>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var nPlusOne=new type.BigNumber(intN+1);probArr=new Array(intN);for(var i=0;intN>i;)probArr[i]=_quantileSeq(dataArr,new type.BigNumber(++i).div(nPlusOne),sorted);return probArr}}if(Array.isArray(probOrN)){probArr=new Array(probOrN.length);for(var i=0;i<probArr.length;++i){var currProb=probOrN[i];if(isNumber(currProb)){if(0>currProb||currProb>1)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!currProb||!currProb.isBigNumber)throw new TypeError("Unexpected type of argument in function quantileSeq");if(one=currProb.constructor.ONE,currProb.isNegative()||currProb.gt(one))throw new Error("Probability must be between 0 and 1, inclusive")}probArr[i]=_quantileSeq(dataArr,currProb,sorted)}return probArr}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}function _quantileSeq(array,prob,sorted){var flat=flatten(array),len=flat.length;if(0===len)throw new Error("Cannot calculate quantile of an empty sequence");if(isNumber(prob)){var index=prob*(len-1),fracPart=index%1;if(0===fracPart){var value=sorted?flat[index]:partitionSelect(flat,index);return validate(value),value}var left,right,integerPart=Math.floor(index);if(sorted)left=flat[integerPart],right=flat[integerPart+1];else{right=partitionSelect(flat,integerPart+1),left=flat[integerPart];for(var i=0;integerPart>i;++i)compare(flat[i],left)>0&&(left=flat[i])}return validate(left),validate(right),add(multiply(left,1-fracPart),multiply(right,fracPart))}var index=prob.times(len-1);if(index.isInteger()){index=index.toNumber();var value=sorted?flat[index]:partitionSelect(flat,index);return validate(value),value}var left,right,integerPart=index.floor(),fracPart=index.minus(integerPart),integerPartNumber=integerPart.toNumber();if(sorted)left=flat[integerPartNumber],right=flat[integerPartNumber+1];else{right=partitionSelect(flat,integerPartNumber+1),left=flat[integerPartNumber];for(var i=0;integerPartNumber>i;++i)compare(flat[i],left)>0&&(left=flat[i])}validate(left),validate(right);var one=fracPart.constructor.ONE;return add(multiply(left,one.minus(fracPart)),multiply(right,fracPart))}var add=load(require("../arithmetic/add")),multiply=load(require("../arithmetic/multiply")),partitionSelect=load(require("../utils/partitionSelect")),compare=load(require("../relational/compare")),validate=typed({"number | BigNumber | Unit":function(x){return x}});return quantileSeq}var isInteger=require("../../utils/number").isInteger,isNumber=require("../../utils/number").isNumber,flatten=require("../../utils/array").flatten,isCollection=require("../../utils/collection/isCollection");exports.name="quantileSeq",exports.factory=factory},{"../../utils/array":670,"../../utils/collection/isCollection":699,"../../utils/number":706,"../arithmetic/add":465,"../arithmetic/multiply":485,"../relational/compare":554,"../utils/partitionSelect":614}],572:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _std(array,normalization){if(0==array.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");return sqrt(variance.apply(null,arguments))}var sqrt=load(require("../arithmetic/sqrt")),variance=load(require("../statistics/var")),std=typed("std",{"Array | Matrix":_std,"Array | Matrix, string":_std,"...":function(){return _std(Array.prototype.slice.call(arguments))}});return std.toTex="\\mathrm{${name}}\\left(${args}\\right)",std}exports.name="std",exports.factory=factory},{"../arithmetic/sqrt":492,"../statistics/var":574}],573:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _sum(array){var sum=void 0;if(deepForEach(array,function(value){sum=void 0===sum?value:add(sum,value)}),void 0===sum)switch(config.number){case"number":return 0;case"bignumber":return new type.BigNumber(0);case"fraction":return new type.Fraction(0);default:return 0}return sum}var add=load(require("../arithmetic/addScalar")),sum=typed("sum",{"Array | Matrix":function(args){return _sum(args)},"Array | Matrix, number | BigNumber":function(){throw new Error("sum(A, dim) is not yet supported")},"...":function(){return _sum(arguments)}});return sum.toTex="\\mathrm{${name}}\\left(${args}\\right)",sum}var deepForEach=require("../../utils/collection/deepForEach");exports.name="sum",exports.factory=factory},{"../../utils/collection/deepForEach":697,"../arithmetic/addScalar":466}],574:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _var(array,normalization){var sum=0,num=0;if(0==array.length)throw new SyntaxError("Function var requires one or more parameters (0 provided)");if(deepForEach(array,function(value){sum=add(sum,value),num++}),0===num)throw new Error("Cannot calculate var of an empty array");var mean=divide(sum,num);switch(sum=0,deepForEach(array,function(value){var diff=subtract(value,mean);sum=add(sum,multiply(diff,diff))}),normalization){case"uncorrected":return divide(sum,num);case"biased":return divide(sum,num+1);case"unbiased":var zero=sum&&sum.isBigNumber===!0?new type.BigNumber(0):0;return 1==num?zero:divide(sum,num-1);default:throw new Error('Unknown normalization "'+normalization+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}var add=load(require("../arithmetic/addScalar")),subtract=load(require("../arithmetic/subtract")),multiply=load(require("../arithmetic/multiplyScalar")),divide=load(require("../arithmetic/divideScalar")),variance=typed("variance",{"Array | Matrix":function(array){return _var(array,DEFAULT_NORMALIZATION)},"Array | Matrix, string":_var,"...":function(){return _var(arguments,DEFAULT_NORMALIZATION)}});return variance.toTex="\\mathrm{Var}\\left(${args}\\right)",variance}var DEFAULT_NORMALIZATION="unbiased",deepForEach=require("../../utils/collection/deepForEach");exports.name="var",exports.factory=factory},{"../../utils/collection/deepForEach":697,"../arithmetic/addScalar":466,"../arithmetic/divideScalar":471,"../arithmetic/multiplyScalar":486,"../arithmetic/subtract":494}],575:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAcos(x){var temp1=new type.Complex(x.im*x.im-x.re*x.re+1,-2*x.re*x.im),temp2=complexSqrt(temp1),temp3=new type.Complex(temp2.re-x.im,temp2.im+x.re),temp4=complexLog(temp3);return new type.Complex(1.5707963267948966-temp4.im,temp4.re)}var complexSqrt=typed.find(load(require("../arithmetic/sqrt")),["Complex"]),complexLog=typed.find(load(require("../arithmetic/log")),["Complex"]),acos=typed("acos",{number:function(x){return x>=-1&&1>=x||config.predictable?Math.acos(x):_complexAcos(new type.Complex(x,0))},Complex:_complexAcos,BigNumber:function(x){return acosAsec(x,type.BigNumber,!1)},"Array | Matrix":function(x){return deepMap(x,acos)}});return acos.toTex="\\cos^{-1}\\left(${args[0]}\\right)",acos}var deepMap=require("../../utils/collection/deepMap"),acosAsec=require("../../utils/bignumber/acosAsec");exports.name="acos",exports.factory=factory},{"../../utils/bignumber/acosAsec":671,"../../utils/collection/deepMap":698,"../arithmetic/log":482,"../arithmetic/sqrt":492}],576:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAcosh(x){var temp,res=complexAcos(x);return res.im<=0?(temp=res.re,res.re=-res.im,res.im=temp):(temp=res.im,res.im=-res.re,res.re=temp),res}var complexAcos=typed.find(load(require("./acos")),["Complex"]),acosh=typed("acosh",{number:function(x){return x>=1||config.predictable?Math.log(Math.sqrt(x*x-1)+x):-1>=x?new type.Complex(Math.log(Math.sqrt(x*x-1)-x),Math.PI):_complexAcosh(new type.Complex(x,0))},Complex:_complexAcosh,BigNumber:function(x){return acoshAsinhAsechAcsch(x,type.BigNumber,!1,!1)},"Array | Matrix":function(x){return deepMap(x,acosh)}});return acosh.toTex="\\cosh^{-1}\\left(${args[0]}\\right)",acosh}var deepMap=require("../../utils/collection/deepMap"),acoshAsinhAsechAcsch=require("../../utils/bignumber/acoshAsinhAsechAcsch");exports.name="acosh",exports.factory=factory},{"../../utils/bignumber/acoshAsinhAsechAcsch":672,"../../utils/collection/deepMap":698,"./acos":575}],577:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var complexAtan=typed.find(load(require("./atan")),["Complex"]),acot=typed("acot",{number:function(x){return x?Math.atan(1/x):HALF_PI},Complex:function(x){if(0==x.im)return new type.Complex(x.re?Math.atan(1/x.re):HALF_PI,0);var den=x.re*x.re+x.im*x.im;return x=0!=den?new type.Complex(x.re=x.re/den,x.im=-x.im/den):new type.Complex(0!=x.re?x.re/0:0,0!=x.im?-(x.im/0):0),complexAtan(x)},BigNumber:function(x){return atanAcot(x,type.BigNumber,!0)},"Array | Matrix":function(x){return deepMap(x,acot)}});return acot.toTex="\\cot^{-1}\\left(${args[0]}\\right)",acot}var deepMap=require("../../utils/collection/deepMap"),atanAcot=require("../../utils/bignumber/atanAcot"),HALF_PI=1.5707963267948966;exports.name="acot",exports.factory=factory},{"../../utils/bignumber/atanAcot":678,"../../utils/collection/deepMap":698,"./atan":585}],578:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAcoth(x){if(0==x.re&&0==x.im)return new type.Complex(0,HALF_PI);var den=x.re*x.re+x.im*x.im;return x=0!=den?new type.Complex(x.re/den,-x.im/den):new type.Complex(0!=x.re?x.re/0:0,0!=x.im?-(x.im/0):0),atanh(x)}var atanh=typed.find(load(require("./atanh")),["Complex"]),acoth=typed("acoth",{number:function(x){return x>=1||-1>=x||config.predictable?isFinite(x)?(Math.log((x+1)/x)+Math.log(x/(x-1)))/2:0:0!==x?_complexAcoth(new type.Complex(x,0)):new type.Complex(0,HALF_PI)},Complex:_complexAcoth,BigNumber:function(x){return atanhAcoth(x,type.BigNumber,!0)},"Array | Matrix":function(x){return deepMap(x,acoth)}});return acoth.toTex="\\coth^{-1}\\left(${args[0]}\\right)",acoth}var deepMap=require("../../utils/collection/deepMap"),atanhAcoth=require("../../utils/bignumber/atanhAcoth"),HALF_PI=1.5707963267948966;exports.name="acoth",exports.factory=factory},{"../../utils/bignumber/atanhAcoth":679,"../../utils/collection/deepMap":698,"./atanh":587}],579:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAcsc(x){if(0==x.re&&0==x.im)return new type.Complex(HALF_PI,1/0);var den=x.re*x.re+x.im*x.im;return x=0!=den?new type.Complex(x.re=x.re/den,x.im=-x.im/den):new type.Complex(0!=x.re?x.re/0:0,0!=x.im?-(x.im/0):0),complexAsin(x)}var complexAsin=typed.find(load(require("./asin")),["Complex"]),acsc=typed("acsc",{number:function(x){return-1>=x||x>=1||config.predictable?Math.asin(1/x):_complexAcsc(new type.Complex(x,0))},Complex:_complexAcsc,BigNumber:function(x){return asinAcsc(x,type.BigNumber,!0)},"Array | Matrix":function(x){return deepMap(x,acsc)}});return acsc.toTex="\\csc^{-1}\\left(${args[0]}\\right)",acsc}var deepMap=require("../../utils/collection/deepMap"),asinAcsc=require("../../utils/bignumber/asinAcsc"),HALF_PI=1.5707963267948966;exports.name="acsc",exports.factory=factory},{"../../utils/bignumber/asinAcsc":674,"../../utils/collection/deepMap":698,"./asin":583}],580:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var asinh=typed.find(load(require("./asinh")),["Complex"]),acsch=typed("acsch",{number:function(x){return x=1/x,Math.log(x+Math.sqrt(x*x+1))},Complex:function(x){if(0==x.im)return x=0!=x.re?Math.log(x.re+Math.sqrt(x.re*x.re+1)):1/0,new type.Complex(x,0);var den=x.re*x.re+x.im*x.im;return x=0!=den?new type.Complex(x.re/den,-x.im/den):new type.Complex(0!=x.re?x.re/0:0,0!=x.im?-(x.im/0):0),asinh(x)},BigNumber:function(x){return acoshAsinhAsechAcsch(x,type.BigNumber,!0,!0)},"Array | Matrix":function(x){return deepMap(x,acsch)}});return acsch.toTex="\\mathrm{csch}^{-1}\\left(${args[0]}\\right)",acsch}var deepMap=require("../../utils/collection/deepMap"),acoshAsinhAsechAcsch=require("../../utils/bignumber/acoshAsinhAsechAcsch");exports.name="acsch",exports.factory=factory},{"../../utils/bignumber/acoshAsinhAsechAcsch":672,"../../utils/collection/deepMap":698,"./asinh":584}],581:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAsec(x){if(0==x.re&&0==x.im)return new type.Complex(0,1/0);var den=x.re*x.re+x.im*x.im;return x=0!=den?new type.Complex(x.re=x.re/den,x.im=-x.im/den):new type.Complex(0!=x.re?x.re/0:0,0!=x.im?-(x.im/0):0),complexAcos(x)}var complexAcos=typed.find(load(require("./acos")),["Complex"]),asec=typed("asec",{number:function(x){return-1>=x||x>=1||config.predictable?Math.acos(1/x):_complexAsec(new type.Complex(x,0))},Complex:_complexAsec,BigNumber:function(x){return acosAsec(x,type.BigNumber,!0)},"Array | Matrix":function(x){return deepMap(x,asec)}});return asec.toTex="\\sec^{-1}\\left(${args[0]}\\right)",asec}var deepMap=require("../../utils/collection/deepMap"),acosAsec=require("../../utils/bignumber/acosAsec");exports.name="asec",exports.factory=factory},{"../../utils/bignumber/acosAsec":671,"../../utils/collection/deepMap":698,"./acos":575}],582:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAsech(x){if(0==x.re&&0==x.im)return new type.Complex(1/0,0);var den=x.re*x.re+x.im*x.im;return x=0!=den?new type.Complex(x.re/den,-x.im/den):new type.Complex(0!=x.re?x.re/0:0,0!=x.im?-(x.im/0):0),acosh(x)}var acosh=typed.find(load(require("./acosh")),["Complex"]),asech=typed("asech",{number:function(x){if(1>=x&&x>=-1||config.predictable){x=1/x;var ret=Math.sqrt(x*x-1);return x>0||config.predictable?Math.log(ret+x):new type.Complex(Math.log(ret-x),Math.PI)}return _complexAsech(new type.Complex(x,0))},Complex:_complexAsech,BigNumber:function(x){return acoshAsinhAsechAcsch(x,type.BigNumber,!1,!0)},"Array | Matrix":function(x){return deepMap(x,asech)}});return asech.toTex="\\mathrm{sech}^{-1}\\left(${args[0]}\\right)",asech}var deepMap=require("../../utils/collection/deepMap"),acoshAsinhAsechAcsch=require("../../utils/bignumber/acoshAsinhAsechAcsch");exports.name="asech",exports.factory=factory},{"../../utils/bignumber/acoshAsinhAsechAcsch":672,"../../utils/collection/deepMap":698,"./acosh":576}],583:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAsin(x){var re=x.re,im=x.im,temp1=new type.Complex(im*im-re*re+1,-2*re*im),temp2=complexSqrt(temp1),temp3=new type.Complex(temp2.re-im,temp2.im+re),temp4=complexLog(temp3);return new type.Complex(temp4.im,-temp4.re)}var complexSqrt=typed.find(load(require("../arithmetic/sqrt")),["Complex"]),complexLog=typed.find(load(require("../arithmetic/log")),["Complex"]),asin=typed("asin",{number:function(x){return x>=-1&&1>=x||config.predictable?Math.asin(x):_complexAsin(new type.Complex(x,0))},Complex:_complexAsin,BigNumber:function(x){return asinAcsc(x,type.BigNumber,!1)},"Array | Matrix":function(x){return deepMap(x,asin,!0)}});return asin.toTex="\\sin^{-1}\\left(${args[0]}\\right)",
asin}var deepMap=require("../../utils/collection/deepMap"),asinAcsc=require("../../utils/bignumber/asinAcsc");exports.name="asin",exports.factory=factory},{"../../utils/bignumber/asinAcsc":674,"../../utils/collection/deepMap":698,"../arithmetic/log":482,"../arithmetic/sqrt":492}],584:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var complexAsin=typed.find(load(require("./asin")),["Complex"]),asinh=typed("asinh",{number:function(x){return Math.log(Math.sqrt(x*x+1)+x)},Complex:function(x){var temp=x.im;x.im=-x.re,x.re=temp;var res=complexAsin(x);return x.re=-x.im,x.im=temp,temp=res.re,res.re=-res.im,res.im=temp,res},BigNumber:function(x){return acoshAsinhAsechAcsch(x,type.BigNumber,!0,!1)},"Array | Matrix":function(x){return deepMap(x,asinh,!0)}});return asinh.toTex="\\sinh^{-1}\\left(${args[0]}\\right)",asinh}var deepMap=require("../../utils/collection/deepMap"),acoshAsinhAsechAcsch=require("../../utils/bignumber/acoshAsinhAsechAcsch");exports.name="asinh",exports.factory=factory},{"../../utils/bignumber/acoshAsinhAsechAcsch":672,"../../utils/collection/deepMap":698,"./asin":583}],585:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var complexLog=typed.find(load(require("../arithmetic/log")),["Complex"]),atan=typed("atan",{number:function(x){return Math.atan(x)},Complex:function(x){if(0==x.re){if(1==x.im)return new type.Complex(0,1/0);if(-1==x.im)return new type.Complex(0,-(1/0))}var re=x.re,im=x.im,den=re*re+(1-im)*(1-im),temp1=new type.Complex((1-im*im-re*re)/den,-2*re/den),temp2=complexLog(temp1);return new type.Complex(-.5*temp2.im,.5*temp2.re)},BigNumber:function(x){return atanAcot(x,type.BigNumber,!1)},"Array | Matrix":function(x){return deepMap(x,atan,!0)}});return atan.toTex="\\tan^{-1}\\left(${args[0]}\\right)",atan}var deepMap=require("../../utils/collection/deepMap"),atanAcot=require("../../utils/bignumber/atanAcot");exports.name="atan",exports.factory=factory},{"../../utils/bignumber/atanAcot":678,"../../utils/collection/deepMap":698,"../arithmetic/log":482}],586:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),algorithm02=load(require("../../type/matrix/utils/algorithm02")),algorithm03=load(require("../../type/matrix/utils/algorithm03")),algorithm09=load(require("../../type/matrix/utils/algorithm09")),algorithm11=load(require("../../type/matrix/utils/algorithm11")),algorithm12=load(require("../../type/matrix/utils/algorithm12")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),atan2=typed("atan2",{"number, number":Math.atan2,"BigNumber, BigNumber":function(y,x){return bigAtan2(y,x,type.BigNumber)},"Matrix, Matrix":function(x,y){var c;switch(x.storage()){case"sparse":switch(y.storage()){case"sparse":c=algorithm09(x,y,atan2,!1);break;default:c=algorithm02(y,x,atan2,!0)}break;default:switch(y.storage()){case"sparse":c=algorithm03(x,y,atan2,!1);break;default:c=algorithm13(x,y,atan2)}}return c},"Array, Array":function(x,y){return atan2(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return atan2(matrix(x),y)},"Matrix, Array":function(x,y){return atan2(x,matrix(y))},"Matrix, number | BigNumber":function(x,y){var c;switch(x.storage()){case"sparse":c=algorithm11(x,y,atan2,!1);break;default:c=algorithm14(x,y,atan2,!1)}return c},"number | BigNumber, Matrix":function(x,y){var c;switch(y.storage()){case"sparse":c=algorithm12(y,x,atan2,!0);break;default:c=algorithm14(y,x,atan2,!0)}return c},"Array, number | BigNumber":function(x,y){return algorithm14(matrix(x),y,atan2,!1).valueOf()},"number | BigNumber, Array":function(x,y){return algorithm14(matrix(y),x,atan2,!0).valueOf()}});return atan2.toTex="\\mathrm{atan2}\\left(${args}\\right)",atan2}var bigAtan2=require("../../utils/bignumber/atan2");exports.name="atan2",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm02":648,"../../type/matrix/utils/algorithm03":649,"../../type/matrix/utils/algorithm09":655,"../../type/matrix/utils/algorithm11":657,"../../type/matrix/utils/algorithm12":658,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/bignumber/atan2":677}],587:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _complexAtanh(x){var noIM=x.re>1&&0==x.im,oneMinus=1-x.re,onePlus=1+x.re,den=oneMinus*oneMinus+x.im*x.im;x=0!=den?new type.Complex((onePlus*oneMinus-x.im*x.im)/den,(x.im*oneMinus+onePlus*x.im)/den):new type.Complex(-1!=x.re?x.re/0:0,0!=x.im?x.im/0:0);var temp=x.re;return x.re=Math.log(Math.sqrt(x.re*x.re+x.im*x.im))/2,x.im=Math.atan2(x.im,temp)/2,noIM&&(x.im=-x.im),x}var atanh=typed("atanh",{number:function(x){return 1>=x&&x>=-1||config.predictable?Math.log((1+x)/(1-x))/2:_complexAtanh(new type.Complex(x,0))},Complex:_complexAtanh,BigNumber:function(x){return atanhAcoth(x,type.BigNumber,!1)},"Array | Matrix":function(x){return deepMap(x,atanh,!0)}});return atanh.toTex="\\tanh^{-1}\\left(${args[0]}\\right)",atanh}var deepMap=require("../../utils/collection/deepMap"),atanhAcoth=require("../../utils/bignumber/atanhAcoth");exports.name="atanh",exports.factory=factory},{"../../utils/bignumber/atanhAcoth":679,"../../utils/collection/deepMap":698}],588:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var cosh=typed.find(load(require("./cosh")),["number"]),sinh=typed.find(load(require("./sinh")),["number"]),cos=typed("cos",{number:Math.cos,Complex:function(x){return new type.Complex(Math.cos(x.re)*cosh(-x.im),Math.sin(x.re)*sinh(-x.im))},BigNumber:function(x){return cosSinSecCsc(x,type.BigNumber,0,!1)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return cos(x.value)},"Array | Matrix":function(x){return deepMap(x,cos)}});return cos.toTex="\\cos\\left(${args[0]}\\right)",cos}var deepMap=require("../../utils/collection/deepMap"),cosSinSecCsc=require("../../utils/bignumber/cosSinSecCsc");exports.name="cos",exports.factory=factory},{"../../utils/bignumber/cosSinSecCsc":687,"../../utils/collection/deepMap":698,"./cosh":589,"./sinh":598}],589:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var cosh=typed("cosh",{number:_cosh,Complex:function(x){var ep=Math.exp(x.re),en=Math.exp(-x.re);return new type.Complex(Math.cos(x.im)*(ep+en)/2,Math.sin(x.im)*(ep-en)/2)},BigNumber:function(x){return coshSinhCschSech(x,type.BigNumber,!1,!1)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return cosh(x.value)},"Array | Matrix":function(x){return deepMap(x,cosh)}});return cosh.toTex="\\cosh\\left(${args[0]}\\right)",cosh}function _cosh(x){return(Math.exp(x)+Math.exp(-x))/2}var deepMap=require("../../utils/collection/deepMap"),coshSinhCschSech=require("../../utils/bignumber/coshSinhCschSech");exports.name="cosh",exports.factory=factory},{"../../utils/bignumber/coshSinhCschSech":688,"../../utils/collection/deepMap":698}],590:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var cot=typed("cot",{number:function(x){return 1/Math.tan(x)},Complex:function(x){var den=Math.exp(-4*x.im)-2*Math.exp(-2*x.im)*Math.cos(2*x.re)+1;return new type.Complex(2*Math.exp(-2*x.im)*Math.sin(2*x.re)/den,(Math.exp(-4*x.im)-1)/den)},BigNumber:function(x){return tanCot(x,type.BigNumber,!0)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return cot(x.value)},"Array | Matrix":function(x){return deepMap(x,cot)}});return cot.toTex="\\cot\\left(${args[0]}\\right)",cot}var deepMap=require("../../utils/collection/deepMap"),tanCot=require("../../utils/bignumber/tanCot");exports.name="cot",exports.factory=factory},{"../../utils/bignumber/tanCot":694,"../../utils/collection/deepMap":698}],591:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var coth=typed("coth",{number:_coth,Complex:function(x){var r=Math.exp(2*x.re),re=r*Math.cos(2*x.im),im=r*Math.sin(2*x.im),den=(re-1)*(re-1)+im*im;return new type.Complex(((re+1)*(re-1)+im*im)/den,-2*im/den)},BigNumber:function(x){return tanhCoth(x,type.BigNumber,!0)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return coth(x.value)},"Array | Matrix":function(x){return deepMap(x,coth)}});return coth.toTex="\\coth\\left(${args[0]}\\right)",coth}function _coth(x){var e=Math.exp(2*x);return(e+1)/(e-1)}var deepMap=require("../../utils/collection/deepMap"),tanhCoth=require("../../utils/bignumber/tanhCoth");exports.name="coth",exports.factory=factory},{"../../utils/bignumber/tanhCoth":695,"../../utils/collection/deepMap":698}],592:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var csc=typed("csc",{number:function(x){return 1/Math.sin(x)},Complex:function(x){var den=.25*(Math.exp(-2*x.im)+Math.exp(2*x.im))-.5*Math.cos(2*x.re);return new type.Complex(.5*Math.sin(x.re)*(Math.exp(-x.im)+Math.exp(x.im))/den,.5*Math.cos(x.re)*(Math.exp(-x.im)-Math.exp(x.im))/den)},BigNumber:function(x){return cosSinSecCsc(x,type.BigNumber,1,!0)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return csc(x.value)},"Array | Matrix":function(x){return deepMap(x,csc)}});return csc.toTex="\\csc\\left(${args[0]}\\right)",csc}var deepMap=require("../../utils/collection/deepMap"),cosSinSecCsc=require("../../utils/bignumber/cosSinSecCsc");exports.name="csc",exports.factory=factory},{"../../utils/bignumber/cosSinSecCsc":687,"../../utils/collection/deepMap":698}],593:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var csch=typed("csch",{number:_csch,Complex:function(x){var ep=Math.exp(x.re),en=Math.exp(-x.re),re=Math.cos(x.im)*(ep-en),im=Math.sin(x.im)*(ep+en),den=re*re+im*im;return new type.Complex(2*re/den,-2*im/den)},BigNumber:function(x){return coshSinhCschSech(x,type.BigNumber,!0,!0)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return csch(x.value)},"Array | Matrix":function(x){return deepMap(x,csch)}});return csch.toTex="\\mathrm{csch}\\left(${args[0]}\\right)",csch}function _csch(x){return 0==x?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(x)-Math.exp(-x)))*sign(x)}var deepMap=require("../../utils/collection/deepMap"),coshSinhCschSech=require("../../utils/bignumber/coshSinhCschSech"),sign=require("../../utils/number").sign;exports.name="csch",exports.factory=factory},{"../../utils/bignumber/coshSinhCschSech":688,"../../utils/collection/deepMap":698,"../../utils/number":706}],594:[function(require,module,exports){module.exports=[require("./acos"),require("./acosh"),require("./acot"),require("./acoth"),require("./acsc"),require("./acsch"),require("./asec"),require("./asech"),require("./asin"),require("./asinh"),require("./atan"),require("./atan2"),require("./atanh"),require("./cos"),require("./cosh"),require("./cot"),require("./coth"),require("./csc"),require("./csch"),require("./sec"),require("./sech"),require("./sin"),require("./sinh"),require("./tan"),require("./tanh")]},{"./acos":575,"./acosh":576,"./acot":577,"./acoth":578,"./acsc":579,"./acsch":580,"./asec":581,"./asech":582,"./asin":583,"./asinh":584,"./atan":585,"./atan2":586,"./atanh":587,"./cos":588,"./cosh":589,"./cot":590,"./coth":591,"./csc":592,"./csch":593,"./sec":595,"./sech":596,"./sin":597,"./sinh":598,"./tan":599,"./tanh":600}],595:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var sec=typed("sec",{number:function(x){return 1/Math.cos(x)},Complex:function(x){var den=.25*(Math.exp(-2*x.im)+Math.exp(2*x.im))+.5*Math.cos(2*x.re);return new type.Complex(.5*Math.cos(x.re)*(Math.exp(-x.im)+Math.exp(x.im))/den,.5*Math.sin(x.re)*(Math.exp(x.im)-Math.exp(-x.im))/den)},BigNumber:function(x){return cosSinSecCsc(x,type.BigNumber,0,!0)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return sec(x.value)},"Array | Matrix":function(x){return deepMap(x,sec)}});return sec.toTex="\\sec\\left(${args[0]}\\right)",sec}var deepMap=require("../../utils/collection/deepMap"),cosSinSecCsc=require("../../utils/bignumber/cosSinSecCsc");exports.name="sec",exports.factory=factory},{"../../utils/bignumber/cosSinSecCsc":687,"../../utils/collection/deepMap":698}],596:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var sech=typed("sech",{number:_sech,Complex:function(x){var ep=Math.exp(x.re),en=Math.exp(-x.re),re=Math.cos(x.im)*(ep+en),im=Math.sin(x.im)*(ep-en),den=re*re+im*im;return new type.Complex(2*re/den,-2*im/den)},BigNumber:function(x){return coshSinhCschSech(x,type.BigNumber,!1,!0)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return sech(x.value)},"Array | Matrix":function(x){return deepMap(x,sech)}});return sech.toTex="\\mathrm{sech}\\left(${args[0]}\\right)",sech}function _sech(x){return 2/(Math.exp(x)+Math.exp(-x))}var deepMap=require("../../utils/collection/deepMap"),coshSinhCschSech=require("../../utils/bignumber/coshSinhCschSech");exports.name="sech",exports.factory=factory},{"../../utils/bignumber/coshSinhCschSech":688,"../../utils/collection/deepMap":698}],597:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var cosh=typed.find(load(require("./cosh")),["number"]),sinh=typed.find(load(require("./sinh")),["number"]),sin=typed("sin",{number:Math.sin,Complex:function(x){return new type.Complex(Math.sin(x.re)*cosh(-x.im),Math.cos(x.re)*sinh(x.im))},BigNumber:function(x){return cosSinSecCsc(x,type.BigNumber,1,!1)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return sin(x.value)},"Array | Matrix":function(x){return deepMap(x,sin,!0)}});return sin.toTex="\\sin\\left(${args[0]}\\right)",sin}var deepMap=require("../../utils/collection/deepMap"),cosSinSecCsc=require("../../utils/bignumber/cosSinSecCsc");exports.name="sin",exports.factory=factory},{"../../utils/bignumber/cosSinSecCsc":687,"../../utils/collection/deepMap":698,"./cosh":589,"./sinh":598}],598:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var sinh=typed("sinh",{number:_sinh,Complex:function(x){var cim=Math.cos(x.im),sim=Math.sin(x.im),ep=Math.exp(x.re),en=Math.exp(-x.re);return new type.Complex(cim*(ep-en)/2,sim*(ep+en)/2)},BigNumber:function(x){return coshSinhCschSech(x,type.BigNumber,!0,!1)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return sinh(x.value)},"Array | Matrix":function(x){return deepMap(x,sinh,!0)}});return sinh.toTex="\\sinh\\left(${args[0]}\\right)",sinh}function _sinh(x){return Math.abs(x)<1?x+x*x*x/6+x*x*x*x*x/120:(Math.exp(x)-Math.exp(-x))/2}var deepMap=require("../../utils/collection/deepMap"),coshSinhCschSech=require("../../utils/bignumber/coshSinhCschSech");exports.name="sinh",exports.factory=factory},{"../../utils/bignumber/coshSinhCschSech":688,"../../utils/collection/deepMap":698}],599:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var tan=typed("tan",{number:Math.tan,Complex:function(x){var den=Math.exp(-4*x.im)+2*Math.exp(-2*x.im)*Math.cos(2*x.re)+1;return new type.Complex(2*Math.exp(-2*x.im)*Math.sin(2*x.re)/den,(1-Math.exp(-4*x.im))/den)},BigNumber:function(x){return tanCot(x,type.BigNumber,!1)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return tan(x.value)},"Array | Matrix":function(x){return deepMap(x,tan,!0)}});return tan.toTex="\\tan\\left(${args[0]}\\right)",tan}var deepMap=require("../../utils/collection/deepMap"),tanCot=require("../../utils/bignumber/tanCot");exports.name="tan",exports.factory=factory},{"../../utils/bignumber/tanCot":694,"../../utils/collection/deepMap":698}],600:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var tanh=typed("tanh",{number:_tanh,Complex:function(x){var r=Math.exp(2*x.re),re=r*Math.cos(2*x.im),im=r*Math.sin(2*x.im),den=(re+1)*(re+1)+im*im;return new type.Complex(((re-1)*(re+1)+im*im)/den,2*im/den)},BigNumber:function(x){return tanhCoth(x,type.BigNumber,!1)},Unit:function(x){if(!x.hasBase(type.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return tanh(x.value)},"Array | Matrix":function(x){return deepMap(x,tanh,!0)}});return tanh.toTex="\\tanh\\left(${args[0]}\\right)",tanh}function _tanh(x){var e=Math.exp(2*x);return(e-1)/(e+1)}var deepMap=require("../../utils/collection/deepMap"),tanhCoth=require("../../utils/bignumber/tanhCoth");exports.name="tanh",exports.factory=factory},{"../../utils/bignumber/tanhCoth":695,"../../utils/collection/deepMap":698}],601:[function(require,module,exports){module.exports=[require("./to")]},{"./to":602}],602:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../utils/latex"),matrix=load(require("../../type/matrix/function/matrix")),algorithm13=load(require("../../type/matrix/utils/algorithm13")),algorithm14=load(require("../../type/matrix/utils/algorithm14")),to=typed("to",{"Unit, Unit | string":function(x,unit){return x.to(unit)},"Matrix, Matrix":function(x,y){return algorithm13(x,y,to)},"Array, Array":function(x,y){return to(matrix(x),matrix(y)).valueOf()},"Array, Matrix":function(x,y){return to(matrix(x),y)},"Matrix, Array":function(x,y){return to(x,matrix(y))},"Matrix, any":function(x,y){return algorithm14(x,y,to,!1)},"any, Matrix":function(x,y){return algorithm14(y,x,to,!0)},"Array, any":function(x,y){return algorithm14(matrix(x),y,to,!1).valueOf()},"any, Array":function(x,y){return algorithm14(matrix(y),x,to,!0).valueOf()}});return to.toTex="\\left(${args[0]}"+latex.operators.to+"${args[1]}\\right)",to}exports.name="to",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../type/matrix/utils/algorithm13":659,"../../type/matrix/utils/algorithm14":660,"../../utils/latex":705}],603:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var clone=typed("clone",{any:object.clone});return clone.toTex="\\mathrm{${name}}\\left(${args}\\right)",clone}var object=require("../../utils/object");exports.name="clone",exports.factory=factory},{"../../utils/object":707}],604:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var matrix=load(require("../../type/matrix/function/matrix")),filter=typed("filter",{"Array, function":_filterCallback,"Array, RegExp":_filterRegExp,"Matrix, function":function(x,test){return matrix(_filterCallback(x.toArray(),test))},"Matrix, RegExp":function(x,test){return matrix(_filterRegExp(x.toArray(),test))}});return filter.toTex="\\mathrm{${name}}\\left(${args}\\right)",filter}function _filterCallback(x,callback){if(1!==size(x).length)throw new Error("Only one dimensional matrices supported");return x.filter(function(entry){return callback(entry)})}function _filterRegExp(x,regexp){if(1!==size(x).length)throw new Error("Only one dimensional matrices supported");return x.filter(function(entry){return regexp.test(entry)})}var size=require("../../utils/array").size;exports.name="filter",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670}],605:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var forEach=typed("forEach",{"Array, function":_forEach,"Matrix, function":function(x,callback){return x.forEach(callback)}});return forEach.toTex="\\mathrm{${name}}\\left(${args}\\right)",forEach}function _forEach(array,callback){var recurse=function(value,index){Array.isArray(value)?value.forEach(function(child,i){recurse(child,index.concat(i))}):callback(value,index,array)};recurse(array,[])}exports.name="forEach",exports.factory=factory},{}],606:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var format=typed("format",{any:string.format,"any, Object | function | number":string.format});return format.toTex="\\mathrm{${name}}\\left(${args}\\right)",format}var string=require("../../utils/string");exports.name="format",exports.factory=factory},{"../../utils/string":708}],607:[function(require,module,exports){module.exports=[require("./clone"),require("./filter"),require("./format"),require("./isInteger"),require("./isNegative"),require("./isNumeric"),require("./isPositive"),require("./isZero"),require("./map"),require("./partitionSelect"),require("./print"),require("./sort"),require("./typeof"),require("./forEach")]},{"./clone":603,"./filter":604,"./forEach":605,"./format":606,"./isInteger":608,"./isNegative":609,"./isNumeric":610,"./isPositive":611,"./isZero":612,"./map":613,"./partitionSelect":614,"./print":615,"./sort":616,"./typeof":617}],608:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var isInteger=typed("isInteger",{number:number.isInteger,BigNumber:function(x){return x.isInt()},Fraction:function(x){return 1===x.d&&isFinite(x.n)},"Array | Matrix":function(x){return deepMap(x,isInteger)}});return isInteger}var deepMap=require("../../utils/collection/deepMap"),number=require("../../utils/number");exports.name="isInteger",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/number":706}],609:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var isNegative=typed("isNegative",{number:function(x){return 0>x},BigNumber:function(x){return x.isNeg()&&!x.isZero()&&!x.isNaN()},Fraction:function(x){return x.s<0&&x.n>0},Unit:function(x){return isNegative(x.value)},"Array | Matrix":function(x){return deepMap(x,isNegative)}});return isNegative}var deepMap=require("../../utils/collection/deepMap");require("../../utils/number");exports.name="isNegative",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/number":706}],610:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var isNumeric=typed("isNumeric",{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string":function(){return!1},"Array | Matrix":function(x){return deepMap(x,isNumeric)}});return isNumeric}var deepMap=require("../../utils/collection/deepMap");require("../../utils/number");exports.name="isNumeric",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/number":706}],611:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var isPositive=typed("isPositive",{number:function(x){return x>0},BigNumber:function(x){return!x.isNeg()&&!x.isZero()&&!x.isNaN()},Fraction:function(x){return x.s>0&&x.n>0},Unit:function(x){return isPositive(x.value)},"Array | Matrix":function(x){return deepMap(x,isPositive)}});return isPositive}var deepMap=require("../../utils/collection/deepMap");require("../../utils/number");exports.name="isPositive",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/number":706}],612:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var isZero=typed("isZero",{number:function(x){return 0===x},BigNumber:function(x){return x.isZero()},Complex:function(x){return 0===x.re&&0===x.im},Fraction:function(x){return 1===x.d&&0===x.n},Unit:function(x){return isZero(x.value)},"Array | Matrix":function(x){return deepMap(x,isZero)}});return isZero}var deepMap=require("../../utils/collection/deepMap");require("../../utils/number");exports.name="isZero",exports.factory=factory},{"../../utils/collection/deepMap":698,"../../utils/number":706}],613:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var map=typed("map",{"Array, function":_map,"Matrix, function":function(x,callback){return x.map(callback)}});return map.toTex="\\mathrm{${name}}\\left(${args}\\right)",map}function _map(array,callback){var recurse=function(value,index){return Array.isArray(value)?value.map(function(child,i){return recurse(child,index.concat(i))}):callback(value,index,array)};return recurse(array,[])}exports.name="map",exports.factory=factory},{}],614:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function desc(a,b){return-asc(a,b)}function _partitionSelect(x,k,compare){if(!isInteger(k)||0>k)throw new Error("k must be a non-negative integer");if(x&&x.isMatrix){var size=x.size();if(size.length>1)throw new Error("Only one dimensional matrices supported");return quickSelect(x.valueOf(),k,compare)}return Array.isArray(x)?quickSelect(x,k,compare):void 0}function quickSelect(arr,k,compare){if(k>=arr.length)throw new Error("k out of bounds");for(var from=0,to=arr.length-1;to>from;){for(var r=from,w=to,pivot=arr[Math.floor(Math.random()*(to-from+1))+from];w>r;)if(compare(arr[r],pivot)>=0){var tmp=arr[w];arr[w]=arr[r],arr[r]=tmp,--w}else++r;compare(arr[r],pivot)>0&&--r,r>=k?to=r:from=r+1}return arr[k]}var asc=load(require("../relational/compare"));return typed("partitionSelect",{"Array | Matrix, number":function(x,k){return _partitionSelect(x,k,asc)},"Array | Matrix, number, string":function(x,k,compare){if("asc"===compare)return _partitionSelect(x,k,asc);if("desc"===compare)return _partitionSelect(x,k,desc);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":_partitionSelect})}var isInteger=require("../../utils/number").isInteger;exports.name="partitionSelect",exports.factory=factory},{"../../utils/number":706,"../relational/compare":554}],615:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var print=typed("print",{"string, Object":_print,"string, Object, number":_print});return print.toTex="\\mathrm{${name}}\\left(${args}\\right)",print}function _print(template,values,precision){return template.replace(/\$([\w\.]+)/g,function(original,key){for(var keys=key.split("."),value=values[keys.shift()];keys.length&&void 0!==value;){var k=keys.shift();value=k?value[k]:value+"."}return void 0!==value?isString(value)?value:format(value,precision):original})}var isString=require("../../utils/string").isString,format=require("../../utils/string").format;exports.name="print",exports.factory=factory},{"../../utils/string":708}],616:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _comparator(order){if("asc"===order)return asc;if("desc"===order)return desc;throw new Error('String "asc" or "desc" expected')}function _arrayIsVector(array){if(1!==size(array).length)throw new Error("One dimensional array expected")}function _matrixIsVector(matrix){if(1!==matrix.size().length)throw new Error("One dimensional matrix expected")}var matrix=load(require("../../type/matrix/function/matrix")),asc=load(require("../relational/compare")),desc=function(a,b){return-asc(a,b)},sort=typed("sort",{Array:function(x){return _arrayIsVector(x),x.sort(asc)},Matrix:function(x){return _matrixIsVector(x),matrix(x.toArray().sort(asc),x.storage())},"Array, function":function(x,_comparator){return _arrayIsVector(x),x.sort(_comparator)},"Matrix, function":function(x,_comparator){return _matrixIsVector(x),matrix(x.toArray().sort(_comparator),x.storage())},"Array, string":function(x,order){return _arrayIsVector(x),x.sort(_comparator(order))},"Matrix, string":function(x,order){return _matrixIsVector(x),matrix(x.toArray().sort(_comparator(order)),x.storage())}});return sort.toTex="\\mathrm{${name}}\\left(${args}\\right)",sort}var size=require("../../utils/array").size;exports.name="sort",exports.factory=factory},{"../../type/matrix/function/matrix":644,"../../utils/array":670,"../relational/compare":554}],617:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var _typeof=typed("_typeof",{any:function(x){var t=types.type(x);if("Object"===t){if(x.isBigNumber===!0)return"BigNumber";if(x.isComplex===!0)return"Complex";if(x.isFraction===!0)return"Fraction";if(x.isMatrix===!0)return"Matrix";if(x.isUnit===!0)return"Unit";if(x.isIndex===!0)return"Index";if(x.isRange===!0)return"Range";if(x.isChain===!0)return"Chain";if(x.isHelp===!0)return"Help"}return t}});return _typeof.toTex="\\mathrm{${name}}\\left(${args}\\right)",_typeof}var types=require("../../utils/types");exports.name="typeof",exports.factory=factory},{"../../utils/types":709}],618:[function(require,module,exports){module.exports=[require("./type"),require("./constants"),require("./expression"),require("./function"),require("./json"),require("./error")]},{"./constants":221,"./error":229,"./expression":408,"./function":519,"./json":619,"./type":634}],619:[function(require,module,exports){module.exports=[require("./reviver")]},{"./reviver":620}],620:[function(require,module,exports){"use strict";function factory(type,config,load,typed){return function(key,value){var constructor=type[value&&value.mathjs];return constructor&&"function"==typeof constructor.fromJSON?constructor.fromJSON(value):value}}exports.name="reviver",exports.path="json",exports.factory=factory},{}],621:[function(require,module,exports){function factory(type,config,load,typed,math){var BigNumber=Decimal.constructor(config);return BigNumber.prototype.type="BigNumber",BigNumber.prototype.isBigNumber=!0,BigNumber.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},BigNumber.fromJSON=function(json){return new BigNumber(json.value)},math.on("config",function(curr,prev){curr.precision!==prev.precision&&BigNumber.config({precision:curr.precision})}),BigNumber}var Decimal=require("decimal.js");require("../../utils/number").digits;exports.name="BigNumber",exports.path="type",exports.factory=factory,exports.math=!0},{"../../utils/number":706,"decimal.js":711}],622:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var bignumber=typed("bignumber",{"":function(){return new type.BigNumber(0)},number:function(x){return new type.BigNumber(x+"")},string:function(x){return new type.BigNumber(x)},BigNumber:function(x){return x},"Array | Matrix":function(x){return deepMap(x,bignumber)}});return bignumber.toTex={0:"0",1:"\\left(${args[0]}\\right)"},bignumber}var deepMap=require("../../../utils/collection/deepMap");exports.name="bignumber",exports.factory=factory},{"../../../utils/collection/deepMap":698}],623:[function(require,module,exports){module.exports=[require("./BigNumber"),require("./function/bignumber")]},{"./BigNumber":621,"./function/bignumber":622}],624:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var bool=typed("bool",{"":function(){return!1},"boolean":function(x){return x},number:function(x){return!!x},BigNumber:function(x){return!x.isZero()},string:function(x){var lcase=x.toLowerCase();if("true"===lcase)return!0;if("false"===lcase)return!1;var num=Number(x);if(""!=x&&!isNaN(num))return!!num;throw new Error('Cannot convert "'+x+'" to a boolean')},"Array | Matrix":function(x){return deepMap(x,bool)}});return bool}var deepMap=require("./../utils/collection/deepMap");exports.name="boolean",exports.factory=factory},{"./../utils/collection/deepMap":698}],625:[function(require,module,exports){"use strict";function factory(type,config,load,typed,math){function Chain(value){if(!(this instanceof Chain))throw new SyntaxError("Constructor must be called with the new operator");value&&value.isChain?this.value=value.value:this.value=value}function createProxy(name,fn){"function"==typeof fn&&(Chain.prototype[name]=chainify(fn))}function createLazyProxy(name,resolver){
lazy(Chain.prototype,name,function(){var fn=resolver();return"function"==typeof fn?chainify(fn):void 0})}function chainify(fn){return function(){for(var args=[this.value],i=0;i<arguments.length;i++)args[i+1]=arguments[i];return new Chain(fn.apply(fn,args))}}return Chain.prototype.type="Chain",Chain.prototype.isChain=!0,Chain.prototype.done=function(){return this.value},Chain.prototype.valueOf=function(){return this.value},Chain.prototype.toString=function(){return format(this.value)},Chain.createProxy=function(arg0,arg1){if("string"==typeof arg0)createProxy(arg0,arg1);else for(var prop in arg0)arg0.hasOwnProperty(prop)&&createProxy(prop,arg0[prop])},Chain.createProxy(math),math.on("import",function(name,resolver,path){void 0===path&&createLazyProxy(name,resolver)}),Chain}var format=require("../../utils/string").format,lazy=require("../../utils/object").lazy;exports.name="Chain",exports.path="type",exports.factory=factory,exports.math=!0,exports.lazy=!1},{"../../utils/object":707,"../../utils/string":708}],626:[function(require,module,exports){"use strict";function factory(type,config,load,typed){return typed("chain",{"":function(){return new type.Chain},any:function(value){return new type.Chain(value)}})}exports.name="chain",exports.factory=factory},{}],627:[function(require,module,exports){module.exports=[require("./Chain"),require("./function/chain")]},{"./Chain":625,"./function/chain":626}],628:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function Complex(re,im){if(!(this instanceof Complex))throw new SyntaxError("Constructor must be called with the new operator");switch(arguments.length){case 0:this.re=0,this.im=0;break;case 1:var arg=arguments[0];if("object"==typeof arg){if("re"in arg&&"im"in arg){var construct=new Complex(arg.re,arg.im);this.re=construct.re,this.im=construct.im;break}if("r"in arg&&"phi"in arg){var construct=Complex.fromPolar(arg.r,arg.phi);this.re=construct.re,this.im=construct.im;break}}throw new SyntaxError("Object with the re and im or r and phi properties expected.");case 2:if(!isNumber(re)||!isNumber(im))throw new TypeError("Two numbers expected in Complex constructor");this.re=re,this.im=im;break;default:throw new SyntaxError("One, two or three arguments expected in Complex constructor")}}function skipWhitespace(){for(;" "==c||"	"==c;)next()}function isDigitDot(c){return c>="0"&&"9">=c||"."==c}function isDigit(c){return c>="0"&&"9">=c}function next(){index++,c=text.charAt(index)}function revert(oldIndex){index=oldIndex,c=text.charAt(index)}function parseNumber(){var oldIndex,number="";if(oldIndex=index,"+"==c?next():"-"==c&&(number+=c,next()),!isDigitDot(c))return revert(oldIndex),null;if("."==c){if(number+=c,next(),!isDigit(c))return revert(oldIndex),null}else{for(;isDigit(c);)number+=c,next();"."==c&&(number+=c,next())}for(;isDigit(c);)number+=c,next();if("E"==c||"e"==c){if(number+=c,next(),"+"!=c&&"-"!=c||(number+=c,next()),!isDigit(c))return revert(oldIndex),null;for(;isDigit(c);)number+=c,next()}return number}function parseComplex(){var cnext=text.charAt(index+1);if("I"==c||"i"==c)return next(),"1";if(!("+"!=c&&"-"!=c||"I"!=cnext&&"i"!=cnext)){var number="+"==c?"1":"-1";return next(),next(),number}return null}function unexpectedEnd(){return new SyntaxError('End of string expected, got "'+text.substr(index)+'"')}Complex.prototype.isComplex=!0,Complex.prototype.type="Complex";var text,index,c;return Complex.parse=function(str){if(text=str,index=-1,c="","string"!=typeof text)throw new TypeError("Invalid argument in Complex.parse, string expected");next(),skipWhitespace();var first=parseNumber();if(first){if("I"==c||"i"==c){if(next(),skipWhitespace(),c)throw unexpectedEnd();return new Complex(0,Number(first))}skipWhitespace();var separator=c;if("+"!=separator&&"-"!=separator){if(skipWhitespace(),c)throw unexpectedEnd();return new Complex(Number(first),0)}next(),skipWhitespace();var second=parseNumber();if(second){if("I"!=c&&"i"!=c)throw new SyntaxError('Character "i" expected, got "'+c+'"');next()}else if(second=parseComplex(),!second)throw new SyntaxError("Imaginary part expected");if("-"==separator&&(second="-"==second[0]?"+"+second.substring(1):"-"+second),next(),skipWhitespace(),c)throw unexpectedEnd();return new Complex(Number(first),Number(second))}if(first=parseComplex()){if(skipWhitespace(),c)throw unexpectedEnd();return new Complex(0,Number(first))}throw new SyntaxError('Could not parse: "'+str+'" as complex number')},Complex.fromPolar=function(args){switch(arguments.length){case 1:var arg=arguments[0];if("object"==typeof arg)return Complex.fromPolar(arg.r,arg.phi);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],phi=arguments[1];if(isNumber(r)){if(phi&&phi.isUnit&&phi.hasBase("ANGLE")&&(phi=phi.toNumber("rad")),isNumber(phi))return new Complex(r*Math.cos(phi),r*Math.sin(phi));throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Complex.prototype.toPolar=function(){return{r:Math.sqrt(this.re*this.re+this.im*this.im),phi:Math.atan2(this.im,this.re)}},Complex.prototype.clone=function(){return new Complex(this.re,this.im)},Complex.prototype.equals=function(other){return this.re===other.re&&this.im===other.im},Complex.prototype.format=function(options){var str="",im=this.im,re=this.re,strRe=format(this.re,options),strIm=format(this.im,options),precision=isNumber(options)?options:options?options.precision:null;if(null!==precision){var epsilon=Math.pow(10,-precision);Math.abs(re/im)<epsilon&&(re=0),Math.abs(im/re)<epsilon&&(im=0)}return str=0==im?strRe:0==re?1==im?"i":-1==im?"-i":strIm+"i":im>0?1==im?strRe+" + i":strRe+" + "+strIm+"i":-1==im?strRe+" - i":strRe+" - "+strIm.substring(1)+"i"},Complex.prototype.toString=function(){return this.format()},Complex.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Complex.fromJSON=function(json){return new Complex(json)},Complex.prototype.valueOf=Complex.prototype.toString,Complex}var isNumber=require("../../utils/number").isNumber,format=require("../../utils/number").format;exports.name="Complex",exports.path="type",exports.factory=factory},{"../../utils/number":706}],629:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var latex=require("../../../utils/latex"),complex=typed("complex",{"":function(){return new type.Complex(0,0)},number:function(x){return new type.Complex(x,0)},"number, number":function(re,im){return new type.Complex(re,im)},"BigNumber, BigNumber":function(re,im){return new type.Complex(re.toNumber(),im.toNumber())},Complex:function(x){return x.clone()},string:function(x){return type.Complex.parse(x)},Object:function(x){if("re"in x&&"im"in x)return new type.Complex(x.re,x.im);if("r"in x&&"phi"in x)return type.Complex.fromPolar(x.r,x.phi);throw new Error("Expected object with either properties re and im, or properties r and phi.")},"Array | Matrix":function(x){return deepMap(x,complex)}});return complex.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+"+latex.symbols.i+"\\cdot\\left(${args[1]}\\right)\\right)"},complex}var deepMap=require("../../../utils/collection/deepMap");exports.name="complex",exports.factory=factory},{"../../../utils/collection/deepMap":698,"../../../utils/latex":705}],630:[function(require,module,exports){module.exports=[require("./Complex"),require("./function/complex")]},{"./Complex":628,"./function/complex":629}],631:[function(require,module,exports){function factory(type,config,load,typed){return Fraction}var Fraction=require("fraction.js");Fraction.prototype.type="Fraction",Fraction.prototype.isFraction=!0,Fraction.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Fraction.fromJSON=function(json){return new Fraction(json)},exports.name="Fraction",exports.path="type",exports.factory=factory},{"fraction.js":712}],632:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var fraction=typed("fraction",{number:function(x){if(!isFinite(x)||isNaN(x))throw new Error(x+" cannot be represented as a fraction");return new type.Fraction(x)},string:function(x){return new type.Fraction(x)},"number, number":function(numerator,denominator){return new type.Fraction(numerator,denominator)},Fraction:function(x){return x},Object:function(x){return new type.Fraction(x)},"Array | Matrix":function(x){return deepMap(x,fraction)}});return fraction}var deepMap=require("../../../utils/collection/deepMap");exports.name="fraction",exports.factory=factory},{"../../../utils/collection/deepMap":698}],633:[function(require,module,exports){module.exports=[require("./Fraction"),require("./function/fraction")]},{"./Fraction":631,"./function/fraction":632}],634:[function(require,module,exports){module.exports=[require("./bignumber"),require("./boolean"),require("./chain"),require("./complex"),require("./fraction"),require("./matrix"),require("./number"),require("./resultset"),require("./string"),require("./unit")]},{"./bignumber":623,"./boolean":624,"./chain":627,"./complex":630,"./fraction":633,"./matrix":646,"./number":661,"./resultset":663,"./string":664,"./unit":667}],635:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function DenseMatrix(data,datatype){if(!(this instanceof DenseMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!isString(datatype))throw new Error("Invalid datatype: "+datatype);if(data&&data.isMatrix===!0)"DenseMatrix"===data.type?(this._data=object.clone(data._data),this._size=object.clone(data._size),this._datatype=datatype||data._datatype):(this._data=data.toArray(),this._size=data.size(),this._datatype=datatype||data._datatype);else if(data&&isArray(data.data)&&isArray(data.size))this._data=data.data,this._size=data.size,this._datatype=datatype||data.datatype;else if(isArray(data))this._data=preprocess(data),this._size=array.size(this._data),array.validate(this._data,this._size),this._datatype=datatype;else{if(data)throw new TypeError("Unsupported type of data ("+util.types.type(data)+")");this._data=[],this._size=[0],this._datatype=datatype}}function _get(matrix,index){if(!index||index.isIndex!==!0)throw new TypeError("Invalid index");var isScalar=index.isScalar();if(isScalar)return matrix.get(index.min());var size=index.size();if(size.length!=matrix._size.length)throw new DimensionError(size.length,matrix._size.length);for(var min=index.min(),max=index.max(),i=0,ii=matrix._size.length;ii>i;i++)validateIndex(min[i],matrix._size[i]),validateIndex(max[i],matrix._size[i]);return new DenseMatrix(_getSubmatrix(matrix._data,index,size.length,0),matrix._datatype)}function _getSubmatrix(data,index,dims,dim){var last=dim==dims-1,range=index.dimension(dim);return last?range.map(function(i){return data[i]}).valueOf():range.map(function(i){var child=data[i];return _getSubmatrix(child,index,dims,dim+1)}).valueOf()}function _set(matrix,index,submatrix,defaultValue){if(!index||index.isIndex!==!0)throw new TypeError("Invalid index");var sSize,iSize=index.size(),isScalar=index.isScalar();if(submatrix&&submatrix.isMatrix===!0?(sSize=submatrix.size(),submatrix=submatrix.valueOf()):sSize=array.size(submatrix),isScalar){if(0!==sSize.length)throw new TypeError("Scalar expected");matrix.set(index.min(),submatrix,defaultValue)}else{if(iSize.length<matrix._size.length)throw new DimensionError(iSize.length,matrix._size.length,"<");if(sSize.length<iSize.length){for(var i=0,outer=0;1===iSize[i]&&1===sSize[i];)i++;for(;1===iSize[i];)outer++,i++;submatrix=array.unsqueeze(submatrix,iSize.length,outer,sSize)}if(!object.deepEqual(iSize,sSize))throw new DimensionError(iSize,sSize,">");var size=index.max().map(function(i){return i+1});_fit(matrix,size,defaultValue);var dims=iSize.length,dim=0;_setSubmatrix(matrix._data,index,submatrix,dims,dim)}return matrix}function _setSubmatrix(data,index,submatrix,dims,dim){var last=dim==dims-1,range=index.dimension(dim);last?range.forEach(function(dataIndex,subIndex){validateIndex(dataIndex),data[dataIndex]=submatrix[subIndex[0]]}):range.forEach(function(dataIndex,subIndex){validateIndex(dataIndex),_setSubmatrix(data[dataIndex],index,submatrix[subIndex[0]],dims,dim+1)})}function _fit(matrix,size,defaultValue){for(var newSize=object.clone(matrix._size),changed=!1;newSize.length<size.length;)newSize.push(0),changed=!0;for(var i=0,ii=size.length;ii>i;i++)size[i]>newSize[i]&&(newSize[i]=size[i],changed=!0);changed&&_resize(matrix,newSize,defaultValue)}function preprocess(data){for(var i=0,ii=data.length;ii>i;i++){var elem=data[i];isArray(elem)?data[i]=preprocess(elem):elem&&elem.isMatrix===!0&&(data[i]=preprocess(elem.valueOf()))}return data}var Matrix=load(require("./Matrix"));DenseMatrix.prototype=new Matrix,DenseMatrix.prototype.type="DenseMatrix",DenseMatrix.prototype.isDenseMatrix=!0,DenseMatrix.prototype.storage=function(){return"dense"},DenseMatrix.prototype.datatype=function(){return this._datatype},DenseMatrix.prototype.create=function(data,datatype){return new DenseMatrix(data,datatype)},DenseMatrix.prototype.subset=function(index,replacement,defaultValue){switch(arguments.length){case 1:return _get(this,index);case 2:case 3:return _set(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}},DenseMatrix.prototype.get=function(index){if(!isArray(index))throw new TypeError("Array expected");if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);for(var x=0;x<index.length;x++)validateIndex(index[x],this._size[x]);for(var data=this._data,i=0,ii=index.length;ii>i;i++){var index_i=index[i];validateIndex(index_i,data.length),data=data[index_i]}return object.clone(data)},DenseMatrix.prototype.set=function(index,value,defaultValue){if(!isArray(index))throw new TypeError("Array expected");if(index.length<this._size.length)throw new DimensionError(index.length,this._size.length,"<");var i,ii,index_i,size=index.map(function(i){return i+1});_fit(this,size,defaultValue);var data=this._data;for(i=0,ii=index.length-1;ii>i;i++)index_i=index[i],validateIndex(index_i,data.length),data=data[index_i];return index_i=index[index.length-1],validateIndex(index_i,data.length),data[index_i]=value,this},DenseMatrix.prototype.resize=function(size,defaultValue,copy){if(!isArray(size))throw new TypeError("Array expected");var m=copy?this.clone():this;return _resize(m,size,defaultValue)};var _resize=function(matrix,size,defaultValue){if(0===size.length){for(var v=matrix._data;isArray(v);)v=v[0];return object.clone(v)}return matrix._size=object.clone(size),matrix._data=array.resize(matrix._data,matrix._size,defaultValue),matrix};return DenseMatrix.prototype.clone=function(){var m=new DenseMatrix({data:object.clone(this._data),size:object.clone(this._size),datatype:this._datatype});return m},DenseMatrix.prototype.size=function(){return this._size},DenseMatrix.prototype.map=function(callback){var me=this,recurse=function(value,index){return isArray(value)?value.map(function(child,i){return recurse(child,index.concat(i))}):callback(value,index,me)};return new DenseMatrix({data:recurse(this._data,[]),size:object.clone(this._size),datatype:this._datatype})},DenseMatrix.prototype.forEach=function(callback){var me=this,recurse=function(value,index){isArray(value)?value.forEach(function(child,i){recurse(child,index.concat(i))}):callback(value,index,me)};recurse(this._data,[])},DenseMatrix.prototype.toArray=function(){return object.clone(this._data)},DenseMatrix.prototype.valueOf=function(){return this._data},DenseMatrix.prototype.format=function(options){return string.format(this._data,options)},DenseMatrix.prototype.toString=function(){return string.format(this._data)},DenseMatrix.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},DenseMatrix.prototype.diagonal=function(k){if(k){if(k.isBigNumber===!0&&(k=k.toNumber()),!isNumber(k)||!isInteger(k))throw new TypeError("The parameter k must be an integer number")}else k=0;for(var kSuper=k>0?k:0,kSub=0>k?-k:0,rows=this._size[0],columns=this._size[1],n=Math.min(rows-kSub,columns-kSuper),data=[],i=0;n>i;i++)data[i]=object.clone(this._data[i+kSub][i+kSuper]);return new DenseMatrix({data:data,size:[n],datatype:this._datatype})},DenseMatrix.diagonal=function(size,value,k,defaultValue,datatype){if(!isArray(size))throw new TypeError("Array expected, size parameter");if(2!==size.length)throw new Error("Only two dimensions matrix are supported");if(size=size.map(function(s){if(s&&s.isBigNumber===!0&&(s=s.toNumber()),!isNumber(s)||!isInteger(s)||1>s)throw new Error("Size values must be positive integers");return s}),k){if(k&&k.isBigNumber===!0&&(k=k.toNumber()),!isNumber(k)||!isInteger(k))throw new TypeError("The parameter k must be an integer number")}else k=0;defaultValue&&isString(datatype)&&(defaultValue=typed.convert(defaultValue,datatype));var _value,kSuper=k>0?k:0,kSub=0>k?-k:0,rows=size[0],columns=size[1],n=Math.min(rows-kSub,columns-kSuper);if(isArray(value)){if(value.length!==n)throw new Error("Invalid value array length");_value=function(i){return value[i]}}else if(value&&value.isMatrix===!0){var ms=value.size();if(1!==ms.length||ms[0]!==n)throw new Error("Invalid matrix length");_value=function(i){return value.get([i])}}else _value=function(){return value};defaultValue||(defaultValue=_value(0)&&_value(0).isBigNumber===!0?new type.BigNumber(0):0);var data=[];if(size.length>0){data=array.resize(data,size,defaultValue);for(var d=0;n>d;d++)data[d+kSub][d+kSuper]=_value(d)}return new DenseMatrix({data:data,size:[rows,columns]})},DenseMatrix.fromJSON=function(json){return new DenseMatrix(json)},DenseMatrix.prototype.swapRows=function(i,j){if(!(isNumber(i)&&isInteger(i)&&isNumber(j)&&isInteger(j)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return validateIndex(i,this._size[0]),validateIndex(j,this._size[0]),DenseMatrix._swapRows(i,j,this._data),this},DenseMatrix._swapRows=function(i,j,data){var vi=data[i];data[i]=data[j],data[j]=vi},type.Matrix._storage.dense=DenseMatrix,type.Matrix._storage["default"]=DenseMatrix,DenseMatrix}var util=require("../../utils/index"),DimensionError=require("../../error/DimensionError"),string=util.string,array=util.array,object=util.object,number=util.number,isArray=Array.isArray,isNumber=number.isNumber,isInteger=number.isInteger,isString=string.isString,validateIndex=array.validateIndex;exports.name="DenseMatrix",exports.path="type",exports.factory=factory,exports.lazy=!1},{"../../error/DimensionError":227,"../../utils/index":704,"./Matrix":638}],636:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function FibonacciHeap(){if(!(this instanceof FibonacciHeap))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}var smaller=load(require("../../function/relational/smaller")),larger=load(require("../../function/relational/larger")),oneOverLogPhi=1/Math.log((1+Math.sqrt(5))/2);FibonacciHeap.prototype.type="FibonacciHeap",FibonacciHeap.prototype.isFibonacciHeap=!0,FibonacciHeap.prototype.insert=function(key,value){var node={key:key,value:value,degree:0};if(this._minimum){var minimum=this._minimum;node.left=minimum,node.right=minimum.right,minimum.right=node,node.right.left=node,smaller(key,minimum.key)&&(this._minimum=node)}else node.left=node,node.right=node,this._minimum=node;return this._size++,node},FibonacciHeap.prototype.size=function(){return this._size},FibonacciHeap.prototype.clear=function(){this._minimum=null,this._size=0},FibonacciHeap.prototype.isEmpty=function(){return!!this._minimum},FibonacciHeap.prototype.extractMinimum=function(){var node=this._minimum;if(null===node)return node;for(var minimum=this._minimum,numberOfChildren=node.degree,x=node.child;numberOfChildren>0;){var tempRight=x.right;x.left.right=x.right,x.right.left=x.left,x.left=minimum,x.right=minimum.right,minimum.right=x,x.right.left=x,x.parent=null,x=tempRight,numberOfChildren--}return node.left.right=node.right,node.right.left=node.left,node==node.right?minimum=null:(minimum=node.right,minimum=_findMinimumNode(minimum,this._size)),this._size--,this._minimum=minimum,node},FibonacciHeap.prototype.remove=function(node){this._minimum=_decreaseKey(this._minimum,node,-1),this.extractMinimum()};var _decreaseKey=function(minimum,node,key){node.key=key;var parent=node.parent;return parent&&smaller(node.key,parent.key)&&(_cut(minimum,node,parent),_cascadingCut(minimum,parent)),smaller(node.key,minimum.key)&&(minimum=node),minimum},_cut=function(minimum,node,parent){node.left.right=node.right,node.right.left=node.left,parent.degree--,parent.child==node&&(parent.child=node.right),0===parent.degree&&(parent.child=null),node.left=minimum,node.right=minimum.right,minimum.right=node,node.right.left=node,node.parent=null,node.mark=!1},_cascadingCut=function(minimum,node){var parent=node.parent;parent&&(node.mark?(_cut(minimum,node,parent),_cascadingCut(parent)):node.mark=!0)},_linkNodes=function(node,parent){node.left.right=node.right,node.right.left=node.left,node.parent=parent,parent.child?(node.left=parent.child,node.right=parent.child.right,parent.child.right=node,node.right.left=node):(parent.child=node,node.right=node,node.left=node),parent.degree++,node.mark=!1},_findMinimumNode=function(minimum,size){var arraySize=Math.floor(Math.log(size)*oneOverLogPhi)+1,array=new Array(arraySize),numRoots=0,x=minimum;if(x)for(numRoots++,x=x.right;x!==minimum;)numRoots++,x=x.right;for(var y;numRoots>0;){for(var d=x.degree,next=x.right;;){if(y=array[d],!y)break;if(larger(x.key,y.key)){var temp=y;y=x,x=temp}_linkNodes(y,x),array[d]=null,d++}array[d]=x,x=next,numRoots--}minimum=null;for(var i=0;arraySize>i;i++)y=array[i],y&&(minimum?(y.left.right=y.right,y.right.left=y.left,y.left=minimum,y.right=minimum.right,minimum.right=y,y.right.left=y,smaller(y.key,minimum.key)&&(minimum=y)):minimum=y);return minimum};return FibonacciHeap}exports.name="FibonacciHeap",exports.path="type",exports.factory=factory},{"../../function/relational/larger":559,"../../function/relational/smaller":561}],637:[function(require,module,exports){"use strict";function factory(type,config,load){function ImmutableDenseMatrix(data,datatype){if(!(this instanceof ImmutableDenseMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!isString(datatype))throw new Error("Invalid datatype: "+datatype);if(data&&data.isMatrix===!0||isArray(data)){var matrix=new DenseMatrix(data,datatype);this._data=matrix._data,this._size=matrix._size,this._datatype=matrix._datatype,this._min=null,this._max=null}else if(data&&isArray(data.data)&&isArray(data.size))this._data=data.data,this._size=data.size,this._datatype=data.datatype,this._min="undefined"!=typeof data.min?data.min:null,this._max="undefined"!=typeof data.max?data.max:null;else{if(data)throw new TypeError("Unsupported type of data ("+util.types.type(data)+")");this._data=[],this._size=[0],this._datatype=datatype,this._min=null,this._max=null}}var DenseMatrix=load(require("./DenseMatrix")),smaller=load(require("../../function/relational/smaller"));return ImmutableDenseMatrix.prototype=new DenseMatrix,ImmutableDenseMatrix.prototype.type="ImmutableDenseMatrix",ImmutableDenseMatrix.prototype.isImmutableDenseMatrix=!0,ImmutableDenseMatrix.prototype.subset=function(index){switch(arguments.length){case 1:var m=DenseMatrix.prototype.subset.call(this,index);return m.isMatrix?new ImmutableDenseMatrix({data:m._data,size:m._size,datatype:m._datatype}):m;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},ImmutableDenseMatrix.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},ImmutableDenseMatrix.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},ImmutableDenseMatrix.prototype.clone=function(){var m=new ImmutableDenseMatrix({data:object.clone(this._data),size:object.clone(this._size),datatype:this._datatype});return m},ImmutableDenseMatrix.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},ImmutableDenseMatrix.fromJSON=function(json){return new ImmutableDenseMatrix(json)},ImmutableDenseMatrix.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},ImmutableDenseMatrix.prototype.min=function(){if(null===this._min){var m=null;this.forEach(function(v){(null===m||smaller(v,m))&&(m=v)}),this._min=null!==m?m:void 0}return this._min},ImmutableDenseMatrix.prototype.max=function(){if(null===this._max){var m=null;this.forEach(function(v){(null===m||smaller(m,v))&&(m=v)}),this._max=null!==m?m:void 0}return this._max},ImmutableDenseMatrix}var util=require("../../utils/index"),string=util.string,object=util.object,isArray=Array.isArray,isString=string.isString;exports.name="ImmutableDenseMatrix",exports.path="type",exports.factory=factory},{"../../function/relational/smaller":561,"../../utils/index":704,"./DenseMatrix":635}],638:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function Matrix(){if(!(this instanceof Matrix))throw new SyntaxError("Constructor must be called with the new operator")}return Matrix.prototype.type="Matrix",Matrix.prototype.isMatrix=!0,Matrix.storage=function(format){if(!isString(format))throw new TypeError("format must be a string value");var constructor=Matrix._storage[format];if(!constructor)throw new SyntaxError("Unsupported matrix storage format: "+format);return constructor},Matrix._storage={},Matrix.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},Matrix.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},Matrix.prototype.create=function(data,datatype){throw new Error("Cannot invoke create on a Matrix interface")},Matrix.prototype.subset=function(index,replacement,defaultValue){throw new Error("Cannot invoke subset on a Matrix interface")},Matrix.prototype.get=function(index){throw new Error("Cannot invoke get on a Matrix interface")},Matrix.prototype.set=function(index,value,defaultValue){throw new Error("Cannot invoke set on a Matrix interface")},Matrix.prototype.resize=function(size,defaultValue){throw new Error("Cannot invoke resize on a Matrix interface")},Matrix.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},Matrix.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},Matrix.prototype.map=function(callback,skipZeros){throw new Error("Cannot invoke map on a Matrix interface")},Matrix.prototype.forEach=function(callback){throw new Error("Cannot invoke forEach on a Matrix interface")},Matrix.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},Matrix.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},Matrix.prototype.format=function(options){throw new Error("Cannot invoke format on a Matrix interface")},Matrix.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},Matrix}var util=require("../../utils/index"),string=util.string,isString=string.isString;exports.name="Matrix",exports.path="type",exports.factory=factory},{"../../utils/index":704}],639:[function(require,module,exports){"use strict";function factory(type){function Index(ranges){if(!(this instanceof Index))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,ii=arguments.length;ii>i;i++){var arg=arguments[i];if(arg&&arg.isRange===!0)this._dimensions.push(arg),this._isScalar=!1;else if(arg&&(Array.isArray(arg)||arg.isMatrix===!0)){var m=_createImmutableMatrix(arg.valueOf());this._dimensions.push(m);var size=m.size();1===size.length&&1===size[0]||(this._isScalar=!1)}else{if("number"!=typeof arg)throw new TypeError("Dimension must be an Array, Matrix, Number or Range");this._dimensions.push(_createImmutableMatrix([arg]))}}}function _createImmutableMatrix(arg){for(var i=0,l=arg.length;l>i;i++)if("number"!=typeof arg[i]||!isInteger(arg[i]))throw new TypeError("Index parameters must be positive integer numbers");return new type.ImmutableDenseMatrix(arg)}return Index.prototype.type="Index",Index.prototype.isIndex=!0,Index.prototype.clone=function(){var index=new Index;return index._dimensions=clone(this._dimensions),index._isScalar=this._isScalar,index},Index.create=function(ranges){var index=new Index;return Index.apply(index,ranges),index},Index.prototype.size=function(){for(var size=[],i=0,ii=this._dimensions.length;ii>i;i++){var d=this._dimensions[i];size[i]=d.size()[0]}return size},Index.prototype.max=function(){for(var values=[],i=0,ii=this._dimensions.length;ii>i;i++){var range=this._dimensions[i];values[i]=range.max()}return values},Index.prototype.min=function(){for(var values=[],i=0,ii=this._dimensions.length;ii>i;i++){var range=this._dimensions[i];values[i]=range.min()}return values},Index.prototype.forEach=function(callback){for(var i=0,ii=this._dimensions.length;ii>i;i++)callback(this._dimensions[i],i,this)},Index.prototype.dimension=function(dim){return this._dimensions[dim]||null},Index.prototype.isScalar=function(){return this._isScalar},Index.prototype.toArray=function(){for(var array=[],i=0,ii=this._dimensions.length;ii>i;i++)array.push(this._dimensions[i].toArray());return array},Index.prototype.valueOf=Index.prototype.toArray,Index.prototype.toString=function(){for(var strings=[],i=0,ii=this._dimensions.length;ii>i;i++)strings.push(this._dimensions[i].toString());return"["+strings.join(", ")+"]"},Index.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},Index.fromJSON=function(json){return Index.create(json.dimensions)},Index}var clone=require("../../utils/object").clone,isInteger=require("../../utils/number").isInteger;exports.name="Index",exports.path="type",exports.factory=factory},{"../../utils/number":706,"../../utils/object":707}],640:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function Range(start,end,step){if(!(this instanceof Range))throw new SyntaxError("Constructor must be called with the new operator");if(null!=start)if(start.isBigNumber===!0)start=start.toNumber();else if("number"!=typeof start)throw new TypeError("Parameter start must be a number");if(null!=end)if(end.isBigNumber===!0)end=end.toNumber();else if("number"!=typeof end)throw new TypeError("Parameter end must be a number");if(null!=step)if(step.isBigNumber===!0)step=step.toNumber();else if("number"!=typeof step)throw new TypeError("Parameter step must be a number");this.start=null!=start?parseFloat(start):0,this.end=null!=end?parseFloat(end):0,this.step=null!=step?parseFloat(step):1}return Range.prototype.type="Range",Range.prototype.isRange=!0,Range.parse=function(str){if("string"!=typeof str)return null;var args=str.split(":"),nums=args.map(function(arg){return parseFloat(arg)}),invalid=nums.some(function(num){return isNaN(num)});if(invalid)return null;switch(nums.length){case 2:return new Range(nums[0],nums[1]);case 3:return new Range(nums[0],nums[2],nums[1]);default:return null}},Range.prototype.clone=function(){return new Range(this.start,this.end,this.step)},Range.prototype.size=function(){var len=0,start=this.start,step=this.step,end=this.end,diff=end-start;return number.sign(step)==number.sign(diff)?len=Math.ceil(diff/step):0==diff&&(len=0),isNaN(len)&&(len=0),[len]},Range.prototype.min=function(){var size=this.size()[0];
return size>0?this.step>0?this.start:this.start+(size-1)*this.step:void 0},Range.prototype.max=function(){var size=this.size()[0];return size>0?this.step>0?this.start+(size-1)*this.step:this.start:void 0},Range.prototype.forEach=function(callback){var x=this.start,step=this.step,end=this.end,i=0;if(step>0)for(;end>x;)callback(x,[i],this),x+=step,i++;else if(0>step)for(;x>end;)callback(x,[i],this),x+=step,i++},Range.prototype.map=function(callback){var array=[];return this.forEach(function(value,index,obj){array[index[0]]=callback(value,index,obj)}),array},Range.prototype.toArray=function(){var array=[];return this.forEach(function(value,index){array[index[0]]=value}),array},Range.prototype.valueOf=function(){return this.toArray()},Range.prototype.format=function(options){var str=number.format(this.start,options);return 1!=this.step&&(str+=":"+number.format(this.step,options)),str+=":"+number.format(this.end,options)},Range.prototype.toString=function(){return this.format()},Range.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},Range.fromJSON=function(json){return new Range(json.start,json.end,json.step)},Range}var number=require("../../utils/number");exports.name="Range",exports.path="type",exports.factory=factory},{"../../utils/number":706}],641:[function(require,module,exports){"use strict";function factory(type,config,load){function Spa(){if(!(this instanceof Spa))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new type.FibonacciHeap}var add=load(require("../../function/arithmetic/add")),equalScalar=load(require("../../function/relational/equalScalar"));return Spa.prototype.type="Spa",Spa.prototype.isSpa=!0,Spa.prototype.set=function(i,v){if(this._values[i])this._values[i].value=v;else{var node=this._heap.insert(i,v);this._values[i]=node}},Spa.prototype.get=function(i){var node=this._values[i];return node?node.value:0},Spa.prototype.accumulate=function(i,v){var node=this._values[i];node?node.value=add(node.value,v):(node=this._heap.insert(i,v),this._values[i]=node)},Spa.prototype.forEach=function(from,to,callback){var heap=this._heap,values=this._values,nodes=[],node=heap.extractMinimum();for(node&&nodes.push(node);node&&node.key<=to;)node.key>=from&&(equalScalar(node.value,0)||callback(node.key,node.value,this)),node=heap.extractMinimum(),node&&nodes.push(node);for(var i=0;i<nodes.length;i++){var n=nodes[i];node=heap.insert(n.key,n.value),values[node.key]=node}},Spa.prototype.swap=function(i,j){var nodei=this._values[i],nodej=this._values[j];if(!nodei&&nodej)nodei=this._heap.insert(i,nodej.value),this._heap.remove(nodej),this._values[i]=nodei,this._values[j]=void 0;else if(nodei&&!nodej)nodej=this._heap.insert(j,nodei.value),this._heap.remove(nodei),this._values[j]=nodej,this._values[i]=void 0;else if(nodei&&nodej){var v=nodei.value;nodei.value=nodej.value,nodej.value=v}},Spa}exports.name="Spa",exports.path="type",exports.factory=factory},{"../../function/arithmetic/add":465,"../../function/relational/equalScalar":557}],642:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function SparseMatrix(data,datatype){if(!(this instanceof SparseMatrix))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!isString(datatype))throw new Error("Invalid datatype: "+datatype);if(data&&data.isMatrix===!0)_createFromMatrix(this,data,datatype);else if(data&&isArray(data.index)&&isArray(data.ptr)&&isArray(data.size))this._values=data.values,this._index=data.index,this._ptr=data.ptr,this._size=data.size,this._datatype=datatype||data.datatype;else if(isArray(data))_createFromArray(this,data,datatype);else{if(data)throw new TypeError("Unsupported type of data ("+util.types.type(data)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=datatype}}var Matrix=load(require("./Matrix")),equalScalar=load(require("../../function/relational/equalScalar")),_createFromMatrix=function(matrix,source,datatype){"SparseMatrix"===source.type?(matrix._values=source._values?object.clone(source._values):void 0,matrix._index=object.clone(source._index),matrix._ptr=object.clone(source._ptr),matrix._size=object.clone(source._size),matrix._datatype=datatype||source._datatype):_createFromArray(matrix,source.valueOf(),datatype||source._datatype)},_createFromArray=function(matrix,data,datatype){matrix._values=[],matrix._index=[],matrix._ptr=[],matrix._datatype=datatype;var rows=data.length,columns=0,eq=equalScalar,zero=0;if(isString(datatype)&&(eq=typed.find(equalScalar,[datatype,datatype])||equalScalar,zero=typed.convert(0,datatype)),rows>0){var j=0;do{matrix._ptr.push(matrix._index.length);for(var i=0;rows>i;i++){var row=data[i];if(isArray(row)){if(0===j&&columns<row.length&&(columns=row.length),j<row.length){var v=row[j];eq(v,zero)||(matrix._values.push(v),matrix._index.push(i))}}else 0===j&&1>columns&&(columns=1),eq(row,zero)||(matrix._values.push(row),matrix._index.push(i))}j++}while(columns>j)}matrix._ptr.push(matrix._index.length),matrix._size=[rows,columns]};SparseMatrix.prototype=new Matrix,SparseMatrix.prototype.type="SparseMatrix",SparseMatrix.prototype.isSparseMatrix=!0,SparseMatrix.prototype.storage=function(){return"sparse"},SparseMatrix.prototype.datatype=function(){return this._datatype},SparseMatrix.prototype.create=function(data,datatype){return new SparseMatrix(data,datatype)},SparseMatrix.prototype.density=function(){var rows=this._size[0],columns=this._size[1];return 0!==rows&&0!==columns?this._index.length/(rows*columns):0},SparseMatrix.prototype.subset=function(index,replacement,defaultValue){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return _getsubset(this,index);case 2:case 3:return _setsubset(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}};var _getsubset=function(matrix,idx){if(!idx||idx.isIndex!==!0)throw new TypeError("Invalid index");var isScalar=idx.isScalar();if(isScalar)return matrix.get(idx.min());var size=idx.size();if(size.length!=matrix._size.length)throw new DimensionError(size.length,matrix._size.length);var i,ii,k,kk,min=idx.min(),max=idx.max();for(i=0,ii=matrix._size.length;ii>i;i++)validateIndex(min[i],matrix._size[i]),validateIndex(max[i],matrix._size[i]);var mvalues=matrix._values,mindex=matrix._index,mptr=matrix._ptr,rows=idx.dimension(0),columns=idx.dimension(1),w=[],pv=[];rows.forEach(function(i,r){pv[i]=r[0],w[i]=!0});var values=mvalues?[]:void 0,index=[],ptr=[];return columns.forEach(function(j){for(ptr.push(index.length),k=mptr[j],kk=mptr[j+1];kk>k;k++)i=mindex[k],w[i]===!0&&(index.push(pv[i]),values&&values.push(mvalues[k]))}),ptr.push(index.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:size,datatype:matrix._datatype})},_setsubset=function(matrix,index,submatrix,defaultValue){if(!index||index.isIndex!==!0)throw new TypeError("Invalid index");var sSize,iSize=index.size(),isScalar=index.isScalar();if(submatrix&&submatrix.isMatrix===!0?(sSize=submatrix.size(),submatrix=submatrix.toArray()):sSize=array.size(submatrix),isScalar){if(0!==sSize.length)throw new TypeError("Scalar expected");matrix.set(index.min(),submatrix,defaultValue)}else{if(1!==iSize.length&&2!==iSize.length)throw new DimensionError(iSize.length,matrix._size.length,"<");if(sSize.length<iSize.length){for(var i=0,outer=0;1===iSize[i]&&1===sSize[i];)i++;for(;1===iSize[i];)outer++,i++;submatrix=array.unsqueeze(submatrix,iSize.length,outer,sSize)}if(!object.deepEqual(iSize,sSize))throw new DimensionError(iSize,sSize,">");for(var x0=index.min()[0],y0=index.min()[1],m=sSize[0],n=sSize[1],x=0;m>x;x++)for(var y=0;n>y;y++){var v=submatrix[x][y];matrix.set([x+x0,y+y0],v,defaultValue)}}return matrix};SparseMatrix.prototype.get=function(index){if(!isArray(index))throw new TypeError("Array expected");if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var i=index[0],j=index[1];validateIndex(i,this._size[0]),validateIndex(j,this._size[1]);var k=_getValueIndex(i,this._ptr[j],this._ptr[j+1],this._index);return k<this._ptr[j+1]&&this._index[k]===i?object.clone(this._values[k]):0},SparseMatrix.prototype.set=function(index,v,defaultValue){if(!isArray(index))throw new TypeError("Array expected");if(index.length!=this._size.length)throw new DimensionError(index.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var i=index[0],j=index[1],rows=this._size[0],columns=this._size[1],eq=equalScalar,zero=0;isString(this._datatype)&&(eq=typed.find(equalScalar,[this._datatype,this._datatype])||equalScalar,zero=typed.convert(0,this._datatype)),(i>rows-1||j>columns-1)&&(_resize(this,Math.max(i+1,rows),Math.max(j+1,columns),defaultValue),rows=this._size[0],columns=this._size[1]),validateIndex(i,rows),validateIndex(j,columns);var k=_getValueIndex(i,this._ptr[j],this._ptr[j+1],this._index);return k<this._ptr[j+1]&&this._index[k]===i?eq(v,zero)?_remove(k,j,this._values,this._index,this._ptr):this._values[k]=v:_insert(k,i,j,v,this._values,this._index,this._ptr),this};var _getValueIndex=function(i,top,bottom,index){if(bottom-top===0)return bottom;for(var r=top;bottom>r;r++)if(index[r]===i)return r;return top},_remove=function(k,j,values,index,ptr){values.splice(k,1),index.splice(k,1);for(var x=j+1;x<ptr.length;x++)ptr[x]--},_insert=function(k,i,j,v,values,index,ptr){values.splice(k,0,v),index.splice(k,0,i);for(var x=j+1;x<ptr.length;x++)ptr[x]++};SparseMatrix.prototype.resize=function(size,defaultValue,copy){if(!isArray(size))throw new TypeError("Array expected");if(2!==size.length)throw new Error("Only two dimensions matrix are supported");size.forEach(function(value){if(!number.isNumber(value)||!number.isInteger(value)||0>value)throw new TypeError("Invalid size, must contain positive integers (size: "+string.format(size)+")")});var m=copy?this.clone():this;return _resize(m,size[0],size[1],defaultValue)};var _resize=function(matrix,rows,columns,defaultValue){var value=defaultValue||0,eq=equalScalar,zero=0;isString(matrix._datatype)&&(eq=typed.find(equalScalar,[matrix._datatype,matrix._datatype])||equalScalar,zero=typed.convert(0,matrix._datatype),value=typed.convert(value,matrix._datatype));var i,j,k,ins=!eq(value,zero),r=matrix._size[0],c=matrix._size[1];if(columns>c){for(j=c;columns>j;j++)if(matrix._ptr[j]=matrix._values.length,ins)for(i=0;r>i;i++)matrix._values.push(value),matrix._index.push(i);matrix._ptr[columns]=matrix._values.length}else c>columns&&(matrix._ptr.splice(columns+1,c-columns),matrix._values.splice(matrix._ptr[columns],matrix._values.length),matrix._index.splice(matrix._ptr[columns],matrix._index.length));if(c=columns,rows>r){if(ins){var n=0;for(j=0;c>j;j++){matrix._ptr[j]=matrix._ptr[j]+n,k=matrix._ptr[j+1]+n;var p=0;for(i=r;rows>i;i++,p++)matrix._values.splice(k+p,0,value),matrix._index.splice(k+p,0,i),n++}matrix._ptr[c]=matrix._values.length}}else if(r>rows){var d=0;for(j=0;c>j;j++){matrix._ptr[j]=matrix._ptr[j]-d;var k0=matrix._ptr[j],k1=matrix._ptr[j+1]-d;for(k=k0;k1>k;k++)i=matrix._index[k],i>rows-1&&(matrix._values.splice(k,1),matrix._index.splice(k,1),d++)}matrix._ptr[j]=matrix._values.length}return matrix._size[0]=rows,matrix._size[1]=columns,matrix};SparseMatrix.prototype.clone=function(){var m=new SparseMatrix({values:this._values?object.clone(this._values):void 0,index:object.clone(this._index),ptr:object.clone(this._ptr),size:object.clone(this._size),datatype:this._datatype});return m},SparseMatrix.prototype.size=function(){return object.clone(this._size)},SparseMatrix.prototype.map=function(callback,skipZeros){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var me=this,rows=this._size[0],columns=this._size[1],invoke=function(v,i,j){return callback(v,[i,j],me)};return _map(this,0,rows-1,0,columns-1,invoke,skipZeros)};var _map=function(matrix,minRow,maxRow,minColumn,maxColumn,callback,skipZeros){var values=[],index=[],ptr=[],eq=equalScalar,zero=0;isString(matrix._datatype)&&(eq=typed.find(equalScalar,[matrix._datatype,matrix._datatype])||equalScalar,zero=typed.convert(0,matrix._datatype));for(var invoke=function(v,x,y){v=callback(v,x,y),eq(v,zero)||(values.push(v),index.push(x))},j=minColumn;maxColumn>=j;j++){ptr.push(values.length);for(var k0=matrix._ptr[j],k1=matrix._ptr[j+1],p=minRow,k=k0;k1>k;k++){var i=matrix._index[k];if(i>=minRow&&maxRow>=i){if(!skipZeros)for(var x=p;i>x;x++)invoke(0,x-minRow,j-minColumn);invoke(matrix._values[k],i-minRow,j-minColumn)}p=i+1}if(!skipZeros)for(var y=p;maxRow>=y;y++)invoke(0,y-minRow,j-minColumn)}return ptr.push(values.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:[maxRow-minRow+1,maxColumn-minColumn+1]})};SparseMatrix.prototype.forEach=function(callback,skipZeros){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var me=this,rows=this._size[0],columns=this._size[1],j=0;columns>j;j++){for(var k0=this._ptr[j],k1=this._ptr[j+1],p=0,k=k0;k1>k;k++){var i=this._index[k];if(!skipZeros)for(var x=p;i>x;x++)callback(0,[x,j],me);callback(this._values[k],[i,j],me),p=i+1}if(!skipZeros)for(var y=p;rows>y;y++)callback(0,[y,j],me)}},SparseMatrix.prototype.toArray=function(){return _toArray(this._values,this._index,this._ptr,this._size,!0)},SparseMatrix.prototype.valueOf=function(){return _toArray(this._values,this._index,this._ptr,this._size,!1)};var _toArray=function(values,index,ptr,size,copy){var i,j,rows=size[0],columns=size[1],a=[];for(i=0;rows>i;i++)for(a[i]=[],j=0;columns>j;j++)a[i][j]=0;for(j=0;columns>j;j++)for(var k0=ptr[j],k1=ptr[j+1],k=k0;k1>k;k++)i=index[k],a[i][j]=values?copy?object.clone(values[k]):values[k]:1;return a};return SparseMatrix.prototype.format=function(options){for(var rows=this._size[0],columns=this._size[1],density=this.density(),str="Sparse Matrix ["+string.format(rows,options)+" x "+string.format(columns,options)+"] density: "+string.format(density,options)+"\n",j=0;columns>j;j++)for(var k0=this._ptr[j],k1=this._ptr[j+1],k=k0;k1>k;k++){var i=this._index[k];str+="\n    ("+string.format(i,options)+", "+string.format(j,options)+") ==> "+(this._values?string.format(this._values[k],options):"X")}return str},SparseMatrix.prototype.toString=function(){return string.format(this.toArray())},SparseMatrix.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},SparseMatrix.prototype.diagonal=function(k){if(k){if(k.isBigNumber===!0&&(k=k.toNumber()),!isNumber(k)||!isInteger(k))throw new TypeError("The parameter k must be an integer number")}else k=0;var kSuper=k>0?k:0,kSub=0>k?-k:0,rows=this._size[0],columns=this._size[1],n=Math.min(rows-kSub,columns-kSuper),values=[],index=[],ptr=[];ptr[0]=0;for(var j=kSuper;columns>j&&values.length<n;j++)for(var k0=this._ptr[j],k1=this._ptr[j+1],x=k0;k1>x;x++){var i=this._index[x];if(i===j-kSuper+kSub){values.push(object.clone(this._values[x])),index[values.length-1]=i-kSub;break}}return ptr.push(values.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:[n,1]})},SparseMatrix.fromJSON=function(json){return new SparseMatrix(json)},SparseMatrix.diagonal=function(size,value,k,defaultValue,datatype){if(!isArray(size))throw new TypeError("Array expected, size parameter");if(2!==size.length)throw new Error("Only two dimensions matrix are supported");if(size=size.map(function(s){if(s&&s.isBigNumber===!0&&(s=s.toNumber()),!isNumber(s)||!isInteger(s)||1>s)throw new Error("Size values must be positive integers");return s}),k){if(k.isBigNumber===!0&&(k=k.toNumber()),!isNumber(k)||!isInteger(k))throw new TypeError("The parameter k must be an integer number")}else k=0;var eq=equalScalar,zero=0;isString(datatype)&&(eq=typed.find(equalScalar,[datatype,datatype])||equalScalar,zero=typed.convert(0,datatype));var _value,kSuper=k>0?k:0,kSub=0>k?-k:0,rows=size[0],columns=size[1],n=Math.min(rows-kSub,columns-kSuper);if(isArray(value)){if(value.length!==n)throw new Error("Invalid value array length");_value=function(i){return value[i]}}else if(value&&value.isMatrix===!0){var ms=value.size();if(1!==ms.length||ms[0]!==n)throw new Error("Invalid matrix length");_value=function(i){return value.get([i])}}else _value=function(){return value};for(var values=[],index=[],ptr=[],j=0;columns>j;j++){ptr.push(values.length);var i=j-kSuper;if(i>=0&&n>i){var v=_value(i);eq(v,zero)||(index.push(i+kSub),values.push(v))}}return ptr.push(values.length),new SparseMatrix({values:values,index:index,ptr:ptr,size:[rows,columns]})},SparseMatrix.prototype.swapRows=function(i,j){if(!(isNumber(i)&&isInteger(i)&&isNumber(j)&&isInteger(j)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return validateIndex(i,this._size[0]),validateIndex(j,this._size[0]),SparseMatrix._swapRows(i,j,this._size[1],this._values,this._index,this._ptr),this},SparseMatrix._forEachRow=function(j,values,index,ptr,callback){for(var k0=ptr[j],k1=ptr[j+1],k=k0;k1>k;k++)callback(index[k],values[k])},SparseMatrix._swapRows=function(x,y,columns,values,index,ptr){for(var j=0;columns>j;j++){var k0=ptr[j],k1=ptr[j+1],kx=_getValueIndex(x,k0,k1,index),ky=_getValueIndex(y,k0,k1,index);if(k1>kx&&k1>ky&&index[kx]===x&&index[ky]===y){if(values){var v=values[kx];values[kx]=values[ky],values[ky]=v}}else if(k1>kx&&index[kx]===x&&(ky>=k1||index[ky]!==y)){var vx=values?values[kx]:void 0;index.splice(ky,0,y),values&&values.splice(ky,0,vx),index.splice(kx>=ky?kx+1:kx,1),values&&values.splice(kx>=ky?kx+1:kx,1)}else if(k1>ky&&index[ky]===y&&(kx>=k1||index[kx]!==x)){var vy=values?values[ky]:void 0;index.splice(kx,0,x),values&&values.splice(kx,0,vy),index.splice(ky>=kx?ky+1:ky,1),values&&values.splice(ky>=kx?ky+1:ky,1)}}},type.Matrix._storage.sparse=SparseMatrix,SparseMatrix}var util=require("../../utils/index"),DimensionError=require("../../error/DimensionError"),array=util.array,object=util.object,string=util.string,number=util.number,isArray=Array.isArray,isNumber=number.isNumber,isInteger=number.isInteger,isString=string.isString,validateIndex=array.validateIndex;exports.name="SparseMatrix",exports.path="type",exports.factory=factory,exports.lazy=!1},{"../../error/DimensionError":227,"../../function/relational/equalScalar":557,"../../utils/index":704,"./Matrix":638}],643:[function(require,module,exports){"use strict";function factory(type,config,load,typed){return typed("index",{"...number | BigNumber | Range | Array | Matrix":function(args){var ranges=args.map(function(arg){return arg&&arg.isBigNumber===!0?arg.toNumber():arg&&(Array.isArray(arg)||arg.isMatrix===!0)?arg.map(function(elem){return elem&&elem.isBigNumber===!0?elem.toNumber():elem}):arg}),res=new type.Index;return type.Index.apply(res,ranges),res}})}exports.name="index",exports.factory=factory},{}],644:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function _create(data,format,datatype){var M=type.Matrix.storage(format||"default");return new M(data,datatype)}var matrix=typed("matrix",{"":function(){return _create([])},string:function(format){return _create([],format)},"string, string":function(format,datatype){return _create([],format,datatype)},Array:function(data){return _create(data)},Matrix:function(data){return _create(data,data.storage())},"Array | Matrix, string":_create,"Array | Matrix, string, string":_create});return matrix.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},matrix}exports.name="matrix",exports.factory=factory},{}],645:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var SparseMatrix=type.SparseMatrix,sparse=typed("sparse",{"":function(){return new SparseMatrix([])},string:function(datatype){return new SparseMatrix([],datatype)},"Array | Matrix":function(data){return new SparseMatrix(data)},"Array | Matrix, string":function(data,datatype){return new SparseMatrix(data,datatype)}});return sparse.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},sparse}exports.name="sparse",exports.factory=factory},{}],646:[function(require,module,exports){module.exports=[require("./Matrix"),require("./DenseMatrix"),require("./SparseMatrix"),require("./Spa"),require("./FibonacciHeap"),require("./ImmutableDenseMatrix"),require("./MatrixIndex"),require("./Range"),require("./function/index"),require("./function/matrix"),require("./function/sparse")]},{"./DenseMatrix":635,"./FibonacciHeap":636,"./ImmutableDenseMatrix":637,"./Matrix":638,"./MatrixIndex":639,"./Range":640,"./Spa":641,"./SparseMatrix":642,"./function/index":643,"./function/matrix":644,"./function/sparse":645}],647:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var DenseMatrix=type.DenseMatrix,algorithm01=function(denseMatrix,sparseMatrix,callback,inverse){var adata=denseMatrix._data,asize=denseMatrix._size,adt=denseMatrix._datatype,bvalues=sparseMatrix._values,bindex=sparseMatrix._index,bptr=sparseMatrix._ptr,bsize=sparseMatrix._size,bdt=sparseMatrix._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!bvalues)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var i,j,rows=asize[0],columns=asize[1],dt="string"==typeof adt&&adt===bdt?adt:void 0,cf=dt?typed.find(callback,[dt,dt]):callback,cdata=[];for(i=0;rows>i;i++)cdata[i]=[];var x=[],w=[];for(j=0;columns>j;j++){for(var mark=j+1,k0=bptr[j],k1=bptr[j+1],k=k0;k1>k;k++)i=bindex[k],x[i]=inverse?cf(bvalues[k],adata[i][j]):cf(adata[i][j],bvalues[k]),w[i]=mark;for(i=0;rows>i;i++)w[i]===mark?cdata[i][j]=x[i]:cdata[i][j]=adata[i][j]}return new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt})};return algorithm01}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm01",exports.factory=factory},{"../../../error/DimensionError":227}],648:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=load(require("../../../function/relational/equalScalar")),SparseMatrix=type.SparseMatrix,algorithm02=function(denseMatrix,sparseMatrix,callback,inverse){var adata=denseMatrix._data,asize=denseMatrix._size,adt=denseMatrix._datatype,bvalues=sparseMatrix._values,bindex=sparseMatrix._index,bptr=sparseMatrix._ptr,bsize=sparseMatrix._size,bdt=sparseMatrix._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!bvalues)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cvalues=[],cindex=[],cptr=[],j=0;columns>j;j++){cptr[j]=cindex.length;for(var k0=bptr[j],k1=bptr[j+1],k=k0;k1>k;k++){var i=bindex[k],cij=inverse?cf(bvalues[k],adata[i][j]):cf(adata[i][j],bvalues[k]);eq(cij,zero)||(cindex.push(i),cvalues.push(cij))}}return cptr[columns]=cindex.length,new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt})};return algorithm02}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm02",exports.factory=factory},{"../../../error/DimensionError":227,"../../../function/relational/equalScalar":557}],649:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var DenseMatrix=type.DenseMatrix,algorithm03=function(denseMatrix,sparseMatrix,callback,inverse){var adata=denseMatrix._data,asize=denseMatrix._size,adt=denseMatrix._datatype,bvalues=sparseMatrix._values,bindex=sparseMatrix._index,bptr=sparseMatrix._ptr,bsize=sparseMatrix._size,bdt=sparseMatrix._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!bvalues)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var dt,rows=asize[0],columns=asize[1],zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cdata=[],z=0;rows>z;z++)cdata[z]=[];for(var x=[],w=[],j=0;columns>j;j++){for(var mark=j+1,k0=bptr[j],k1=bptr[j+1],k=k0;k1>k;k++){var i=bindex[k];x[i]=inverse?cf(bvalues[k],adata[i][j]):cf(adata[i][j],bvalues[k]),w[i]=mark}for(var y=0;rows>y;y++)w[y]===mark?cdata[y][j]=x[y]:cdata[y][j]=inverse?cf(zero,adata[y][j]):cf(adata[y][j],zero)}return new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt})};return algorithm03}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm03",exports.factory=factory},{"../../../error/DimensionError":227}],650:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=load(require("../../../function/relational/equalScalar")),SparseMatrix=type.SparseMatrix,algorithm04=function(a,b,callback){var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));var i,j,k,k0,k1,cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt}),xa=avalues&&bvalues?[]:void 0,xb=avalues&&bvalues?[]:void 0,wa=[],wb=[];for(j=0;columns>j;j++){cptr[j]=cindex.length;var mark=j+1;for(k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++)i=aindex[k],cindex.push(i),wa[i]=mark,xa&&(xa[i]=avalues[k]);for(k0=bptr[j],k1=bptr[j+1],k=k0;k1>k;k++)if(i=bindex[k],wa[i]===mark){if(xa){var v=cf(xa[i],bvalues[k]);eq(v,zero)?wa[i]=null:xa[i]=v}}else cindex.push(i),wb[i]=mark,xb&&(xb[i]=bvalues[k]);if(xa&&xb)for(k=cptr[j];k<cindex.length;)i=cindex[k],wa[i]===mark?(cvalues[k]=xa[i],k++):wb[i]===mark?(cvalues[k]=xb[i],k++):cindex.splice(k,1)}return cptr[columns]=cindex.length,c};return algorithm04}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm04",exports.factory=factory},{"../../../error/DimensionError":227,"../../../function/relational/equalScalar":557}],651:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=load(require("../../../function/relational/equalScalar")),SparseMatrix=type.SparseMatrix,algorithm05=function(a,b,callback){var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));var i,j,k,k1,cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt}),xa=cvalues?[]:void 0,xb=cvalues?[]:void 0,wa=[],wb=[];for(j=0;columns>j;j++){cptr[j]=cindex.length;var mark=j+1;for(k=aptr[j],k1=aptr[j+1];k1>k;k++)i=aindex[k],cindex.push(i),wa[i]=mark,xa&&(xa[i]=avalues[k]);for(k=bptr[j],k1=bptr[j+1];k1>k;k++)i=bindex[k],wa[i]!==mark&&cindex.push(i),wb[i]=mark,xb&&(xb[i]=bvalues[k]);if(cvalues)for(k=cptr[j];k<cindex.length;){i=cindex[k];var wai=wa[i],wbi=wb[i];if(wai===mark||wbi===mark){var va=wai===mark?xa[i]:zero,vb=wbi===mark?xb[i]:zero,vc=cf(va,vb);eq(vc,zero)?cindex.splice(k,1):(cvalues.push(vc),k++)}}}return cptr[columns]=cindex.length,c};return algorithm05}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm05",exports.factory=factory},{"../../../error/DimensionError":227,"../../../function/relational/equalScalar":557}],652:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=load(require("../../../function/relational/equalScalar")),SparseMatrix=type.SparseMatrix,algorithm06=function(a,b,callback){var avalues=a._values,asize=a._size,adt=a._datatype,bvalues=b._values,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt}),x=cvalues?[]:void 0,w=[],u=[],j=0;columns>j;j++){cptr[j]=cindex.length;var mark=j+1;if(scatter(a,j,w,x,u,mark,c,cf),scatter(b,j,w,x,u,mark,c,cf),x)for(var k=cptr[j];k<cindex.length;){var i=cindex[k];if(u[i]===mark){var v=x[i];eq(v,zero)?cindex.splice(k,1):(cvalues.push(v),k++)}else cindex.splice(k,1)}else for(var p=cptr[j];p<cindex.length;){var r=cindex[p];u[r]!==mark?cindex.splice(p,1):p++}}return cptr[columns]=cindex.length,c};return algorithm06}var scatter=require("./../../../utils/collection/scatter"),DimensionError=require("../../../error/DimensionError");exports.name="algorithm06",exports.factory=factory},{"../../../error/DimensionError":227,"../../../function/relational/equalScalar":557,"./../../../utils/collection/scatter":701}],653:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var DenseMatrix=type.DenseMatrix,algorithm07=function(a,b,callback){var asize=a._size,adt=a._datatype,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));var i,j,cdata=[];for(i=0;rows>i;i++)cdata[i]=[];var c=new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt}),xa=[],xb=[],wa=[],wb=[];for(j=0;columns>j;j++){var mark=j+1;for(_scatter(a,j,wa,xa,mark),_scatter(b,j,wb,xb,mark),i=0;rows>i;i++){var va=wa[i]===mark?xa[i]:zero,vb=wb[i]===mark?xb[i]:zero;cdata[i][j]=cf(va,vb)}}return c},_scatter=function(m,j,w,x,mark){for(var values=m._values,index=m._index,ptr=m._ptr,k=ptr[j],k1=ptr[j+1];k1>k;k++){var i=index[k];w[i]=mark,x[i]=values[k]}};return algorithm07}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm07",exports.factory=factory},{"../../../error/DimensionError":227}],654:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=load(require("../../../function/relational/equalScalar")),SparseMatrix=type.SparseMatrix,algorithm08=function(a,b,callback){
var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");if(!avalues||!bvalues)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));for(var k,k0,k1,i,cvalues=[],cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt}),x=[],w=[],j=0;columns>j;j++){cptr[j]=cindex.length;var mark=j+1;for(k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++)i=aindex[k],w[i]=mark,x[i]=avalues[k],cindex.push(i);for(k0=bptr[j],k1=bptr[j+1],k=k0;k1>k;k++)i=bindex[k],w[i]===mark&&(x[i]=cf(x[i],bvalues[k]));for(k=cptr[j];k<cindex.length;){i=cindex[k];var v=x[i];eq(v,zero)?cindex.splice(k,1):(cvalues.push(v),k++)}}return cptr[columns]=cindex.length,c};return algorithm08}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm08",exports.factory=factory},{"../../../error/DimensionError":227,"../../../function/relational/equalScalar":557}],655:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=load(require("../../../function/relational/equalScalar")),SparseMatrix=type.SparseMatrix,algorithm09=function(a,b,callback){var avalues=a._values,aindex=a._index,aptr=a._ptr,asize=a._size,adt=a._datatype,bvalues=b._values,bindex=b._index,bptr=b._ptr,bsize=b._size,bdt=b._datatype;if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);if(asize[0]!==bsize[0]||asize[1]!==bsize[1])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),cf=typed.find(callback,[dt,dt]));var i,j,k,k0,k1,cvalues=avalues&&bvalues?[]:void 0,cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt}),x=cvalues?[]:void 0,w=[];for(j=0;columns>j;j++){cptr[j]=cindex.length;var mark=j+1;if(x)for(k0=bptr[j],k1=bptr[j+1],k=k0;k1>k;k++)i=bindex[k],w[i]=mark,x[i]=bvalues[k];for(k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++)if(i=aindex[k],x){var vb=w[i]===mark?x[i]:zero,vc=cf(avalues[k],vb);eq(vc,zero)||(cindex.push(i),cvalues.push(vc))}else cindex.push(i)}return cptr[columns]=cindex.length,c};return algorithm09}var DimensionError=require("../../../error/DimensionError");exports.name="algorithm09",exports.factory=factory},{"../../../error/DimensionError":227,"../../../function/relational/equalScalar":557}],656:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var DenseMatrix=type.DenseMatrix,algorithm10=function(s,b,callback,inverse){var avalues=s._values,aindex=s._index,aptr=s._ptr,asize=s._size,adt=s._datatype;if(!avalues)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var dt,rows=asize[0],columns=asize[1],cf=callback;"string"==typeof adt&&(dt=adt,b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));for(var cdata=[],c=new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt}),x=[],w=[],j=0;columns>j;j++){for(var mark=j+1,k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++){var r=aindex[k];x[r]=avalues[k],w[r]=mark}for(var i=0;rows>i;i++)0===j&&(cdata[i]=[]),w[i]===mark?cdata[i][j]=inverse?cf(b,x[i]):cf(x[i],b):cdata[i][j]=b}return c};return algorithm10}exports.name="algorithm10",exports.factory=factory},{}],657:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var equalScalar=load(require("../../../function/relational/equalScalar")),SparseMatrix=type.SparseMatrix,algorithm11=function(s,b,callback,inverse){var avalues=s._values,aindex=s._index,aptr=s._ptr,asize=s._size,adt=s._datatype;if(!avalues)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var dt,rows=asize[0],columns=asize[1],eq=equalScalar,zero=0,cf=callback;"string"==typeof adt&&(dt=adt,eq=typed.find(equalScalar,[dt,dt]),zero=typed.convert(0,dt),b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));for(var cvalues=[],cindex=[],cptr=[],c=new SparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt}),j=0;columns>j;j++){cptr[j]=cindex.length;for(var k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++){var i=aindex[k],v=inverse?cf(b,avalues[k]):cf(avalues[k],b);eq(v,zero)||(cindex.push(i),cvalues.push(v))}}return cptr[columns]=cindex.length,c};return algorithm11}exports.name="algorithm11",exports.factory=factory},{"../../../function/relational/equalScalar":557}],658:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var DenseMatrix=type.DenseMatrix,algorithm12=function(s,b,callback,inverse){var avalues=s._values,aindex=s._index,aptr=s._ptr,asize=s._size,adt=s._datatype;if(!avalues)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var dt,rows=asize[0],columns=asize[1],cf=callback;"string"==typeof adt&&(dt=adt,b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));for(var cdata=[],c=new DenseMatrix({data:cdata,size:[rows,columns],datatype:dt}),x=[],w=[],j=0;columns>j;j++){for(var mark=j+1,k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++){var r=aindex[k];x[r]=avalues[k],w[r]=mark}for(var i=0;rows>i;i++)0===j&&(cdata[i]=[]),w[i]===mark?cdata[i][j]=inverse?cf(b,x[i]):cf(x[i],b):cdata[i][j]=inverse?cf(b,0):cf(0,b)}return c};return algorithm12}exports.name="algorithm12",exports.factory=factory},{}],659:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var DenseMatrix=type.DenseMatrix,algorithm13=function(a,b,callback){var adata=a._data,asize=a._size,adt=a._datatype,bdata=b._data,bsize=b._size,bdt=b._datatype,csize=[];if(asize.length!==bsize.length)throw new DimensionError(asize.length,bsize.length);for(var s=0;s<asize.length;s++){if(asize[s]!==bsize[s])throw new RangeError("Dimension mismatch. Matrix A ("+asize+") must match Matrix B ("+bsize+")");csize[s]=asize[s]}var dt,cf=callback;"string"==typeof adt&&adt===bdt&&(dt=adt,b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));var cdata=csize.length>0?_iterate(cf,0,csize,csize[0],adata,bdata):[];return new DenseMatrix({data:cdata,size:csize,datatype:dt})},_iterate=function(f,level,s,n,av,bv){var cv=[];if(level===s.length-1)for(var i=0;n>i;i++)cv[i]=f(av[i],bv[i]);else for(var j=0;n>j;j++)cv[j]=_iterate(f,level+1,s,s[level+1],av[j],bv[j]);return cv};return algorithm13}var util=require("../../../utils/index"),DimensionError=require("../../../error/DimensionError"),string=util.string;string.isString;exports.name="algorithm13",exports.factory=factory},{"../../../error/DimensionError":227,"../../../utils/index":704}],660:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var DenseMatrix=type.DenseMatrix,algorithm14=function(a,b,callback,inverse){var dt,adata=a._data,asize=a._size,adt=a._datatype,cf=callback;"string"==typeof adt&&(dt=adt,b=typed.convert(b,dt),cf=typed.find(callback,[dt,dt]));var cdata=asize.length>0?_iterate(cf,0,asize,asize[0],adata,b,inverse):[];return new DenseMatrix({data:cdata,size:clone(asize),datatype:dt})},_iterate=function(f,level,s,n,av,bv,inverse){var cv=[];if(level===s.length-1)for(var i=0;n>i;i++)cv[i]=inverse?f(bv,av[i]):f(av[i],bv);else for(var j=0;n>j;j++)cv[j]=_iterate(f,level+1,s,s[level+1],av[j],bv,inverse);return cv};return algorithm14}var clone=require("../../../utils/object").clone;exports.name="algorithm14",exports.factory=factory},{"../../../utils/object":707}],661:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var number=typed("number",{"":function(){return 0},number:function(x){return x},string:function(x){var num=Number(x);if(isNaN(num))throw new SyntaxError('String "'+x+'" is no valid number');return num},BigNumber:function(x){return x.toNumber()},Fraction:function(x){return x.valueOf()},Unit:function(x){throw new Error("Second argument with valueless unit expected")},"Unit, string | Unit":function(unit,valuelessUnit){return unit.toNumber(valuelessUnit)},"Array | Matrix":function(x){return deepMap(x,number)}});return number.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},number}var deepMap=require("./../utils/collection/deepMap");exports.name="number",exports.factory=factory},{"./../utils/collection/deepMap":698}],662:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function ResultSet(entries){if(!(this instanceof ResultSet))throw new SyntaxError("Constructor must be called with the new operator");this.entries=entries||[]}return ResultSet.prototype.type="ResultSet",ResultSet.prototype.isResultSet=!0,ResultSet.prototype.valueOf=function(){return this.entries},ResultSet.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},ResultSet.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},ResultSet.fromJSON=function(json){return new ResultSet(json.entries)},ResultSet}exports.name="ResultSet",exports.path="type",exports.factory=factory},{}],663:[function(require,module,exports){module.exports=[require("./ResultSet")]},{"./ResultSet":662}],664:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var string=typed("string",{"":function(){return""},number:number.format,"null":function(x){return"null"},"boolean":function(x){return x+""},string:function(x){return x},"Array | Matrix":function(x){return deepMap(x,string)},any:function(x){return String(x)}});return string.toTex={0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},string}var deepMap=require("./../utils/collection/deepMap"),number=require("../utils/number");exports.name="string",exports.factory=factory},{"../utils/number":706,"./../utils/collection/deepMap":698}],665:[function(require,module,exports){"use strict";function factory(type,config,load,typed){function Unit(value,name){if(!(this instanceof Unit))throw new Error("Constructor must be called with the new operator");if(void 0!==value&&!isNumeric(value)&&!value.isComplex)throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!=name&&("string"!=typeof name||""==name))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!=name){var u=Unit.parse(name);this.units=u.units,this.dimensions=u.dimensions}else this.units=[{unit:UNIT_NONE,prefix:PREFIX_NONE,power:0}],this.dimensions=[0,0,0,0,0,0,0,0,0];this.value=void 0!=value?this._normalize(value):null,this.fixPrefix=!1,this.isUnitListSimplified=!0}function skipWhitespace(){for(;" "==c||"	"==c;)next()}function isDigitDot(c){return c>="0"&&"9">=c||"."==c}function isDigit(c){return c>="0"&&"9">=c}function next(){index++,c=text.charAt(index)}function revert(oldIndex){index=oldIndex,c=text.charAt(index)}function parseNumber(){var oldIndex,number="";if(oldIndex=index,"+"==c?next():"-"==c&&(number+=c,next()),!isDigitDot(c))return revert(oldIndex),null;if("."==c){if(number+=c,next(),!isDigit(c))return revert(oldIndex),null}else{for(;isDigit(c);)number+=c,next();"."==c&&(number+=c,next())}for(;isDigit(c);)number+=c,next();if("E"==c||"e"==c){var tentativeNumber="",tentativeIndex=index;if(tentativeNumber+=c,next(),"+"!=c&&"-"!=c||(tentativeNumber+=c,next()),!isDigit(c))return revert(tentativeIndex),number;for(number+=tentativeNumber;isDigit(c);)number+=c,next()}return number}function parseUnit(){for(var unitName="",code=text.charCodeAt(index);code>=48&&57>=code||code>=65&&90>=code||code>=97&&122>=code;)unitName+=c,next(),code=text.charCodeAt(index);return code=unitName.charCodeAt(0),code>=65&&90>=code||code>=97&&122>=code?unitName||null:null}function parseCharacter(toFind){return c===toFind?(next(),toFind):null}function _findUnit(str){for(var name in UNITS)if(UNITS.hasOwnProperty(name)&&endsWith(str,name)){var unit=UNITS[name],prefixLen=str.length-name.length,prefixName=str.substring(0,prefixLen),prefix=unit.prefixes[prefixName];if(void 0!==prefix)return{unit:unit,prefix:prefix}}return null}var add=load(require("../../function/arithmetic/addScalar")),subtract=load(require("../../function/arithmetic/subtract")),multiply=load(require("../../function/arithmetic/multiplyScalar")),divide=load(require("../../function/arithmetic/divideScalar")),pow=load(require("../../function/arithmetic/pow")),abs=load(require("../../function/arithmetic/abs")),equal=load(require("../../function/relational/equal")),isNumeric=load(require("../../function/utils/isNumeric")),format=load(require("../../function/utils/format")),getTypeOf=load(require("../../function/utils/typeof")),toNumber=load(require("../../type/number")),Complex=load(require("../../type/complex/Complex"));Unit.prototype.type="Unit",Unit.prototype.isUnit=!0;var text,index,c;Unit.parse=function(str){if(text=str,index=-1,c="","string"!=typeof text)throw new TypeError("Invalid argument in Unit.parse, string expected");var unit=new Unit;unit.units=[],next(),skipWhitespace();var valueStr=parseNumber(),value=null;valueStr&&(value="bignumber"===config.number?new type.BigNumber(valueStr):"fraction"===config.number?new type.Fraction(valueStr):parseFloat(valueStr)),skipWhitespace();for(var powerMultiplierCurrent=1,expectingUnit=!1,powerMultiplierStack=[],powerMultiplierStackProduct=1;;){for(skipWhitespace();"("===c;)powerMultiplierStack.push(powerMultiplierCurrent),powerMultiplierStackProduct*=powerMultiplierCurrent,powerMultiplierCurrent=1,next(),skipWhitespace();if(!c)break;var oldC=c,uStr=parseUnit();if(null==uStr)throw new SyntaxError('Unexpected "'+oldC+'" in "'+text+'" at index '+index.toString());var res=_findUnit(uStr);if(null==res)throw new SyntaxError('Unit "'+uStr+'" not found.');var power=powerMultiplierCurrent*powerMultiplierStackProduct;if(skipWhitespace(),parseCharacter("^")){skipWhitespace();var p=parseNumber();if(null==p)throw new SyntaxError('In "'+str+'", "^" must be followed by a floating-point number');power*=p}unit.units.push({unit:res.unit,prefix:res.prefix,power:power});for(var i=0;i<BASE_DIMENSIONS.length;i++)unit.dimensions[i]+=res.unit.dimensions[i]*power;for(skipWhitespace();")"===c;){if(0===powerMultiplierStack.length)throw new SyntaxError('Unmatched ")" in "'+text+'" at index '+index.toString());powerMultiplierStackProduct/=powerMultiplierStack.pop(),next(),skipWhitespace()}expectingUnit=!1,parseCharacter("*")?(powerMultiplierCurrent=1,expectingUnit=!0):parseCharacter("/")?(powerMultiplierCurrent=-1,expectingUnit=!0):powerMultiplierCurrent=1;var baseDim=res.unit.base.key;UNIT_SYSTEMS.auto[baseDim]={unit:res.unit,prefix:res.prefix}}if(skipWhitespace(),c)throw new SyntaxError('Could not parse: "'+str+'"');if(expectingUnit)throw new SyntaxError('Trailing characters: "'+str+'"');if(0!==powerMultiplierStack.length)throw new SyntaxError('Unmatched "(" in "'+text+'"');if(0==unit.units.length)throw new SyntaxError('"'+str+'" contains no units');return unit.value=void 0!=value?unit._normalize(value):null,unit},Unit.prototype.clone=function(){var unit=new Unit;unit.fixPrefix=this.fixPrefix,unit.isUnitListSimplified=this.isUnitListSimplified,unit.value=clone(this.value),unit.dimensions=this.dimensions.slice(0),unit.units=[];for(var i=0;i<this.units.length;i++){unit.units[i]={};for(var p in this.units[i])this.units[i].hasOwnProperty(p)&&(unit.units[i][p]=this.units[i][p])}return unit},Unit.prototype._isDerived=function(){return 0===this.units.length?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},Unit.prototype._normalize=function(value){var unitValue,unitOffset,unitPower,unitPrefixValue,convert;if(null==value||0===this.units.length)return value;if(this._isDerived()){var res=value;convert=Unit._getNumberConverter(getTypeOf(value));for(var i=0;i<this.units.length;i++)unitValue=convert(this.units[i].unit.value),unitPrefixValue=convert(this.units[i].prefix.value),unitPower=convert(this.units[i].power),res=multiply(res,pow(multiply(unitValue,unitPrefixValue),unitPower));return res}return convert=Unit._getNumberConverter(getTypeOf(value)),unitValue=convert(this.units[0].unit.value),unitOffset=convert(this.units[0].unit.offset),unitPrefixValue=convert(this.units[0].prefix.value),multiply(add(value,unitOffset),multiply(unitValue,unitPrefixValue))},Unit.prototype._denormalize=function(value,prefixValue){var unitValue,unitOffset,unitPower,unitPrefixValue,convert;if(null==value||0===this.units.length)return value;if(this._isDerived()){var res=value;convert=Unit._getNumberConverter(getTypeOf(value));for(var i=0;i<this.units.length;i++)unitValue=convert(this.units[i].unit.value),unitPrefixValue=convert(this.units[i].prefix.value),unitPower=convert(this.units[i].power),res=divide(res,pow(multiply(unitValue,unitPrefixValue),unitPower));return res}return convert=Unit._getNumberConverter(getTypeOf(value)),unitValue=convert(this.units[0].unit.value),unitPrefixValue=convert(this.units[0].prefix.value),unitOffset=convert(this.units[0].unit.offset),void 0==prefixValue?subtract(divide(divide(value,unitValue),unitPrefixValue),unitOffset):subtract(divide(divide(value,unitValue),prefixValue),unitOffset)},Unit.isValuelessUnit=function(name){return null!=_findUnit(name)},Unit.prototype.hasBase=function(base){if("string"==typeof base&&(base=BASE_UNITS[base]),!base)return!1;for(var i=0;i<BASE_DIMENSIONS.length;i++)if(Math.abs(this.dimensions[i]-base.dimensions[i])>1e-12)return!1;return!0},Unit.prototype.equalBase=function(other){for(var i=0;i<BASE_DIMENSIONS.length;i++)if(Math.abs(this.dimensions[i]-other.dimensions[i])>1e-12)return!1;return!0},Unit.prototype.equals=function(other){return this.equalBase(other)&&equal(this.value,other.value)},Unit.prototype.multiply=function(other){for(var res=this.clone(),i=0;i<BASE_DIMENSIONS.length;i++)res.dimensions[i]=this.dimensions[i]+other.dimensions[i];for(var i=0;i<other.units.length;i++){var inverted=JSON.parse(JSON.stringify(other.units[i]));res.units.push(inverted)}if(null!=this.value||null!=other.value){var valThis=null==this.value?this._normalize(1):this.value,valOther=null==other.value?other._normalize(1):other.value;res.value=multiply(valThis,valOther)}else res.value=null;return res.isUnitListSimplified=!1,res},Unit.prototype.divide=function(other){for(var res=this.clone(),i=0;i<BASE_DIMENSIONS.length;i++)res.dimensions[i]=this.dimensions[i]-other.dimensions[i];for(var i=0;i<other.units.length;i++){var inverted=JSON.parse(JSON.stringify(other.units[i]));inverted.power=-inverted.power,res.units.push(inverted)}if(null!=this.value||null!=other.value){var valThis=null==this.value?this._normalize(1):this.value,valOther=null==other.value?other._normalize(1):other.value;res.value=divide(valThis,valOther)}else res.value=null;return res.isUnitListSimplified=!1,res},Unit.prototype.pow=function(p){for(var res=this.clone(),i=0;i<BASE_DIMENSIONS.length;i++)res.dimensions[i]=this.dimensions[i]*p;for(var i=0;i<res.units.length;i++)res.units[i].power*=p;return null!=res.value?res.value=pow(res.value,p):res.value=null,res.isUnitListSimplified=!1,res},Unit.prototype.abs=function(){var ret=this.clone();ret.value=abs(ret.value);for(var i in ret.units)"VA"!==ret.units[i].unit.name&&"VAR"!==ret.units[i].unit.name||(ret.units[i].unit=UNITS.W);return ret},Unit.prototype.to=function(valuelessUnit){var other,value=null==this.value?this._normalize(1):this.value;if("string"==typeof valuelessUnit){if(other=Unit.parse(valuelessUnit),!this.equalBase(other))throw new Error("Units do not match");if(null!==other.value)throw new Error("Cannot convert to a unit with a value");return other.value=clone(value),other.fixPrefix=!0,other.isUnitListSimplified=!0,other}if(valuelessUnit&&valuelessUnit.isUnit){if(!this.equalBase(valuelessUnit))throw new Error("Units do not match");if(null!==valuelessUnit.value)throw new Error("Cannot convert to a unit with a value");return other=valuelessUnit.clone(),other.value=clone(value),other.fixPrefix=!0,other.isUnitListSimplified=!0,other}throw new Error("String or Unit expected as parameter")},Unit.prototype.toNumber=function(valuelessUnit){return toNumber(this.toNumeric(valuelessUnit))},Unit.prototype.toNumeric=function(valuelessUnit){var other=this.to(valuelessUnit);return other._isDerived()?other._denormalize(other.value):other._denormalize(other.value,other.units[0].prefix.value)},Unit.prototype.toString=function(){return this.format()},Unit.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},Unit.fromJSON=function(json){var unit=new Unit(json.value,json.unit);return unit.fixPrefix=json.fixPrefix||!1,unit},Unit.prototype.valueOf=Unit.prototype.toString,Unit.prototype.simplifyUnitListLazy=function(){if(!this.isUnitListSimplified&&null!=this.value){var matchingBase,proposedUnitList=[];for(var key in currentUnitSystem)if(this.hasBase(BASE_UNITS[key])){matchingBase=key;break}if("NONE"===matchingBase)this.units=[];else{var matchingUnit;matchingBase&&currentUnitSystem.hasOwnProperty(matchingBase)&&(matchingUnit=currentUnitSystem[matchingBase]);if(matchingUnit)this.units=[{unit:matchingUnit.unit,prefix:matchingUnit.prefix,power:1}];else{for(var i=0;i<BASE_DIMENSIONS.length;i++){var baseDim=BASE_DIMENSIONS[i];Math.abs(this.dimensions[i])>1e-12&&proposedUnitList.push({unit:currentUnitSystem[baseDim].unit,prefix:currentUnitSystem[baseDim].prefix,power:this.dimensions[i]})}proposedUnitList.length<this.units.length&&(this.units=proposedUnitList)}}this.isUnitListSimplified=!0}},Unit.prototype.formatUnits=function(){this.simplifyUnitListLazy();for(var strNum="",strDen="",nNum=0,nDen=0,i=0;i<this.units.length;i++)this.units[i].power>0?(nNum++,strNum+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(strNum+="^"+this.units[i].power)):this.units[i].power<0&&nDen++;if(nDen>0)for(var i=0;i<this.units.length;i++)this.units[i].power<0&&(nNum>0?(strDen+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power+1)>1e-15&&(strDen+="^"+-this.units[i].power)):(strDen+=" "+this.units[i].prefix.name+this.units[i].unit.name,strDen+="^"+this.units[i].power));strNum=strNum.substr(1),strDen=strDen.substr(1),nNum>1&&nDen>0&&(strNum="("+strNum+")"),nDen>1&&nNum>0&&(strDen="("+strDen+")");var str=strNum;return nNum>0&&nDen>0&&(str+=" / "),str+=strDen},Unit.prototype.format=function(options){this.simplifyUnitListLazy();var isImaginary=!1,isReal=!0;"undefined"!=typeof this.value&&null!==this.value&&this.value.isComplex&&(isImaginary=Math.abs(this.value.re)<1e-14,isReal=Math.abs(this.value.im)<1e-14);for(var i in this.units)this.units[i].unit&&("VA"===this.units[i].unit.name&&isImaginary?this.units[i].unit=UNITS.VAR:"VAR"!==this.units[i].unit.name||isImaginary||(this.units[i].unit=UNITS.VA));1!==this.units.length||this.fixPrefix||Math.abs(this.units[0].power-Math.round(this.units[0].power))<1e-14&&(this.units[0].prefix=this._bestPrefix());var value=this._denormalize(this.value),str=null!==this.value?format(value,options||{}):"",unitStr=this.formatUnits();return this.value&&this.value.isComplex&&(str="("+str+")"),unitStr.length>0&&str.length>0&&(str+=" "),str+=unitStr},Unit.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var absValue=abs(this.value),absUnitValue=abs(this.units[0].unit.value),bestPrefix=this.units[0].prefix;if(0===absValue)return bestPrefix;var power=this.units[0].power,bestDiff=Math.abs(Math.log(absValue/Math.pow(bestPrefix.value*absUnitValue,power))/Math.LN10-1.2),prefixes=this.units[0].unit.prefixes;for(var p in prefixes)if(prefixes.hasOwnProperty(p)){var prefix=prefixes[p];if(prefix.scientific){var diff=Math.abs(Math.log(absValue/Math.pow(prefix.value*absUnitValue,power))/Math.LN10-1.2);(bestDiff>diff||diff===bestDiff&&prefix.name.length<bestPrefix.name.length)&&(bestPrefix=prefix,bestDiff=diff)}}return bestPrefix};var PREFIXES={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};PREFIXES.SHORTLONG={};for(var key in PREFIXES.SHORT)PREFIXES.SHORT.hasOwnProperty(key)&&(PREFIXES.SHORTLONG[key]=PREFIXES.SHORT[key]);for(var key in PREFIXES.LONG)PREFIXES.LONG.hasOwnProperty(key)&&(PREFIXES.SHORTLONG[key]=PREFIXES.LONG[key]);var PREFIX_NONE={name:"",value:1,scientific:!0},BASE_DIMENSIONS=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],BASE_UNITS={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var key in BASE_UNITS)BASE_UNITS[key].key=key;var BASE_UNIT_NONE={},UNIT_NONE={name:"",base:BASE_UNIT_NONE,value:1,offset:0,dimensions:[0,0,0,0,0,0,0,0,0]},UNITS={meter:{name:"meter",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.LONG,value:1,offset:0},inch:{name:"inch",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.0254,offset:0},foot:{name:"foot",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.3048,offset:0},yard:{name:"yard",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.9144,offset:0},mile:{name:"mile",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1609.344,offset:0},link:{name:"link",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.201168,offset:0},rod:{name:"rod",
base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:5.02921,offset:0},chain:{name:"chain",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1e-10,offset:0},m:{name:"m",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.SHORT,value:1,offset:0},"in":{name:"in",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.0254,offset:0},ft:{name:"ft",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.3048,offset:0},yd:{name:"yd",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.9144,offset:0},mi:{name:"mi",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:1609.344,offset:0},li:{name:"li",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:.201168,offset:0},rd:{name:"rd",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:5.02921,offset:0},ch:{name:"ch",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:20.1168,offset:0},mil:{name:"mil",base:BASE_UNITS.LENGTH,prefixes:PREFIXES.NONE,value:254e-7,offset:0},m2:{name:"m2",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:BASE_UNITS.SURFACE,prefixes:PREFIXES.NONE,value:6.4516e-10,offset:0},m3:{name:"m3",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.CUBIC,value:1,offset:0},L:{name:"L",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.SHORT,value:.001,offset:0},l:{name:"l",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.SHORT,value:.001,offset:0},litre:{name:"litre",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.LONG,value:.001,offset:0},cuin:{name:"cuin",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:15e-6,offset:0},drop:{name:"drop",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:5e-8,offset:0},minim:{name:"minim",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:1e-6,offset:0},cup:{name:"cup",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1173478,offset:0},obl:{name:"obl",base:BASE_UNITS.VOLUME,prefixes:PREFIXES.NONE,value:.1589873,offset:0},g:{name:"g",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:.001,offset:0},gram:{name:"gram",base:BASE_UNITS.MASS,prefixes:PREFIXES.LONG,value:.001,offset:0},ton:{name:"ton",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:907.18474,offset:0},tonne:{name:"tonne",base:BASE_UNITS.MASS,prefixes:PREFIXES.SHORT,value:1e3,offset:0},grain:{name:"grain",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:45.359237,offset:0},stick:{name:"stick",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.115,offset:0},stone:{name:"stone",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:BASE_UNITS.MASS,prefixes:PREFIXES.NONE,value:45.359237,offset:0},s:{name:"s",base:BASE_UNITS.TIME,prefixes:PREFIXES.SHORT,value:1,offset:0},min:{name:"min",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:60,offset:0},h:{name:"h",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:3600,offset:0},second:{name:"second",base:BASE_UNITS.TIME,prefixes:PREFIXES.LONG,value:1,offset:0},sec:{name:"sec",base:BASE_UNITS.TIME,prefixes:PREFIXES.LONG,value:1,offset:0},minute:{name:"minute",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:60,offset:0},hour:{name:"hour",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:3600,offset:0},day:{name:"day",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:86400,offset:0},week:{name:"week",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:604800,offset:0},month:{name:"month",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:2629800,offset:0},year:{name:"year",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:31557600,offset:0},decade:{name:"year",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:315576e3,offset:0},century:{name:"century",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:BASE_UNITS.TIME,prefixes:PREFIXES.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:BASE_UNITS.FREQUENCY,prefixes:PREFIXES.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:BASE_UNITS.FREQUENCY,prefixes:PREFIXES.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:1,offset:0},deg:{name:"deg",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:.017453292519943295,offset:0},grad:{name:"grad",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:.015707963267948967,offset:0},cycle:{name:"cycle",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:6.283185307179586,offset:0},arcsec:{name:"arcsec",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:484813681109536e-20,offset:0},arcmin:{name:"arcmin",base:BASE_UNITS.ANGLE,prefixes:PREFIXES.NONE,value:.0002908882086657216,offset:0},A:{name:"A",base:BASE_UNITS.CURRENT,prefixes:PREFIXES.SHORT,value:1,offset:0},ampere:{name:"ampere",base:BASE_UNITS.CURRENT,prefixes:PREFIXES.LONG,value:1,offset:0},K:{name:"K",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:0},degC:{name:"degC",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:273.15},degF:{name:"degF",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:0},celsius:{name:"celsius",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:BASE_UNITS.TEMPERATURE,prefixes:PREFIXES.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:BASE_UNITS.AMOUNT_OF_SUBSTANCE,prefixes:PREFIXES.NONE,value:1,offset:0},mole:{name:"mole",base:BASE_UNITS.AMOUNT_OF_SUBSTANCE,prefixes:PREFIXES.NONE,value:1,offset:0},cd:{name:"cd",base:BASE_UNITS.LUMINOUS_INTENSITY,prefixes:PREFIXES.NONE,value:1,offset:0},candela:{name:"candela",base:BASE_UNITS.LUMINOUS_INTENSITY,prefixes:PREFIXES.NONE,value:1,offset:0},N:{name:"N",base:BASE_UNITS.FORCE,prefixes:PREFIXES.SHORT,value:1,offset:0},newton:{name:"newton",base:BASE_UNITS.FORCE,prefixes:PREFIXES.LONG,value:1,offset:0},dyn:{name:"dyn",base:BASE_UNITS.FORCE,prefixes:PREFIXES.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:BASE_UNITS.FORCE,prefixes:PREFIXES.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:BASE_UNITS.FORCE,prefixes:PREFIXES.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:BASE_UNITS.FORCE,prefixes:PREFIXES.NONE,value:4.4482216152605,offset:0},J:{name:"J",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:1,offset:0},joule:{name:"joule",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:1,offset:0},erg:{name:"erg",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.NONE,value:1e-5,offset:0},Wh:{name:"Wh",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.SHORT,value:1.602176565e-19,offset:0},electronvolt:{name:"electronvolt",base:BASE_UNITS.ENERGY,prefixes:PREFIXES.LONG,value:1.602176565e-19,offset:0},W:{name:"W",base:BASE_UNITS.POWER,prefixes:PREFIXES.SHORT,value:1,offset:0},watt:{name:"W",base:BASE_UNITS.POWER,prefixes:PREFIXES.LONG,value:1,offset:0},hp:{name:"hp",base:BASE_UNITS.POWER,prefixes:PREFIXES.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:BASE_UNITS.POWER,prefixes:PREFIXES.SHORT,value:new Complex(0,1),offset:0},VA:{name:"VA",base:BASE_UNITS.POWER,prefixes:PREFIXES.SHORT,value:1,offset:0},Pa:{name:"Pa",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.SHORT,value:1,offset:0},psi:{name:"psi",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:BASE_UNITS.PRESSURE,prefixes:PREFIXES.NONE,value:101325,offset:0},coulomb:{name:"coulomb",base:BASE_UNITS.ELECTRIC_CHARGE,prefixes:PREFIXES.LONG,value:1,offset:0},C:{name:"C",base:BASE_UNITS.ELECTRIC_CHARGE,prefixes:PREFIXES.SHORT,value:1,offset:0},farad:{name:"farad",base:BASE_UNITS.ELECTRIC_CAPACITANCE,prefixes:PREFIXES.LONG,value:1,offset:0},F:{name:"F",base:BASE_UNITS.ELECTRIC_CAPACITANCE,prefixes:PREFIXES.SHORT,value:1,offset:0},volt:{name:"volt",base:BASE_UNITS.ELECTRIC_POTENTIAL,prefixes:PREFIXES.LONG,value:1,offset:0},V:{name:"V",base:BASE_UNITS.ELECTRIC_POTENTIAL,prefixes:PREFIXES.SHORT,value:1,offset:0},ohm:{name:"ohm",base:BASE_UNITS.ELECTRIC_RESISTANCE,prefixes:PREFIXES.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:BASE_UNITS.ELECTRIC_INDUCTANCE,prefixes:PREFIXES.LONG,value:1,offset:0},H:{name:"H",base:BASE_UNITS.ELECTRIC_INDUCTANCE,prefixes:PREFIXES.SHORT,value:1,offset:0},siemens:{name:"siemens",base:BASE_UNITS.ELECTRIC_CONDUCTANCE,prefixes:PREFIXES.LONG,value:1,offset:0},S:{name:"S",base:BASE_UNITS.ELECTRIC_CONDUCTANCE,prefixes:PREFIXES.SHORT,value:1,offset:0},weber:{name:"weber",base:BASE_UNITS.MAGNETIC_FLUX,prefixes:PREFIXES.LONG,value:1,offset:0},Wb:{name:"Wb",base:BASE_UNITS.MAGNETIC_FLUX,prefixes:PREFIXES.SHORT,value:1,offset:0},tesla:{name:"tesla",base:BASE_UNITS.MAGNETIC_FLUX_DENSITY,prefixes:PREFIXES.LONG,value:1,offset:0},T:{name:"T",base:BASE_UNITS.MAGNETIC_FLUX_DENSITY,prefixes:PREFIXES.SHORT,value:1,offset:0},b:{name:"b",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_LONG,value:1,offset:0},B:{name:"B",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:BASE_UNITS.BIT,prefixes:PREFIXES.BINARY_LONG,value:8,offset:0}},ALIASES={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",hertz:"hertz",radians:"rad",degree:"deg",degrees:"deg",gradian:"grad",gradians:"grad",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole"},UNIT_SYSTEMS={si:{NONE:{unit:UNIT_NONE,prefix:PREFIXES.NONE[""]},LENGTH:{unit:UNITS.m,prefix:PREFIXES.SHORT[""]},MASS:{unit:UNITS.g,prefix:PREFIXES.SHORT.k},TIME:{unit:UNITS.s,prefix:PREFIXES.SHORT[""]},CURRENT:{unit:UNITS.A,prefix:PREFIXES.SHORT[""]},TEMPERATURE:{unit:UNITS.K,prefix:PREFIXES.SHORT[""]},LUMINOUS_INTENSITY:{unit:UNITS.cd,prefix:PREFIXES.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:UNITS.mol,prefix:PREFIXES.SHORT[""]},ANGLE:{unit:UNITS.rad,prefix:PREFIXES.SHORT[""]},BIT:{unit:UNITS.bit,prefix:PREFIXES.SHORT[""]},FORCE:{unit:UNITS.N,prefix:PREFIXES.SHORT[""]},ENERGY:{unit:UNITS.J,prefix:PREFIXES.SHORT[""]},POWER:{unit:UNITS.W,prefix:PREFIXES.SHORT[""]},PRESSURE:{unit:UNITS.Pa,prefix:PREFIXES.SHORT[""]},ELECTRIC_CHARGE:{unit:UNITS.C,prefix:PREFIXES.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:UNITS.F,prefix:PREFIXES.SHORT[""]},ELECTRIC_POTENTIAL:{unit:UNITS.V,prefix:PREFIXES.SHORT[""]},ELECTRIC_RESISTANCE:{unit:UNITS.ohm,prefix:PREFIXES.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:UNITS.H,prefix:PREFIXES.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:UNITS.S,prefix:PREFIXES.SHORT[""]},MAGNETIC_FLUX:{unit:UNITS.Wb,prefix:PREFIXES.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:UNITS.T,prefix:PREFIXES.SHORT[""]},FREQUENCY:{unit:UNITS.Hz,prefix:PREFIXES.SHORT[""]}}};UNIT_SYSTEMS.cgs=JSON.parse(JSON.stringify(UNIT_SYSTEMS.si)),UNIT_SYSTEMS.cgs.LENGTH={unit:UNITS.m,prefix:PREFIXES.SHORT.c},UNIT_SYSTEMS.cgs.MASS={unit:UNITS.g,prefix:PREFIXES.SHORT[""]},UNIT_SYSTEMS.cgs.FORCE={unit:UNITS.dyn,prefix:PREFIXES.SHORT[""]},UNIT_SYSTEMS.cgs.ENERGY={unit:UNITS.erg,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us=JSON.parse(JSON.stringify(UNIT_SYSTEMS.si)),UNIT_SYSTEMS.us.LENGTH={unit:UNITS.ft,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.MASS={unit:UNITS.lbm,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.TEMPERATURE={unit:UNITS.degF,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.FORCE={unit:UNITS.lbf,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.ENERGY={unit:UNITS.BTU,prefix:PREFIXES.BTU[""]},UNIT_SYSTEMS.us.POWER={unit:UNITS.hp,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.us.PRESSURE={unit:UNITS.psi,prefix:PREFIXES.NONE[""]},UNIT_SYSTEMS.auto=JSON.parse(JSON.stringify(UNIT_SYSTEMS.si));var currentUnitSystem=UNIT_SYSTEMS.auto;Unit.setUnitSystem=function(name){if(!UNIT_SYSTEMS.hasOwnProperty(name))throw new Error("Unit system "+name+" does not exist. Choices are: "+Object.keys(UNIT_SYSTEMS).join(", "));currentUnitSystem=UNIT_SYSTEMS[name]},Unit.getUnitSystem=function(){for(var key in UNIT_SYSTEMS)if(UNIT_SYSTEMS[key]===currentUnitSystem)return key},Unit.typeConverters={BigNumber:function(x){return new type.BigNumber(x+"")},Fraction:function(x){return new type.Fraction(x)},Complex:function(x){return x},number:function(x){return x}},Unit._getNumberConverter=function(type){if(!Unit.typeConverters[type])throw new TypeError('Unsupported type "'+type+'"');return Unit.typeConverters[type]};for(var key in UNITS){var unit=UNITS[key];unit.dimensions=unit.base.dimensions}for(var name in ALIASES)if(ALIASES.hasOwnProperty(name)){var unit=UNITS[ALIASES[name]],alias=Object.create(unit);alias.name=name,UNITS[name]=alias}return Unit.PREFIXES=PREFIXES,Unit.BASE_UNITS=BASE_UNITS,Unit.UNITS=UNITS,Unit.UNIT_SYSTEMS=UNIT_SYSTEMS,Unit}var endsWith=require("../../utils/string").endsWith,clone=require("../../utils/object").clone;exports.name="Unit",exports.path="type",exports.factory=factory},{"../../function/arithmetic/abs":464,"../../function/arithmetic/addScalar":466,"../../function/arithmetic/divideScalar":471,"../../function/arithmetic/multiplyScalar":486,"../../function/arithmetic/pow":489,"../../function/arithmetic/subtract":494,"../../function/relational/equal":556,"../../function/utils/format":606,"../../function/utils/isNumeric":610,"../../function/utils/typeof":617,"../../type/complex/Complex":628,"../../type/number":661,"../../utils/object":707,"../../utils/string":708}],666:[function(require,module,exports){"use strict";function factory(type,config,load,typed){var unit=typed("unit",{Unit:function(x){return x.clone()},string:function(x){return type.Unit.isValuelessUnit(x)?new type.Unit(null,x):type.Unit.parse(x)},"number | BigNumber | Fraction | Complex, string":function(value,unit){return new type.Unit(value,unit)},"Array | Matrix":function(x){return deepMap(x,unit)}});return unit.toTex={1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},unit}var deepMap=require("../../../utils/collection/deepMap");exports.name="unit",exports.factory=factory},{"../../../utils/collection/deepMap":698}],667:[function(require,module,exports){module.exports=[require("./Unit"),require("./function/unit"),require("./physicalConstants")]},{"./Unit":665,"./function/unit":666,"./physicalConstants":668}],668:[function(require,module,exports){function factory(type,config,load,typed,math){function fixedUnit(str){var unit=type.Unit.parse(str);return unit.fixPrefix=!0,unit}lazy(math,"speedOfLight",function(){return fixedUnit("299792458 m s^-1")}),lazy(math,"gravitationConstant",function(){return fixedUnit("6.6738480e-11 m^3 kg^-1 s^-2")}),lazy(math,"planckConstant",function(){return fixedUnit("6.626069311e-34 J s")}),lazy(math,"reducedPlanckConstant",function(){return fixedUnit("1.05457172647e-34 J s")}),lazy(math,"magneticConstant",function(){return fixedUnit("1.2566370614e-6 N A^-2")}),lazy(math,"electricConstant",function(){return fixedUnit("8.854187817e-12 F m^-1")}),lazy(math,"vacuumImpedance",function(){return fixedUnit("376.730313461 ohm")}),lazy(math,"coulomb",function(){return fixedUnit("8.9875517873681764e9 N m^2 C^-2")}),lazy(math,"elementaryCharge",function(){return fixedUnit("1.60217656535e-19 C")}),lazy(math,"bohrMagneton",function(){return fixedUnit("9.2740096820e-24 J T^-1")}),lazy(math,"conductanceQuantum",function(){return fixedUnit("7.748091734625e-5 S")}),lazy(math,"inverseConductanceQuantum",function(){return fixedUnit("12906.403721742 ohm")}),lazy(math,"magneticFluxQuantum",function(){return fixedUnit("2.06783375846e-15 Wb")}),lazy(math,"nuclearMagneton",function(){return fixedUnit("5.0507835311e-27 J T^-1")}),lazy(math,"klitzing",function(){return fixedUnit("25812.807443484 ohm")}),lazy(math,"bohrRadius",function(){return fixedUnit("5.291772109217e-11 m")}),lazy(math,"classicalElectronRadius",function(){return fixedUnit("2.817940326727e-15 m")}),lazy(math,"electronMass",function(){return fixedUnit("9.1093829140e-31 kg")}),lazy(math,"fermiCoupling",function(){return fixedUnit("1.1663645e-5 GeV^-2")}),lazy(math,"fineStructure",function(){return.007297352569824}),lazy(math,"hartreeEnergy",function(){return fixedUnit("4.3597443419e-18 J")}),lazy(math,"protonMass",function(){return fixedUnit("1.67262177774e-27 kg")}),lazy(math,"deuteronMass",function(){return fixedUnit("3.3435830926e-27 kg")}),lazy(math,"neutronMass",function(){return fixedUnit("1.6749271613e-27 kg")}),lazy(math,"quantumOfCirculation",function(){return fixedUnit("3.636947552024e-4 m^2 s^-1")}),lazy(math,"rydberg",function(){return fixedUnit("10973731.56853955 m^-1")}),lazy(math,"thomsonCrossSection",function(){return fixedUnit("6.65245873413e-29 m^2")}),lazy(math,"weakMixingAngle",function(){return.222321}),lazy(math,"efimovFactor",function(){return 22.7}),lazy(math,"atomicMass",function(){return fixedUnit("1.66053892173e-27 kg")}),lazy(math,"avogadro",function(){return fixedUnit("6.0221412927e23 mol^-1")}),lazy(math,"boltzmann",function(){return fixedUnit("1.380648813e-23 J K^-1")}),lazy(math,"faraday",function(){return fixedUnit("96485.336521 C mol^-1")}),lazy(math,"firstRadiation",function(){return fixedUnit("3.7417715317e-16 W m^2")}),lazy(math,"loschmidt",function(){return fixedUnit("2.686780524e25 m^-3")}),lazy(math,"gasConstant",function(){return fixedUnit("8.314462175 J K^-1 mol^-1")}),lazy(math,"molarPlanckConstant",function(){return fixedUnit("3.990312717628e-10 J s mol^-1")}),lazy(math,"molarVolume",function(){return fixedUnit("2.241396820e-10 m^3 mol^-1")}),lazy(math,"sackurTetrode",function(){return-1.164870823}),lazy(math,"secondRadiation",function(){return fixedUnit("1.438777013e-2 m K")}),lazy(math,"stefanBoltzmann",function(){return fixedUnit("5.67037321e-8 W m^-2 K^-4")}),lazy(math,"wienDisplacement",function(){return fixedUnit("2.897772126e-3 m K")}),lazy(math,"molarMass",function(){return fixedUnit("1e-3 kg mol^-1")}),lazy(math,"molarMassC12",function(){return fixedUnit("1.2e-2 kg mol^-1")}),lazy(math,"gravity",function(){return fixedUnit("9.80665 m s^-2")}),lazy(math,"planckLength",function(){return fixedUnit("1.61619997e-35 m")}),lazy(math,"planckMass",function(){return fixedUnit("2.1765113e-8 kg")}),lazy(math,"planckTime",function(){return fixedUnit("5.3910632e-44 s")}),lazy(math,"planckCharge",function(){return fixedUnit("1.87554595641e-18 C")}),lazy(math,"planckTemperature",function(){return fixedUnit("1.41683385e+32 K")})}var lazy=require("../../utils/object").lazy;exports.factory=factory,exports.lazy=!1,exports.math=!0},{"../../utils/object":707}],669:[function(require,module,exports){"use strict";function NumberFormatter(value){var match=String(value).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!match)throw new SyntaxError("Invalid number");var sign=match[1],coefficients=match[2],exponent=parseFloat(match[4]||"0"),dot=coefficients.indexOf(".");exponent+=-1!==dot?dot-1:coefficients.length-1,this.sign=sign,this.coefficients=coefficients.replace(".","").replace(/^0*/,function(zeros){return exponent-=zeros.length,""}).replace(/0*$/,"").split("").map(function(d){return parseInt(d)}),0===this.coefficients.length&&(this.coefficients.push(0),exponent++),this.exponent=exponent}function zeros(length){for(var arr=[],i=0;length>i;i++)arr.push(0);return arr}NumberFormatter.prototype.toEngineering=function(precision){var rounded=this.roundDigits(precision),e=rounded.exponent,c=rounded.coefficients,newExp=e%3===0?e:0>e?e-3-e%3:e-e%3,significandsDiff=e>=0?e:Math.abs(newExp);c.length-1<significandsDiff&&(c=c.concat(zeros(significandsDiff-(c.length-1))));for(var expDiff=Math.abs(e-newExp),decimalIdx=1,str="";--expDiff>=0;)decimalIdx++;var decimals=c.slice(decimalIdx).join(""),decimalVal=decimals.match(/[1-9]/)?"."+decimals:"";return str=c.slice(0,decimalIdx).join("")+decimalVal,str+="e"+(e>=0?"+":"")+newExp.toString(),rounded.sign+str},NumberFormatter.prototype.toFixed=function(precision){var rounded=this.roundDigits(this.exponent+1+(precision||0)),c=rounded.coefficients,p=rounded.exponent+1,pp=p+(precision||0);return c.length<pp&&(c=c.concat(zeros(pp-c.length))),0>p&&(c=zeros(-p+1).concat(c),p=1),precision&&c.splice(p,0,0===p?"0.":"."),this.sign+c.join("")},NumberFormatter.prototype.toExponential=function(precision){var rounded=precision?this.roundDigits(precision):this.clone(),c=rounded.coefficients,e=rounded.exponent;c.length<precision&&(c=c.concat(zeros(precision-c.length)));var first=c.shift();return this.sign+first+(c.length>0?"."+c.join(""):"")+"e"+(e>=0?"+":"")+e},NumberFormatter.prototype.toPrecision=function(precision,options){var lower=options&&void 0!==options.lower?options.lower:.001,upper=options&&void 0!==options.upper?options.upper:1e5,abs=Math.abs(Math.pow(10,this.exponent));if(lower>abs||abs>=upper)return this.toExponential(precision);var rounded=precision?this.roundDigits(precision):this.clone(),c=rounded.coefficients,e=rounded.exponent;c.length<precision&&(c=c.concat(zeros(precision-c.length))),c=c.concat(zeros(e-c.length+1+(c.length<precision?precision-c.length:0))),c=zeros(-e).concat(c);var dot=e>0?e:0;return dot<c.length-1&&c.splice(dot+1,0,"."),this.sign+c.join("")},NumberFormatter.prototype.clone=function(){var clone=new NumberFormatter("0");return clone.sign=this.sign,clone.coefficients=this.coefficients.slice(0),clone.exponent=this.exponent,clone},NumberFormatter.prototype.roundDigits=function(precision){for(var rounded=this.clone(),c=rounded.coefficients;0>=precision;)c.unshift(0),rounded.exponent++,precision++;if(c.length>precision){var removed=c.splice(precision,c.length-precision);if(removed[0]>=5){var i=precision-1;for(c[i]++;10===c[i];)c.pop(),0===i&&(c.unshift(0),rounded.exponent++,i++),i--,c[i]++}}return rounded},module.exports=NumberFormatter},{}],670:[function(require,module,exports){"use strict";function _validate(array,size,dim){var i,len=array.length;if(len!=size[dim])throw new DimensionError(len,size[dim]);if(dim<size.length-1){var dimNext=dim+1;for(i=0;len>i;i++){var child=array[i];if(!Array.isArray(child))throw new DimensionError(size.length-1,size.length,"<");_validate(array[i],size,dimNext)}}else for(i=0;len>i;i++)if(Array.isArray(array[i]))throw new DimensionError(size.length+1,size.length,">")}function _resize(array,size,dim,defaultValue){var i,elem,oldLen=array.length,newLen=size[dim],minLen=Math.min(oldLen,newLen);if(array.length=newLen,dim<size.length-1){var dimNext=dim+1;for(i=0;minLen>i;i++)elem=array[i],Array.isArray(elem)||(elem=[elem],array[i]=elem),_resize(elem,size,dimNext,defaultValue);for(i=minLen;newLen>i;i++)elem=[],array[i]=elem,_resize(elem,size,dimNext,defaultValue)}else{for(i=0;minLen>i;i++)for(;Array.isArray(array[i]);)array[i]=array[i][0];if(defaultValue!==exports.UNINITIALIZED)for(i=minLen;newLen>i;i++)array[i]=object.clone(defaultValue)}}function _squeeze(array,dims,dim){var i,ii;if(dims>dim){var next=dim+1;for(i=0,ii=array.length;ii>i;i++)array[i]=_squeeze(array[i],dims,next)}else for(;Array.isArray(array);)array=array[0];return array}function _unsqueeze(array,dims,dim){var i,ii;if(Array.isArray(array)){var next=dim+1;for(i=0,ii=array.length;ii>i;i++)array[i]=_unsqueeze(array[i],dims,next)}else for(var d=dim;dims>d;d++)array=[array];return array}var number=require("./number"),string=require("./string"),object=require("./object"),DimensionError=(require("./types"),require("../error/DimensionError")),IndexError=require("../error/IndexError");exports.size=function(x){for(var s=[];Array.isArray(x);)s.push(x.length),x=x[0];return s},exports.validate=function(array,size){var isScalar=0==size.length;if(isScalar){if(Array.isArray(array))throw new DimensionError(array.length,0)}else _validate(array,size,0)},exports.validateIndex=function(index,length){if(!number.isNumber(index)||!number.isInteger(index))throw new TypeError("Index must be an integer (value: "+index+")");if(0>index)throw new IndexError(index);if(void 0!==length&&index>=length)throw new IndexError(index,length)},exports.UNINITIALIZED={},exports.resize=function(array,size,defaultValue){if(!Array.isArray(array)||!Array.isArray(size))throw new TypeError("Array expected");if(0===size.length)throw new Error("Resizing to scalar is not supported");size.forEach(function(value){if(!number.isNumber(value)||!number.isInteger(value)||0>value)throw new TypeError("Invalid size, must contain positive integers (size: "+string.format(size)+")")});var _defaultValue=void 0!==defaultValue?defaultValue:0;return _resize(array,size,0,_defaultValue),array},exports.squeeze=function(array,size){for(var s=size||exports.size(array);Array.isArray(array)&&1===array.length;)array=array[0],s.shift();for(var dims=s.length;1===s[dims-1];)dims--;return dims<s.length&&(array=_squeeze(array,dims,0),s.length=dims),array},exports.unsqueeze=function(array,dims,outer,size){var s=size||exports.size(array);if(outer)for(var i=0;outer>i;i++)array=[array],s.unshift(1);for(array=_unsqueeze(array,dims,0);s.length<dims;)s.push(1);return array},exports.flatten=function(array){if(!Array.isArray(array))return array;var flat=[];return array.forEach(function callback(value){Array.isArray(value)?value.forEach(callback):flat.push(value)}),flat},exports.isArray=Array.isArray},{"../error/DimensionError":227,"../error/IndexError":228,"./number":706,"./object":707,"./string":708,"./types":709}],671:[function(require,module,exports){var pi=require("./constants").pi,atanAcot=require("./atanAcot");module.exports=function(x,BigNumber,reciprocal){if(reciprocal){if(x.abs().lt(BigNumber.ONE))throw new Error("asec() only has non-complex values for |x| >= 1.")}else if(x.abs().gt(BigNumber.ONE))throw new Error("acos() only has non-complex values for |x| <= 1.");if(x.eq(-1))return pi(BigNumber);var precision=BigNumber.precision;BigNumber.config({precision:precision+4}),reciprocal&&(x=BigNumber.ONE.div(x));var acos=atanAcot(BigNumber.ONE.minus(x.times(x)).sqrt().div(x.plus(BigNumber.ONE)),BigNumber).times(2);return BigNumber.config({precision:precision}),acos.toDP(precision-1)}},{"./atanAcot":678,"./constants":685}],672:[function(require,module,exports){module.exports=function(x,BigNumber,mode,reciprocal){if(x.isNaN())return new BigNumber(NaN);if(reciprocal&&x.isZero())return new BigNumber(1/0);if(!mode)if(reciprocal){if(x.isNegative()||x.gt(BigNumber.ONE))throw new Error("asech() only has non-complex values for 0 <= x <= 1.")}else if(x.lt(BigNumber.ONE))throw new Error("acosh() only has non-complex values for x >= 1.");var precision=BigNumber.precision;BigNumber.config({precision:precision+4});var y=new BigNumber(x);y.constructor=BigNumber,reciprocal&&(y=BigNumber.ONE.div(y));var x2PlusOrMinus=mode?y.times(y).plus(BigNumber.ONE):y.times(y).minus(BigNumber.ONE),ret=y.plus(x2PlusOrMinus.sqrt()).ln();return BigNumber.config({precision:precision}),new BigNumber(ret.toPrecision(precision))}},{}],673:[function(require,module,exports){module.exports=function(x,precision){var BigNumber=x.constructor;BigNumber.config({precision:precision+Math.log(precision)|4});for(var one=new BigNumber(1),y=x,yPrev=NaN,x2=x.times(x),polyNum=x,constNum=new BigNumber(one),constDen=new BigNumber(one),bigK=new BigNumber(one),k=3;!y.equals(yPrev);k+=2)polyNum=polyNum.times(x2),constNum=constNum.times(bigK),constDen=constDen.times(bigK.plus(one)),yPrev=y,bigK=new BigNumber(k),y=y.plus(polyNum.times(constNum).div(bigK.times(constDen)));return BigNumber.config({precision:precision}),y.toDP(precision-1)}},{}],674:[function(require,module,exports){var pi=require("./constants").pi,asin=require("./asin"),asinNewton=require("./asinNewton");module.exports=function asinAcsc(x,BigNumber,reciprocal){if(x.isNaN())return new BigNumber(NaN);
var precision=BigNumber.precision,absX=x.abs();if(reciprocal){if(absX.lt(BigNumber.ONE))throw new Error("acsc() only has non-complex values for |x| >= 1.");BigNumber.config({precision:precision+2}),x=BigNumber.ONE.div(x),BigNumber.config({precision:precision}),absX=x.abs()}else if(absX.gt(BigNumber.ONE))throw new Error("asin() only has non-complex values for |x| <= 1.");if(absX.gt(.8)){BigNumber.config({precision:precision+4});var sign=x.s,halfPi=pi(BigNumber.constructor({precision:precision+4})).div(2);return x=halfPi.minus(asinAcsc(BigNumber.ONE.minus(x.times(x)).sqrt(),BigNumber)),x.s=sign,x.constructor=BigNumber,BigNumber.config({precision:precision}),x.toDP(precision-1)}var wasReduced=absX.gt(.58);wasReduced&&(BigNumber.config({precision:precision+8}),x=x.div(new BigNumber(2).sqrt().times(BigNumber.ONE.minus(x.times(x)).sqrt().plus(BigNumber.ONE).sqrt())),BigNumber.config({precision:precision}));var ret=60>=precision||x.dp()<=Math.log(precision)&&x.lt(.05)?asin(x,precision):asinNewton(x,BigNumber);return wasReduced?ret.times(2):ret}},{"./asin":673,"./asinNewton":675,"./constants":685}],675:[function(require,module,exports){var cosSinSecCsc=require("./cosSinSecCsc"),sinToCos=require("./sinToCos");module.exports=function(x,BigNumber){var oldPrecision=BigNumber.precision,tolerance=-(oldPrecision+4),maxp=oldPrecision+8-x.e,localPrecision=25-x.e,maxIter=Math.max(1.442695*Math.log(oldPrecision+2)|5,5);BigNumber.config({precision:localPrecision});var i=0,curr=new BigNumber(Math.asin(x.toNumber())+"");do{var tmp0=cosSinSecCsc(curr,BigNumber,1,!1),tmp1=sinToCos(tmp0);tmp0.isZero()||(tmp0.s=curr.s);var tmp2=tmp0.minus(x).div(tmp1);curr=curr.minus(tmp2),localPrecision=Math.min(2*localPrecision,maxp),BigNumber.config({precision:localPrecision})}while(2*tmp2.e>=tolerance&&!tmp2.isZero()&&++i<=maxIter);if(i==maxIter)throw new Error("asin() failed to converge to the requested accuracy.Try with a higher precision.");return BigNumber.config({precision:oldPrecision}),curr.toDP(oldPrecision-1)}},{"./cosSinSecCsc":687,"./sinToCos":693}],676:[function(require,module,exports){module.exports=function(x){for(var y=x,yPrev=NaN,x2=x.times(x),num=x,add=!0,k=3;!y.equals(yPrev);k+=2)num=num.times(x2),yPrev=y,add=!add,y=add?y.plus(num.div(k)):y.minus(num.div(k));return y}},{}],677:[function(require,module,exports){var constants=require("./constants"),atanAcot=require("./atanAcot");module.exports=function(y,x,BigNumber){var precision=BigNumber.precision;if(x.isZero()){if(y.isZero())return new BigNumber(NaN);var halfPi=constants.pi(BigNumber.constructor({precision:precision+2})).div(2).toDP(precision-1);return halfPi.constructor=BigNumber,halfPi.s=y.s,halfPi}BigNumber.config({precision:precision+2});var ret=atanAcot(y.div(x),BigNumber,!1);if(x.isNegative()){var pi=constants.pi(BigNumber);ret=y.isNegative()?ret.minus(pi):ret.plus(pi)}return ret.constructor=BigNumber,BigNumber.config({precision:precision}),ret.toDP(precision-1)}},{"./atanAcot":678,"./constants":685}],678:[function(require,module,exports){var constants=require("./constants"),asinAcsc=require("./asinAcsc"),atan=require("./atan");module.exports=function(x,BigNumber,reciprocal){if(x.isNaN())return new BigNumber(NaN);if(!reciprocal&&x.isZero()||reciprocal&&!x.isFinite())return new BigNumber(0);var precision=BigNumber.precision;if(!reciprocal&&!x.isFinite()||reciprocal&&x.isZero()){var halfPi=constants.pi(BigNumber.constructor({precision:precision+2})).div(2).toDP(precision-1);return halfPi.constructor=BigNumber,halfPi.s=x.s,halfPi}BigNumber.config({precision:precision+4}),reciprocal&&(x=BigNumber.ONE.div(x));var absX=x.abs();if(absX.lte(.875)){var ret=atan(x);return ret.constructor=BigNumber,BigNumber.config({precision:precision}),ret.toDP(BigNumber.precision-1)}if(absX.gte(1.143)){var halfPi=constants.pi(BigNumber.constructor({precision:precision+4})).div(2),ret=halfPi.minus(atan(BigNumber.ONE.div(absX)));return ret.s=x.s,ret.constructor=BigNumber,BigNumber.config({precision:precision}),ret.toDP(BigNumber.precision-1)}return x=x.div(x.times(x).plus(1).sqrt()),BigNumber.config({precision:precision}),asinAcsc(x,BigNumber)}},{"./asinAcsc":674,"./atan":676,"./constants":685}],679:[function(require,module,exports){module.exports=function(x,BigNumber,reciprocal){if(x.isNaN())return new BigNumber(NaN);var absX=x.abs();if(absX.eq(BigNumber.ONE))return new BigNumber(x.isNegative()?-(1/0):1/0);if(absX.gt(BigNumber.ONE)){if(!reciprocal)throw new Error("atanh() only has non-complex values for |x| <= 1.")}else if(reciprocal)throw new Error("acoth() has complex values for |x| < 1.");if(x.isZero())return new BigNumber(0);var precision=BigNumber.precision;BigNumber.config({precision:precision+4});var y=new BigNumber(x);y.constructor=BigNumber,reciprocal&&(y=BigNumber.ONE.div(y));var ret=BigNumber.ONE.plus(y).div(BigNumber.ONE.minus(y)).ln().div(2);return BigNumber.config({precision:precision}),new BigNumber(ret.toPrecision(precision))}},{}],680:[function(require,module,exports){var bitwise=require("./bitwise");module.exports=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function bitAnd");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN())return new BigNumber(NaN);if(x.isZero()||y.eq(-1)||x.eq(y))return x;if(y.isZero()||x.eq(-1))return y;if(!x.isFinite()||!y.isFinite()){if(!x.isFinite()&&!y.isFinite())return x.isNegative()==y.isNegative()?x:new BigNumber(0);if(!x.isFinite())return y.isNegative()?x:x.isNegative()?new BigNumber(0):y;if(!y.isFinite())return x.isNegative()?y:y.isNegative()?new BigNumber(0):x}return bitwise(x,y,function(a,b){return a&b})}},{"./bitwise":684}],681:[function(require,module,exports){module.exports=function(x){if(x.isFinite()&&!x.isInteger())throw new Error("Integer expected in function bitNot");var BigNumber=x.constructor,prevPrec=BigNumber.precision;BigNumber.config({precision:1e9});var x=x.plus(BigNumber.ONE);return x.s=-x.s||null,BigNumber.config({precision:prevPrec}),x}},{}],682:[function(require,module,exports){var bitwise=require("./bitwise");module.exports=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function bitOr");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN())return new BigNumber(NaN);var negOne=new BigNumber(-1);return x.isZero()||y.eq(negOne)||x.eq(y)?y:y.isZero()||x.eq(negOne)?x:x.isFinite()&&y.isFinite()?bitwise(x,y,function(a,b){return a|b}):!x.isFinite()&&!x.isNegative()&&y.isNegative()||x.isNegative()&&!y.isNegative()&&!y.isFinite()?negOne:x.isNegative()&&y.isNegative()?x.isFinite()?x:y:x.isFinite()?y:x}},{"./bitwise":684}],683:[function(require,module,exports){var bitwise=require("./bitwise"),bitNot=require("./bitNot");module.exports=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function bitXor");var BigNumber=x.constructor;if(x.isNaN()||y.isNaN())return new BigNumber(NaN);if(x.isZero())return y;if(y.isZero())return x;if(x.eq(y))return new BigNumber(0);var negOne=new BigNumber(-1);return x.eq(negOne)?bitNot(y):y.eq(negOne)?bitNot(x):x.isFinite()&&y.isFinite()?bitwise(x,y,function(a,b){return a^b}):x.isFinite()||y.isFinite()?new BigNumber(x.isNegative()==y.isNegative()?1/0:-(1/0)):negOne}},{"./bitNot":681,"./bitwise":684}],684:[function(require,module,exports){function decCoefficientToBinaryString(x){for(var a=x.c,r=a[0]+"",i=1;i<a.length;++i){for(var s=a[i]+"",z=7-s.length;z--;)s="0"+s;r+=s}var j;for(j=r.length-1;"0"==r.charAt(j);--j);var xe=x.e,str=r.slice(0,j+1||1),strL=str.length;if(xe>0)if(++xe>strL)for(xe-=strL;xe--;str+="0");else strL>xe&&(str=str.slice(0,xe)+"."+str.slice(xe));for(var arr=[0],i=0;i<str.length;){for(var arrL=arr.length;arrL--;arr[arrL]*=10);arr[0]+=str.charAt(i++)<<0;for(var j=0;j<arr.length;++j)arr[j]>1&&(null==arr[j+1]&&(arr[j+1]=0),arr[j+1]+=arr[j]>>1,arr[j]&=1)}return arr.reverse()}var bitNot=require("./bitNot");module.exports=function(x,y,func){var xBits,yBits,BigNumber=x.constructor,xSign=+(x.s<0),ySign=+(y.s<0);if(xSign){xBits=decCoefficientToBinaryString(bitNot(x));for(var i=0;i<xBits.length;++i)xBits[i]^=1}else xBits=decCoefficientToBinaryString(x);if(ySign){yBits=decCoefficientToBinaryString(bitNot(y));for(var i=0;i<yBits.length;++i)yBits[i]^=1}else yBits=decCoefficientToBinaryString(y);var minBits,maxBits,minSign;xBits.length<=yBits.length?(minBits=xBits,maxBits=yBits,minSign=xSign):(minBits=yBits,maxBits=xBits,minSign=ySign);var shortLen=minBits.length,longLen=maxBits.length,expFuncVal=1^func(xSign,ySign),outVal=new BigNumber(1^expFuncVal),twoPower=BigNumber.ONE,two=new BigNumber(2),prevPrec=BigNumber.precision;for(BigNumber.config({precision:1e9});shortLen>0;)func(minBits[--shortLen],maxBits[--longLen])==expFuncVal&&(outVal=outVal.plus(twoPower)),twoPower=twoPower.times(two);for(;longLen>0;)func(minSign,maxBits[--longLen])==expFuncVal&&(outVal=outVal.plus(twoPower)),twoPower=twoPower.times(two);return BigNumber.config({precision:prevPrec}),0==expFuncVal&&(outVal.s=-outVal.s),outVal}},{"./bitNot":681}],685:[function(require,module,exports){function hasher(args){return args[0].precision}var memoize=require("../function").memoize,atan=require("./atan");exports.e=memoize(function(BigNumber){return new BigNumber(1).exp()},hasher),exports.phi=memoize(function(BigNumber){return new BigNumber(1).plus(new BigNumber(5).sqrt()).div(2)},hasher),exports.pi=memoize(function(BigNumber){var Big=BigNumber.constructor({precision:BigNumber.precision+4}),pi4th=new Big(4).times(atan(new Big(1).div(5))).minus(atan(new Big(1).div(239)));return new BigNumber(4).times(pi4th)},hasher),exports.tau=memoize(function(BigNumber){var pi=exports.pi(BigNumber.constructor({precision:BigNumber.precision+2}));return new BigNumber(2).times(pi)},hasher)},{"../function":703,"./atan":676}],686:[function(require,module,exports){module.exports=function(x,mode){for(var one=x.constructor.ONE,y=x,yPrev=NaN,x2=x.times(x),num=mode?y:y=one,den=one,add=!0,k=mode;!y.equals(yPrev);k+=2)num=num.times(x2),den=den.times(k+1).times(k+2),yPrev=y,add=!add,y=add?y.plus(num.div(den)):y.minus(num.div(den));return y}},{}],687:[function(require,module,exports){var reduceToPeriod=require("./reduceToPeriod"),cosSin=require("./cosSin");module.exports=function(x,BigNumber,mode,reciprocal){if(x.isNaN()||!x.isFinite())return new BigNumber(NaN);var precision=BigNumber.precision,y=new BigNumber(x),isNeg=y.isNegative();isNeg&&(y.s=-y.s);var precPlusGuardDigits=precision+(0|Math.log(precision))+3;if(BigNumber.config({precision:precPlusGuardDigits}),y=reduceToPeriod(y,BigNumber.constructor({precision:precPlusGuardDigits}),mode),y[0].constructor=BigNumber,y[1])return y=y[0],reciprocal&&y.isZero()&&(y=new BigNumber(1/0)),BigNumber.config({precision:precision}),y;var ret;if(y=y[0],mode){ret=cosSin(y.div(3125),mode),BigNumber.config({precision:Math.min(precPlusGuardDigits,precision+15)});for(var five=new BigNumber(5),sixteen=new BigNumber(16),twenty=new BigNumber(20),i=0;5>i;++i){var ret2=ret.times(ret),ret3=ret2.times(ret),ret5=ret3.times(ret2);ret=sixteen.times(ret5).minus(twenty.times(ret3)).plus(five.times(ret))}isNeg&&(ret.s=-ret.s)}else{var div_factor,loops;y.abs().lt(BigNumber.ONE)?(div_factor=64,loops=3):(div_factor=256,loops=4),ret=cosSin(y.div(div_factor),mode),BigNumber.config({precision:Math.min(precPlusGuardDigits,precision+8)});for(var eight=new BigNumber(8);loops>0;--loops){var ret2=ret.times(ret),ret4=ret2.times(ret2);ret=eight.times(ret4.minus(ret2)).plus(BigNumber.ONE)}}return reciprocal&&(ret=ret.e<=-precision?new BigNumber(1/0):BigNumber.ONE.div(ret)),BigNumber.config({precision:precision}),ret.toDP(precision-1)}},{"./cosSin":686,"./reduceToPeriod":691}],688:[function(require,module,exports){module.exports=function(x,BigNumber,mode,reciprocal){if(x.isNaN())return new BigNumber(NaN);if(!x.isFinite())return new BigNumber(reciprocal?0:mode?x:1/0);var precision=BigNumber.precision;BigNumber.config({precision:precision+4});var y=new BigNumber(x);return y.constructor=BigNumber,y=y.exp(),y=mode?y.minus(BigNumber.ONE.div(y)):y.plus(BigNumber.ONE.div(y)),y=reciprocal?new BigNumber(2).div(y):y.div(2),BigNumber.config({precision:precision}),new BigNumber(y.toPrecision(precision))}},{}],689:[function(require,module,exports){exports.format=function(value,options){if("function"==typeof options)return options(value);if(!value.isFinite())return value.isNaN()?"NaN":value.gt(0)?"Infinity":"-Infinity";var notation="auto",precision=void 0;switch(void 0!==options&&(options.notation&&(notation=options.notation),"number"==typeof options?precision=options:options.precision&&(precision=options.precision)),notation){case"fixed":return exports.toFixed(value,precision);case"exponential":return exports.toExponential(value,precision);case"auto":var lower=.001,upper=1e5;options&&options.exponential&&(void 0!==options.exponential.lower&&(lower=options.exponential.lower),void 0!==options.exponential.upper&&(upper=options.exponential.upper));({toExpNeg:value.constructor.toExpNeg,toExpPos:value.constructor.toExpPos});if(value.constructor.config({toExpNeg:Math.round(Math.log(lower)/Math.LN10),toExpPos:Math.round(Math.log(upper)/Math.LN10)}),value.isZero())return"0";var str,abs=value.abs();return str=abs.gte(lower)&&abs.lt(upper)?value.toSignificantDigits(precision).toFixed():exports.toExponential(value,precision),str.replace(/((\.\d*?)(0+))($|e)/,function(){var digits=arguments[2],e=arguments[4];return"."!==digits?digits+e:e});default:throw new Error('Unknown notation "'+notation+'". Choose "auto", "exponential", or "fixed".')}},exports.toExponential=function(value,precision){return void 0!==precision?value.toExponential(precision-1):value.toExponential()},exports.toFixed=function(value,precision){return value.toFixed(precision||0)}},{}],690:[function(require,module,exports){module.exports=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function leftShift");var BigNumber=x.constructor;return x.isNaN()||y.isNaN()||y.isNegative()&&!y.isZero()?new BigNumber(NaN):x.isZero()||y.isZero()?x:x.isFinite()||y.isFinite()?y.lt(55)?x.times(Math.pow(2,y.toNumber())+""):x.times(new BigNumber(2).pow(y)):new BigNumber(NaN)}},{}],691:[function(require,module,exports){var constants=require("./constants");module.exports=function(x,BigNumber,mode){var pi=constants.pi(BigNumber.constructor({precision:BigNumber.precision+2})),tau=constants.tau(BigNumber);if(x.abs().lte(pi.toDP(x.dp())))return[x,!1];if(x.dp()>0&&x.div(pi.toDP(x.dp())).toNumber()%2==0)return[new BigNumber(1^mode),!0];var y=x.mod(tau);return x.dp()>0&&y.toDP(x.dp(),1).isZero()?[new BigNumber(1^mode),!0]:(y.gt(pi)&&(mode?(y=y.minus(pi),y.s=-y.s):y=tau.minus(y)),y.constructor=x.constructor,[y,!1])}},{"./constants":685}],692:[function(require,module,exports){module.exports=function(x,y){if(x.isFinite()&&!x.isInteger()||y.isFinite()&&!y.isInteger())throw new Error("Integers expected in function rightArithShift");var BigNumber=x.constructor;return x.isNaN()||y.isNaN()||y.isNegative()&&!y.isZero()?new BigNumber(NaN):x.isZero()||y.isZero()?x:y.isFinite()?y.lt(55)?x.div(Math.pow(2,y.toNumber())+"").floor():x.div(new BigNumber(2).pow(y)).floor():new BigNumber(x.isNegative()?-1:x.isFinite()?0:NaN)}},{}],693:[function(require,module,exports){module.exports=function(value){var BigNumber=value.constructor,precision=BigNumber.precision;BigNumber.config({precision:precision+2});var ret=BigNumber.ONE.minus(value.times(value)).sqrt();return BigNumber.config({precision:precision}),ret.toDP(precision-1)}},{}],694:[function(require,module,exports){var constants=require("./constants"),cosSinSecCsc=require("./cosSinSecCsc"),sinToCos=require("./sinToCos"),reduceToPeriod=require("./reduceToPeriod");module.exports=function(x,BigNumber,reciprocal){if(x.isNaN())return new BigNumber(NaN);var precision=BigNumber.precision,pi=constants.pi(BigNumber.constructor({precision:precision+2})),halfPi=pi.div(2).toDP(precision-1);pi=pi.toDP(precision-1);var y=reduceToPeriod(x,BigNumber,1)[0];if(y.abs().eq(pi))return new BigNumber(1/0);BigNumber.config({precision:precision+4});var sin=cosSinSecCsc(y,BigNumber,1,!1),cos=sinToCos(sin);sin=sin.toDP(precision),cos=cos.toDP(precision),y.eq(x)?y.gt(halfPi)&&(cos.s=-cos.s):pi.minus(y.abs()).gt(halfPi)&&(cos.s=-cos.s);var tan=reciprocal?cos.div(sin):sin.div(cos);return BigNumber.config({precision:precision}),new BigNumber(tan.toPrecision(precision))}},{"./constants":685,"./cosSinSecCsc":687,"./reduceToPeriod":691,"./sinToCos":693}],695:[function(require,module,exports){module.exports=function(x,BigNumber,reciprocal){if(x.isNaN())return new BigNumber(NaN);if(!x.isFinite())return new BigNumber(x.s);var precision=BigNumber.precision;BigNumber.config({precision:precision+4});var y=new BigNumber(x);y.constructor=BigNumber;var posExp=y.exp(),negExp=BigNumber.ONE.div(posExp),ret=posExp.minus(negExp);return ret=reciprocal?posExp.plus(negExp).div(ret):ret.div(posExp.plus(negExp)),BigNumber.config({precision:precision}),ret.toDP(precision-1)}},{}],696:[function(require,module,exports){"use strict";exports.isBoolean=function(value){return"boolean"==typeof value}},{}],697:[function(require,module,exports){"use strict";module.exports=function deepForEach(array,callback){array&&array.isMatrix===!0&&(array=array.valueOf());for(var i=0,ii=array.length;ii>i;i++){var value=array[i];Array.isArray(value)?deepForEach(value,callback):callback(value)}}},{}],698:[function(require,module,exports){"use strict";module.exports=function deepMap(array,callback,skipZeros){return array&&"function"==typeof array.map?array.map(function(x){return deepMap(x,callback,skipZeros)}):callback(array)}},{}],699:[function(require,module,exports){"use strict";module.exports=function(x){return Array.isArray(x)||x&&x.isMatrix===!0}},{}],700:[function(require,module,exports){"use strict";function _reduce(mat,dim,callback){var i,ret,val,tran;if(0>=dim){if(Array.isArray(mat[0])){for(tran=_switch(mat),ret=[],i=0;i<tran.length;i++)ret[i]=_reduce(tran[i],dim-1,callback);return ret}for(val=mat[0],i=1;i<mat.length;i++)val=callback(val,mat[i]);return val}for(ret=[],i=0;i<mat.length;i++)ret[i]=_reduce(mat[i],dim-1,callback);return ret}function _switch(mat){var i,j,I=mat.length,J=mat[0].length,ret=[];for(j=0;J>j;j++){var tmp=[];for(i=0;I>i;i++)tmp.push(mat[i][j]);ret.push(tmp)}return ret}var arraySize=require("../array").size,IndexError=require("../../error/IndexError");module.exports=function(mat,dim,callback){var size=Array.isArray(mat)?arraySize(mat):mat.size();if(0>dim)throw new IndexError(dim);if(dim>=size.length)throw new IndexError(dim,size.length);return mat&&mat.isMatrix===!0?mat.create(_reduce(mat.valueOf(),dim,callback)):_reduce(mat,dim,callback)}},{"../../error/IndexError":228,"../array":670}],701:[function(require,module,exports){"use strict";module.exports=function(a,j,w,x,u,mark,c,f,inverse,update,value){var k,k0,k1,i,avalues=a._values,aindex=a._index,aptr=a._ptr,cindex=c._index;if(x)for(k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++)i=aindex[k],w[i]!==mark?(w[i]=mark,cindex.push(i),update?(x[i]=inverse?f(avalues[k],value):f(value,avalues[k]),u[i]=mark):x[i]=avalues[k]):(x[i]=inverse?f(avalues[k],x[i]):f(x[i],avalues[k]),u[i]=mark);else for(k0=aptr[j],k1=aptr[j+1],k=k0;k1>k;k++)i=aindex[k],w[i]!==mark?(w[i]=mark,cindex.push(i)):u[i]=mark}},{}],702:[function(require,module,exports){var Emitter=require("tiny-emitter");exports.mixin=function(obj){var emitter=new Emitter;return obj.on=emitter.on.bind(emitter),obj.off=emitter.off.bind(emitter),obj.once=emitter.once.bind(emitter),obj.emit=emitter.emit.bind(emitter),obj}},{"tiny-emitter":713}],703:[function(require,module,exports){exports.memoize=function(fn,hasher){return function memoize(){"object"!=typeof memoize.cache&&(memoize.cache={});for(var args=[],i=0;i<arguments.length;i++)args[i]=arguments[i];var hash=hasher?hasher(args):JSON.stringify(args);return hash in memoize.cache?memoize.cache[hash]:memoize.cache[hash]=fn.apply(fn,args)}}},{}],704:[function(require,module,exports){"use strict";exports.array=require("./array"),exports["boolean"]=require("./boolean"),exports["function"]=require("./function"),exports.number=require("./number"),exports.object=require("./object"),exports.string=require("./string"),exports.types=require("./types"),exports.emitter=require("./emitter")},{"./array":670,"./boolean":696,"./emitter":702,"./function":703,"./number":706,"./object":707,"./string":708,"./types":709}],705:[function(require,module,exports){"use strict";exports.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega","true":"\\mathrm{True}","false":"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},exports.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},exports.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var units={deg:"^\\circ"};exports.toSymbol=function(name,isUnit){if(isUnit="undefined"==typeof isUnit?!1:isUnit)return units.hasOwnProperty(name)?units[name]:"\\mathrm{"+name+"}";if(exports.symbols.hasOwnProperty(name))return exports.symbols[name];if(-1!==name.indexOf("_")){var index=name.indexOf("_");return exports.toSymbol(name.substring(0,index))+"_{"+exports.toSymbol(name.substring(index+1))+"}"}return name}},{}],706:[function(require,module,exports){"use strict";var NumberFormatter=require("./NumberFormatter");exports.isNumber=function(value){return"number"==typeof value},exports.isInteger=function(value){return isFinite(value)?value==Math.round(value):!1},exports.sign=function(x){return x>0?1:0>x?-1:0},exports.format=function(value,options){if("function"==typeof options)return options(value);if(value===1/0)return"Infinity";if(value===-(1/0))return"-Infinity";if(isNaN(value))return"NaN";var notation="auto",precision=void 0;switch(options&&(options.notation&&(notation=options.notation),exports.isNumber(options)?precision=options:options.precision&&(precision=options.precision)),notation){case"fixed":return exports.toFixed(value,precision);case"exponential":return exports.toExponential(value,precision);case"engineering":return exports.toEngineering(value,precision);case"auto":return exports.toPrecision(value,precision,options&&options.exponential).replace(/((\.\d*?)(0+))($|e)/,function(){var digits=arguments[2],e=arguments[4];return"."!==digits?digits+e:e});default:throw new Error('Unknown notation "'+notation+'". Choose "auto", "exponential", or "fixed".')}},exports.toExponential=function(value,precision){return new NumberFormatter(value).toExponential(precision)},exports.toEngineering=function(value,precision){return new NumberFormatter(value).toEngineering(precision)},exports.toFixed=function(value,precision){return new NumberFormatter(value).toFixed(precision)},exports.toPrecision=function(value,precision,options){return new NumberFormatter(value).toPrecision(precision,options)},exports.digits=function(value){return value.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},exports.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16,exports.nearlyEqual=function(x,y,epsilon){if(null==epsilon)return x==y;if(x==y)return!0;if(isNaN(x)||isNaN(y))return!1;if(isFinite(x)&&isFinite(y)){var diff=Math.abs(x-y);return diff<exports.DBL_EPSILON?!0:diff<=Math.max(Math.abs(x),Math.abs(y))*epsilon}return!1}},{"./NumberFormatter":669}],707:[function(require,module,exports){"use strict";exports.clone=function clone(x){var type=typeof x;if("number"===type||"string"===type||"boolean"===type||null===x||void 0===x)return x;if("function"==typeof x.clone)return x.clone();if(Array.isArray(x))return x.map(function(value){return clone(value)});if(x instanceof Number)return new Number(x.valueOf());if(x instanceof String)return new String(x.valueOf());if(x instanceof Boolean)return new Boolean(x.valueOf());if(x instanceof Date)return new Date(x.valueOf());if(x&&x.isBigNumber===!0)return x;if(x instanceof RegExp)throw new TypeError("Cannot clone "+x);var m={};for(var key in x)x.hasOwnProperty(key)&&(m[key]=clone(x[key]));return m},exports.extend=function(a,b){for(var prop in b)b.hasOwnProperty(prop)&&(a[prop]=b[prop]);return a},exports.deepExtend=function deepExtend(a,b){if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var prop in b)if(b.hasOwnProperty(prop))if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop].constructor===Object?deepExtend(a[prop],b[prop]):a[prop]=b[prop];else{if(Array.isArray(b[prop]))throw new TypeError("Arrays are not supported by deepExtend");a[prop]=b[prop]}return a},exports.deepEqual=function(a,b){var prop,i,len;if(Array.isArray(a)){if(!Array.isArray(b))return!1;if(a.length!=b.length)return!1;for(i=0,len=a.length;len>i;i++)if(!exports.deepEqual(a[i],b[i]))return!1;return!0}if(a instanceof Object){if(Array.isArray(b)||!(b instanceof Object))return!1;for(prop in a)if(!exports.deepEqual(a[prop],b[prop]))return!1;for(prop in b)if(!exports.deepEqual(a[prop],b[prop]))return!1;return!0}return typeof a==typeof b&&a==b},exports.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(e){}return!1},exports.lazy=function(object,prop,fn){if(exports.canDefineProperty()){var _value,_uninitialized=!0;Object.defineProperty(object,prop,{get:function(){return _uninitialized&&(_value=fn(),_uninitialized=!1),_value},set:function(value){_value=value,_uninitialized=!1},configurable:!0,enumerable:!0})}else object[prop]=fn()},exports.traverse=function(object,path){var obj=object;if(path)for(var names=path.split("."),i=0;i<names.length;i++){var name=names[i];name in obj||(obj[name]={}),obj=obj[name]}return obj},exports.isFactory=function(object){return object&&"function"==typeof object.factory}},{}],708:[function(require,module,exports){"use strict";function formatArray(array,options){if(Array.isArray(array)){for(var str="[",len=array.length,i=0;len>i;i++)0!=i&&(str+=", "),str+=formatArray(array[i],options);return str+="]"}return exports.format(array,options)}var formatNumber=require("./number").format,formatBigNumber=require("./bignumber/formatter").format;exports.isString=function(value){return"string"==typeof value},exports.endsWith=function(text,search){var start=text.length-search.length,end=text.length;return text.substring(start,end)===search},exports.format=function(value,options){return"number"==typeof value?formatNumber(value,options):value&&value.isBigNumber===!0?formatBigNumber(value,options):value&&value.isFraction===!0?options&&"decimal"===options.fraction?value.toString():value.s*value.n+"/"+value.d:Array.isArray(value)?formatArray(value,options):exports.isString(value)?'"'+value+'"':"function"==typeof value?value.syntax?value.syntax+"":"function":"object"==typeof value?"function"==typeof value.format?value.format(options):value.toString():String(value)}},{"./bignumber/formatter":689,"./number":706}],709:[function(require,module,exports){"use strict";exports.type=function(x){var type=typeof x;return"object"===type?null===x?"null":x instanceof Boolean?"boolean":x instanceof Number?"number":x instanceof String?"string":Array.isArray(x)?"Array":x instanceof Date?"Date":x instanceof RegExp?"RegExp":"Object":"function"===type?"Function":type}},{}],710:[function(require,module,exports){module.exports="2.7.0"},{}],711:[function(require,module,exports){!function(global){"use strict";function coefficientToString(a){for(var s,z,i=1,j=a.length,r=a[0]+"";j>i;i++){for(s=a[i]+"",z=LOGBASE-s.length;z--;)s="0"+s;r+=s}for(j=r.length;48===r.charCodeAt(--j););return r.slice(0,j+1||1)}function checkRoundingDigits(c,i,rm,repeating){var ci,k,n,r,rd;for(k=1,n=c[0];n>=10;n/=10,k++);return n=i-k,0>n?(n+=LOGBASE,ci=0):(ci=Math.ceil((n+1)/LOGBASE),n%=LOGBASE),k=mathpow(10,LOGBASE-n),rd=c[ci]%k|0,null==repeating?3>n?(0==n?rd=rd/100|0:1==n&&(rd=rd/10|0),r=4>rm&&99999==rd||rm>3&&49999==rd||5e4==rd||0==rd):r=(4>rm&&rd+1==k||rm>3&&rd+1==k/2)&&(c[ci+1]/k/100|0)==mathpow(10,n-2)-1||(rd==k/2||0==rd)&&0==(c[ci+1]/k/100|0):4>n?(0==n?rd=rd/1e3|0:1==n?rd=rd/100|0:2==n&&(rd=rd/10|0),r=(repeating||4>rm)&&9999==rd||!repeating&&rm>3&&4999==rd):r=((repeating||4>rm)&&rd+1==k||!repeating&&rm>3&&rd+1==k/2)&&(c[ci+1]/k/1e3|0)==mathpow(10,n-3)-1,r}function checkRM(x,rm,method){var Decimal=x.constructor;return null==rm||((outOfRange=0>rm||rm>8)||0!==rm&&(Decimal.errors?parseInt:parseFloat)(rm)!=rm)&&!ifExceptionsThrow(Decimal,"rounding mode",rm,method,0)?Decimal.rounding:0|rm}function checkArg(x,n,method,min){var Decimal=x.constructor;return!(outOfRange=(min||0)>n||n>=MAX_DIGITS+1)&&(0===n||(Decimal.errors?parseInt:parseFloat)(n)==n)||ifExceptionsThrow(Decimal,"argument",n,method,0)}function exp(x,pr){var denom,guard,j,pow,sd,sum,t,rep=0,i=0,k=0,Decimal=x.constructor,one=Decimal.ONE,rm=Decimal.rounding,precision=Decimal.precision;if(!x.c||!x.c[0]||x.e>17)return new Decimal(x.c?x.c[0]?x.s<0?0:1/0:one:x.s?x.s<0?0:x:NaN);for(null==pr?(external=!1,sd=precision):sd=pr,t=new Decimal(.03125);x.e>-2;)x=x.times(t),k+=5;for(guard=Math.log(mathpow(2,k))/Math.LN10*2+5|0,sd+=guard,denom=pow=sum=new Decimal(one),Decimal.precision=sd;;){if(pow=rnd(pow.times(x),sd,1),denom=denom.times(++i),t=sum.plus(div(pow,denom,sd,1)),coefficientToString(t.c).slice(0,sd)===coefficientToString(sum.c).slice(0,sd)){for(j=k;j--;)sum=rnd(sum.times(sum),sd,1);if(null!=pr)return Decimal.precision=precision,sum;if(!(3>rep&&checkRoundingDigits(sum.c,sd-guard,rm,rep)))return rnd(sum,Decimal.precision=precision,rm,external=!0);Decimal.precision=sd+=10,denom=pow=t=new Decimal(one),i=0,rep++}sum=t}}function format(n,i,j,k){var s,z,Decimal=n.constructor,e=(n=new Decimal(n)).e;if(null==i?j=0:(rnd(n,++i,j),j=k?i:i+n.e-e),e=n.e,s=coefficientToString(n.c),1==k||2==k&&(e>=i||e<=Decimal.toExpNeg)){for(;s.length<j;s+="0");s.length>1&&(s=s.charAt(0)+"."+s.slice(1)),s+=(0>e?"e":"e+")+e}else{if(k=s.length,0>e){for(z=j-k;++e;s="0"+s);s="0."+s}else if(++e>k){for(z=j-e,e-=k;e--;s+="0");z>0&&(s+=".")}else z=j-k,k>e?s=s.slice(0,e)+"."+s.slice(e):z>0&&(s+=".");if(z>0)for(;z--;s+="0");}return n.s<0&&n.c[0]?"-"+s:s}function getCoeffLength(c){var v=c.length-1,n=v*LOGBASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--);for(v=c[0];v>=10;v/=10,n++);}return n}function ifExceptionsThrow(Decimal,message,arg,method,more){if(Decimal.errors){var error=new Error((method||["new Decimal","cmp","div","eq","gt","gte","lt","lte","minus","mod","plus","times","toFraction","pow","random","log","sqrt","toNearest","divToInt"][id?0>id?-id:id:0>1/id?1:0])+"() "+(["number type has more than 15 significant digits","LN10 out of digits"][message]||message+([outOfRange?" out of range":" not an integer"," not a boolean or binary digit"][more]||""))+": "+arg);throw error.name="Decimal Error",outOfRange=id=0,error}}function intPow(Decimal,x,i){var r=new Decimal(Decimal.ONE);
for(external=!1;1&i&&(r=r.times(x)),i>>=1,i;)x=x.times(x);return external=!0,r}function ln(y,pr){var c,c0,denom,e,num,rep,sd,sum,t,x1,x2,n=1,guard=10,x=y,xc=x.c,Decimal=x.constructor,one=Decimal.ONE,rm=Decimal.rounding,precision=Decimal.precision;if(x.s<0||!xc||!xc[0]||!x.e&&1==xc[0]&&1==xc.length)return new Decimal(xc&&!xc[0]?-1/0:1!=x.s?NaN:xc?0:x);if(null==pr?(external=!1,sd=precision):sd=pr,Decimal.precision=sd+=guard,c=coefficientToString(xc),c0=c.charAt(0),!(Math.abs(e=x.e)<15e14))return x=new Decimal(c0+"."+c.slice(1)),sd+2>LN10.length&&ifExceptionsThrow(Decimal,1,sd+2,"ln"),x=ln(x,sd-guard).plus(new Decimal(LN10.slice(0,sd+2)).times(e+"")),Decimal.precision=precision,null==pr?rnd(x,precision,rm,external=!0):x;for(;7>c0&&1!=c0||1==c0&&c.charAt(1)>3;)x=x.times(y),c=coefficientToString(x.c),c0=c.charAt(0),n++;for(e=x.e,c0>1?(x=new Decimal("0."+c),e++):x=new Decimal(c0+"."+c.slice(1)),x1=x,sum=num=x=div(x.minus(one),x.plus(one),sd,1),x2=rnd(x.times(x),sd,1),denom=3;;){if(num=rnd(num.times(x2),sd,1),t=sum.plus(div(num,new Decimal(denom),sd,1)),coefficientToString(t.c).slice(0,sd)===coefficientToString(sum.c).slice(0,sd)){if(sum=sum.times(2),0!==e&&(sd+2>LN10.length&&ifExceptionsThrow(Decimal,1,sd+2,"ln"),sum=sum.plus(new Decimal(LN10.slice(0,sd+2)).times(e+""))),sum=div(sum,new Decimal(n),sd,1),null!=pr)return Decimal.precision=precision,sum;if(!checkRoundingDigits(sum.c,sd-guard,rm,rep))return rnd(sum,Decimal.precision=precision,rm,external=!0);Decimal.precision=sd+=guard,t=num=x=div(x1.minus(one),x1.plus(one),sd,1),x2=rnd(x.times(x),sd,1),denom=rep=1}sum=t,denom+=2}}function rnd(x,sd,rm,r){var digits,i,j,k,n,rd,xc,xci,Decimal=x.constructor;out:if(null!=sd){if(!(xc=x.c))return x;for(digits=1,k=xc[0];k>=10;k/=10,digits++);if(i=sd-digits,0>i)i+=LOGBASE,j=sd,n=xc[xci=0],rd=n/mathpow(10,digits-j-1)%10|0;else if(xci=Math.ceil((i+1)/LOGBASE),xci>=xc.length){if(!r)break out;for(;xc.length<=xci;xc.push(0));n=rd=0,digits=1,i%=LOGBASE,j=i-LOGBASE+1}else{for(n=k=xc[xci],digits=1;k>=10;k/=10,digits++);i%=LOGBASE,j=i-LOGBASE+digits,rd=0>j?0:mathfloor(n/mathpow(10,digits-j-1)%10)}if(r=r||0>sd||null!=xc[xci+1]||(0>j?n:n%mathpow(10,digits-j-1)),r=4>rm?(rd||r)&&(0==rm||rm==(x.s<0?3:2)):rd>5||5==rd&&(4==rm||r||6==rm&&(i>0?j>0?n/mathpow(10,digits-j):0:xc[xci-1])%10&1||rm==(x.s<0?8:7)),1>sd||!xc[0])return xc.length=0,r?(sd-=x.e+1,xc[0]=mathpow(10,(LOGBASE-sd%LOGBASE)%LOGBASE),x.e=-sd||0):xc[0]=x.e=0,x;if(0==i?(xc.length=xci,k=1,xci--):(xc.length=xci+1,k=mathpow(10,LOGBASE-i),xc[xci]=j>0?(n/mathpow(10,digits-j)%mathpow(10,j)|0)*k:0),r)for(;;){if(0==xci){for(i=1,j=xc[0];j>=10;j/=10,i++);for(j=xc[0]+=k,k=1;j>=10;j/=10,k++);i!=k&&(x.e++,xc[0]==BASE&&(xc[0]=1));break}if(xc[xci]+=k,xc[xci]!=BASE)break;xc[xci--]=0,k=1}for(i=xc.length;0===xc[--i];xc.pop());}return external&&(x.e>Decimal.maxE?x.c=x.e=null:x.e<Decimal.minE&&(x.c=[x.e=0])),x}var convertBase,decimal,noConflict,outOfRange,crypto=global.crypto,external=!0,id=0,mathfloor=Math.floor,mathpow=Math.pow,toString=Object.prototype.toString,BASE=1e7,LOGBASE=7,NUMERALS="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",P={},EXP_LIMIT=9e15,MAX_DIGITS=1e9,INT_POW_LIMIT=3e3,LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058";P.absoluteValue=P.abs=function(){var x=new this.constructor(this);return x.s<0&&(x.s=1),rnd(x)},P.ceil=function(){return rnd(new this.constructor(this),this.e+1,2)},P.comparedTo=P.cmp=function(y,b){var a,x=this,xc=x.c,yc=(id=-id,y=new x.constructor(y,b),y.c),i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;if(a=xc&&!xc[0],b=yc&&!yc[0],a||b)return a?b?0:-j:i;if(i!=j)return i;if(a=0>i,!xc||!yc)return k==l?0:!xc^a?1:-1;if(k!=l)return k>l^a?1:-1;for(i=-1,j=(k=xc.length)<(l=yc.length)?k:l;++i<j;)if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1;return k==l?0:k>l^a?1:-1},P.decimalPlaces=P.dp=function(){var c,v,n=null;if(c=this.c){if(n=((v=c.length-1)-mathfloor(this.e/LOGBASE))*LOGBASE,v=c[v])for(;v%10==0;v/=10,n--);0>n&&(n=0)}return n},P.dividedBy=P.div=function(y,b){return id=2,div(this,new this.constructor(y,b))},P.dividedToIntegerBy=P.divToInt=function(y,b){var x=this,Decimal=x.constructor;return id=18,rnd(div(x,new Decimal(y,b),0,1,1),Decimal.precision,Decimal.rounding)},P.equals=P.eq=function(n,b){return id=3,0===this.cmp(n,b)},P.exponential=P.exp=function(){return exp(this)},P.floor=function(){return rnd(new this.constructor(this),this.e+1,3)},P.greaterThan=P.gt=function(n,b){return id=4,this.cmp(n,b)>0},P.greaterThanOrEqualTo=P.gte=function(n,b){return id=5,b=this.cmp(n,b),1==b||0===b},P.isFinite=function(){return!!this.c},P.isInteger=P.isInt=function(){return!!this.c&&mathfloor(this.e/LOGBASE)>this.c.length-2},P.isNaN=function(){return!this.s},P.isNegative=P.isNeg=function(){return this.s<0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.lessThan=P.lt=function(n,b){return id=6,this.cmp(n,b)<0},P.lessThanOrEqualTo=P.lte=function(n,b){return id=7,b=this.cmp(n,b),-1==b||0===b},P.logarithm=P.log=function(base,b){var base10,c,denom,i,inf,num,sd,sd10,r,arg=this,Decimal=arg.constructor,pr=Decimal.precision,rm=Decimal.rounding,guard=5;if(null==base)base=new Decimal(10),base10=!0;else{if(id=15,base=new Decimal(base,b),c=base.c,base.s<0||!c||!c[0]||!base.e&&1==c[0]&&1==c.length)return new Decimal(NaN);base10=base.eq(10)}if(c=arg.c,arg.s<0||!c||!c[0]||!arg.e&&1==c[0]&&1==c.length)return new Decimal(c&&!c[0]?-1/0:1!=arg.s?NaN:c?0:1/0);if(inf=base10&&(i=c[0],c.length>1||1!=i&&10!=i&&100!=i&&1e3!=i&&1e4!=i&&1e5!=i&&1e6!=i),external=!1,sd=pr+guard,sd10=sd+10,num=ln(arg,sd),base10?(sd10>LN10.length&&ifExceptionsThrow(Decimal,1,sd10,"log"),denom=new Decimal(LN10.slice(0,sd10))):denom=ln(base,sd),r=div(num,denom,sd,1),checkRoundingDigits(r.c,i=pr,rm))do if(sd+=10,num=ln(arg,sd),base10?(sd10=sd+10,sd10>LN10.length&&ifExceptionsThrow(Decimal,1,sd10,"log"),denom=new Decimal(LN10.slice(0,sd10))):denom=ln(base,sd),r=div(num,denom,sd,1),!inf){+coefficientToString(r.c).slice(i+1,i+15)+1==1e14&&(r=rnd(r,pr+1,0));break}while(checkRoundingDigits(r.c,i+=10,rm));return external=!0,rnd(r,pr,rm)},P.minus=function(y,b){var t,i,j,xLTy,x=this,Decimal=x.constructor,a=x.s;if(id=8,y=new Decimal(y,b),b=y.s,!a||!b)return new Decimal(NaN);if(a!=b)return y.s=-b,x.plus(y);var xc=x.c,yc=y.c,e=mathfloor(y.e/LOGBASE),k=mathfloor(x.e/LOGBASE),pr=Decimal.precision,rm=Decimal.rounding;if(!k||!e){if(!xc||!yc)return xc?(y.s=-b,y):new Decimal(yc?x:NaN);if(!xc[0]||!yc[0])return x=yc[0]?(y.s=-b,y):new Decimal(xc[0]?x:3==rm?-0:0),external?rnd(x,pr,rm):x}if(xc=xc.slice(),i=xc.length,a=k-e){for((xLTy=0>a)?(a=-a,t=xc,i=yc.length):(e=k,t=yc),(k=Math.ceil(pr/LOGBASE))>i&&(i=k),a>(i+=2)&&(a=i,t.length=1),t.reverse(),b=a;b--;t.push(0));t.reverse()}else for((xLTy=i<(j=yc.length))&&(j=i),a=b=0;j>b;b++)if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}if(xLTy&&(t=xc,xc=yc,yc=t,y.s=-y.s),(b=-((j=xc.length)-yc.length))>0)for(;b--;xc[j++]=0);for(k=BASE-1,b=yc.length;b>a;){if(xc[--b]<yc[b]){for(i=b;i&&!xc[--i];xc[i]=k);--xc[i],xc[b]+=BASE}xc[b]-=yc[b]}for(;0==xc[--j];xc.pop());for(;0==xc[0];xc.shift(),--e);for(xc[0]||(xc=[e=0],y.s=3==rm?-1:1),y.c=xc,a=1,b=xc[0];b>=10;b/=10,a++);return y.e=a+e*LOGBASE-1,external?rnd(y,pr,rm):y},P.modulo=P.mod=function(y,b){var n,q,x=this,Decimal=x.constructor,m=Decimal.modulo;return id=9,y=new Decimal(y,b),b=y.s,n=!x.c||!b||y.c&&!y.c[0],n||!y.c||x.c&&!x.c[0]?n?new Decimal(NaN):rnd(new Decimal(x),Decimal.precision,Decimal.rounding):(external=!1,9==m?(y.s=1,q=div(x,y,0,3,1),y.s=b,q.s*=b):q=div(x,y,0,m,1),q=q.times(y),external=!0,x.minus(q))},P.naturalLogarithm=P.ln=function(){return ln(this)},P.negated=P.neg=function(){var x=new this.constructor(this);return x.s=-x.s||null,rnd(x)},P.plus=function(y,b){var t,x=this,Decimal=x.constructor,a=x.s;if(id=10,y=new Decimal(y,b),b=y.s,!a||!b)return new Decimal(NaN);if(a!=b)return y.s=-b,x.minus(y);var xc=x.c,yc=y.c,e=mathfloor(y.e/LOGBASE),k=mathfloor(x.e/LOGBASE),pr=Decimal.precision,rm=Decimal.rounding;if(!k||!e){if(!xc||!yc)return new Decimal(a/0);if(!xc[0]||!yc[0])return x=yc[0]?y:new Decimal(xc[0]?x:0*a),external?rnd(x,pr,rm):x}if(xc=xc.slice(),a=k-e){for(0>a?(a=-a,t=xc,b=yc.length):(e=k,t=yc,b=xc.length),(k=Math.ceil(pr/LOGBASE))>b&&(b=k),a>++b&&(a=b,t.length=1),t.reverse();a--;t.push(0));t.reverse()}for(xc.length-yc.length<0&&(t=yc,yc=xc,xc=t),a=yc.length,b=0,k=BASE;a;xc[a]%=k)b=(xc[--a]=xc[a]+yc[a]+b)/k|0;for(b&&(xc.unshift(b),++e),a=xc.length;0==xc[--a];xc.pop());for(y.c=xc,a=1,b=xc[0];b>=10;b/=10,a++);return y.e=a+e*LOGBASE-1,external?rnd(y,pr,rm):y},P.precision=P.sd=function(z){var n=null,x=this;return z!=n&&z!==!!z&&1!==z&&0!==z&&ifExceptionsThrow(x.constructor,"argument",z,"precision",1),x.c&&(n=getCoeffLength(x.c),z&&x.e+1>n&&(n=x.e+1)),n},P.round=function(){var x=this,Decimal=x.constructor;return rnd(new Decimal(x),x.e+1,Decimal.rounding)},P.squareRoot=P.sqrt=function(){var m,n,sd,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,Decimal=x.constructor,half=new Decimal(.5);if(1!==s||!c||!c[0])return new Decimal(!s||0>s&&(!c||c[0])?NaN:c?x:1/0);for(external=!1,s=Math.sqrt(+x),0==s||s==1/0?(n=coefficientToString(c),(n.length+e)%2==0&&(n+="0"),s=Math.sqrt(n),e=mathfloor((e+1)/2)-(0>e||e%2),s==1/0?n="1e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new Decimal(n)):r=new Decimal(s.toString()),sd=(e=Decimal.precision)+3;;)if(t=r,r=half.times(t.plus(div(x,t,sd+2,1))),coefficientToString(t.c).slice(0,sd)===(n=coefficientToString(r.c)).slice(0,sd)){if(n=n.slice(sd-3,sd+1),"9999"!=n&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(rnd(r,e+1,1),m=!r.times(r).eq(x));break}if(!rep&&(rnd(t,e+1,0),t.times(t).eq(x))){r=t;break}sd+=4,rep=1}return external=!0,rnd(r,e,Decimal.rounding,m)},P.times=function(y,b){var c,e,x=this,Decimal=x.constructor,xc=x.c,yc=(id=11,y=new Decimal(y,b),y.c),i=mathfloor(x.e/LOGBASE),j=mathfloor(y.e/LOGBASE),a=x.s;if(b=y.s,y.s=a==b?1:-1,!((i||xc&&xc[0])&&(j||yc&&yc[0])))return new Decimal(!a||!b||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc?NaN:xc&&yc?0*y.s:y.s/0);for(e=i+j,a=xc.length,b=yc.length,b>a&&(c=xc,xc=yc,yc=c,j=a,a=b,b=j),j=a+b,c=[];j--;c.push(0));for(i=b-1;i>-1;i--){for(b=0,j=a+i;j>i;)b=c[j]+yc[i]*xc[j-i-1]+b,c[j--]=b%BASE|0,b=b/BASE|0;c[j]=(c[j]+b)%BASE|0}for(b?++e:c[0]||c.shift(),j=c.length;!c[--j];c.pop());for(y.c=c,a=1,b=c[0];b>=10;b/=10,a++);return y.e=a+e*LOGBASE-1,external?rnd(y,Decimal.precision,Decimal.rounding):y},P.toDecimalPlaces=P.toDP=function(dp,rm){var x=this;return x=new x.constructor(x),null!=dp&&checkArg(x,dp,"toDP")?rnd(x,(0|dp)+x.e+1,checkRM(x,rm,"toDP")):x},P.toExponential=function(dp,rm){var x=this;return x.c?format(x,null!=dp&&checkArg(x,dp,"toExponential")?0|dp:null,null!=dp&&checkRM(x,rm,"toExponential"),1):x.toString()},P.toFixed=function(dp,rm){var str,x=this,Decimal=x.constructor,neg=Decimal.toExpNeg,pos=Decimal.toExpPos;return null!=dp&&(dp=checkArg(x,dp,str="toFixed")?x.e+(0|dp):null,rm=checkRM(x,rm,str)),Decimal.toExpNeg=-(Decimal.toExpPos=1/0),null!=dp&&x.c?(str=format(x,dp,rm),x.s<0&&x.c&&(x.c[0]?str.indexOf("-")<0&&(str="-"+str):str=str.replace("-",""))):str=x.toString(),Decimal.toExpNeg=neg,Decimal.toExpPos=pos,str},P.toFormat=function(dp,rm){var x=this;if(!x.c)return x.toString();var i,isNeg=x.s<0,f=x.constructor.format,groupSeparator=f.groupSeparator,g1=+f.groupSize,g2=+f.secondaryGroupSize,arr=x.toFixed(dp,rm).split("."),intPart=arr[0],fractionPart=arr[1],intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2&&(i=g1,g1=g2,len-=g2=i),g1>0&&len>0){for(i=len%g1||g1,intPart=intDigits.substr(0,i);len>i;i+=g1)intPart+=groupSeparator+intDigits.substr(i,g1);g2>0&&(intPart+=groupSeparator+intDigits.slice(i)),isNeg&&(intPart="-"+intPart)}return fractionPart?intPart+f.decimalSeparator+((g2=+f.fractionGroupSize)?fractionPart.replace(new RegExp("\\d{"+g2+"}\\B","g"),"$&"+f.fractionGroupSeparator):fractionPart):intPart},P.toFraction=function(maxD){var d0,d2,e,frac,n,n0,p,q,x=this,Decimal=x.constructor,n1=d0=new Decimal(Decimal.ONE),d1=n0=new Decimal(0),xc=x.c,d=new Decimal(d1);if(!xc)return x.toString();for(e=d.e=getCoeffLength(xc)-x.e-1,d.c[0]=mathpow(10,(p=e%LOGBASE)<0?LOGBASE+p:p),(null==maxD||(!(id=12,n=new Decimal(maxD)).s||(outOfRange=n.cmp(n1)<0||!n.c)||Decimal.errors&&mathfloor(n.e/LOGBASE)<n.c.length-1)&&!ifExceptionsThrow(Decimal,"max denominator",maxD,"toFraction",0)||(maxD=n).cmp(d)>0)&&(maxD=e>0?d:n1),external=!1,n=new Decimal(coefficientToString(xc)),p=Decimal.precision,Decimal.precision=e=xc.length*LOGBASE*2;q=div(n,d,0,1,1),d2=d0.plus(q.times(d1)),1!=d2.cmp(maxD);)d0=d1,d1=d2,n1=n0.plus(q.times(d2=n1)),n0=d2,d=n.minus(q.times(d2=d)),n=d2;return d2=div(maxD.minus(d0),d1,0,1,1),n0=n0.plus(d2.times(n1)),d0=d0.plus(d2.times(d1)),n0.s=n1.s=x.s,frac=div(n1,d1,e,1).minus(x).abs().cmp(div(n0,d0,e,1).minus(x).abs())<1?[n1+"",d1+""]:[n0+"",d0+""],external=!0,Decimal.precision=p,frac},P.toNearest=function(n,rm){var x=this,Decimal=x.constructor;return x=new Decimal(x),null==n?(n=new Decimal(Decimal.ONE),rm=Decimal.rounding):(id=17,n=new Decimal(n),rm=checkRM(x,rm,"toNearest")),n.c?x.c&&(n.c[0]?(external=!1,x=div(x,n,0,4>rm?[4,5,7,8][rm]:rm,1).times(n),external=!0,rnd(x)):x.c=[x.e=0]):x.s&&(n.s&&(n.s=x.s),x=n),x},P.toNumber=function(){var x=this;return+x||(x.s?0*x.s:NaN)},P.toPower=P.pow=function(y,b){var a,e,n,r,x=this,Decimal=x.constructor,s=x.s,yN=(id=13,+(y=new Decimal(y,b))),i=0>yN?-yN:yN,pr=Decimal.precision,rm=Decimal.rounding;if(!x.c||!y.c||(n=!x.c[0])||!y.c[0])return new Decimal(mathpow(n?0*s:+x,yN));if(x=new Decimal(x),a=x.c.length,!x.e&&x.c[0]==x.s&&1==a)return x;if(b=y.c.length-1,y.e||y.c[0]!=y.s||b)if(e=mathfloor(y.e/LOGBASE),n=e>=b,!n&&0>s)r=new Decimal(NaN);else{if(n&&INT_POW_LIMIT>a*LOGBASE*i){if(r=intPow(Decimal,x,i),y.s<0)return Decimal.ONE.div(r)}else{if(s=0>s&&1&y.c[Math.max(e,b)]?-1:1,b=mathpow(+x,yN),e=0!=b&&isFinite(b)?new Decimal(b+"").e:mathfloor(yN*(Math.log("0."+coefficientToString(x.c))/Math.LN10+x.e+1)),e>Decimal.maxE+1||e<Decimal.minE-1)return new Decimal(e>0?s/0:0);external=!1,Decimal.rounding=x.s=1,i=Math.min(12,(e+"").length),r=exp(y.times(ln(x,pr+i)),pr),r=rnd(r,pr+5,1),checkRoundingDigits(r.c,pr,rm)&&(e=pr+10,r=rnd(exp(y.times(ln(x,e+i)),e),e+5,1),+coefficientToString(r.c).slice(pr+1,pr+15)+1==1e14&&(r=rnd(r,pr+1,0))),r.s=s,external=!0,Decimal.rounding=rm}r=rnd(r,pr,rm)}else r=rnd(x,pr,rm);return r},P.toPrecision=function(sd,rm){var x=this;return null!=sd&&checkArg(x,sd,"toPrecision",1)&&x.c?format(x,0|--sd,checkRM(x,rm,"toPrecision"),2):x.toString()},P.toSignificantDigits=P.toSD=function(d,rm){var x=this,Decimal=x.constructor;return x=new Decimal(x),null!=d&&checkArg(x,d,"toSD",1)?rnd(x,0|d,checkRM(x,rm,"toSD")):rnd(x,Decimal.precision,Decimal.rounding)},P.toString=function(b){var u,str,strL,x=this,Decimal=x.constructor,xe=x.e;if(null===xe)str=x.s?"Infinity":"NaN";else{if(b===u&&(xe<=Decimal.toExpNeg||xe>=Decimal.toExpPos))return format(x,null,Decimal.rounding,1);if(str=coefficientToString(x.c),0>xe){for(;++xe;str="0"+str);str="0."+str}else if(strL=str.length,xe>0)if(++xe>strL)for(xe-=strL;xe--;str+="0");else strL>xe&&(str=str.slice(0,xe)+"."+str.slice(xe));else if(u=str.charAt(0),strL>1)str=u+"."+str.slice(1);else if("0"==u)return u;if(null!=b)if((outOfRange=!(b>=2&&65>b))||b!=(0|b)&&Decimal.errors)ifExceptionsThrow(Decimal,"base",b,"toString",0);else if(str=convertBase(Decimal,str,0|b,10,x.s),"0"==str)return str}return x.s<0?"-"+str:str},P.truncated=P.trunc=function(){return rnd(new this.constructor(this),this.e+1,1)},P.valueOf=P.toJSON=function(){return this.toString()},convertBase=function(){function toBaseOut(str,baseIn,baseOut){for(var j,arrL,arr=[0],i=0,strL=str.length;strL>i;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn);for(arr[j=0]+=NUMERALS.indexOf(str.charAt(i++));j<arr.length;j++)arr[j]>baseOut-1&&(null==arr[j+1]&&(arr[j+1]=0),arr[j+1]+=arr[j]/baseOut|0,arr[j]%=baseOut)}return arr.reverse()}return function(Decimal,str,baseOut,baseIn,sign){var e,j,r,x,xc,y,i=str.indexOf("."),pr=Decimal.precision,rm=Decimal.rounding;for(37>baseIn&&(str=str.toLowerCase()),i>=0&&(str=str.replace(".",""),y=new Decimal(baseIn),x=intPow(Decimal,y,str.length-i),y.c=toBaseOut(x.toFixed(),10,baseOut),y.e=y.c.length),xc=toBaseOut(str,baseIn,baseOut),e=j=xc.length;0==xc[--j];xc.pop());if(!xc[0])return"0";if(0>i?e--:(x.c=xc,x.e=e,x.s=sign,x=div(x,y,pr,rm,0,baseOut),xc=x.c,r=x.r,e=x.e),i=xc[pr],j=baseOut/2,r=r||null!=xc[pr+1],4>rm?(null!=i||r)&&(0==rm||rm==(0>sign?3:2)):i>j||i==j&&(4==rm||r||6==rm&&1&xc[pr-1]||rm==(0>sign?8:7)))for(xc.length=pr,--baseOut;++xc[--pr]>baseOut;)xc[pr]=0,pr||(++e,xc.unshift(1));else xc.length=pr;for(j=xc.length;!xc[--j];);for(i=0,str="";j>=i;str+=NUMERALS.charAt(xc[i++]));if(0>e){for(;++e;str="0"+str);str="0."+str}else if(i=str.length,++e>i)for(e-=i;e--;str+="0");else i>e&&(str=str.slice(0,e)+"."+str.slice(e));return str}}();var div=function(){function multiplyInteger(x,k,base){var temp,carry=0,i=x.length;for(x=x.slice();i--;)temp=x[i]*k+carry,x[i]=temp%base|0,carry=temp/base|0;return carry&&x.unshift(carry),x}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL)cmp=aL>bL?1:-1;else for(i=cmp=0;aL>i;i++)if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break}return cmp}function subtract(a,b,aL,base){for(var i=0;aL--;)a[aL]-=i,i=a[aL]<b[aL]?1:0,a[aL]=i*base+a[aL]-b[aL];for(;!a[0]&&a.length>1;a.shift());}return function(x,y,pr,rm,dp,base){var cmp,e,i,logbase,more,n,prod,prodL,q,qc,rem,remL,rem0,t,xi,xL,yc0,yL,yz,Decimal=x.constructor,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!(xc&&xc[0]&&yc&&yc[0]))return new Decimal(x.s&&y.s&&(xc?!yc||xc[0]!=yc[0]:yc)?xc&&0==xc[0]||!yc?0*s:s/0:NaN);for(base?(logbase=1,e=x.e-y.e):(base=BASE,logbase=LOGBASE,e=mathfloor(x.e/logbase)-mathfloor(y.e/logbase)),yL=yc.length,xL=xc.length,q=new Decimal(s),qc=q.c=[],i=0;yc[i]==(xc[i]||0);i++);if(yc[i]>(xc[i]||0)&&e--,null==pr?(s=pr=Decimal.precision,rm=Decimal.rounding):s=dp?pr+(x.e-y.e)+1:pr,0>s)qc.push(1),more=!0;else{if(s=s/logbase+2|0,i=0,1==yL){for(n=0,yc=yc[0],s++;(xL>i||n)&&s--;i++)t=n*base+(xc[i]||0),qc[i]=t/yc|0,n=t%yc|0;more=n||xL>i}else{for(n=base/(yc[0]+1)|0,n>1&&(yc=multiplyInteger(yc,n,base),xc=multiplyInteger(xc,n,base),yL=yc.length,xL=xc.length),xi=yL,rem=xc.slice(0,yL),remL=rem.length;yL>remL;rem[remL++]=0);yz=yc.slice(),yz.unshift(0),yc0=yc[0],yc[1]>=base/2&&yc0++;do n=0,cmp=compare(yc,rem,yL,remL),0>cmp?(rem0=rem[0],yL!=remL&&(rem0=rem0*base+(rem[1]||0)),n=rem0/yc0|0,n>1?(n>=base&&(n=base-1),prod=multiplyInteger(yc,n,base),prodL=prod.length,remL=rem.length,cmp=compare(prod,rem,prodL,remL),1==cmp&&(n--,subtract(prod,prodL>yL?yz:yc,prodL,base))):(0==n&&(cmp=n=1),prod=yc.slice()),prodL=prod.length,remL>prodL&&prod.unshift(0),subtract(rem,prod,remL,base),-1==cmp&&(remL=rem.length,cmp=compare(yc,rem,yL,remL),1>cmp&&(n++,subtract(rem,remL>yL?yz:yc,remL,base))),remL=rem.length):0===cmp&&(n++,rem=[0]),qc[i++]=n,cmp&&rem[0]?rem[remL++]=xc[xi]||0:(rem=[xc[xi]],remL=1);while((xi++<xL||null!=rem[0])&&s--);more=null!=rem[0]}qc[0]||qc.shift()}if(1==logbase)q.e=e,q.r=+more;else{for(i=1,s=qc[0];s>=10;s/=10,i++);q.e=i+e*logbase-1,rnd(q,dp?pr+q.e+1:pr,rm,more)}return q}}();if(decimal=function(){function config(obj){var p,u,v,Decimal=this,c="config",parse=Decimal.errors?parseInt:parseFloat;return obj==u||"object"!=typeof obj&&!ifExceptionsThrow(Decimal,"object expected",obj,c)?Decimal:((v=obj[p="precision"])!=u&&((outOfRange=1>v||v>MAX_DIGITS)||parse(v)!=v?ifExceptionsThrow(Decimal,p,v,c,0):Decimal[p]=0|v),(v=obj[p="rounding"])!=u&&((outOfRange=0>v||v>8)||parse(v)!=v?ifExceptionsThrow(Decimal,p,v,c,0):Decimal[p]=0|v),(v=obj[p="toExpNeg"])!=u&&((outOfRange=-EXP_LIMIT>v||v>0)||parse(v)!=v?ifExceptionsThrow(Decimal,p,v,c,0):Decimal[p]=mathfloor(v)),(v=obj[p="toExpPos"])!=u&&((outOfRange=0>v||v>EXP_LIMIT)||parse(v)!=v?ifExceptionsThrow(Decimal,p,v,c,0):Decimal[p]=mathfloor(v)),(v=obj[p="minE"])!=u&&((outOfRange=-EXP_LIMIT>v||v>0)||parse(v)!=v?ifExceptionsThrow(Decimal,p,v,c,0):Decimal[p]=mathfloor(v)),(v=obj[p="maxE"])!=u&&((outOfRange=0>v||v>EXP_LIMIT)||parse(v)!=v?ifExceptionsThrow(Decimal,p,v,c,0):Decimal[p]=mathfloor(v)),(v=obj[p="errors"])!=u&&(v===!!v||1===v||0===v?(outOfRange=id=0,Decimal[p]=!!v):ifExceptionsThrow(Decimal,p,v,c,1)),(v=obj[p="crypto"])!=u&&(v===!!v||1===v||0===v?Decimal[p]=!(!v||!crypto||"object"!=typeof crypto):ifExceptionsThrow(Decimal,p,v,c,1)),(v=obj[p="modulo"])!=u&&((outOfRange=0>v||v>9)||parse(v)!=v?ifExceptionsThrow(Decimal,p,v,c,0):Decimal[p]=0|v),(obj=obj[p="format"])!=u&&("object"==typeof obj?Decimal[p]=obj:ifExceptionsThrow(Decimal,"format object expected",obj,c)),Decimal)}function exp(n){return new this(n).exp()}function ln(n){return new this(n).ln()}function log(x,y){return new this(x).log(y)}function maxOrMin(Decimal,args,ltgt){var m,n,i=0;for("[object Array]"==toString.call(args[0])&&(args=args[0]),m=new Decimal(args[0]);++i<args.length;){if(n=new Decimal(args[i]),!n.s){m=n;break}m[ltgt](n)&&(m=n)}return m}function max(){return maxOrMin(this,arguments,"lt")}function min(){return maxOrMin(this,arguments,"gt")}function pow(x,y){return new this(x).pow(y)}function random(dp){var a,n,v,i=0,r=[],Decimal=this,rand=new Decimal(Decimal.ONE);if(null!=dp&&checkArg(rand,dp,"random")?dp|=0:dp=Decimal.precision,n=Math.ceil(dp/LOGBASE),Decimal.crypto)if(crypto&&crypto.getRandomValues)for(a=crypto.getRandomValues(new Uint32Array(n));n>i;)v=a[i],v>=429e7?a[i]=crypto.getRandomValues(new Uint32Array(1))[0]:r[i++]=v%1e7;else if(crypto&&crypto.randomBytes){for(a=crypto.randomBytes(n*=4);n>i;)v=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+((127&a[i+3])<<24),v>=214e7?crypto.randomBytes(4).copy(a,i):(r.push(v%1e7),i+=4);i=n/4}else ifExceptionsThrow(Decimal,"crypto unavailable",crypto,"random");if(!i)for(;n>i;)r[i++]=1e7*Math.random()|0;for(n=r[--i],dp%=LOGBASE,n&&dp&&(v=mathpow(10,LOGBASE-dp),r[i]=(n/v|0)*v);0===r[i];i--)r.pop();if(0>i)r=[n=0];else{for(n=-1;0===r[0];)r.shift(),n-=LOGBASE;for(i=1,v=r[0];v>=10;)v/=10,i++;LOGBASE>i&&(n-=LOGBASE-i)}return rand.e=n,rand.c=r,rand}function sqrt(n){return new this(n).sqrt()}function decimalFactory(obj){function Decimal(n,b){var x=this;if(!(x instanceof Decimal))return ifExceptionsThrow(Decimal,"Decimal called without new",n),new Decimal(n,b);if(x.constructor=Decimal,n instanceof Decimal){if(null==b)return id=0,x.s=n.s,x.e=n.e,x.c=(n=n.c)?n.slice():n,x;if(10==b)return rnd(new Decimal(n),Decimal.precision,Decimal.rounding);n+=""}return parseDecimal(Decimal,x,n,b)}return Decimal.precision=20,Decimal.rounding=4,Decimal.modulo=1,Decimal.toExpNeg=-7,Decimal.toExpPos=21,Decimal.minE=-EXP_LIMIT,Decimal.maxE=EXP_LIMIT,Decimal.errors=!0,Decimal.crypto=!1,Decimal.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0},Decimal.prototype=P,Decimal.ONE=new Decimal(1),Decimal.ROUND_UP=0,Decimal.ROUND_DOWN=1,Decimal.ROUND_CEIL=2,Decimal.ROUND_FLOOR=3,Decimal.ROUND_HALF_UP=4,Decimal.ROUND_HALF_DOWN=5,Decimal.ROUND_HALF_EVEN=6,Decimal.ROUND_HALF_CEIL=7,Decimal.ROUND_HALF_FLOOR=8,Decimal.EUCLID=9,Decimal.config=config,Decimal.constructor=decimalFactory,Decimal.exp=exp,Decimal.ln=ln,Decimal.log=log,Decimal.max=max,Decimal.min=min,Decimal.pow=pow,Decimal.sqrt=sqrt,Decimal.random=random,null!=obj&&Decimal.config(obj),Decimal}var parseDecimal=function(){var isValid=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};return function(Decimal,x,n,b){var d,e,i,isNum,orig,valid;if("string"!=typeof n&&(n=(isNum="number"==typeof n||"[object Number]"==toString.call(n))&&0===n&&0>1/n?"-0":n+""),orig=n,null==b&&isValid.test(n))x.s=45===n.charCodeAt(0)?(n=n.slice(1),-1):1;else{if(10==b)return rnd(new Decimal(n),Decimal.precision,Decimal.rounding);if(n=trim.call(n).replace(/^\+(?!-)/,""),x.s=45===n.charCodeAt(0)?(n=n.replace(/^-(?!-)/,""),-1):1,null!=b?b!=(0|b)&&Decimal.errors||(outOfRange=!(b>=2&&65>b))?(ifExceptionsThrow(Decimal,"base",b,0,0),valid=isValid.test(n)):(d="["+NUMERALS.slice(0,b=0|b)+"]+",n=n.replace(/\.$/,"").replace(/^\./,"0."),(valid=new RegExp("^"+d+"(?:\\."+d+")?$",37>b?"i":"").test(n))?(isNum&&(n.replace(/^0\.0*|\./,"").length>15&&ifExceptionsThrow(Decimal,0,orig),isNum=!isNum),n=convertBase(Decimal,n,10,b,x.s)):"Infinity"!=n&&"NaN"!=n&&(ifExceptionsThrow(Decimal,"not a base "+b+" number",orig),n="NaN")):valid=isValid.test(n),!valid)return x.c=x.e=null,"Infinity"!=n&&("NaN"!=n&&ifExceptionsThrow(Decimal,"not a number",orig),x.s=null),id=0,x}for((e=n.indexOf("."))>-1&&(n=n.replace(".","")),(i=n.search(/e/i))>0?(0>e&&(e=i),e+=+n.slice(i+1),n=n.substring(0,i)):0>e&&(e=n.length),i=0;48===n.charCodeAt(i);i++);for(b=n.length;48===n.charCodeAt(--b););if(n=n.slice(i,b+1)){if(b=n.length,isNum&&b>15&&ifExceptionsThrow(Decimal,0,orig),x.e=e=e-i-1,x.c=[],i=(e+1)%LOGBASE,0>e&&(i+=LOGBASE),b>i){for(i&&x.c.push(+n.slice(0,i)),b-=LOGBASE;b>i;)x.c.push(+n.slice(i,i+=LOGBASE));n=n.slice(i),i=LOGBASE-n.length}else i-=b;for(;i--;n+="0");x.c.push(+n),external&&(x.e>Decimal.maxE?x.c=x.e=null:x.e<Decimal.minE&&(x.c=[x.e=0]))}else x.c=[x.e=0];return id=0,x}}();return decimalFactory()}(),"function"==typeof define&&define.amd)define(function(){return decimal});else if("undefined"!=typeof module&&module.exports){if(module.exports=decimal,!crypto)try{crypto=require("crypto")}catch(e){}}else noConflict=global.Decimal,decimal.noConflict=function(){return global.Decimal=noConflict,decimal},global.Decimal=decimal}(this)},{crypto:6}],712:[function(require,module,exports){!function(root){"use strict";function assign(n,s){return isNaN(n=parseInt(n,10))&&thorwInvalidParam(),n*s}function thorwInvalidParam(){throw"Invalid Param"}function Fraction(a,b){return this instanceof Fraction?(parse(a,b),a=Fraction.REDUCE?gcd(P.d,P.n):1,this.s=P.s,this.n=P.n/a,void(this.d=P.d/a)):new Fraction(a,b)}var MAX_CYCLE_LEN=2e3,P={s:1,n:0,d:1},parse=function(p1,p2){var M,n=0,d=1,s=1,v=0,w=0,x=0,y=1,z=1,A=0,B=1,C=1,D=1,N=1e7;if(void 0===p1||null===p1);else if(void 0!==p2)n=p1,d=p2,s=n*d;else switch(typeof p1){case"object":"d"in p1&&"n"in p1?(n=p1.n,d=p1.d,"s"in p1&&(n*=p1.s)):0 in p1?(n=p1[0],1 in p1&&(d=p1[1])):thorwInvalidParam(),s=n*d;break;case"number":if(0>p1&&(s=p1,p1=-p1),p1%1===0)n=p1;else if(p1>0){for(p1>=1&&(z=Math.pow(10,Math.floor(1+Math.log(p1)/Math.LN10)),p1/=z);N>=B&&N>=D;){if(M=(A+C)/(B+D),p1===M){N>=B+D?(n=A+C,d=B+D):D>B?(n=C,d=D):(n=A,d=B);break}p1>M?(A+=C,B+=D):(C+=A,D+=B),B>N?(n=C,d=D):(n=A,d=B)}n*=z}else(isNaN(p1)||isNaN(p2))&&(d=n=NaN);break;case"string":if(B=p1.match(/\d+|./g),"-"===B[A]?(s=-1,A++):"+"===B[A]&&A++,B.length===A+1?w=assign(B[A++],s):"."===B[A+1]||"."===B[A]?("."!==B[A]&&(v=assign(B[A++],s)),A++,(A+1===B.length||"("===B[A+1]&&")"===B[A+3]||"'"===B[A+1]&&"'"===B[A+3])&&(w=assign(B[A],s),y=Math.pow(10,B[A].length),A++),("("===B[A]&&")"===B[A+2]||"'"===B[A]&&"'"===B[A+2])&&(x=assign(B[A+1],s),z=Math.pow(10,B[A+1].length)-1,A+=3)):"/"===B[A+1]||":"===B[A+1]?(w=assign(B[A],s),y=assign(B[A+2],1),A+=3):"/"===B[A+3]&&" "===B[A+1]&&(v=assign(B[A],s),w=assign(B[A+2],s),y=assign(B[A+4],1),A+=5),B.length<=A){d=y*z,s=n=x+d*v+z*w;break}default:thorwInvalidParam()}if(0===d)throw"DIV/0";P.s=0>s?-1:1,P.n=Math.abs(n),P.d=Math.abs(d)},modpow=function(b,e,m){for(var r=1;e>0;b=b*b%m,e>>=1)1&e&&(r=r*b%m);return r},cycleLen=function(n,d){for(;d%2===0;d/=2);for(;d%5===0;d/=5);if(1===d)return 0;for(var rem=10%d,t=1;1!==rem;t++)if(rem=10*rem%d,t>MAX_CYCLE_LEN)return 0;return t},cycleStart=function(n,d,len){for(var rem1=1,rem2=modpow(10,len,d),t=0;300>t;t++){if(rem1===rem2)return t;rem1=10*rem1%d,rem2=10*rem2%d}return 0},gcd=function(a,b){if(!a)return b;if(!b)return a;for(;;){if(a%=b,!a)return b;if(b%=a,!b)return a}};Fraction.REDUCE=1,Fraction.prototype={s:1,n:0,d:1,abs:function(){return new Fraction(this.n,this.d)},neg:function(){return new Fraction(-this.s*this.n,this.d)},add:function(a,b){return parse(a,b),new Fraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(a,b){return parse(a,b),new Fraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(a,b){return parse(a,b),new Fraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(a,b){return parse(a,b),new Fraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return new Fraction(this)},mod:function(a,b){return isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):void 0===a?new Fraction(this.s*this.n%this.d,1):(parse(a,b),0===P.n&&0===this.d&&Fraction(0,0),new Fraction(this.s*P.d*this.n%(P.n*this.d),P.d*this.d))},gcd:function(a,b){return parse(a,b),new Fraction(gcd(P.n,this.n),P.d*this.d/gcd(P.d,this.d))},lcm:function(a,b){return parse(a,b),0===P.n&&0===this.n?new Fraction:new Fraction(P.n*this.n/gcd(P.n,this.n),gcd(P.d,this.d))},ceil:function(places){return places=Math.pow(10,places||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):new Fraction(Math.ceil(places*this.s*this.n/this.d),places)},floor:function(places){return places=Math.pow(10,places||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):new Fraction(Math.floor(places*this.s*this.n/this.d),places)},round:function(places){return places=Math.pow(10,places||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):new Fraction(Math.round(places*this.s*this.n/this.d),places)},inverse:function(){return new Fraction(this.s*this.d,this.n)},pow:function(m){return 0>m?new Fraction(Math.pow(this.s*this.d,-m),Math.pow(this.n,-m)):new Fraction(Math.pow(this.s*this.n,m),Math.pow(this.d,m))},equals:function(a,b){return parse(a,b),this.s*this.n*P.d===P.s*P.n*this.d},compare:function(a,b){parse(a,b);var t=this.s*this.n*P.d-P.s*P.n*this.d;return(t>0)-(0>t)},divisible:function(a,b){return parse(a,b),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(excludeWhole){var whole,str="",n=this.n,d=this.d;return this.s<0&&(str+="-"),1===d?str+=n:(excludeWhole&&(whole=Math.floor(n/d))>0&&(str+=whole,str+=" ",n%=d),str+=n,str+="/",str+=d),str},toLatex:function(excludeWhole){var whole,str="",n=this.n,d=this.d;return this.s<0&&(str+="-"),1===d?str+=n:(excludeWhole&&(whole=Math.floor(n/d))>0&&(str+=whole,n%=d),str+="\\frac{",str+=n,str+="}{",str+=d,str+="}"),str},toContinued:function(){var t,a=this.n,b=this.d,res=[];do res.push(Math.floor(a/b)),t=a%b,a=b,b=t;while(1!==a);return res},toString:function(){var g,N=this.n,D=this.d;if(isNaN(N)||isNaN(D))return"NaN";Fraction.REDUCE||(g=gcd(N,D),N/=g,D/=g);for(var p=String(N).split(""),t=0,ret=[~this.s?"":"-","",""],zeros="",cycLen=cycleLen(N,D),cycOff=cycleStart(N,D,cycLen),j=-1,n=1,length=10+cycLen+cycOff+p.length,i=0;length>i;i++,t*=10){if(i<p.length?t+=Number(p[i]):(n=2,j++),cycLen>0)if(j===cycOff)ret[n]+=zeros+"(",zeros="";else if(j===cycLen+cycOff){ret[n]+=zeros+")";break}t>=D?(ret[n]+=zeros+(t/D|0),zeros="",t%=D):n>1?zeros+="0":ret[n]&&(ret[n]+="0")}return ret[0]+=ret[1]||"0",ret[2]?ret[0]+"."+ret[2]:ret[0]}},"function"==typeof define&&define.amd?define([],function(){return Fraction}):"object"==typeof exports?module.exports=Fraction:root.Fraction=Fraction}(this)},{}],713:[function(require,module,exports){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});return(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx}),this},once:function(name,callback,ctx){function listener(){
self.off(name,listener),callback.apply(ctx,arguments)}var self=this;return listener._=callback,this.on(name,listener,ctx)},emit:function(name){var data=[].slice.call(arguments,1),evtArr=((this.e||(this.e={}))[name]||[]).slice(),i=0,len=evtArr.length;for(i;len>i;i++)evtArr[i].fn.apply(evtArr[i].ctx,data);return this},off:function(name,callback){var e=this.e||(this.e={}),evts=e[name],liveEvents=[];if(evts&&callback)for(var i=0,len=evts.length;len>i;i++)evts[i].fn!==callback&&evts[i].fn._!==callback&&liveEvents.push(evts[i]);return liveEvents.length?e[name]=liveEvents:delete e[name],this}},module.exports=E},{}],714:[function(require,module,exports){"use strict";!function(factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():window.typed=factory()}(function(){function create(){function getTypeTest(name){for(var test,i=0;i<typed.types.length;i++){var entry=typed.types[i];if(entry.name===name){test=entry.test;break}}if(!test){var hint;for(i=0;i<typed.types.length;i++)if(entry=typed.types[i],entry.name.toLowerCase()==name.toLowerCase()){hint=entry.name;break}throw new Error('Unknown type "'+name+'"'+(hint?'. Did you mean "'+hint+'"?':""))}return test}function getName(fns){for(var name="",i=0;i<fns.length;i++){var fn=fns[i];if(""!=fn.name)if(""==name)name=fn.name;else if(name!=fn.name){var err=new Error("Function names do not match (expected: "+name+", actual: "+fn.name+")");throw err.data={actual:fn.name,expected:name},err}}return name}function createError(fn,argCount,index,actual,expected){var message,actualType=getTypeOf(actual),_expected=expected?expected.split(","):null,_fn=fn||"unnamed",anyType=_expected&&contains(_expected,"any"),data={fn:fn,index:index,actual:actual,expected:_expected};message=_expected?argCount>index&&!anyType?"Unexpected type of argument in function "+_fn+" (expected: "+_expected.join(" or ")+", actual: "+actualType+", index: "+index+")":"Too few arguments in function "+_fn+" (expected: "+_expected.join(" or ")+", index: "+index+")":"Too many arguments in function "+_fn+" (expected: "+index+", actual: "+argCount+")";var err=new TypeError(message);return err.data=data,err}function Refs(name){this.name=name||"refs",this.categories={}}function Param(types,varArgs){if("string"==typeof types){var _types=types.trim(),_varArgs="..."===_types.substr(0,3);if(_varArgs&&(_types=_types.substr(3)),""===_types)this.types=["any"];else{this.types=_types.split("|");for(var i=0;i<this.types.length;i++)this.types[i]=this.types[i].trim()}}else{if(!Array.isArray(types)){if(types instanceof Param)return types.clone();throw new Error("String or Array expected")}this.types=types}this.conversions=[],this.varArgs=_varArgs||varArgs||!1,this.anyType=-1!==this.types.indexOf("any")}function Signature(params,fn){var _params;if("string"==typeof params)_params=""!==params?params.split(","):[];else{if(!Array.isArray(params))throw new Error("string or Array expected");_params=params}this.params=new Array(_params.length);for(var i=0;i<_params.length;i++){var param=new Param(_params[i]);if(this.params[i]=param,i===_params.length-1)this.varArgs=param.varArgs;else if(param.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."')}this.fn=fn}function Node(path,signature,childs){this.path=path||[],this.param=path[path.length-1]||null,this.signature=signature||null,this.childs=childs||[]}function parseSignatures(rawSignatures){var signature,i,keys={},signatures=[];for(var types in rawSignatures)if(rawSignatures.hasOwnProperty(types)){var fn=rawSignatures[types];if(signature=new Signature(types,fn),signature.ignore())continue;var expanded=signature.expand();for(i=0;i<expanded.length;i++){var signature_i=expanded[i],key=signature_i.toString(),existing=keys[key];if(existing){var cmp=Signature.compare(signature_i,existing);if(0>cmp)keys[key]=signature_i;else if(0===cmp)throw new Error('Signature "'+key+'" is defined twice')}else keys[key]=signature_i}}for(key in keys)keys.hasOwnProperty(key)&&signatures.push(keys[key]);for(signatures.sort(function(a,b){return Signature.compare(a,b)}),i=0;i<signatures.length;i++)if(signature=signatures[i],signature.varArgs)for(var index=signature.params.length-1,param=signature.params[index],t=0;t<param.types.length;){if(param.conversions[t])for(var type=param.types[t],j=0;j<signatures.length;j++){var other=signatures[j],p=other.params[index];if(other!==signature&&p&&contains(p.types,type)&&!p.conversions[index]){param.types.splice(t,1),param.conversions.splice(t,1),t--;break}}t++}return signatures}function mapSignatures(signatures){for(var normalized={},i=0;i<signatures.length;i++){var signature=signatures[i];if(signature.fn&&!signature.hasConversions()){var params=signature.params.join(",");normalized[params]=signature.fn}}return normalized}function parseTree(signatures,path){var i,signature,nodeSignature,index=path.length,filtered=[];for(i=0;i<signatures.length;i++)signature=signatures[i],signature.params.length!==index||nodeSignature||(nodeSignature=signature),void 0!=signature.params[index]&&filtered.push(signature);filtered.sort(function(a,b){return Param.compare(a.params[index],b.params[index])});var entries=[];for(i=0;i<filtered.length;i++){signature=filtered[i];var param=signature.params[index],existing=entries.filter(function(entry){return entry.param.overlapping(param)})[0];if(existing){if(existing.param.varArgs)throw new Error('Conflicting types "'+existing.param+'" and "'+param+'"');existing.signatures.push(signature)}else entries.push({param:param,signatures:[signature]})}var childs=new Array(entries.length);for(i=0;i<entries.length;i++){var entry=entries[i];childs[i]=parseTree(entry.signatures,path.concat(entry.param))}return new Node(path,nodeSignature,childs)}function getArgs(count){for(var args=[],i=0;count>i;i++)args[i]="arg"+i;return args}function _typed(name,signatures){var refs=new Refs,_signatures=parseSignatures(signatures);if(0==_signatures.length)throw new Error("No signatures provided");var node=parseTree(_signatures,[]),code=[],_name=name||"",_args=getArgs(maxParams(_signatures));code.push("function "+_name+"("+_args.join(", ")+") {"),code.push('  "use strict";'),code.push("  var name = '"+_name+"';"),code.push(node.toCode(refs,"  ")),code.push("}");var body=[refs.toCode(),"return "+code.join("\n")].join("\n"),factory=new Function(refs.name,"createError",body),fn=factory(refs,createError);return fn.signatures=mapSignatures(_signatures),fn}function maxParams(signatures){for(var max=0,i=0;i<signatures.length;i++){var len=signatures[i].params.length;len>max&&(max=len)}return max}function getTypeOf(x){for(var obj,i=0;i<typed.types.length;i++){var entry=typed.types[i];if("Object"===entry.name)obj=entry;else if(entry.test(x))return entry.name}return obj&&obj.test(x)?obj.name:"unknown"}function contains(array,entry){return-1!==array.indexOf(entry)}function find(fn,signature){if(!fn.signatures)throw new TypeError("Function is no typed-function");var arr;if("string"==typeof signature){arr=signature.split(",");for(var i=0;i<arr.length;i++)arr[i]=arr[i].trim()}else{if(!Array.isArray(signature))throw new TypeError("String array or a comma separated string expected");arr=signature}var str=arr.join(","),match=fn.signatures[str];if(match)return match;throw new TypeError("Signature not found (signature: "+(fn.name||"unnamed")+"("+arr.join(", ")+"))")}function convert(value,type){var from=getTypeOf(value);if(type===from)return value;for(var i=0;i<typed.conversions.length;i++){var conversion=typed.conversions[i];if(conversion.from===from&&conversion.to===type)return conversion.convert(value)}throw new Error("Cannot convert from "+from+" to "+type)}Refs.prototype.add=function(fn,category){var cat=category||"fn";this.categories[cat]||(this.categories[cat]=[]);var index=this.categories[cat].indexOf(fn);return-1==index&&(index=this.categories[cat].length,this.categories[cat].push(fn)),cat+index},Refs.prototype.toCode=function(){var code=[],path=this.name+".categories",categories=this.categories;for(var cat in categories)if(categories.hasOwnProperty(cat))for(var category=categories[cat],i=0;i<category.length;i++)code.push("var "+cat+i+" = "+path+"['"+cat+"']["+i+"];");return code.join("\n")},Param.compare=function(a,b){if(a.anyType)return 1;if(b.anyType)return-1;if(contains(a.types,"Object"))return 1;if(contains(b.types,"Object"))return-1;if(a.hasConversions()){if(b.hasConversions()){var i,ac,bc;for(i=0;i<a.conversions.length;i++)if(void 0!==a.conversions[i]){ac=a.conversions[i];break}for(i=0;i<b.conversions.length;i++)if(void 0!==b.conversions[i]){bc=b.conversions[i];break}return typed.conversions.indexOf(ac)-typed.conversions.indexOf(bc)}return 1}if(b.hasConversions())return-1;var ai,bi;for(i=0;i<typed.types.length;i++)if(typed.types[i].name===a.types[0]){ai=i;break}for(i=0;i<typed.types.length;i++)if(typed.types[i].name===b.types[0]){bi=i;break}return ai-bi},Param.prototype.overlapping=function(other){for(var i=0;i<this.types.length;i++)if(contains(other.types,this.types[i]))return!0;return!1},Param.prototype.clone=function(){var param=new Param(this.types.slice(),this.varArgs);return param.conversions=this.conversions.slice(),param},Param.prototype.hasConversions=function(){return this.conversions.length>0},Param.prototype.contains=function(types){for(var i=0;i<this.types.length;i++)if(types[this.types[i]])return!0;return!1},Param.prototype.toString=function(toConversion){for(var types=[],keys={},i=0;i<this.types.length;i++){var conversion=this.conversions[i],type=toConversion&&conversion?conversion.to:this.types[i];type in keys||(keys[type]=!0,types.push(type))}return(this.varArgs?"...":"")+types.join("|")},Signature.prototype.clone=function(){return new Signature(this.params.slice(),this.fn)},Signature.prototype.expand=function(){function recurse(signature,path){if(path.length<signature.params.length){var i,newParam,conversion,param=signature.params[path.length];if(param.varArgs){for(newParam=param.clone(),i=0;i<typed.conversions.length;i++)if(conversion=typed.conversions[i],!contains(param.types,conversion.from)&&contains(param.types,conversion.to)){var j=newParam.types.length;newParam.types[j]=conversion.from,newParam.conversions[j]=conversion}recurse(signature,path.concat(newParam))}else{for(i=0;i<param.types.length;i++)recurse(signature,path.concat(new Param(param.types[i])));for(i=0;i<typed.conversions.length;i++)conversion=typed.conversions[i],!contains(param.types,conversion.from)&&contains(param.types,conversion.to)&&(newParam=new Param(conversion.from),newParam.conversions[0]=conversion,recurse(signature,path.concat(newParam)))}}else signatures.push(new Signature(path,signature.fn))}var signatures=[];return recurse(this,[]),signatures},Signature.compare=function(a,b){if(a.params.length>b.params.length)return 1;if(a.params.length<b.params.length)return-1;var i,len=a.params.length,ac=0,bc=0;for(i=0;len>i;i++)a.params[i].hasConversions()&&ac++,b.params[i].hasConversions()&&bc++;if(ac>bc)return 1;if(bc>ac)return-1;for(i=0;i<a.params.length;i++){var cmp=Param.compare(a.params[i],b.params[i]);if(0!==cmp)return cmp}return 0},Signature.prototype.hasConversions=function(){for(var i=0;i<this.params.length;i++)if(this.params[i].hasConversions())return!0;return!1},Signature.prototype.ignore=function(){for(var types={},i=0;i<typed.ignore.length;i++)types[typed.ignore[i]]=!0;for(i=0;i<this.params.length;i++)if(this.params[i].contains(types))return!0;return!1},Signature.prototype.toCode=function(refs,prefix){for(var code=[],args=new Array(this.params.length),i=0;i<this.params.length;i++){var param=this.params[i],conversion=param.conversions[0];param.varArgs?args[i]="varArgs":conversion?args[i]=refs.add(conversion.convert,"convert")+"(arg"+i+")":args[i]="arg"+i}var ref=this.fn?refs.add(this.fn,"signature"):void 0;return ref?prefix+"return "+ref+"("+args.join(", ")+"); // signature: "+this.params.join(", "):code.join("\n")},Signature.prototype.toString=function(){return this.params.join(", ")},Node.prototype.toCode=function(refs,prefix,anyType){var code=[];if(this.param){var index=this.path.length-1,conversion=this.param.conversions[0],comment="// type: "+(conversion?conversion.from+" (convert to "+conversion.to+")":this.param);if(this.param.varArgs)if(this.param.anyType)code.push(prefix+"if (arguments.length > "+index+") {"),code.push(prefix+"  var varArgs = [];"),code.push(prefix+"  for (var i = "+index+"; i < arguments.length; i++) {"),code.push(prefix+"    varArgs.push(arguments[i]);"),code.push(prefix+"  }"),code.push(this.signature.toCode(refs,prefix+"  ")),code.push(prefix+"}");else{for(var getTests=function(types,arg){for(var tests=[],i=0;i<types.length;i++)tests[i]=refs.add(getTypeTest(types[i]),"test")+"("+arg+")";return tests.join(" || ")}.bind(this),allTypes=this.param.types,exactTypes=[],i=0;i<allTypes.length;i++)void 0===this.param.conversions[i]&&exactTypes.push(allTypes[i]);code.push(prefix+"if ("+getTests(allTypes,"arg"+index)+") { "+comment),code.push(prefix+"  var varArgs = [arg"+index+"];"),code.push(prefix+"  for (var i = "+(index+1)+"; i < arguments.length; i++) {"),code.push(prefix+"    if ("+getTests(exactTypes,"arguments[i]")+") {"),code.push(prefix+"      varArgs.push(arguments[i]);");for(var i=0;i<allTypes.length;i++){var conversion_i=this.param.conversions[i];if(conversion_i){var test=refs.add(getTypeTest(allTypes[i]),"test"),convert=refs.add(conversion_i.convert,"convert");code.push(prefix+"    }"),code.push(prefix+"    else if ("+test+"(arguments[i])) {"),code.push(prefix+"      varArgs.push("+convert+"(arguments[i]));")}}code.push(prefix+"    } else {"),code.push(prefix+"      throw createError(name, arguments.length, i, arguments[i], '"+exactTypes.join(",")+"');"),code.push(prefix+"    }"),code.push(prefix+"  }"),code.push(this.signature.toCode(refs,prefix+"  ")),code.push(prefix+"}")}else if(this.param.anyType)code.push(prefix+"// type: any"),code.push(this._innerCode(refs,prefix,anyType));else{var type=this.param.types[0],test="any"!==type?refs.add(getTypeTest(type),"test"):null;code.push(prefix+"if ("+test+"(arg"+index+")) { "+comment),code.push(this._innerCode(refs,prefix+"  ",anyType)),code.push(prefix+"}")}}else code.push(this._innerCode(refs,prefix,anyType));return code.join("\n")},Node.prototype._innerCode=function(refs,prefix,anyType){var i,code=[];this.signature&&(code.push(prefix+"if (arguments.length === "+this.path.length+") {"),code.push(this.signature.toCode(refs,prefix+"  ")),code.push(prefix+"}"));var nextAnyType;for(i=0;i<this.childs.length;i++)if(this.childs[i].param.anyType){nextAnyType=this.childs[i];break}for(i=0;i<this.childs.length;i++)code.push(this.childs[i].toCode(refs,prefix,nextAnyType));anyType&&!this.param.anyType&&code.push(anyType.toCode(refs,prefix,nextAnyType));var exceptions=this._exceptions(refs,prefix);return exceptions&&code.push(exceptions),code.join("\n")},Node.prototype._exceptions=function(refs,prefix){var index=this.path.length;if(0===this.childs.length)return[prefix+"if (arguments.length > "+index+") {",prefix+"  throw createError(name, arguments.length, "+index+", arguments["+index+"]);",prefix+"}"].join("\n");for(var keys={},types=[],i=0;i<this.childs.length;i++){var node=this.childs[i];if(node.param)for(var j=0;j<node.param.types.length;j++){var type=node.param.types[j];type in keys||node.param.conversions[j]||(keys[type]=!0,types.push(type))}}return prefix+"throw createError(name, arguments.length, "+index+", arguments["+index+"], '"+types.join(",")+"');"};var types=[{name:"number",test:function(x){return"number"==typeof x}},{name:"string",test:function(x){return"string"==typeof x}},{name:"boolean",test:function(x){return"boolean"==typeof x}},{name:"Function",test:function(x){return"function"==typeof x}},{name:"Array",test:Array.isArray},{name:"Date",test:function(x){return x instanceof Date}},{name:"RegExp",test:function(x){return x instanceof RegExp}},{name:"Object",test:function(x){return"object"==typeof x}},{name:"null",test:function(x){return null===x}},{name:"undefined",test:function(x){return void 0===x}}],config={},conversions=[],ignore=[],typed={config:config,types:types,conversions:conversions,ignore:ignore};return typed=_typed("typed",{Object:function(signatures){var fns=[];for(var signature in signatures)signatures.hasOwnProperty(signature)&&fns.push(signatures[signature]);var name=getName(fns);return _typed(name,signatures)},"string, Object":_typed,"...Function":function(fns){for(var err,name=getName(fns),signatures={},i=0;i<fns.length;i++){var fn=fns[i];if("object"!=typeof fn.signatures)throw err=new TypeError("Function is no typed-function (index: "+i+")"),err.data={index:i},err;for(var signature in fn.signatures)if(fn.signatures.hasOwnProperty(signature))if(signatures.hasOwnProperty(signature)){if(fn.signatures[signature]!==signatures[signature])throw err=new Error('Signature "'+signature+'" is defined twice'),err.data={signature:signature},err}else signatures[signature]=fn.signatures[signature]}return _typed(name,signatures)}}),typed.config=config,typed.types=types,typed.conversions=conversions,typed.ignore=ignore,typed.create=create,typed.find=find,typed.convert=convert,typed.addType=function(type){if(!type||"string"!=typeof type.name||"function"!=typeof type.test)throw new TypeError("Object with properties {name: string, test: function} expected");typed.types.push(type)},typed.addConversion=function(conversion){if(!conversion||"string"!=typeof conversion.from||"string"!=typeof conversion.to||"function"!=typeof conversion.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");typed.conversions.push(conversion)},typed}return create()})},{}],mathjs:[function(require,module,exports){function create(config){var math=core.create(config);return math.create=create,math["import"](require("./lib")),math}var core=require("./core");module.exports=create()},{"./core":220,"./lib":618}]},{},[]);
